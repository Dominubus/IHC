(()=>{"use strict";var e,t,a,o,r,n={8968:(e,t,a)=>{a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var o=a(72070),r=a(97765);const __WEBPACK_DEFAULT_EXPORT__=function(e){return(0,o.useContextSelector)(r.StoryAnimationContext,e??o.identity)}},44258:(e,t,a)=>{a.d(t,{ANIMATION_EFFECTS:()=>i,ANIMATION_TYPES:()=>n,AXIS:()=>u,BACKGROUND_ANIMATION_EFFECTS:()=>l,BEZIER:()=>r,BG_MAX_SCALE:()=>b,BG_MIN_SCALE:()=>m,DIRECTION:()=>s,FIELD_TYPES:()=>p,ROTATION:()=>d,SCALE_DIRECTION:()=>c});var o=a(91655);const r={linear:"linear",in:"ease-in",out:"ease-out",inOut:"ease-in-out",inQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",outQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",inOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",inCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",outCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",inOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1)",inQuart:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",outQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",inOutQuart:"cubic-bezier(0.77, 0, 0.175, 1)",inQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",outQuint:"cubic-bezier(0.23, 1, 0.32, 1)",inOutQuint:"cubic-bezier(0.86, 0, 0.07, 1)",inSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",outSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",inOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",inExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",outExpo:"cubic-bezier(0.19, 1, 0.22, 1)",inOutExpo:"cubic-bezier(1, 0, 0, 1)",inCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",outCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",inOutCirc:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",default:"cubic-bezier(0.4, 0.4, 0.0, 1)"},n={BLINK_ON:"blinkOn",BOUNCE:"bounce",FADE:"fade",FLIP:"flip",FLOAT_ON:"floatOn",MOVE:"move",PULSE:"pulse",SPIN:"spin",ZOOM:"zoom"},i={DROP:{value:"effect-drop",name:(0,o._x)("Drop","animation effect","web-stories")},FADE_IN:{value:"effect-fade-in",name:(0,o._x)("Fade In","animation effect","web-stories")},FLY_IN:{value:"effect-fly-in",name:(0,o._x)("Fly In","animation effect","web-stories")},PAN:{value:"effect-pan",name:(0,o._x)("Pan","animation effect","web-stories")},PULSE:{value:"effect-pulse",name:(0,o._x)("Pulse","animation effect","web-stories")},TWIRL_IN:{value:"effect-twirl-in",name:(0,o._x)("Twirl In","animation effect","web-stories")},WHOOSH_IN:{value:"effect-whoosh-in",name:(0,o._x)("Whoosh In","animation effect","web-stories")},ZOOM:{value:"effect-zoom",name:(0,o._x)("Scale","animation effect","web-stories")},ROTATE_IN:{value:"effect-rotate-in",name:(0,o._x)("Rotate In","animation effect","web-stories")}},l={ZOOM:{value:"effect-background-zoom",name:(0,o._x)("Zoom","animation effect","web-stories")},PAN:{value:"effect-background-pan",name:i.PAN.name},PAN_AND_ZOOM:{value:"effect-background-pan-and-zoom",name:(0,o._x)("Pan and Zoom","animation effect","web-stories")}},s=(n.BLINK_ON,(0,o._x)("Blink On","animation effect","web-stories"),n.BOUNCE,(0,o._x)("Bounce","animation effect","web-stories"),n.FADE,(0,o._x)("Fade","animation effect","web-stories"),n.FLIP,(0,o._x)("Flip","animation effect","web-stories"),n.FLOAT_ON,(0,o._x)("Float On","animation effect","web-stories"),n.MOVE,(0,o._x)("Move","animation effect","web-stories"),n.PULSE,(0,o._x)("Pulse","animation effect","web-stories"),n.SPIN,(0,o._x)("Spin","animation effect","web-stories"),n.ZOOM,(0,o._x)("Zoom","animation effect","web-stories"),{TOP_TO_BOTTOM:"topToBottom",RIGHT_TO_LEFT:"rightToLeft",BOTTOM_TO_TOP:"bottomToTop",LEFT_TO_RIGHT:"leftToRight"}),c={DYNAMIC_PROPERTY_VALUE:"dynamicPropertyValue",SCALE_IN:"scaleIn",SCALE_OUT:"scaleOut",SCALE_OUT_TOP_RIGHT:"scaleOutTopRight",SCALE_OUT_BOTTOM_LEFT:"scaleOutBottomLeft",SCALE_IN_TOP_LEFT:"scaleInTopLeft",SCALE_IN_BOTTOM_RIGHT:"scaleInBottomRight"},d=(c.SCALE_IN_TOP_LEFT,c.SCALE_IN_BOTTOM_RIGHT,c.SCALE_OUT_TOP_RIGHT,c.SCALE_OUT_BOTTOM_LEFT,{CLOCKWISE:"clockwise",COUNTER_CLOCKWISE:"counterClockwise",PING_PONG:"pingPong"}),u={X:"x",Y:"y"},p={DROPDOWN:"dropdown",HIDDEN:"hidden",ROTATION_PICKER:"rotation_picker",DIRECTION_PICKER:"direction_picker",NUMBER:"number",FLOAT:"float",TEXT:"text",CHECKBOX:"checkbox",RANGE:"RANGE"},m=100,b=400},77175:(e,t,a)=>{a.d(t,{FlyInEffectInputPropTypes:()=>s});var o=a(45697),r=a.n(o),n=a(91655),i=a(44258),l=a(87745);const s={flyInDir:r().shape(l.AnimationInputPropTypes)};(0,n.__)("Direction","web-stories"),i.FIELD_TYPES.DIRECTION_PICKER,i.DIRECTION.TOP_TO_BOTTOM,i.DIRECTION.BOTTOM_TO_TOP,i.DIRECTION.LEFT_TO_RIGHT,i.DIRECTION.RIGHT_TO_LEFT,i.DIRECTION.BOTTOM_TO_TOP,(0,n.__)("Duration","web-stories"),i.FIELD_TYPES.NUMBER,(0,n._x)("ms","Time in milliseconds","web-stories")},47730:(e,t,a)=>{a.d(t,{PanEffectInputPropTypes:()=>s});var o=a(45697),r=a.n(o),n=a(91655),i=a(44258),l=a(87745);const s={panDir:r().shape(l.AnimationInputPropTypes)};(0,n.__)("Direction","web-stories"),i.FIELD_TYPES.DIRECTION_PICKER,i.DIRECTION.TOP_TO_BOTTOM,i.DIRECTION.BOTTOM_TO_TOP,i.DIRECTION.LEFT_TO_RIGHT,i.DIRECTION.RIGHT_TO_LEFT,i.DIRECTION.BOTTOM_TO_TOP},78582:(e,t,a)=>{a.d(t,{PulseEffectInputPropTypes:()=>s});var o=a(45697),r=a.n(o),n=a(91655),i=a(44258),l=a(87745);const s={scale:r().shape(l.AnimationInputPropTypes),iterations:r().shape(l.AnimationInputPropTypes)};(0,n.__)("Scale","web-stories"),i.FIELD_TYPES.FLOAT,(0,n._x)("Pulses","number of pulses","web-stories"),i.FIELD_TYPES.NUMBER,(0,n.__)("Duration","web-stories"),i.FIELD_TYPES.NUMBER,(0,n._x)("ms","Time in milliseconds","web-stories")},32619:(e,t,a)=>{a.d(t,{RotateInEffectInputPropTypes:()=>s});var o=a(45697),r=a.n(o),n=a(91655),i=a(44258),l=a(87745);const s={rotateInDir:r().shape(l.AnimationInputPropTypes)};(0,n.__)("Direction","web-stories"),i.FIELD_TYPES.DIRECTION_PICKER,i.DIRECTION.LEFT_TO_RIGHT,i.DIRECTION.RIGHT_TO_LEFT,i.DIRECTION.LEFT_TO_RIGHT},27609:(e,t,a)=>{a.d(t,{WhooshInEffectInputPropTypes:()=>s});var o=a(45697),r=a.n(o),n=a(91655),i=a(44258),l=a(87745);const s={whooshInDir:r().shape(l.AnimationInputPropTypes)};(0,n.__)("Direction","web-stories"),i.FIELD_TYPES.DIRECTION_PICKER,i.DIRECTION.LEFT_TO_RIGHT,i.DIRECTION.RIGHT_TO_LEFT,i.DIRECTION.LEFT_TO_RIGHT,(0,n.__)("Duration","web-stories"),i.FIELD_TYPES.NUMBER,(0,n._x)("ms","Time in milliseconds","web-stories")},4891:(e,t,a)=>{a.d(t,{ZoomEffectInputPropTypes:()=>c});var o=a(45697),r=a.n(o),n=a(91655),i=a(87602),l=a(44258),s=a(87745);const c={scaleDirection:r().shape(s.AnimationInputPropTypes)};(0,n.__)("Direction","web-stories"),(0,i.default)(
/* translators: 1: scaleIn. 2: scaleOut */
(0,n.__)("Valid values are %1$s or %2$s","web-stories"),"scaleIn","scaleOut"),l.FIELD_TYPES.DIRECTION_PICKER,l.SCALE_DIRECTION.SCALE_IN,l.SCALE_DIRECTION.SCALE_OUT,l.SCALE_DIRECTION.SCALE_IN,(0,n.__)("Duration","web-stories"),l.FIELD_TYPES.NUMBER,(0,n._x)("ms","Time in milliseconds","web-stories")},58373:(e,t,a)=>{a.d(t,{AnimationProps:()=>d.AnimationProps,BG_MAX_SCALE:()=>c.BG_MAX_SCALE,BG_MIN_SCALE:()=>c.BG_MIN_SCALE,StoryAnimation:()=>s,getTotalDuration:()=>u.getTotalDuration});var o=a(97765),r=a(79968),n=a(5954),i=a(98236),l=a(34433);a(8968);const s={Provider:o.default,WAAPIWrapper:r.default,AMPWrapper:n.default,AMPKeyframes:i.default,AMPAnimations:l.default};var c=a(44258),d=a(40320),u=(a(13418),a(93478));a(69332)},79871:(e,t,a)=>{a.d(t,{BasicAnimationInputPropTypes:()=>s});var o=a(45697),r=a.n(o),n=a(91655),i=a(44258),l=a(87745);const s={duration:r().shape(l.AnimationInputPropTypes),delay:r().shape(l.AnimationInputPropTypes)},c={duration:{label:(0,n.__)("Duration","web-stories"),type:i.FIELD_TYPES.NUMBER,unit:(0,n._x)("ms","Time in milliseconds","web-stories"),defaultValue:1e3},delay:{label:(0,n.__)("Delay","web-stories"),type:i.FIELD_TYPES.NUMBER,unit:(0,n._x)("ms","Time in milliseconds","web-stories"),defaultValue:0}};i.FIELD_TYPES.HIDDEN,(0,n.__)("Animation Type","web-stories"),i.FIELD_TYPES.DROPDOWN,Object.values(i.ANIMATION_TYPES),Object.values(i.ANIMATION_EFFECTS).map((e=>e.value)),i.FIELD_TYPES.DROPDOWN,(0,n.__)("Easing Presets","web-stories"),i.FIELD_TYPES.DROPDOWN,Object.keys(i.BEZIER),Object.keys(i.BEZIER)[0],i.FIELD_TYPES.TEXT,i.FIELD_TYPES.DROPDOWN,(0,n.__)('Valid values are numerical or the word "infinity"',"web-stories"),i.FIELD_TYPES.TEXT},40320:(e,t,a)=>{a.d(t,{AnimationPart:()=>AnimationPart,AnimationProps:()=>P.AnimationProps});var o=a(67294),r=a(44258);var n=a(11533),i=a(96302),l=a(5644),s=a(3200),c=a(37308),d=a(84276),u=a(54913),p=a(63898),m=a(75590),b=a(51352),f=a(93886),h=a(44130),_=a(45697),g=a.n(_),E=a(91655),S=a(87745);g().shape(S.AnimationInputPropTypes),(0,E.__)("Duration","web-stories"),r.FIELD_TYPES.NUMBER,(0,E._x)("ms","Time in milliseconds","web-stories");a(77175),a(47730),a(78582),a(32619),a(27609),a(4891);g().shape(S.AnimationInputPropTypes),(0,E.__)("Duration","web-stories"),r.FIELD_TYPES.NUMBER,(0,E._x)("ms","Time in milliseconds","web-stories");var T=a(87602);g().shape(S.AnimationInputPropTypes),g().shape(S.AnimationInputPropTypes),(0,E.__)("Direction","web-stories"),(0,T.default)(
/* translators: 1: scaleIn. 2: scaleOut */
(0,E.__)("Valid values are %1$s or %2$s","web-stories"),"zoomIn","zoomOut"),r.FIELD_TYPES.DIRECTION_PICKER,r.SCALE_DIRECTION.SCALE_IN,r.SCALE_DIRECTION.SCALE_OUT,r.SCALE_DIRECTION.SCALE_OUT,(0,E.__)("Duration","web-stories"),r.FIELD_TYPES.NUMBER,(0,E._x)("ms","Time in milliseconds","web-stories"),g().shape(S.AnimationInputPropTypes),g().shape(S.AnimationInputPropTypes),(0,E.__)("Direction","web-stories"),r.FIELD_TYPES.DIRECTION_PICKER,r.DIRECTION.TOP_TO_BOTTOM,r.DIRECTION.BOTTOM_TO_TOP,r.DIRECTION.LEFT_TO_RIGHT,r.DIRECTION.RIGHT_TO_LEFT,r.DIRECTION.BOTTOM_TO_TOP,(0,E.__)("Duration","web-stories"),r.FIELD_TYPES.NUMBER,(0,E._x)("ms","Time in milliseconds","web-stories");a(93478);var y=a(85242),w=a(15604),v=a(75351),I=a(83072),C=a(60106),A=a(11006),O=a(76585),L=a(10638),k=a(8748),P=(a(79871),a(66776));function EmptyAMPTarget(e){let{children:t,...a}=e;return o.createElement("div",a,t)}function N(){return{id:-1,generatedKeyframes:{},WAAPIAnimation:{},AMPTarget:EmptyAMPTarget,AMPAnimation:()=>null}}function AnimationPart(e,t){const a={[r.ANIMATION_TYPES.BOUNCE]:y.AnimationBounce,[r.ANIMATION_TYPES.BLINK_ON]:w.AnimationBlinkOn,[r.ANIMATION_TYPES.FADE]:v.AnimationFade,[r.ANIMATION_TYPES.FLIP]:I.AnimationFlip,[r.ANIMATION_TYPES.FLOAT_ON]:C.AnimationFloatOn,[r.ANIMATION_TYPES.MOVE]:A.AnimationMove,[r.ANIMATION_TYPES.PULSE]:O.AnimationPulse,[r.ANIMATION_TYPES.SPIN]:L.AnimationSpin,[r.ANIMATION_TYPES.ZOOM]:k.AnimationZoom,[r.ANIMATION_EFFECTS.FADE_IN.value]:i.EffectFadeIn,[r.ANIMATION_EFFECTS.FLY_IN.value]:l.EffectFlyIn,[r.ANIMATION_EFFECTS.PAN.value]:s.EffectPan,[r.ANIMATION_EFFECTS.PULSE.value]:c.EffectPulse,[r.ANIMATION_EFFECTS.TWIRL_IN.value]:d.EffectTwirlIn,[r.ANIMATION_EFFECTS.WHOOSH_IN.value]:u.EffectWhooshIn,[r.ANIMATION_EFFECTS.ZOOM.value]:p.EffectZoom,[r.ANIMATION_EFFECTS.DROP.value]:n.EffectDrop,[r.ANIMATION_EFFECTS.ROTATE_IN.value]:m.EffectRotateIn,[r.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:b.EffectBackgroundZoom,[r.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:f.EffectBackgroundPan,[r.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:h.EffectBackgroundPanAndZoom}[e?.value||e]||N;return t.easing=t.easing||r.BEZIER[t.easingPreset],t.easingPreset=void 0,a(t)}},93478:(e,t,a)=>{a.d(t,{defaultUnit:()=>o.defaultUnit,getGlobalSpace:()=>r.getGlobalSpace,getMediaBoundOffsets:()=>d,getMediaOrigin:()=>u.getMediaOrigin,getOffPageOffset:()=>n.default,getTotalDuration:()=>i.getTotalDuration});var o=a(30491),r=a(17161),n=a(53020),i=a(18034),l=a(1787),s=a(15985),c=a(7868);function d(e){let{element:t}=e;const a=(0,l.getBox)(t,s.PAGE_WIDTH,s.PAGE_HEIGHT),o=(0,c.default)(t.resource,a.width,a.height,t.scale,t.focalX,t.focalY);return{top:o.offsetY/o.height*100,right:(o.width-(o.offsetX+s.PAGE_WIDTH))/o.width*-1*100,left:o.offsetX/o.width*100,bottom:(o.height-(o.offsetY+s.FULLBLEED_HEIGHT))/o.height*-1*100}}a(26699);var u=a(9223)},52589:(e,t,a)=>{a.d(t,{default:()=>g});var o=a(67294),r=(a(26699),a(45697)),n=a.n(r),i=a(72070),l=a(26300),s=a(40981),c=a(66044),d=a(66394),u=a(82302),p=a(8682),m=a(19683);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},b.apply(this,arguments)}const f=l.default.div.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-1xfj06c-0"})((e=>{let{theme:t}=e;return(0,l.css)(["background-color:",";border-radius:",";border:1px solid ",";gap:6px;display:flex;"," *:last-child{margin-bottom:0;}"],(e=>{let{isSecondary:a}=e;return a?t.colors.bg.secondary:t.colors.bg.primary}),(e=>{let{isHorizontal:a}=e;return a?t.borders.radius.medium:t.borders.radius.small}),t.colors.border.disable,(e=>{let{isHorizontal:t,isIconMenu:a}=e;return t?(0,l.css)(["height:52px;padding:7px 10px;align-items:center;"]):(0,l.css)(["flex-direction:column;width:",";padding:",";max-width:","px;",";"],a?"40px":"auto",a?"4px 3px":"8px 0",300,!a&&(0,l.css)(["min-width:","px;"],200))}))}));function h(e,t){const a=Array.from(e.querySelectorAll(s.FOCUSABLE_SELECTORS.join(", ")));return t?a:a.filter((e=>!e.matches(`[role="menu"], [role="menu"] [role="menu"] *, .${m.CONTEXT_MENU_SKIP_ELEMENT}`)))}f.propTypes={isIconMenu:n().bool,isHorizontal:n().bool,isSecondary:n().bool};const _=(0,i.forwardRef)(((e,t)=>{let{children:a,disableControlledTabNavigation:r,isOpen:n,onFocus:l=c.noop,isSubMenu:m=!1,isSecondary:_=!1,parentMenuRef:g,onCloseSubMenu:E=c.noop,dismissOnEscape:S=!0,...T}=e;const{isRTL:y}=T,{focusedId:w,isIconMenu:v,isHorizontal:I,onDismiss:C,setFocusedId:A}=(0,p.default)((e=>{let{state:t,actions:a}=e;return{focusedId:t.focusedId,isIconMenu:t.isIconMenu,isHorizontal:t.isHorizontal,onDismiss:a.onDismiss,setFocusedId:a.setFocusedId}})),O=(0,d.default)((()=>{n&&!m&&C()})),L=(0,i.useRef)(null),k=(0,i.useCombinedRefs)(O,L,t),P=(0,i.useCallback)((e=>{l(e);const t=L.current.children||[],a=t.length&&![...t].some((t=>t.contains(e.target)));if(L.current===e.target&&a){const e=h(L.current);document.dispatchEvent(new KeyboardEvent("keydown",{key:"tab"})),e?.[0]?.focus()}}),[l]),N=(0,i.useCallback)((e=>{let t=e.findIndex((e=>e.id===w));return-1===t&&(t=e.findIndex((e=>e.id===document.activeElement.id))),t}),[w]),R=(0,i.useCallback)((e=>{const{key:t}=e;if("Escape"===t)return void C(e);const a=h(L.current,m);let o=N(a);-1===o&&a.length&&(A(a[0].id),o=0);const r=I?s.KEYS.LEFT:s.KEYS.UP;if([r,I?s.KEYS.RIGHT:s.KEYS.DOWN].includes(t)){let e=o+(r===t?-1:1);-1===e&&(e=a.length-1);const n=a[e%a.length];return n?.focus(),void A(n?.id||-1)}const n=I?s.KEYS.UP:y?s.KEYS.RIGHT:s.KEYS.LEFT;if(m&&n===t){g.current.querySelector('button[aria-expanded="true"]')?.focus(),E()}}),[m,N,I,y,C,A,g,E]);(0,i.useEffect)((()=>{if(n){const e=h(L.current);e.length&&(e?.[0]?.focus(),A(e?.[0]?.id))}}),[n,A]);const x=(0,i.useMemo)((()=>r?{key:[]}:{key:["tab"],shift:!0}),[r]);return(0,u.useKeyDownEffect)(L,{key:S?["esc","down","up","left","right"]:["down","up","left","right"]},R,[R,S]),(0,u.useKeyDownEffect)(L,x,C,[x,C]),o.createElement(f,b({ref:k,"data-testid":"context-menu-list",role:"menu",isIconMenu:v,isHorizontal:I,isSecondary:_,tabIndex:L.current?.contains(document.activeElement)?-1:0,onFocus:P},T),a)})),g=(n().node,n().func,n().bool,n().bool,n().func,n().bool,n().bool,n().bool,n().object,n().bool,_)},82302:(e,t,a)=>{a.d(t,{prettifyShortcut:()=>_,useKeyDownEffect:()=>u});a(67294),a(26699);var o=a(42441),r=a.n(o),n=a(72070),i=a(8579);const l="__WEB_STORIES_MT__",s=["submit","button","checkbox","radio","image","file","range","reset","hidden"],c=["submit","button","checkbox","radio","image","file","reset"];(0,n.createRef)();function d(e,t,a,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const{keys:l}=(0,n.useContext)(i.default),s=(0,n.useBatchingCallback)(o,r||[]);(0,n.useEffect)((()=>{const o=void 0!==e?.current?e.current:e;if(!o)return;if(1!==o.nodeType&&9!==o.nodeType)throw new Error("only an element or a document node can be used");const r=m(l,t);if(1===r.key.length&&""===r.key[0])return;const n=p(o),i=b(o,r,s);return n.bind(r.key,i,a),()=>{n.unbind(r.key,a)}}),[s,l])}function u(e,t,a){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;d(e,t,"keydown",a,o)}function p(e){return e[l]||(e[l]=new(r())(e))}function m(e,t){const a="string"==typeof t||Array.isArray(t)?{key:t}:t,{key:o,shift:r=!1,repeat:n=!0,clickable:i=!0,editable:l=!1,dialog:s=!1,allowDefault:c=!1}=a,d=function(e,t){if(!t)return e;return e.concat(e.map((e=>`shift+${e}`)))}([].concat(o).map((t=>e[t]||t)).flat(),r);return{key:d,shift:r,clickable:i,repeat:n,editable:l,dialog:s,allowDefault:c}}function b(e,t,a){let{repeat:o,editable:r,clickable:n,dialog:i,allowDefault:l=!1}=t;return t=>{const{repeat:d,target:u}=t;if((o||!d)&&(r||!function(e){let{tagName:t,isContentEditable:a,type:o,readOnly:r}=e;if(!0===r)return!1;if(a||"TEXTAREA"===t)return!0;if("INPUT"===t)return!s.includes(o);return!1}(u))&&(n||!function(e){let{tagName:t,type:a}=e;if(["BUTTON","A"].includes(t))return!0;if("INPUT"===t)return c.includes(a);return!1}(u))&&(i||!function(e,t){if(1!==e.nodeType)return!1;const a=e.closest('dialog,[role="dialog"]');return a&&t!==a&&t.contains(a)}(u,e)))return a(t),l}}function f(){const{platform:e}=window.navigator;return e.includes("Mac")||["iPad","iPhone"].includes(e)}function h(e){const t=f();return{alt:t?"⌥":"Alt",ctrl:t?"^":"Ctrl",mod:t?"⌘":"Ctrl",cmd:"⌘",shift:t?"⇧":"Shift"}[e]||e}function _(e){const t=f()?"":"+";return e.toLowerCase().replace("alt",h("alt")).replace("ctrl",h("ctrl")).replace("mod",h("mod")).replace("cmd",h("cmd")).replace("shift",h("shift")).replace("left","←").replace("up","↑").replace("right","→").replace("down","↓").replace("delete","⌫").replace("enter","⏎").split("+").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(t)}},27856:(e,t,a)=>{a.d(t,{PLACEMENT:()=>r,PopupContainer:()=>i,RTL_PLACEMENT:()=>n});var o=a(26300);const r={TOP:"top",TOP_START:"top-start",TOP_END:"top-end",BOTTOM:"bottom",BOTTOM_START:"bottom-start",BOTTOM_END:"bottom-end",RIGHT:"right",RIGHT_START:"right-start",RIGHT_END:"right-end",LEFT:"left",LEFT_START:"left-start",LEFT_END:"left-end"},n={[r.TOP]:r.TOP,[r.TOP_START]:r.TOP_START,[r.TOP_END]:r.TOP_END,[r.BOTTOM]:r.BOTTOM,[r.BOTTOM_END]:r.BOTTOM_END,[r.BOTTOM_START]:r.BOTTOM_START,[r.RIGHT]:r.LEFT,[r.RIGHT_START]:r.LEFT_START,[r.RIGHT_END]:r.LEFT_END,[r.LEFT]:r.RIGHT,[r.LEFT_START]:r.RIGHT_START,[r.LEFT_END]:r.RIGHT_END},i=o.default.div.attrs((e=>{let{$offset:{x:t,y:a,width:o},fillWidth:r,transforms:n,zIndex:i}=e;return{style:{transform:`translate(${t}px, ${a}px) ${n}`,...r?{width:`${o}px`}:{},zIndex:i}}})).withConfig({displayName:"constants__PopupContainer",componentId:"sc-1y4wru5-0"})(["/*! @noflip */ left:0px;top:0px;position:fixed;",";max-height:",";"],(e=>{let{noOverFlow:t}=e;return t?"":"overflow-y: auto;"}),(e=>{let{topOffset:t}=e;return`calc(100vh - ${t}px)`}))},99566:(e,t,a)=>{a.d(t,{DEFAULT_ARIA_CLEAR_LABEL:()=>i,DEFAULT_ARIA_INPUT_LABEL:()=>l,DEFAULT_PLACEHOLDER:()=>n,DEFAULT_POPUP_FILL_WIDTH:()=>r,Z_INDEX:()=>s});var o=a(91655);const r=276,n=(0,o.__)("Search","web-stories"),i=(0,o.__)("Clear Search","web-stories"),l=(0,o.__)("Search","web-stories"),s={CLEAR_BUTTON:5}},19722:(e,t,a)=>{a.d(t,{FOCUS_VISIBLE_SELECTOR:()=>r,overrideFocusOutlineStyles:()=>n});var o=a(26300);a.e(8624).then(a.t.bind(a,35202,23)).catch((()=>{}));const r="focus-visible",n=(0,o.css)([".js-focus-visible :focus:not(.","):not([data-focus-visible-added]),.js-focus-visible :focus-visible:not(.","):not([data-focus-visible-added]){outline:none;}"],r,r);(0,o.createGlobalStyle)(["",";"],n)},88766:(e,t,a)=>{a.d(t,{SHARED_DEFAULT_ATTRIBUTES:()=>o.SHARED_DEFAULT_ATTRIBUTES,elementFillContent:()=>s,elementWithBackgroundColor:()=>p,elementWithBorder:()=>u,elementWithBorderRadius:()=>c,elementWithFlip:()=>f,elementWithFont:()=>m,elementWithHighlightBorderRadius:()=>d,elementWithTextParagraphStyle:()=>b,useColorTransformHandler:()=>h.default});var o=a(56527),r=a(26300),n=a(18535),i=a(25784),l=a(95740);const s=(0,r.css)(["position:absolute;top:0;left:0;width:100%;height:100%;"]),c=((0,r.css)(["position:absolute;z-index:1;left:",";top:",";"],(e=>{let{x:t}=e;return`${t}px`}),(e=>{let{y:t}=e;return`${t}px`})),(0,r.css)(["width:",";height:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`})),(0,r.css)(["transform:",";"],(e=>{let{rotationAngle:t}=e;return`rotate(${t}deg)`})),(0,r.css)(["",""],(e=>(0,i.getBorderRadius)(e)))),d=e=>{let{borderRadius:t,dataToEditorY:a}=e;return a&&(0,r.css)(["border-radius:","px ","px ","px ","px;"],a(t?.topLeft||0),a(t?.topRight||0),a(t?.bottomRight||0),a(t?.bottomLeft||0))},u=(0,r.css)([""," background-clip:padding-box;"],(e=>{let{border:t,borderRadius:a,width:o,height:r,mask:n}=e;return(0,i.getBorderStyle)({border:t,borderRadius:a,width:o,height:r,mask:n})})),p=(0,r.css)(["",";"],(e=>{let{backgroundColor:t}=e;return t&&(0,n.default)(t)})),m=(0,r.css)(["white-space:pre-line;font-family:",";overflow-wrap:break-word;word-break:break-word;letter-spacing:normal;font-style:",";font-size:","px;font-weight:",";color:#000000;"],(e=>{let{font:t}=e;return(0,l.generateFontFamily)(t)}),(e=>{let{fontStyle:t}=e;return t}),(e=>{let{fontSize:t}=e;return t}),(e=>{let{fontWeight:t}=e;return t})),b=(0,r.css)(["margin:",";padding:",";line-height:",";text-align:",";overflow-wrap:break-word;"],(e=>{let{margin:t}=e;return t}),(e=>{let{padding:t}=e;return t||0}),(e=>{let{lineHeight:t}=e;return t}),(e=>{let{textAlign:t}=e;return t})),f=(0,r.css)(["transform:",";"],(e=>{let{transformFlip:t}=e;return t}));var h=a(66027)},88914:(e,t,a)=>{a.d(t,{BACKGROUND_TEXT_MODE:()=>i,ELEMENT_TYPES:()=>o,TEXT_ELEMENT_DEFAULT_FONT:()=>n,getDefinitionForType:()=>l.default,getTransformFlip:()=>c.default,isElementBelowLimit:()=>s.default,registerElementType:()=>d.registerElementType});const o={IMAGE:"image",SHAPE:"shape",TEXT:"text",VIDEO:"video",GIF:"gif",STICKER:"sticker",PRODUCT:"product"},r=(o.IMAGE,o.VIDEO,o.GIF,o.PRODUCT,"((MULTIPLE))"),n={family:"Roboto",weights:[100,300,400,500,700,900],styles:["italic","regular"],variants:[[0,100],[1,100],[0,300],[1,300],[0,400],[1,400],[0,500],[1,500],[0,700],[1,700],[0,900],[1,900]],fallbacks:["Helvetica Neue","Helvetica","sans-serif"],service:"fonts.google.com",metrics:{upm:2048,asc:1900,des:-500,tAsc:1536,tDes:-512,tLGap:102,wAsc:1946,wDes:512,xH:1082,capH:1456,yMin:-555,yMax:2163,hAsc:1900,hDes:-500,lGap:0}},i={NONE:"NONE",FILL:"FILL",HIGHLIGHT:"HIGHLIGHT"};var l=a(77839);(0,a(80852).default)(255,255,255);a(26699);var s=a(58474),c=a(24901);var d=a(55993),u=a(45697),p=a.n(u),m=a(15662),b=a(9675),f=a(58373);const h={},_=p().shape({id:p().number,src:p().string,length:p().number,lengthFormatted:p().string,mimeType:p().string,needsProxy:p().bool});h.mask=p().shape({type:p().string.isRequired}),h.link=p().shape({url:p().string.isRequired,desc:p().string,needsProxy:p().bool,icon:p().string,rel:p().arrayOf(p().string)}),h.box=p().exact({x:p().number.isRequired,y:p().number.isRequired,width:p().number.isRequired,height:p().number.isRequired,rotationAngle:p().number.isRequired}),h.page=p().shape({id:p().string.isRequired,animations:p().arrayOf(p().shape(f.AnimationProps)),elements:p().arrayOf(p().shape(h.element)),overlay:p().oneOf(Object.values({NONE:"none",SOLID:"solid",LINEAR:"linear",RADIAL:"radial"})),backgroundAudio:p().shape({resource:_,loop:p().bool,tracks:p().arrayOf(b.ResourcePropTypes.trackResource)})});const g={id:p().string.isRequired,type:p().string.isRequired};h.flip=p().shape({vertical:p().bool,horizontal:p().bool});const E={id:p().string.isRequired,groupId:p().string,type:p().string.isRequired,x:p().number.isRequired,y:p().number.isRequired,width:p().number.isRequired,height:p().number.isRequired,flip:h.flip,rotationAngle:p().number.isRequired,mask:h.mask,link:h.link,opacity:p().number,lockAspectRatio:p().bool,isBackground:p().bool},S={scale:p().number.isRequired,focalX:p().number,focalY:p().number};h.element=p().shape(E),h.layer=p().shape(g),h.elements={},h.elements.image=p().shape({...E,...S,resource:b.ResourcePropTypes.imageResource}),h.elements.video=p().shape({...E,...S,resource:b.ResourcePropTypes.videoResource,poster:p().string,tracks:p().arrayOf(b.ResourcePropTypes.trackResource),loop:p().bool}),h.elements.gif=p().shape({...E,...S,resource:b.ResourcePropTypes.gifResource}),h.elements.media=p().oneOfType([h.elements.image,h.elements.video,h.elements.gif]);const T=p().shape({family:p().string,service:p().string,weights:p().arrayOf(p().number),styles:p().arrayOf(p().string),variants:p().arrayOf(p().array),fallbacks:p().array}),y=p().shape({horizontal:p().oneOfType([p().number,p().oneOf([r])]),vertical:p().oneOfType([p().number,p().oneOf([r])]),locked:p().oneOfType([p().bool,p().oneOf([r])])}),w={content:p().string,backgroundTextMode:p().oneOf(Object.values(i)),backgroundColor:m.PatternPropType,font:T.isRequired,fontSize:p().number,lineHeight:p().number,padding:y,textAlign:p().string,tagName:p().oneOf(["h1","h2","h3","p","auto"])};h.textContent=p().shape({...w}),h.elements.text=p().shape({...E,...w}),h.elements.shape=p().shape({...E,backgroundColor:m.PatternPropType}),h.elements.sticker=p().shape({...E,sticker:p().shape({type:p().string.isRequired})}),h.elements.background=p().shape({...g,inner:h.element})},25784:(e,t,a)=>{a.d(t,{DisplayWithMask:()=>i.default,OutputWithMask:()=>E.default,getBorderPositionCSS:()=>n.getBorderPositionCSS,getBorderRadius:()=>n.getBorderRadius,getBorderStyle:()=>n.getBorderStyle,getMaskByType:()=>o.getMaskByType,getResponsiveBorder:()=>n.getResponsiveBorder,shouldDisplayBorder:()=>n.shouldDisplayBorder});var o=a(99371),r=a(71356),n=a(34075),i=a(3562),l=a(67294),s=a(26300),c=a(72070),d=a(88914);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},u.apply(this,arguments)}const p={position:"absolute",top:0,left:0,right:0,bottom:0},m=(0,s.css)(["position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"]),b=s.default.svg.withConfig({displayName:"frame__DropTargetSVG",componentId:"sc-1cagagv-0"})([""," z-index:",";"],m,(e=>{let{active:t}=e;return t?1:-1})),f=s.default.svg.withConfig({displayName:"frame__Filler",componentId:"sc-1cagagv-1"})(["",""],m),h=s.default.path.withConfig({displayName:"frame__FillerPath",componentId:"sc-1cagagv-2"})(["pointer-events:",";"],(e=>{let{isClickable:t}=e;return t?"all":"none"})),_=s.default.path.withConfig({displayName:"frame__DropTargetPath",componentId:"sc-1cagagv-3"})(["transition:opacity 0.5s;pointer-events:visibleStroke;opacity:",";stroke:",";"],(e=>{let{active:t}=e;return t?.3:0}),(e=>{let{theme:t}=e;return t.colors.border.selection})),g=s.default.div.withConfig({displayName:"frame__Wrapper",componentId:"sc-1cagagv-4"})(["width:100%;height:100%;::before{transition:opacity 0.5s;opacity:",";display:block;content:'';position:absolute;width:calc(100% + 8px);height:calc(100% + 8px);border-radius:8px;left:-4px;top:-4px;border:1px solid ",";}"],(e=>{let{hasBackgroundOutline:t}=e;return t?1:0}),(e=>{let{theme:t}=e;return t.colors.border.selection}));function WithDropTarget(e){let{element:t,children:a,hover:r,draggingResource:n,activeDropTargetId:i,isDropSource:s,registerDropTarget:d,unregisterDropTarget:p}=e;const m=(0,c.useRef)(null),{id:f,resource:h,isBackground:E,isLocked:S}=t,T=(0,o.getElementMask)(t);if((0,c.useEffect)((()=>{if(!S)return d(f,m.current),()=>{p(f)}}),[f,S,d,p]),!T)return a;const y=r&&!n||Boolean(n)&&s(n.type)&&n!==h,w=!S&&y,v=w&&!E,I=w&&E,C={vectorEffect:"non-scaling-stroke",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",d:T?.path};return l.createElement(g,{hasBackgroundOutline:I},a,l.createElement(b,{viewBox:"0 0 1 "+1/T.ratio,width:"100%",height:"100%",preserveAspectRatio:"none",active:i===t.id},l.createElement(_,u({},C,{strokeWidth:"3",style:{opacity:v?1:0}})),l.createElement(_,u({ref:m,strokeWidth:"48"},C))))}(0,c.forwardRef)(((e,t)=>{let{element:a,fill:n,style:i,children:s,flip:m,draggingResource:b,activeDropTargetId:_,isDropSource:g,isSelected:E=!1,registerDropTarget:S,unregisterDropTarget:T,...y}=e;const[w,v]=(0,c.useState)(!1),{isBackground:I,isLocked:C}=a,A=!C||E,O={draggingResource:b,activeDropTargetId:_,isDropSource:g,registerDropTarget:S,unregisterDropTarget:T},L=(0,o.getElementMask)(a),k=m?{transform:(0,d.getTransformFlip)(m)}:null;if(!L?.type||I&&L.type!==r.MaskTypes.RECTANGLE)return l.createElement("div",u({style:{...n?p:{},...i,...k}},y),s);const P=(0,o.generateMaskId)(a,"frame");return l.createElement("div",u({ref:t,style:{...n?p:{},...i,...k,...I?{}:{clipPath:`url(#${P})`}}},y,{onPointerOver:()=>v(!0),onPointerOut:()=>v(!1)}),l.createElement("svg",{width:0,height:0},l.createElement("defs",null,l.createElement("clipPath",{id:P,transform:`scale(1 ${L.ratio})`,clipPathUnits:"objectBoundingBox"},l.createElement("path",{d:L.path})))),l.createElement(f,{viewBox:"0 0 1 "+1/L.ratio,width:"100%",height:"100%",preserveAspectRatio:"none"},l.createElement(h,{isClickable:A,fill:"none",d:L?.path})),A?l.createElement(WithDropTarget,u({element:a,hover:w},O,y),s):s)}));var E=a(12204)},50136:(e,t,a)=>{a.d(t,{isBlobURL:()=>o});function o(e){return e?.startsWith("blob:")}},17001:(e,t,a)=>{a.d(t,{InOverlay:()=>b,Moveable:()=>_,areEventsDragging:()=>E.default});var o=a(67294),r=a(72070),n=a(29154),i=a(45697),l=a.n(i),s=a(26300);const c=(0,r.createContext)({container:null,layer:null});function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},d.apply(this,arguments)}const u=(0,s.css)(["",""],(e=>{let{pointerEvents:t}=e;return t&&"string"==typeof t?`pointer-events: ${t};`:""})),p=s.default.div.withConfig({displayName:"overlay__Wrapper",componentId:"sc-1ibws6s-0"})([""," position:absolute;top:0;left:0;width:0;height:0;z-index:",";"],u,(e=>{let{zIndex:t}=e;return`${t}`}));function InOverlayWithRef(e,t){let{zIndex:a,pointerEvents:n,render:i,children:l=null,...s}=e;const{container:u,overlay:m}=(0,r.useContext)(c);if(!u||!m)return null;const b=o.createElement(p,d({},s,{ref:t,zIndex:a||0,pointerEvents:n,onMouseDown:e=>e.stopPropagation()}),i?i({container:u,overlay:m}):l);return(0,r.createPortal)(b,m)}const m=(0,r.forwardRef)(InOverlayWithRef);InOverlayWithRef.propTypes={zIndex:l().number,pointerEvents:l().string,render:l().func,children:l().node};const b=m;function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},f.apply(this,arguments)}const h=(0,r.forwardRef)((function MoveableWithRef(e,t){let{onContextMenu:a,...r}=e;return o.createElement(b,{onContextMenu:a,zIndex:10,pointerEvents:"initial",render:e=>{let{container:a}=e;return o.createElement(n.default,f({ref:t,container:a},r))}})}));h.propTypes={onContextMenu:l().func};const _=h;(0,s.createGlobalStyle)([".crop-moveable .moveable-control{background:"," !important;border:none !important;}.crop-moveable .moveable-control.moveable-n,.crop-moveable .moveable-control.moveable-s,.crop-moveable .moveable-control.moveable-e,.crop-moveable .moveable-control.moveable-w{border:1px solid "," !important;border-radius:4px;}.crop-moveable .moveable-control.moveable-n,.crop-moveable .moveable-control.moveable-s{width:","px !important;height:","px !important;margin-left:-12px !important;}.crop-moveable .moveable-control.moveable-n{margin-top:-8px !important;}.crop-moveable .moveable-control.moveable-s{margin-top:0px !important;}.crop-moveable .moveable-control.moveable-e{margin-left:0 !important;}.crop-moveable .moveable-control.moveable-w{margin-top:0 !important;margin-left:-8px !important;}.crop-moveable .moveable-control.moveable-e,.crop-moveable .moveable-control.moveable-w{width:","px !important;height:","px !important;margin-top:-12px !important;}.crop-moveable .moveable-control.moveable-nw,.crop-moveable .moveable-control.moveable-ne,.crop-moveable .moveable-control.moveable-sw,.crop-moveable .moveable-control.moveable-se,.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before,.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{left:initial !important;right:initial !important;top:initial !important;bottom:initial !important;background:"," !important;position:absolute !important;border-style:solid !important;border-color:"," !important;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before,.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{content:'';}.crop-moveable .moveable-control.moveable-nw,.crop-moveable .moveable-control.moveable-ne,.crop-moveable .moveable-control.moveable-sw,.crop-moveable .moveable-control.moveable-se{width:","px !important;height:","px !important;}.crop-moveable .moveable-control.moveable-nw{top:-","px !important;left:-","px !important;border-width:1px 0 0 1px !important;border-radius:2px 0 0 0 !important;}.crop-moveable .moveable-control.moveable-ne{top:-","px !important;right:-","px !important;border-width:1px 1px 0 0 !important;border-radius:0 2px 0 0 !important;}.crop-moveable .moveable-control.moveable-sw{left:-","px !important;bottom:-","px !important;border-width:0 0 1px 1px !important;border-radius:0 0 0 2px !important;}.crop-moveable .moveable-control.moveable-se{right:-","px !important;bottom:-","px !important;border-width:0 1px 1px 0 !important;border-radius:0 0 2px 0 !important;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before{width:","px !important;height:","px !important;top:0;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-sw::before{left:","px !important;border-width:1px 1px 1px 0;border-radius:0 2px 2px 0;}.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-se::before{right:","px !important;border-width:1px 0 1px 1px;border-radius:2px 0 0 2px;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before{top:-","px !important;}.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before{bottom:-","px !important;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{width:","px !important;height:","px !important;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after{top:","px !important;border-width:0 1px 1px 1px;border-radius:0 0 2px 2px;}.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{bottom:","px !important;border-width:1px 1px 0 1px;border-radius:2px 2px 0 0;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-sw::after{left:-","px !important;}.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-se::after{right:-",'px !important;}.crop-moveable .moveable-line.moveable-direction[data-line-index="0"]{margin-top:-4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="3"]{margin-top:4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="1"]{margin-left:4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="2"]{margin-left:-4px;}.crop-moveable .moveable-direction.moveable-line{background:'," !important;width:2px;height:2px;pointer-events:none;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),24,8,8,24,(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),7,7,1,1,1,7,1,7,7,7,17,8,6,6,1,1,8,17,6,6,1,1,(e=>{let{theme:t}=e;return t.colors.border.selection}));var g=a(37047);(0,s.createGlobalStyle)([".default-moveable .moveable-control,.default-moveable .moveable-line.moveable-rotation-line .moveable-control{background:"," !important;border:1px solid "," !important;}.default-moveable.type-text .moveable-direction.moveable-n,.default-moveable.type-text .moveable-direction.moveable-s{pointer-events:none;}.default-moveable .moveable-control.moveable-n{display:none !important;}.default-moveable .moveable-line{border:0;background:transparent !important;width:1px;height:1px;}.default-moveable .moveable-horizontal{border-bottom:1px dashed "," !important;}.default-moveable .moveable-vertical{border-right:1px dashed "," !important;}.default-moveable .moveable-gap{border-color:"," !important;}.default-moveable .moveable-target{border-style:solid !important;}.default-moveable .moveable-control.moveable-s,.default-moveable .moveable-control.moveable-e,.default-moveable .moveable-control.moveable-w{border-radius:4px;}.default-moveable .moveable-control.moveable-nw,.default-moveable .moveable-control.moveable-ne,.default-moveable .moveable-control.moveable-sw,.default-moveable .moveable-control.moveable-se{border-radius:2px;width:8px;height:8px;margin-left:-4px;margin-top:-4px;}.default-moveable .moveable-control.moveable-s{height:6px !important;width:16px !important;margin-top:-3px !important;}.default-moveable .moveable-control.moveable-e{height:16px !important;width:6px !important;margin-left:-3px !important;}.default-moveable .moveable-control.moveable-w{height:16px !important;width:6px !important;margin-left:-3px !important;}.default-moveable.moveable-control-box .moveable-line.moveable-direction{background:"," !important;width:1px;height:1px;}.default-moveable.moveable-control-box .moveable-line.moveable-rotation-line{background:"," !important;width:1px;height:12px;top:28px;}.default-moveable.moveable-control-box .moveable-control.moveable-rotation-control{border-radius:50px;width:29px;height:29px;margin-left:-14.5px;top:10.5px;}.default-moveable.moveable-control-box .moveable-control.moveable-rotation-control::after{content:'';position:absolute;width:28px;height:28px;left:-1px;top:-1px;background-image:url(\"",'");background-size:100%;filter:invert(100%);}.default-moveable.hide-handles .moveable-line.moveable-rotation-line,.default-moveable.hide-handles .moveable-line.moveable-direction{display:none;}.default-moveable.visually-hide-handles .moveable-control.moveable-e,.default-moveable.visually-hide-handles .moveable-control.moveable-w,.default-moveable.visually-hide-handles .moveable-control.moveable-s,.default-moveable.visually-hide-handles .moveable-control.moveable-ne,.default-moveable.visually-hide-handles .moveable-control.moveable-nw,.default-moveable.visually-hide-handles .moveable-control.moveable-sw{opacity:0;}.default-moveable.immoveable .moveable-line.moveable-direction{cursor:default;}'],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.negativePress}),(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{theme:t}=e;return t.colors.border.selection}),g);s.default.div.withConfig({displayName:"withOverlay__Overlay",componentId:"sc-hntauo-0"})(["position:absolute;top:0;/*! @noflip */ left:0;width:0;height:0;z-index:",";"],(e=>{let{zIndex:t}=e;return t}));var E=a(8580)},72070:(e,t,a)=>{a.d(t,{Fragment:()=>n.Fragment,StrictMode:()=>n.StrictMode,cloneElement:()=>n.cloneElement,createContext:()=>r.createContext,createElement:()=>n.createElement,createPortal:()=>i.createPortal,createRef:()=>n.createRef,forwardRef:()=>n.forwardRef,identity:()=>r.identity,memo:()=>n.memo,render:()=>i.render,renderToStaticMarkup:()=>m.default,useBatchingCallback:()=>l.default,useCallback:()=>n.useCallback,useCombinedRefs:()=>s.default,useContext:()=>r.useContext,useContextReact:()=>n.useContextReact,useContextSelector:()=>c.default,useDebouncedCallback:()=>o.default,useEffect:()=>n.useEffect,useFocusOut:()=>d.default,useImperativeHandle:()=>n.useImperativeHandle,useLayoutEffect:()=>n.useLayoutEffect,useMemo:()=>n.useMemo,usePrevious:()=>u.default,useReducer:()=>n.useReducer,useRef:()=>n.useRef,useResizeEffect:()=>p.default,useState:()=>n.useState,useUnmount:()=>b.default});var o=a(19302),r=a(24778),n=a(66803),i=a(73935),l=a(6075),s=a(20814),c=a(76969),d=a(24114),u=a(95471);var p=a(13920),m=a(86757),b=a(84067);a(40083),a(67294)},66803:(e,t,a)=>{a.d(t,{Fragment:()=>o.Fragment,StrictMode:()=>o.StrictMode,cloneElement:()=>o.cloneElement,createElement:()=>o.createElement,createRef:()=>o.createRef,forwardRef:()=>o.forwardRef,memo:()=>o.memo,useCallback:()=>o.useCallback,useContextReact:()=>o.useContext,useEffect:()=>o.useEffect,useImperativeHandle:()=>o.useImperativeHandle,useLayoutEffect:()=>o.useLayoutEffect,useMemo:()=>o.useMemo,useReducer:()=>o.useReducer,useRef:()=>o.useRef,useState:()=>o.useState});var o=a(67294)},53649:(e,t,a)=>{a.d(t,{fauxStylesToCSS:()=>r});a(26699),a(72070),a(9041);const o="CUSTOM-FAUX";function r(e,t){if(!e.includes(o))return null;const a={backgroundColor:"rgba(169, 169, 169, 0.7)"};return t?.color&&(a.color=`var(--faux-selection-color, ${t.color})`),a}},56862:(e,t,a)=>{a.d(t,{RichTextEditor:()=>r.default,getCaretCharacterOffsetWithin:()=>l.default,getFontVariants:()=>i.default,getHTMLFormatters:()=>s.getHTMLFormatters,getHTMLInfo:()=>s.getHTMLInfo,useRichText:()=>n.default});a(67294),a(72070),a(9041),a(34224),a(97643),a(47682),a(53649),a(21229),a(11810);var o=a(92507);(0,a(28020).weightToStyle)("700"),o.ITALIC,o.UNDERLINE;a(54530);a(33251);var r=a(4517),n=a(56991);var i=a(44397),l=a(40098),s=a(67187)},97643:(e,t,a)=>{a.d(t,{getSelectionForAll:()=>r});var o=a(9041);a(28020),a(28653),a(57778),a(15948);function r(e){const t=e.getFirstBlock(),a=e.getLastBlock();return new o.SelectionState({anchorKey:t.getKey(),anchorOffset:0,focusKey:a.getKey(),focusOffset:a.getLength()})}},24359:(e,t,a)=>{a.d(t,{disableTracking:()=>i,enableTracking:()=>r.default,getTimeTracker:()=>m.default,initializeTracking:()=>o.default,trackClick:()=>s.default,trackError:()=>c.default,trackEvent:()=>d.default,trackScreenView:()=>p});var o=a(73323),r=a(82303),n=a(51165);const i=function(){n.config.trackingEnabled=!1};var l=a(35467),s=a(99365),c=a(16373),d=a(86602);var u=a(53419);const p=async function(e){if(!await(0,l.default)())return Promise.resolve();const t={screen_name:e};return(0,u.default)("screen_view",t)};var m=a(20904)},2357:(e,t,a)=>{a.d(t,{useTransform:()=>n,useTransformHandler:()=>i});a(67294);var o=a(72070),r=a(62531);const n=function(e){return(0,o.useContextSelector)(r.default,e??o.identity)};const i=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r=n((e=>{let{actions:t}=e;return t.registerTransformHandler}));(0,o.useEffect)((()=>r(e,t)),a)}},15985:(e,t,a)=>{a.d(t,{DANGER_ZONE_HEIGHT:()=>s,FULLBLEED_HEIGHT:()=>l,FULLBLEED_RATIO:()=>i,PAGE_HEIGHT:()=>n,PAGE_RATIO:()=>o,PAGE_WIDTH:()=>r});const o=2/3,r=412,n=618,i=9/16,l=r/i,s=(l-n)/2},1787:(e,t,a)=>{a.d(t,{dataPixels:()=>r,dataToEditorX:()=>i,dataToEditorY:()=>l,dataToFontSizeY:()=>s,editorPixels:()=>n,getBox:()=>c});var o=a(15985);function r(e){return Number(e.toFixed(0))}function n(e){return Number(e.toFixed(5))}function i(e,t){return n(e*t/o.PAGE_WIDTH)}function l(e,t){return n(e*t/o.PAGE_HEIGHT)}function s(e,t){return(l(e,t)/10).toFixed(6)}function c(e,t,a){let{x:r,y:n,width:s,height:c,rotationAngle:d,isBackground:u}=e;return{x:i(u?0:r,t),y:l(u?-o.DANGER_ZONE_HEIGHT:n,a),width:i(u?o.PAGE_WIDTH:s,t),height:l(u?o.FULLBLEED_HEIGHT:c,a),rotationAngle:u?0:d}}},70333:(e,t,a)=>{a.d(t,{getCorners:()=>r});var o=a(1787);function r(e,t,a,o,r){const i=t+.5*o,l=a+.5*r,s=e*Math.PI/180;return{topLeftPoint:n(i,l,t,a,s),topRightPoint:n(i,l,t+o,a,s),bottomRightPoint:n(i,l,t+o,a+r,s),bottomLeftPoint:n(i,l,t,a+r,s)}}function n(e,t,a,r,n){const i=a-e,l=r-t,s=Math.sqrt(i*i+l*l);n+=Math.atan2(l,i);return{x:(0,o.dataPixels)(e+s*Math.cos(n)),y:(0,o.dataPixels)(t+s*Math.sin(n))}}},58860:(e,t,a)=>{a.d(t,{stripHTML:()=>r});const o=document.createElement("div");function r(e){return o.innerHTML=e,o.textContent}document.createElement("div")},37136:(e,t,a)=>{function o(e){try{return new URL(e),!0}catch{return!1}}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https";return/^(http:\/\/|https:\/\/|tel:|mailto:)/.test(e)?e:`${t}://${e}`}a.d(t,{isValidUrl:()=>o,withProtocol:()=>r})},53715:(e,t,a)=>{var o={};a.r(o),a.d(o,{createStoryFromTemplate:()=>il,duplicateStory:()=>ll,fetchStories:()=>ol,getAuthors:()=>sl,getProducts:()=>ul,getTaxonomies:()=>cl,getTaxonomyTerms:()=>dl,trashStory:()=>rl,updateStory:()=>nl});var r=a(67294);a.p=window.webStories.publicPath;var n=a(91655);for(const e of window?.webStories?.localeData||[])(0,n.setLocaleData)(e);var i=a(7471),l=a(45246),s=a(17216),c=a(59042),d=a(11756),u=a(90997),p=a(11443),m=a(26300),b=a(14194),f=a(1745),h=a(72070);const _=(0,h.createContext)({api:{}});const g=function ConfigProvider(e){let{config:t,children:a}=e;return r.createElement(_.Provider,{value:t},a)};const E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.identity;return(0,h.useContextSelector)(_,e)};var S,T,y=a(24359);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},w.apply(this,arguments)}const SvgCompass=e=>{let{title:t,titleId:a,...o}=e;return r.createElement("svg",w({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},o),t?r.createElement("title",{id:a},t):null,S||(S=r.createElement("path",{d:"M12.5 3v3M22 12.5h-3M12.5 22v-3M3 12.5h3M12.5 22a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),T||(T=r.createElement("path",{d:"M15.851 8.492a.5.5 0 0 1 .657.657l-2.13 4.967a.5.5 0 0 1-.262.263L9.15 16.508a.5.5 0 0 1-.657-.657l2.13-4.967a.5.5 0 0 1 .262-.263l4.967-2.129Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},v=(0,r.memo)(SvgCompass);var I,C;function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},A.apply(this,arguments)}const SvgHomeWithHeart=e=>{let{title:t,titleId:a,...o}=e;return r.createElement("svg",A({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},o),t?r.createElement("title",{id:a},t):null,I||(I=r.createElement("path",{d:"M15.781 10.72a2.44 2.44 0 0 0-2.999-.367 2.493 2.493 0 0 0-.782.748 2.493 2.493 0 0 0-.782-.748 2.45 2.45 0 0 0-2.088-.21 2.47 2.47 0 0 0-1.443 1.375 2.476 2.476 0 0 0 .532 2.687L12 18l3.781-3.795a2.477 2.477 0 0 0 0-3.484Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),C||(C=r.createElement("path",{d:"m1 11 10.367-8.482a1 1 0 0 1 1.266 0L23 11M4 9v12a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V9",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},O=(0,r.memo)(SvgHomeWithHeart);var L;function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},k.apply(this,arguments)}const SvgMenu=e=>{let{title:t,titleId:a,...o}=e;return r.createElement("svg",k({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},o),t?r.createElement("title",{id:a},t):null,L||(L=r.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z",fill:"currentColor"})))},P=(0,r.memo)(SvgMenu);var N;function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},R.apply(this,arguments)}const SvgMoreVertical=e=>{let{title:t,titleId:a,...o}=e;return r.createElement("svg",R({fill:"none",viewBox:"0 0 4 16",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},o),t?r.createElement("title",{id:a},t):null,N||(N=r.createElement("path",{d:"M2 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z",fill:"currentColor"})))},x=(0,r.memo)(SvgMoreVertical);var M=a(87602);const D="open-in-editor-action",B="rename-action",F="duplicate-action",H="delete-story-action",U="copy-story-link",G="open-story-link",Y=[{label:(0,n.__)("Open in editor","web-stories"),value:D,isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,n.__)("Open in new tab","web-stories"),value:G,isEnabled:e=>Boolean(e?.previewLink)},{label:(0,n.__)("Copy Story URL","web-stories"),value:U,isEnabled:e=>Boolean(e?.previewLink)},{label:(0,n.__)("Rename","web-stories"),value:B,separator:"top",isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,n.__)("Duplicate","web-stories"),value:F,isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,n.__)("Delete Story","web-stories"),value:H,separator:"top",isEnabled:e=>Boolean(e?.capabilities?.hasDeleteAction)}],z={ASC:"asc",DESC:"desc"},j={NAME:"title",DATE_CREATED:"date",LAST_MODIFIED:"modified",CREATED_BY:"story_author"},V={[j.NAME]:z.ASC,[j.DATE_CREATED]:z.DESC,[j.LAST_MODIFIED]:z.DESC,[j.CREATED_BY]:z.ASC},$=[{label:(0,n.__)("Name","web-stories"),value:j.NAME},{label:(0,n.__)("Date Created","web-stories"),value:j.DATE_CREATED},{label:(0,n.__)("Last Modified","web-stories"),value:j.LAST_MODIFIED},{label:(0,n.__)("Created By","web-stories"),value:j.CREATED_BY}],q={DRAFT:"draft",FUTURE:"future",PENDING:"pending",PUBLISH:"publish",PRIVATE:"private"},W={ALL:Object.values(q).join(","),PUBLISHED_AND_FUTURE:[q.PUBLISH,q.FUTURE].join(","),...q},Z={[W.PUBLISH]:(0,n.__)("Published","web-stories"),[W.PENDING]:(0,n.__)("Pending","web-stories"),[W.FUTURE]:(0,n.__)("Scheduled","web-stories"),[W.DRAFT]:(0,n.__)("Draft","web-stories"),[W.PRIVATE]:(0,n.__)("Private","web-stories")},K=[{label:(0,n.__)("All Stories","web-stories"),value:W.ALL,status:"all"},{label:(0,n.__)("Drafts","web-stories"),value:W.DRAFT,status:W.DRAFT},{label:(0,n.__)("Pending","web-stories"),value:W.PENDING,status:W.PENDING},{label:(0,n.__)("Published","web-stories"),value:W.PUBLISH,status:W.PUBLISH},{label:(0,n.__)("Scheduled","web-stories"),value:W.FUTURE,status:W.FUTURE},{label:(0,n.__)("Private","web-stories"),value:W.PRIVATE,status:W.PRIVATE}],X={[W.ALL]:e=>(0,M.default)(
/* translators: %d: number of stories in view */
(0,n._n)("Viewing <strong>%d</strong> story","Viewing all <strong>%d</strong> stories",e,"web-stories"),e),[W.DRAFT]:e=>(0,M.default)(
/* translators: %d: number of draft stories in view */
(0,n._n)("Viewing <strong>%d</strong> draft","Viewing <strong>%d</strong> drafts",e,"web-stories"),e),[W.PUBLISH]:e=>(0,M.default)(
/* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> published story","Viewing <strong>%d</strong> published stories",e,"web-stories"),e),[W.FUTURE]:e=>(0,M.default)(
/* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> scheduled story","Viewing <strong>%d</strong> scheduled stories",e,"web-stories"),e),[W.PENDING]:e=>(0,M.default)(
/* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> pending story","Viewing <strong>%d</strong> pending stories",e,"web-stories"),e),[W.PRIVATE]:e=>(0,M.default)(
/* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> private story","Viewing <strong>%d</strong> private stories",e,"web-stories"),e)},Q="diy_crafts",J="movies_tv",ee="beauty_style",te="fitness_wellbeing",ae="food",oe="travel",re="music",ne="sports",ie=((0,n._x)("DIY & Crafts","template vertical","web-stories"),(0,n._x)("Movies & TV","template vertical","web-stories"),(0,n._x)("Beauty & Style","template vertical","web-stories"),(0,n._x)("Fitness & Wellbeing","template vertical","web-stories"),(0,n._x)("Food","template vertical","web-stories"),(0,n._x)("Travel","template vertical","web-stories"),(0,n._x)("Music","template vertical","web-stories"),(0,n._x)("Sports","template vertical","web-stories"),"white"),le="black",se="gray",ce="brown",de="red",ue="orange",pe="yellow",me="green",be="blue",fe="pink",he="purple",_e=((0,n._x)("White","color","web-stories"),(0,n._x)("Black","color","web-stories"),(0,n._x)("Gray","color","web-stories"),(0,n._x)("Brown","color","web-stories"),(0,n._x)("Red","color","web-stories"),(0,n._x)("Orange","color","web-stories"),(0,n._x)("Yellow","color","web-stories"),(0,n._x)("Green","color","web-stories"),(0,n._x)("Blue","color","web-stories"),(0,n._x)("Pink","color","web-stories"),(0,n._x)("Purple","color","web-stories"),{ALL:"template"}),ge={[_e.ALL]:e=>(0,M.default)(
/* translators: %d: number of templates in view */
(0,n._n)("Viewing <strong>%d</strong> template","Viewing all <strong>%d</strong> templates",e,"web-stories"),e)},Ee={POPULAR:"popular",RECENT:"recent"},Se=[{label:(0,n.__)("Popular","web-stories"),value:Ee.POPULAR},{label:(0,n.__)("Recent","web-stories"),value:Ee.RECENT}],Te={template:(0,n.__)("See details","web-stories")},ye="menu",we=[".jpg",".jpeg",".png",".gif"],ve=288,Ie=1098,Ce="tablet",Ae="desktop",Oe="thumbnail",Le={[Ce]:200,[Ae]:232,[Oe]:33},ke=24,Pe=32,Ne=52,Re=5,xe={DASHBOARD:"/",TEMPLATES_GALLERY:"/templates-gallery",TEMPLATE_DETAIL:"template-detail"},Me={[xe.DASHBOARD]:(0,n.__)("Dashboard","web-stories"),[xe.TEMPLATES_GALLERY]:(0,n.__)("Explore Templates","web-stories"),[`${xe.TEMPLATES_GALLERY}/${xe.TEMPLATE_DETAIL}`]:(0,n.__)("Template Details","web-stories"),DEFAULT:(0,n.__)("Dashboard","web-stories")},De=[{value:xe.DASHBOARD,label:Me[xe.DASHBOARD],Icon:O},{value:xe.TEMPLATES_GALLERY,label:Me[xe.TEMPLATES_GALLERY],Icon:v}],Be={GRID:"grid",LIST:"list"},Fe={[Be.GRID]:(0,n.__)("Switch to List View","web-stories"),[Be.LIST]:(0,n.__)("Switch to Grid View","web-stories")},He="DASHBOARD",Ue="TEMPLATES_GALLERY",Ge={[He]:{...X},[Ue]:{...ge}},Ye=24,ze=853,je=640,Ve="creating_story_from_template",$e="create_story_from_template_success",qe="create_story_from_template_failure",We="loading_stories",Ze="fetch_stories_success",Ke="fetch_stories_failure",Xe="update_story",Qe="update_story_failure",Je="trash_story",et="trash_story_failure",tt="duplicate_story",at="duplicate_story_failure",ot={error:{},isLoading:!1,stories:{},storiesOrderById:[],totalStoriesByStatus:{},totalPages:null};const rt=function(e,t){switch(t.type){case We:case Ve:return{...e,isLoading:t.payload};case qe:case Ke:case Qe:case et:case at:return{...e,error:{...t.payload,id:Date.now()}};case $e:return{...e,error:{}};case Xe:return{...e,error:{},stories:{...e.stories,[t.payload.id]:t.payload}};case Je:{const a=t.payload.storyStatus===W.DRAFT?W.DRAFT:W.PUBLISH;return{...e,error:{},storiesOrderById:e.storiesOrderById.filter((e=>e!==t.payload.id)),totalStoriesByStatus:{...e.totalStoriesByStatus,all:e.totalStoriesByStatus.all-1,[a]:e.totalStoriesByStatus[a]-1},stories:Object.keys(e.stories).reduce(((a,o)=>(parseInt(o)!==t.payload.id&&(a[o]=e.stories[o]),a)),{})}}case tt:return{...e,error:{},storiesOrderById:[t.payload.id,...e.storiesOrderById],totalStoriesByStatus:{...e.totalStoriesByStatus,all:e.totalStoriesByStatus.all+1,[t.payload.status]:e.totalStoriesByStatus[t.payload.status]+1},stories:{...e.stories,[t.payload.id]:t.payload}};case Ze:{const{fetchedStoryIds:a,totalStoriesByStatus:o,totalPages:r,page:n,stories:i}=t.payload,{storiesOrderById:l,stories:s}=e,c=1===n?a:[...l,...a],d=[...new Set(c)];return{...e,error:{},storiesOrderById:d,stories:{...s,...i},totalPages:r||1,totalStoriesByStatus:o,allPagesFetched:n>=r}}default:return e}},nt={LOAD_STORIES:{MESSAGE:(0,n.__)("Unable to load stories","web-stories")},UPDATE_STORY:{MESSAGE:(0,n.__)("Unable to update story","web-stories")},DELETE_STORY:{MESSAGE:(0,n.__)("Unable to delete story","web-stories")},CREATE_STORY_FROM_TEMPLATE:{MESSAGE:(0,n.__)("Unable to create story from template","web-stories")},DUPLICATE_STORY:{MESSAGE:(0,n.__)("Unable to duplicate story","web-stories")},LOAD_TEMPLATES:{DEFAULT_MESSAGE:(0,n.__)("Cannot connect to data source","web-stories"),MESSAGE:(0,n.__)("Unable to load templates","web-stories")},RENDER_PREVIEW:{MESSAGE:(0,n.__)("Unable to render preview","web-stories")},LOAD_TEMPLATE:{DEFAULT_MESSAGE:(0,n.__)("Could not load the template","web-stories")}},it=()=>{const e=(0,h.useRef)(!0),t=(0,h.useMemo)((()=>new Map),[]),[a,o]=(0,h.useReducer)(rt,ot),{apiCallbacks:r}=E(),n=(0,h.useRef)(!1);(0,h.useEffect)((()=>(n.current=!0,()=>{n.current=!1})),[]);const i=(0,h.useCallback)((async a=>{o({type:We,payload:!0});const i=(0,y.getTimeTracker)("load_stories");try{const{stories:l,fetchedStoryIds:s,totalPages:c,totalStoriesByStatus:d}=await r.fetchStories(a);if(!n.current)return;e.current&&t.forEach((e=>{e(d)})),e.current=!1,o({type:Ze,payload:{stories:l,totalPages:c,totalStoriesByStatus:d,fetchedStoryIds:s,page:a.page}})}catch(e){o({type:Ke,payload:{message:nt.LOAD_STORIES.MESSAGE,code:e.code}})}finally{o({type:We,payload:!1}),i()}}),[r,t]),l=(0,h.useCallback)((async e=>{const t=(0,y.getTimeTracker)("load_update_story");try{const a=await r.updateStory(e);o({type:Xe,payload:a})}catch(e){o({type:Qe,payload:{message:nt.UPDATE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[r]),s=(0,h.useCallback)((async e=>{const t=(0,y.getTimeTracker)("load_trash_story");try{await r.trashStory(e.id),o({type:Je,payload:{id:e.id,storyStatus:e.status}})}catch(e){o({type:et,payload:{message:nt.DELETE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[r]),c=(0,h.useCallback)((async e=>{o({type:Ve,payload:!0});try{const t=await r.createStoryFromTemplate(e);o({type:$e}),window.location=t.editLink}catch(e){o({type:qe,payload:{message:nt.CREATE_STORY_FROM_TEMPLATE.MESSAGE,code:e.code}})}finally{o({type:Ve,payload:!1})}}),[r]);return{stories:a,api:{duplicateStory:(0,h.useCallback)((async e=>{const t=(0,y.getTimeTracker)("load_duplicate_story");try{const a=await r.duplicateStory(e);o({type:tt,payload:a})}catch(e){o({type:at,payload:{message:nt.DUPLICATE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[r]),fetchStories:i,createStoryFromTemplate:c,trashStory:s,updateStory:l,addInitialFetchListener:(0,h.useCallback)((e=>{const a=Symbol();return t.set(a,e),()=>{t.delete(a)}}),[t])}}};var lt=a(17445),st=a(70722),ct=a(68057),dt=(a(60427),a(51085)),ut=a(7694),pt=a(55965),mt=a(96764),bt=a(63415);const ft=function(e){if(!e)return"";const t=(0,st.toDate)(e);if((0,dt.default)(t)){const{locale:e}=(0,mt.default)();return(0,ut.default)(t,{includeSeconds:!1,addSuffix:!0,locale:e})}return(0,pt.default)(t)?(0,n.__)("yesterday","web-stories"):(0,bt.default)(e)};const ht=function(e){return(0,st.toDate)(e,{timeZone:"+0000"})};const _t=(e,t)=>e.reduce(((e,a)=>a[t]?(e[a[t]],e[a[t]]=a,e):e),{}),gt="loading_templates",Et="fetch_templates_success",St="fetch_templates_failure",Tt="placeholder",yt={allPagesFetched:!1,error:{},isLoading:!1,templates:{},templatesByTag:{},templatesOrderById:[],totalTemplates:null,totalPages:null};const wt=function(e,t){switch(t.type){case gt:return{...e,isLoading:t.payload};case St:return{...e,error:{...t.payload,id:Date.now()}};case Et:{const a=t.payload.templates.map((e=>{let{id:t}=e;return t})),o=1===t.payload.page?a:[...e.templatesOrderById,...a],r=[...new Set(o)];return{...e,error:{},templatesOrderById:r,templates:{...e.templates,..._t(t.payload.templates,"id")},isLoading:!1,totalPages:t.payload.totalPages,totalTemplates:t.payload.totalTemplates,allPagesFetched:t.payload.page>=t.payload.totalPages,templatesByTag:t.payload.templatesByTag}}case Tt:return yt;default:return e}};const vt=()=>{const[e,t]=(0,h.useReducer)(wt,yt),{cdnURL:o}=E(),r=(0,h.useCallback)((async()=>{t({type:gt,payload:!0});const e={},{getAllTemplates:r}=await Promise.all([a.e(1814),a.e(4991)]).then(a.bind(a,68104)),n=(await r({cdnURL:o})).map((t=>{const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{id:a,slug:o,modified:r,creationDate:n}=e;return a&&o?{...e,id:a,slug:o,creationDate:(0,st.toDate)(n,(0,mt.default)()),status:"template",modified:ht(r),isLocal:t}:null}(t);return a.tags.forEach((t=>{e[t]?e[t].push(a.id):e[t]=[a.id]})),a})).sort(((e,t)=>(0,lt.default)(e.creationDate,t.creationDate)));t({type:Et,payload:{page:1,templates:n,totalPages:1,totalTemplates:n.length,templatesByTag:e}})}),[o]),n=(0,h.useCallback)((t=>e.templates[t]?Promise.resolve(e.templates[t]):Promise.reject(new Error)),[e]);return{templates:e,api:{fetchExternalTemplates:r,fetchExternalTemplateById:n}}};const It=function(){const{apiCallbacks:{getAuthors:e}}=E();return{api:{getAuthors:e}}};const Ct=function(){const{apiCallbacks:{getTaxonomies:e,getTaxonomyTerms:t}}=E();return{api:{getTaxonomies:e,getTaxonomyTerms:t}}},At=(0,h.createContext)({state:{},actions:{}});function ApiProvider(e){let{children:t}=e;const{api:a}=It(),{api:o}=Ct(),{templates:n,api:i}=vt(),{stories:l,api:s}=it(),c={state:{stories:l,templates:n},actions:{storyApi:s,templateApi:i,usersApi:a,taxonomyApi:o}};return r.createElement(At.Provider,{value:c},t)}var Ot=a(21193),Lt=a(45697),kt=a.n(Lt),Pt=a(46324),Nt=a(22049);const Rt=(0,m.css)(["picture{display:block;& > img{display:block;height:100%;width:100%;object-fit:fill;border-radius:",";border:",";}}"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return`1px solid ${t.colors.border.defaultNormal}`})),xt=m.default.div.withConfig({displayName:"components__GalleryContainer",componentId:"sc-8jnrkn-0"})(["flex:1;display:flex;justify-content:space-between;align-items:start;"]),Mt=m.default.div.withConfig({displayName:"components__DisplayPage",componentId:"sc-8jnrkn-1"})(["overflow:hidden;width:38.6%;margin-left:2.1%;"," @media screen and (min-width:1600px){width:45.2%;margin-left:2.4%;}"],Rt);Mt.propTypes={$isThreeRows:kt().bool};const Dt=m.default.div.withConfig({displayName:"components__Thumbnails",componentId:"sc-8jnrkn-2"})(["position:relative;display:grid;width:52.3%;grid-template-columns:repeat(3,1fr);column-gap:8px;row-gap:16px;margin-right:16px;@media screen and (min-width:1600px){width:59.3%;grid-template-columns:repeat(4,1fr);}"]),Bt=(0,m.default)(Pt.Button).attrs({type:Nt.BUTTON_TYPES.PLAIN}).withConfig({displayName:"components__ThumbnailButton",componentId:"sc-8jnrkn-3"})(["display:block;height:100%;padding:0;border:none;background-color:transparent;position:relative;&:active{background-color:transparent;}"," ",";"],(e=>{let{$isSelected:t,theme:a}=e;return t&&(0,m.css)(["&:after{content:'';position:absolute;box-sizing:border-box;width:100%;height:100%;display:block;top:0;right:0;border-radius:",";border:4px solid ",";}"],a.borders.radius.medium,a.colors.interactiveBg.active)}),Rt);function Ft(e){return(0,M.default)(
/* translators: %s: page number. */
(0,n.__)("Poster of template page %s","web-stories"),e)}Bt.propTypes={$isSelected:kt().bool};const Ht=function CardGallery(e){let{galleryPosters:t,isRTL:a,galleryLabel:o}=e;const[i,l]=(0,h.useState)(0),[s,c]=(0,h.useState)(),d=(0,h.useRef)(),u=(0,h.useRef)(),p=(0,h.useRef)({}),m=(0,h.useCallback)((e=>{l(e),c(e)}),[]),b=(0,h.useCallback)((e=>{c(e)}),[]);(0,h.useEffect)((()=>{t&&(l(0),c())}),[t]),(0,Ot.default)({containerRef:d,gridRef:u,itemRefs:p,isRTL:a,currentItemId:s,items:t});const f=(0,h.useMemo)((()=>t.map(((e,t)=>{const a=`gallery_item_${t}`,o=t+1,l=s?s===t:i===t;return r.createElement("div",{key:a,ref:e=>{p.current[t]=e},onFocus:()=>b(t)},r.createElement(Bt,{$isSelected:i===t,tabIndex:l?0:-1,onClick:()=>m(t),"aria-label":i===t?(0,M.default)(
/* translators: %s: page number. */
(0,n.__)("Page %s (current page)","web-stories"),o):(0,M.default)(
/* translators: %s: page number. */
(0,n.__)("Page %s","web-stories"),o)},r.createElement("picture",null,r.createElement("source",{srcSet:e.webp,type:"image/webp"}),r.createElement("source",{srcSet:e.png,type:"image/png"}),r.createElement("img",{src:e.png,decoding:"async",alt:Ft(o),width:je,height:ze}))))}))),[t,i,s,b,m]);return r.createElement(xt,{ref:d},r.createElement(Dt,{ref:u,role:"group","aria-label":o,"data-testid":"mini-cards-container"},f),r.createElement(Mt,null,t[i]&&r.createElement("picture",null,r.createElement("source",{srcSet:t[i].webp,type:"image/webp"}),r.createElement("source",{srcSet:t[i].png,type:"image/png"}),r.createElement("img",{src:t[i].png,decoding:"async",alt:(0,M.default)(
/* translators: %s: active preview page number */
(0,n.__)("Active Page Preview - Page %s","web-stories"),i+1),width:je,height:ze}))))};var Ut=a(19722),Gt=a(33625);const Yt=kt().oneOf([...Object.values(W),...Object.values(_e)]),zt=kt().shape({id:kt().number.isRequired,status:Yt,title:kt().string.isRequired,modified:kt().oneOfType([kt().object,kt().string]),author:kt().object,capabilities:kt().shape({hasDeleteAction:kt().bool,hasEditAction:kt().bool})}),jt=kt().shape({id:kt().number.isRequired,status:Yt,title:kt().string.isRequired,pages:kt().array,modified:kt().object,colors:kt().arrayOf(kt().shape({label:kt().string.isRequired,color:kt().string.isRequired})),description:kt().string,tags:kt().arrayOf(kt().string),createdBy:kt().string,postersByPage:kt().arrayOf(kt().shape({webp:kt().string,png:kt().string,type:kt().string}))}),Vt=(kt().shape({id:kt().number.isRequired,name:kt().string.isRequired,slug:kt().string.isRequired,count:kt().number.isRequired}),kt().shape({id:kt().number.isRequired,parent:kt().number.isRequired,name:kt().string.isRequired,slug:kt().string.isRequired,count:kt().number.isRequired}),kt().shape({id:kt().number.isRequired,name:kt().string.isRequired,slug:kt().string.isRequired,avatarUrls:kt().object}),kt().arrayOf(zt),kt().arrayOf(jt).isRequired,kt().shape({duplicateStory:kt().func,trashStory:kt().func,updateStory:kt().func}),kt().shape({createStoryFromTemplate:kt().func,handleDetailsToggle:kt().func,switchToTemplateByOffset:kt().func}),kt().shape({all:kt().number,draft:kt().number,publish:kt().number}),kt().shape({width:kt().number,height:kt().number})),$t=(kt().shape({handleMenuToggle:kt().func.isRequired,contextMenuId:kt().number.isRequired,menuItems:kt().arrayOf(kt().shape({label:kt().string,value:kt().oneOfType([kt().string,kt().bool]),url:kt().string,isEnabled:kt().func,action:kt().func}))}),kt().shape({handleOnRenameStory:kt().func,id:kt().number,handleCancelRename:kt().func}),m.default.div.withConfig({displayName:"cardGrid__DashboardGrid",componentId:"sc-1kbl74q-0"})(["display:grid;width:100%;grid-column-gap:","px;grid-row-gap:","px;grid-template-columns:",";grid-template-rows:",";scroll-margin-top:30vh;",";"],ke,Pe,(e=>{let{columnWidth:t}=e;return`\n    repeat(auto-fill, ${t}px)`}),(e=>{let{columnHeight:t}=e;return`minmax(${t}px, auto)`}),(e=>{let{theme:t}=e;return(0,m.css)(["&.","{",";}"],Ut.FOCUS_VISIBLE_SELECTOR,Gt.focusCSS(t.colors.border.focus))})));$t.propTypes={columnHeight:kt().number,columnWidth:kt().number};const qt=(0,h.forwardRef)((function CardGrid(e,t){let{ariaLabel:a,children:o,pageSize:n}=e;return r.createElement($t,{ref:t,role:"list","data-testid":"dashboard-grid-list",tabIndex:0,"aria-label":a,columnWidth:n.width,columnHeight:n.height},o)}));var Wt=a(98448),Zt=a(44586),Kt=a(86376),Xt=a(8682),Qt=a(43688);function Jt(){return Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Jt.apply(this,arguments)}const ea=(0,m.default)(Kt.Link).withConfig({displayName:"link__StyledLink",componentId:"sc-1q07ax2-0"})(["",";background-color:transparent;text-decoration:none;:active,:hover,:focus,:active *,:hover *,:focus *{color:"," !important;}:hover{background-color:",";}:active{background-color:",";}"],Qt.menuItemStyles,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryPress}));const ta=function Link(e){let{id:t,onBlur:a,onClick:o,onFocus:n,openNewTab:i,...l}=e;const{focusedId:s,onDismiss:c,onMenuItemBlur:d,onMenuItemFocus:u}=(0,Xt.default)((e=>{let{state:t,actions:a}=e;return{focusedId:t.focusedId,onDismiss:a.onDismiss,onMenuItemBlur:a.onMenuItemBlur,onMenuItemFocus:a.onMenuItemFocus}})),p=(0,h.useMemo)(Zt.default,[]),m=t||p,b=i?{target:"_blank",rel:"noreferrer"}:{};return r.createElement(ea,Jt({id:m,tabIndex:s===m?0:-1,role:"menuitem",onBlur:e=>{d(),a?.(e)},onClick:e=>{o?.(e),c(e)},onFocus:e=>{u(m),n?.(e)}},b,l))};var aa=a(51537),oa=a(77568);const ra=m.default.button.withConfig({displayName:"storyMenu__MoreVerticalButton",componentId:"sc-1vaaobv-0"})(["display:flex;background:transparent;padding:0 8px;opacity:",";transition:opacity ease-in-out 300ms;cursor:pointer;color:",";& > svg{width:4px;max-height:100%;}border:0;border-radius:",";",";"],(e=>{let{menuOpen:t,isVisible:a}=e;return t||a?1:0}),(e=>{let{theme:t,$isInverted:a}=e;return a?t.colors.inverted.fg.primary:t.colors.interactiveFg.brandNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t,$isInverted:a}=e;return Gt.focusableOutlineCSS(!1,!!a&&t.colors.standard.black)}));ra.propTypes={menuOpen:kt().bool};const na=m.default.div.withConfig({displayName:"storyMenu__MenuContainer",componentId:"sc-1vaaobv-1"})(["position:relative;align-self:",";text-align:right;"," & > div{margin:0;}"],(e=>{let{verticalAlign:t="flex-start"}=e;return t}),(e=>{let{$menuStyleOverrides:t}=e;return t}));function StoryMenu(e){let{contextMenuId:t,onMoreButtonSelected:a,storyId:o,verticalAlign:i,menuItems:l,itemActive:s,tabIndex:c,menuStyleOverrides:d,menuLabel:u,isInverted:p}=e;const m=t===o,b=(0,h.useCallback)((e=>a(e,-1)),[a]);return r.createElement(na,{verticalAlign:i,"data-testid":`story-context-menu-${o}`,$menuStyleOverrides:d},r.createElement(ra,{"data-testid":`story-context-button-${o}`,tabIndex:c,menuOpen:m,isVisible:s,"aria-label":u||(0,n.__)("More Options","web-stories"),onClick:e=>a(e,m?-1:o),className:"context-menu-button",$isInverted:p},r.createElement(x,null)),r.createElement(Wt.default,{animate:!0,isOpen:m,onDismiss:b},l.map((e=>{let{label:t,separator:a,...o}=e;const n=o.href?ta:aa.default;return r.createElement(h.Fragment,{key:t},"top"===a&&r.createElement(oa.default,null),r.createElement(n,o,t),"bottom"===a&&r.createElement(oa.default,null))}))))}na.propTypes={verticalAlign:kt().oneOf(["center","flex-start","flex-end"])};const ia=m.default.div.attrs({role:"listitem"}).withConfig({displayName:"cardGridItem__CardGridItem",componentId:"sc-w3d579-0"})(["margin:0;width:100%;display:grid;grid-template-columns:100%;grid-template-rows:",";","{margin:12px 0;}&:hover ",",&:active ",",&:focus-within ","{opacity:1;}&:hover .card_buttons,&:active .card_buttons,&:focus-within .card_buttons{opacity:1;}"],(e=>{let{$posterHeight:t}=e;return`${t}px auto`}),ra,ra,ra,ra);ia.propTypes={$posterHeight:kt().number};const la=ia;var sa=a(4251);kt().shape({label:kt().string.isRequired,color:kt().string.isRequired});const ca=m.default.ul.withConfig({displayName:"colorList__ColorContainer",componentId:"sc-uphoth-0"})(["display:flex;margin:0;"]),da=m.default.li.withConfig({displayName:"colorList__Color",componentId:"sc-uphoth-1"})(["",""],(e=>{let{theme:t,$backgroundColor:a,color:o,size:r,spacing:n}=e;return`\n    width: ${r}px;\n    height: ${r}px;\n    border-radius: 50%;\n    margin-bottom: 0;\n    background-color: rgb(${a});\n    ${(e=>({"#fff":`border: solid 1px ${e}`,"#ffffff":`border: solid 1px ${e}`,white:`border: solid 1px ${e}`,"#fef9f1":`border: solid 1px ${e}`,"#fff8f2":`border: solid 1px ${e}`,"#f9f9f9":`border: solid 1px ${e}`,"#fcfcfc":`border: solid 1px ${e}`}))(t.colors.border.defaultNormal)[o]||""};\n\n    & + & {\n      margin-left: ${n||10}px;\n    }\n  `}));const ua=function ColorList(e){let{colors:t,size:a,spacing:o,...n}=e;return r.createElement(ca,n,t.map((e=>{let{label:t,color:n}=e;const{r:i,g:l,b:s}=(0,sa.default)(n).color,c=`${i}, ${l}, ${s}`;return r.createElement(da,{key:n,size:a,spacing:o,color:n,$backgroundColor:c,title:t,ariaLabel:t,"data-testid":"detail-template-color"})})))},pa=m.default.div.withConfig({displayName:"contentGutter__StandardViewContentGutter",componentId:"sc-17seiz9-0"})(["margin:0 ","px;"],Ne);var ma=a(70250);function ba(){return ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},ba.apply(this,arguments)}const fa=e=>{let{onClose:t,onSecondary:a,onPrimary:o,primaryText:n,secondaryText:i,primaryRest:s,secondaryRest:c,actions:d,children:u,...p}=e;const b=(0,h.useMemo)((()=>n&&r.createElement(Pt.Button,ba({type:Nt.BUTTON_TYPES.PRIMARY,size:Nt.BUTTON_SIZES.SMALL,onClick:()=>o?.()},s),n)),[n,s,o]),f=(0,h.useMemo)((()=>i&&r.createElement(Pt.Button,ba({type:Nt.BUTTON_TYPES.TERTIARY,size:Nt.BUTTON_SIZES.SMALL,onClick:()=>a?.()||t()},c),i)),[i,c,a,t]);return r.createElement(m.ThemeProvider,{theme:l.theme},r.createElement(ma.Dialog,ba({onClose:t},p,{actions:d||r.createElement(r.Fragment,null,f,b)}),u))};var ha=a(67480),_a=a(22437);const ga=(0,m.default)(Pt.Button).withConfig({displayName:"fileUpload__StyledButton",componentId:"sc-1egk7ci-0"})([":focus-within{","}"],(e=>{let{theme:t}=e;return Gt.focusCSS(t.colors.border.focus)})),Ea=m.default.input.withConfig({displayName:"fileUpload__Input",componentId:"sc-1egk7ci-1"})(_a.visuallyHidden),Sa=m.default.div.withConfig({displayName:"fileUpload__UploadFormArea",componentId:"sc-1egk7ci-2"})(["display:flex;flex-direction:column;align-items:center;position:relative;justify-content:flex-end;width:100%;min-height:153px;padding:40px 0;border-radius:4px;border:1px dashed ",";transition:border-color 300ms ease-in;"],(e=>{let{isDragging:t,theme:a}=e;return t?a.colors.border.focus:a.colors.border.defaultNormal})),Ta=(0,m.default)(ha.Text).withConfig({displayName:"fileUpload__UploadHelperText",componentId:"sc-1egk7ci-3"})(["margin:0 auto 16px;padding:0 20%;text-align:center;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),ya=m.default.div.withConfig({displayName:"fileUpload__LoadingIndicator",componentId:"sc-1egk7ci-4"})(["display:flex;align-items:center;justify-content:center;position:absolute;top:0;width:100%;height:100%;background-color:",";opacity:",";z-index:",";pointer-events:none;transition:opacity ease-in-out 300ms;p{font-style:italic;}"],(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{isLoading:t}=e;return t?.6:0}),(e=>{let{isLoading:t}=e;return t?"100":"0"}));function wa(e){e.preventDefault(),e.stopPropagation()}const va=e=>{let{id:t,label:a,onSubmit:o,isLoading:i,isMultiple:l,ariaLabel:s,instructionalText:c=(0,n.__)("You can also drag your file here","web-stories"),acceptableFormats:d=we}=e;const u=(0,h.useRef)(null),p=(0,h.useRef)(null),[m,b]=(0,h.useState)(!1),f=(0,h.useCallback)((e=>{o(Object.values(e))}),[o]),_=(0,h.useCallback)((e=>{wa(e),f(e.target.files),p.current.value=null}),[f]),g=(0,h.useCallback)((e=>{wa(e);const t=e.dataTransfer.files;t&&f(t),b(!1)}),[f]),E=(0,h.useCallback)((e=>{wa(e),b((e=>!e)),m&&e.dataTransfer.clearData()}),[m]);return(0,h.useEffect)((()=>{if(!p?.current)return()=>{};const e=p.current;return e.addEventListener("change",_),()=>{e.removeEventListener("change",_)}}),[_]),r.createElement(Sa,{ref:u,isDragging:m,onDrop:g,onDragEnter:E,onDragLeave:E,onDragOver:wa,"data-testid":"file-upload-drop-area"},r.createElement(ya,{isLoading:i},r.createElement("p",null,(0,n.__)("Loading…","web-stories"))),r.createElement(Ta,null,c),r.createElement(ga,{forwardedAs:"label",htmlFor:t,"aria-label":s,type:Nt.BUTTON_TYPES.PRIMARY,size:Nt.BUTTON_SIZES.SMALL},a,r.createElement(Ea,{ref:p,type:"file",id:t,"data-testid":"upload-file-input",accept:d.join(","),multiple:l,disabled:i,"aria-live":"polite","aria-busy":i})))};var Ia=a(91778),Ca=a(35199),Aa=a(6215);function Oa(){return Oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Oa.apply(this,arguments)}const La=m.default.div.withConfig({displayName:"input__Container",componentId:"sc-1dusq6m-0"})(["position:relative;display:inline-block;width:100%;min-width:40px;"]),ka=(0,m.default)(ha.Text).withConfig({displayName:"input__Label",componentId:"sc-1dusq6m-1"})(["margin-bottom:12px;display:inline-block;"]),Pa=(0,m.default)(ha.Text).withConfig({displayName:"input__Hint",componentId:"sc-1dusq6m-2"})(["display:inline-block;margin-top:12px;color:",";"],(e=>{let{hasError:t,theme:a}=e;return a.colors.fg[t?"negative":"tertiary"]})),Na=(0,m.default)(ha.Text).withConfig({displayName:"input__Suffix",componentId:"sc-1dusq6m-3"})(["background:transparent;color:",";white-space:nowrap;svg{width:32px;height:32px;margin:2px -10px;display:block;}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Ra=m.default.div.withConfig({displayName:"input__InputContainer",componentId:"sc-1dusq6m-4"})((e=>{let{focused:t,hasError:a,theme:o,styleOverride:r}=e;return(0,m.css)(["display:flex;align-items:center;justify-content:space-between;height:36px;padding:4px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";",";:focus-within{",";}",";"],o.colors.border[a?"negativeNormal":"defaultNormal"],o.borders.radius.small,t&&!a&&(0,m.css)(["border-color:",";"],o.colors.border.defaultActive),t&&(0,m.css)(["","{color:",";}"],Na,o.colors.fg.primary),(0,Gt.focusCSS)(o.colors.border.focus),r)})),xa=m.default.input.withConfig({displayName:"input__BaseInput",componentId:"sc-1dusq6m-5"})((e=>{let{hasSuffix:t,theme:a}=e;return(0,m.css)(["height:100%;width:100%;padding:0;"," background-color:inherit;border:none;outline:none;box-shadow:none;color:",";",";::placeholder{color:",";}:disabled{color:",";border-color:",";& ~ ","{color:",";}}:focus{box-shadow:none;}:active:enabled{color:",";}"],t&&(0,m.css)(["padding-right:8px;"]),a.colors.fg.primary,Ca.expandPresetStyles({preset:{...a.typography.presets.paragraph[Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:a}),a.colors.fg.tertiary,a.colors.fg.disable,a.colors.border.disable,Na,a.colors.fg.disable,a.colors.fg.primary)})),Ma=(0,h.forwardRef)(((e,t)=>{let{inputClassName:a,className:o,disabled:n,hasError:i,hint:l,id:s,label:c,onBlur:d,onFocus:u,hasFocus:p=!1,suffix:m,unit:b="",value:f="",isIndeterminate:_=!1,containerStyleOverride:g="",...E}=e;const S=(0,h.useMemo)((()=>s||(0,Zt.default)()),[s]),[T,y]=(0,h.useState)(p),[w,v]=(0,h.useState)(!1);let I=f;b&&f.length&&(I=`${f}${T?"":`${b}`}`),_&&(I="");const C=Boolean(m);return r.createElement(La,{className:o},c&&r.createElement(ka,{htmlFor:S,forwardedAs:"label",disabled:n},c),r.createElement(Ra,{focused:T,hasError:i,styleOverride:g},r.createElement(xa,Oa({id:S,disabled:n,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&T&&!w&&(e.select(),v(!0))},onFocus:e=>{u?.(e),y(!0),v(!1)},onBlur:e=>{d?.(e),y(!1)},value:I,hasSuffix:C,className:a},E)),C&&r.createElement(Na,{hasLabel:Boolean(c),forwardedAs:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:()=>y(!0)},m)),l&&r.createElement(Pa,{hasError:i},l))}));Aa.default,kt().string,kt().bool,kt().bool,kt().string,kt().string,Aa.default,kt().func,kt().func.isRequired,kt().func,kt().node,kt().string,kt().string,kt().bool,kt().oneOfType([kt().object,kt().array]);Ma.displayName="Input";const Da=(0,m.default)(Ma).withConfig({displayName:"inlineInputForm__StyledInput",componentId:"sc-21xnmy-0"})(["div{height:auto;}",""],(e=>{let{$isInverted:t,theme:a}=e;return t&&(0,m.css)(["input{color:",";}"],a.colors.inverted.fg.primary)})),Ba=e=>{let{noAutoFocus:t,error:a,id:o,isInverted:n,label:i,onEditCancel:l,onEditComplete:s,placeholder:c,value:d}=e;const u=(0,h.useRef)(null),[p,m]=(0,h.useState)(d);(0,h.useEffect)((()=>{m(d)}),[d]),(0,h.useFocusOut)(u,(()=>{l()}),[l]),(0,h.useEffect)((()=>{!t&&u.current&&u.current.querySelector("input")?.focus()}),[t]);const b=(0,h.useCallback)((e=>{let{target:t}=e;m(t.value)}),[m]),f=(0,h.useCallback)((e=>{let{nativeEvent:t}=e;13===t.keyCode?s(p):27===t.keyCode&&l()}),[p,s,l]);return r.createElement("div",{ref:u},r.createElement(Da,{"aria-label":i,id:`${o}`,"data-testid":"inline-input-form",value:p,onKeyDown:f,onChange:b,placeholder:c,hasError:Boolean(a),hint:a,$isInverted:n}))},Fa=(0,h.createContext)(null),Ha=e=>{let{children:t}=e;const a=(0,h.useRef)(),o=(0,h.useRef)(null);(0,h.useEffect)((()=>{a.current=document?.getElementById("web-stories-dashboard")?.querySelector(["button","a"])}),[]);const n=(0,h.useCallback)((()=>{document.documentElement?.scrollTo?.({top:0,behavior:"smooth"}),a.current?.focus()}),[]),i=(0,h.useMemo)((()=>({state:{scrollFrameRef:o},actions:{scrollToTop:n}})),[n]);return r.createElement(Fa.Provider,{value:i},t)},Ua=()=>{const e=(0,h.useContext)(Fa);if(!e)throw new Error("useLayoutContext() must be used within a <Layout.Provider />");return e},Ga=m.default.div.withConfig({displayName:"scrollable__ScrollContent",componentId:"sc-17i1z8u-0"})([""]),Ya=e=>{let{children:t}=e;const{state:{scrollFrameRef:a}}=Ua();return r.createElement(Ga,{ref:a},t)},za=m.default.div.withConfig({displayName:"fixed__FixedContent",componentId:"sc-735v4o-0"})(["position:absolute;top:0;right:0;bottom:0;left:0;z-index:",";overflow:hidden;pointer-events:none;& > *{pointer-events:auto;}"],Re),ja={Provider:Ha,Scrollable:Ya,Fixed:e=>{let{children:t}=e;return r.createElement(za,null,t)}},Va=m.default.div.withConfig({displayName:"pageStructureComponents__AppFrame",componentId:"sc-199ev3j-0"})(["width:100%;@media screen and (max-width:","px){width:","px;}"],Ie,Ie),$a=m.default.div.withConfig({displayName:"pageStructureComponents__PageContent",componentId:"sc-199ev3j-1"})(["position:relative;padding-top:10px;width:",";left:",";@media screen and (max-width:","px){left:0;width:100%;}"],(e=>{let{fullWidth:t}=e;return t?"100%":"calc(100% - 288px)"}),(e=>{let{fullWidth:t}=e;return t?"0":"288px"}),Ie),qa=m.default.nav.attrs({"data-testid":"dashboard-left-rail"}).withConfig({displayName:"pageStructureComponents__LeftRailContainer",componentId:"sc-199ev3j-2"})(["position:fixed;display:flex;justify-content:space-between;flex-direction:column;top:",";bottom:0;width:","px;background:",";z-index:",";transition:transform 0.25s ",",opacity 0.25s linear;@media screen and (max-width:","px){padding-left:0;opacity:",";visibility:",";transform:translateX(",");}"],(e=>{let{topOffset:t}=e;return`${t}px`}),ve,(e=>{let{theme:t}=e;return t.colors.bg.primary}),Re,Ia.BEZIER.outCubic,Ie,(e=>{let{isOpen:t}=e;return t?1:0}),(e=>{let{isOpen:t}=e;return t?"visible":"hidden"}),(e=>{let{isOpen:t}=e;return t?"none":"-100%"})),Wa=m.default.div.withConfig({displayName:"pageStructureComponents__LoadingContainer",componentId:"sc-199ev3j-3"})(["display:flex;justify-content:center;align-items:center;min-height:550px;"]);var Za,Ka,Xa,Qa;function Ja(){return Ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Ja.apply(this,arguments)}const SvgLogoWithTypeCircleColor=e=>{let{title:t,titleId:a,...o}=e;return r.createElement("svg",Ja({viewBox:"0 0 212 64",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},o),t?r.createElement("title",{id:a},t):null,Za||(Za=r.createElement("circle",{cx:32,cy:32,r:32,transform:"rotate(-180 32 32)",fill:"url(#a)"})),Ka||(Ka=r.createElement("g",{filter:"url(#b)",fill:"#fff"},r.createElement("path",{d:"M41.6 19.2a3.2 3.2 0 0 1 3.2 3.2v19.2a3.2 3.2 0 0 1-3.2 3.2V19.2zm-24 0a3.2 3.2 0 0 1 3.2-3.2h14.4a3.2 3.2 0 0 1 3.2 3.2v25.6a3.2 3.2 0 0 1-3.2 3.2H20.8a3.2 3.2 0 0 1-3.2-3.2V19.2zM48 22.4a2.4 2.4 0 0 1 2.4 2.4v14.4a2.4 2.4 0 0 1-2.4 2.4V22.4z"}))),Xa||(Xa=r.createElement("path",{d:"m80.78 40.4-4.967-18.33h2.407l3.328 13.466.307 1.254h.102l.384-1.254 4.096-13.466h2.253l3.917 13.466.384 1.254h.102l3.61-14.72h2.406L94.17 40.4h-2.253l-3.892-13.261-.41-1.434h-.102l-.435 1.434-4.045 13.26H80.78zm24.747.41c-1.263 0-2.389-.3-3.379-.897a6.391 6.391 0 0 1-2.304-2.457c-.546-1.041-.82-2.227-.82-3.559 0-1.245.257-2.397.769-3.456.529-1.058 1.263-1.903 2.201-2.534.956-.649 2.074-.973 3.354-.973 1.297 0 2.406.29 3.328.87a5.53 5.53 0 0 1 2.15 2.356c.512 1.007.768 2.159.768 3.456 0 .12-.008.239-.025.358 0 .12-.009.222-.026.307h-10.342c.068 1.024.315 1.878.742 2.56.444.666.99 1.17 1.638 1.51a4.47 4.47 0 0 0 2.023.487c.956 0 1.741-.222 2.355-.665a5.278 5.278 0 0 0 1.51-1.69l1.844.896a6.603 6.603 0 0 1-2.202 2.458c-.956.648-2.15.972-3.584.972zm-.179-11.905c-1.058 0-1.937.333-2.637.999s-1.161 1.527-1.382 2.585h7.961c-.017-.495-.162-1.015-.435-1.561-.256-.563-.666-1.041-1.229-1.434-.563-.392-1.322-.589-2.278-.589zm15.423 11.904c-1.041 0-1.954-.239-2.739-.716-.785-.478-1.357-1.016-1.715-1.613h-.103v1.92h-2.073V22.07h2.176v5.402l-.103 1.817h.103c.358-.614.93-1.16 1.715-1.638s1.698-.717 2.739-.717c1.195 0 2.262.299 3.2.896.939.598 1.681 1.417 2.227 2.458.547 1.04.82 2.236.82 3.584 0 1.348-.273 2.543-.82 3.584-.546 1.04-1.288 1.86-2.227 2.457-.938.598-2.005.896-3.2.896zm-.23-1.97a3.98 3.98 0 0 0 2.099-.59c.666-.41 1.195-.99 1.587-1.74.41-.751.615-1.63.615-2.637 0-1.024-.205-1.903-.615-2.637-.392-.75-.921-1.323-1.587-1.715a3.857 3.857 0 0 0-2.099-.615c-.751 0-1.459.205-2.125.615-.648.392-1.178.964-1.587 1.715-.41.734-.615 1.613-.615 2.637s.205 1.911.615 2.662c.409.734.939 1.306 1.587 1.715a4.116 4.116 0 0 0 2.125.59zm19.73 1.97a6.608 6.608 0 0 1-2.637-.563 6.642 6.642 0 0 1-2.304-1.664c-.665-.734-1.152-1.647-1.459-2.739l2.074-.845c.29 1.058.819 1.946 1.587 2.663.768.716 1.698 1.075 2.79 1.075.683 0 1.306-.12 1.869-.359a3.286 3.286 0 0 0 1.382-1.1c.359-.478.538-1.059.538-1.741 0-.905-.341-1.622-1.024-2.15-.666-.547-1.655-1.05-2.97-1.511l-1.152-.41a13.954 13.954 0 0 1-2.048-.972 5.22 5.22 0 0 1-1.689-1.536c-.444-.649-.666-1.46-.666-2.432 0-.888.239-1.699.717-2.432.478-.734 1.135-1.323 1.971-1.767.837-.444 1.801-.665 2.893-.665 1.143 0 2.099.213 2.867.64.785.41 1.4.904 1.843 1.484.461.564.768 1.084.922 1.562l-2.022.87c-.103-.358-.299-.725-.589-1.1-.29-.393-.683-.717-1.178-.973-.478-.273-1.083-.41-1.817-.41-.598 0-1.161.12-1.69.359-.512.239-.93.571-1.254.998-.308.41-.461.887-.461 1.434 0 .768.307 1.373.921 1.817.615.444 1.443.845 2.484 1.203l1.203.41c.546.188 1.101.418 1.664.691.58.273 1.118.623 1.613 1.05.495.426.896.956 1.203 1.587.307.614.461 1.357.461 2.227 0 .939-.188 1.75-.564 2.432a4.746 4.746 0 0 1-1.433 1.639 5.972 5.972 0 0 1-1.971.921c-.7.205-1.391.307-2.074.307zm13.187-.204c-1.092 0-1.971-.316-2.636-.948-.666-.648-.999-1.544-.999-2.688v-7.654h-2.278v-1.971h2.278v-3.687h2.176v3.687h3.2v1.971h-3.2v7.117c0 .683.137 1.212.41 1.587.29.376.759.563 1.408.563.29 0 .555-.042.793-.128.239-.085.453-.187.64-.307v2.125c-.221.102-.469.179-.742.23-.256.069-.606.103-1.05.103zm9.799.204c-1.314 0-2.475-.307-3.482-.921a6.658 6.658 0 0 1-2.381-2.483c-.563-1.058-.844-2.236-.844-3.533 0-1.297.281-2.466.844-3.507a6.605 6.605 0 0 1 2.381-2.51c1.007-.614 2.168-.92 3.482-.92s2.474.315 3.481.946a6.418 6.418 0 0 1 2.356 2.51c.58 1.04.87 2.2.87 3.48 0 1.298-.29 2.475-.87 3.534a6.465 6.465 0 0 1-2.356 2.483c-1.007.614-2.167.921-3.481.921zm0-1.97a4.34 4.34 0 0 0 2.201-.59 4.462 4.462 0 0 0 1.69-1.69c.427-.75.64-1.646.64-2.687s-.213-1.929-.64-2.663c-.427-.75-.99-1.322-1.69-1.715a4.34 4.34 0 0 0-2.201-.589c-.785 0-1.528.197-2.227.59-.7.392-1.263.963-1.69 1.714-.427.734-.64 1.622-.64 2.663 0 1.04.213 1.937.64 2.688.427.734.99 1.297 1.69 1.69a4.48 4.48 0 0 0 2.227.588zm8.984 1.56V27.345h2.073v2.099h.103a3.05 3.05 0 0 1 .845-1.28 4.5 4.5 0 0 1 1.382-.87 4.02 4.02 0 0 1 1.562-.333c.392 0 .699.025.921.077.222.034.427.094.615.179v2.355c-.547-.273-1.161-.41-1.844-.41-.631 0-1.211.18-1.74.538a4.003 4.003 0 0 0-1.28 1.434 4.236 4.236 0 0 0-.461 1.97V40.4h-2.176zm10.88-15.462c-.427 0-.794-.153-1.101-.46a1.503 1.503 0 0 1-.461-1.101c0-.444.154-.81.461-1.101.307-.307.674-.46 1.101-.46.444 0 .81.153 1.101.46.307.29.46.657.46 1.1 0 .428-.153.794-.46 1.102a1.45 1.45 0 0 1-1.101.46zM182.046 40.4V27.344h2.176V40.4h-2.176zm11.256.41c-1.263 0-2.389-.3-3.379-.897a6.39 6.39 0 0 1-2.304-2.457c-.546-1.041-.819-2.227-.819-3.559 0-1.245.256-2.397.768-3.456.529-1.058 1.263-1.903 2.201-2.534.956-.649 2.074-.973 3.354-.973 1.297 0 2.406.29 3.328.87a5.523 5.523 0 0 1 2.15 2.356c.512 1.007.768 2.159.768 3.456 0 .12-.008.239-.025.358 0 .12-.009.222-.026.307h-10.342c.068 1.024.315 1.878.742 2.56.444.666.99 1.17 1.638 1.51a4.47 4.47 0 0 0 2.023.487c.956 0 1.741-.222 2.355-.665a5.278 5.278 0 0 0 1.51-1.69l1.844.896a6.603 6.603 0 0 1-2.202 2.458c-.956.648-2.15.972-3.584.972zm-.179-11.905c-1.058 0-1.937.333-2.637.999s-1.16 1.527-1.382 2.585h7.961c-.017-.495-.162-1.015-.435-1.561-.256-.563-.666-1.041-1.229-1.434-.563-.392-1.322-.589-2.278-.589zm13.475 11.904c-1.468 0-2.663-.34-3.584-1.024-.922-.7-1.562-1.527-1.92-2.483l1.945-.87c.342.785.828 1.39 1.459 1.817a3.75 3.75 0 0 0 2.1.64c.768 0 1.45-.162 2.048-.486.614-.324.921-.802.921-1.434 0-.58-.256-1.032-.768-1.356-.495-.325-1.194-.598-2.099-.82l-1.587-.41c-.615-.17-1.195-.409-1.741-.716s-.99-.7-1.331-1.178c-.324-.494-.487-1.092-.487-1.792 0-.785.231-1.459.692-2.022.46-.563 1.066-.99 1.817-1.28a6.294 6.294 0 0 1 2.407-.46c1.109 0 2.116.247 3.02.742.922.478 1.571 1.169 1.946 2.073l-1.894.87c-.325-.648-.76-1.1-1.306-1.356s-1.143-.384-1.792-.384c-.683 0-1.306.162-1.869.486-.546.307-.819.734-.819 1.28s.213.956.64 1.229c.444.273.981.495 1.613.666l1.894.486c2.577.666 3.866 1.929 3.866 3.789 0 .819-.231 1.527-.691 2.125-.461.597-1.084 1.058-1.869 1.382-.785.324-1.656.486-2.611.486z",fill:"#000"})),Qa||(Qa=r.createElement("defs",null,r.createElement("linearGradient",{id:"a",x1:13.255,y1:6.599,x2:35.289,y2:62.791,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#79B3FF"}),r.createElement("stop",{offset:1,stopColor:"#CBACFF"})),r.createElement("filter",{id:"b",x:8.96,y:10.24,width:46.08,height:46.08,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},r.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),r.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),r.createElement("feOffset",{dy:1.28}),r.createElement("feGaussianBlur",{stdDeviation:1.92}),r.createElement("feColorMatrix",{values:"0 0 0 0 0.423529 0 0 0 0 0.490196 0 0 0 0 0.733333 0 0 0 0.3 0"}),r.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),r.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})))))},eo=(0,r.memo)(SvgLogoWithTypeCircleColor);var to=a(55648);const ao=(0,h.createContext)({state:{},actions:{}});const oo=function RouterProvider(e){let{children:t,...a}=e;const o=(0,h.useRef)(a.history||(0,to.createHashHistory)()),[n,i]=(0,h.useState)(o.current.location.pathname),[l,s]=(0,h.useState)([]),c=xe.DASHBOARD,d=(0,h.useMemo)((()=>(e=>{let{availableRoutes:t,currentPath:a,defaultRoute:o}=e;const r=t.filter((e=>a.startsWith(e)));return r.length<=1?o:a})({availableRoutes:l,currentPath:n,defaultRoute:c})),[l,n,c]),u=e=>{const t=new URLSearchParams(e);return Object.fromEntries(t)},[p,m]=(0,h.useState)(u(o.current.location.search));(0,h.useEffect)((()=>o.current.listen((e=>{let{location:t}=e;m(u(t.search)),i(t.pathname)}))),[]);const b=(0,h.useMemo)((()=>({state:{activeRoute:d,currentPath:n,queryParams:p,availableRoutes:l,defaultRoute:c},actions:{push:o.current.push,replace:o.current.replace,setAvailableRoutes:s}})),[d,l,n,c,p]);return r.createElement(ao.Provider,{value:b},t)};const ro=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.identity;return(0,h.useContextSelector)(ao,e)};function no(e){return e.toLowerCase().startsWith("http://")||e.toLowerCase().startsWith("https://")?e:e.startsWith("/")?`#${e}`:""===e?"#/":`${window.location.hash}/${e}`}function Route(e){let{component:t,path:a,exact:o=!1,isDefault:r=!1}=e;const{availableRoutes:n,currentPath:i,defaultRoute:l}=ro((e=>{let{state:t}=e;return t})),s=function(e){let{currentPath:t,path:a,availableRoutes:o,defaultRoute:r,isDefault:n=!1,exact:i=!1}=e;const l=new RegExp(`^${a}`).exec(t);if(!l&&!n)return null;const s=l?.[0];if(n){const e=o.filter((e=>t.startsWith(e))).length<=1;if(e)return r}return i&&t!==s?null:s}({currentPath:i,availableRoutes:n,defaultRoute:l,path:a,exact:o,isDefault:r});return s?t:null}Route.propTypes={component:kt().node.isRequired,path:kt().string.isRequired,exact:kt().bool,isDefault:kt().bool};const io=Route,lo=(0,h.createContext)({actions:{},state:{}});function so(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.identity;return(0,h.useContextSelector)(lo,e)}function NavProvider(e){let{children:t}=e;const[a,o]=(0,h.useState)(!1),n=(0,h.useCallback)((()=>{o(!a)}),[a]),i=(0,h.useMemo)((()=>({actions:{toggleSideBar:n},state:{sideBarVisible:a}})),[a,n]);return r.createElement(lo.Provider,{value:i},t)}var co=a(19901);const uo=m.default.div.withConfig({displayName:"navigationComponents__Content",componentId:"sc-6htb2i-0"})(["display:flex;flex-direction:column;margin:20px 0;> *{margin:20px 28px;}"]),po=(0,m.default)(co.Headline).withConfig({displayName:"navigationComponents__Header",componentId:"sc-6htb2i-1"})(["margin:42px 0px 72px;& > svg{margin:0 28px;height:64px;}"]),mo=m.default.ul.withConfig({displayName:"navigationComponents__NavList",componentId:"sc-6htb2i-2"})(["margin:0;padding:0;"]),bo=m.default.li.withConfig({displayName:"navigationComponents__NavListItem",componentId:"sc-6htb2i-3"})(["margin:10px 28px;padding:0;list-style-type:none;"]),fo=(0,m.css)(["span{color:",";}svg path{stroke:",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveFg.brandPress}),(e=>{let{theme:t}=e;return t.colors.interactiveFg.brandPress})),ho=(0,m.default)(Kt.Link).withConfig({displayName:"navigationComponents__NavLink",componentId:"sc-6htb2i-4"})((e=>{let{active:t,theme:a,isIconLink:o}=e;return(0,m.css)([""," color:",";*{transition:color 0.25s linear,stroke 0.25s linear;}",";:hover{",";}"],o&&(0,m.css)(["display:grid;grid-template-columns:1fr 4fr;grid-template-areas:'icon link link link link';"]),a.colors.fg.secondary,t&&fo,fo)})),_o=(0,m.default)(ha.Text).withConfig({displayName:"navigationComponents__PathName",componentId:"sc-6htb2i-5"})(["grid-area:link;"]),go=(0,m.default)(ha.Text).withConfig({displayName:"navigationComponents__AppInfo",componentId:"sc-6htb2i-6"})((e=>{let{theme:t}=e;return(0,m.css)(["color:",";"],t.colors.fg.secondary)}));function Eo(){return Eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Eo.apply(this,arguments)}const So=m.default.div.withConfig({displayName:"leftRail__IconWrap",componentId:"sc-wua966-0"})(["position:relative;"]);const To=function LeftRail(){const e=ro((e=>{let{state:t}=e;return t.activeRoute})),{newStoryURL:t,version:a,leftRailSecondaryNavigation:o,canViewDefaultTemplates:i,styleConstants:{topOffset:l}}=E(),s=(0,h.useRef)(null),c=(0,h.useRef)(null),{state:{sideBarVisible:d},actions:{toggleSideBar:u}}=so(),p=(0,h.useCallback)((e=>{let{target:t}=e;t!==s.current&&t!==c.current&&u()}),[u,s,c]),m=(0,h.useCallback)((()=>{d&&u()}),[u,d]);(0,h.useFocusOut)(s,m,[d]),(0,h.useLayoutEffect)((()=>{d&&s.current&&s.current.focus()}),[d]);const b=(0,h.useCallback)((()=>{(0,y.trackEvent)("create_new_story")}),[]),f=(0,h.useCallback)(((e,t)=>{(0,y.trackClick)(e,t.trackingEvent)}),[]);return r.createElement(qa,{onClickCapture:p,ref:s,isOpen:d,topOffset:l,role:"navigation","aria-label":(0,n.__)("Main dashboard navigation","web-stories")},r.createElement("div",{ref:c},r.createElement(po,{forwardedAs:"h2"},r.createElement(eo,{title:(0,n.__)("Web Stories Dashboard","web-stories")})),r.createElement(uo,null,r.createElement(Pt.Button,{type:Nt.BUTTON_TYPES.QUATERNARY,size:Nt.BUTTON_SIZES.SMALL,href:t,onClick:b},(0,n.__)("Create New Story","web-stories"))),r.createElement(uo,null,r.createElement(mo,null,De.map((t=>{let{Icon:a,...o}=t;return o.value===xe.TEMPLATES_GALLERY&&!i?null:r.createElement(bo,{key:o.value},r.createElement(ho,Eo({active:e===o.value,href:no(o.value),size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0,isIconLink:Boolean(a),"aria-label":e===o.value?(0,M.default)(
/* translators: %s: the current page, for example "Dashboard". */
(0,n.__)("%s (active view)","web-stories"),o.label):o.label},o.isExternal&&{rel:"noreferrer",target:"_blank",onClick:e=>f(e,o)}),r.createElement(So,null,a&&r.createElement(a,{width:"22px"})),r.createElement(_o,{as:"span",isBold:!0},o.label)))}))))),r.createElement(uo,null,o&&r.createElement(mo,null,o.map((t=>r.createElement(bo,{key:t.value},r.createElement(ho,Eo({active:e===t.value,href:no(t.value),size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,"aria-label":e===t.value?(0,M.default)(
/* translators: %s: the current page, for example "Dashboard". */
(0,n.__)("%s (active view)","web-stories"),t.label):t.label},t.isExternal&&{rel:"noreferrer",target:"_blank",onClick:e=>f(e,t)}),r.createElement(ha.Text,{as:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},t.label)))))),r.createElement(go,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,M.default)(
/* translators: 1: Current Year, 2: App Version */
(0,n.__)("© %1$s Google Version %2$s","web-stories"),(new Date).getFullYear(),a))))},yo=(0,m.default)(P).attrs({width:24,height:24}).withConfig({displayName:"menuButton__MenuIcon",componentId:"sc-ov12l5-0"})(["display:block;color:",";"],(e=>{let{theme:t}=e;return t.colors.interactiveFg.brandNormal})),wo=m.default.button.withConfig({displayName:"menuButton__TransparentButton",componentId:"sc-ov12l5-1"})(["display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;padding:0;margin-right:16px;background:transparent;border:0;border-radius:",";"," ",""],(e=>{let{theme:t}=e;return t.borders.radius.small}),Gt.focusableOutlineCSS,(e=>{let{showOnlyOnSmallViewport:t}=e;return t&&(0,m.css)(["display:none;@media screen and (max-width:","px){display:inline-block;}"],Ie)}));const vo=function NavMenuButton(e){let{showOnlyOnSmallViewport:t}=e;const{actions:a}=so();return r.createElement(wo,{onClick:a.toggleSideBar,showOnlyOnSmallViewport:t,"aria-label":(0,n.__)("Toggle main navigation","web-stories")},r.createElement(yo,{"aria-hidden":!0}))};var Io=a(99832);const Co=(0,m.default)(Pt.Button).withConfig({displayName:"scrollToTop__StyledButton",componentId:"sc-o0u22z-0"})((e=>{let{$isVisible:t,theme:a}=e;return(0,m.css)(["position:fixed;right:40px;bottom:40px;height:50px;width:50px;display:flex;align-self:center;justify-content:space-around;align-items:center;contain:content;padding:8px;background-color:",";pointer-events:",";box-shadow:0px 4px 14px rgba(0,0,0,0.25);opacity:",";transition:opacity 300ms ease-in-out;"],a.colors.opacity.white64,t?"auto":"none",Number(t))})),Ao=(0,m.default)(Io.default).withConfig({displayName:"scrollToTop__DropUpArrowIcon",componentId:"sc-o0u22z-1"})(["position:relative;transform:scale(2.4);"]),Oo=()=>{const[e,t]=(0,h.useState)(!1),{actions:{scrollToTop:a}}=Ua(),o=(0,h.useDebouncedCallback)((()=>t(window.scrollY>0)),100);return(0,h.useEffect)((()=>(window.addEventListener("scroll",o,{passive:!0}),function(){window.removeEventListener("scroll",o,{passive:!0})})),[o]),r.createElement(Co,{disabled:!e,"aria-label":(0,n.__)("Scroll back to top","web-stories"),"data-testid":"scroll-to-top-button",$isVisible:e,onClick:a,variant:Nt.BUTTON_VARIANTS.CIRCLE},r.createElement(Ao,{"aria-hidden":!0}))},Lo=m.default.table.withConfig({displayName:"table__Table",componentId:"sc-16y5cap-0"})([""," border-collapse:collapse;width:inherit;"],Ca.expandTextPreset(((e,t)=>{let{paragraph:a}=e,{SMALL:o}=t;return a[o]}))),ko=m.default.tbody.withConfig({displayName:"table__TableBody",componentId:"sc-16y5cap-1"})([""]),Po=m.default.thead.withConfig({displayName:"table__TableHeader",componentId:"sc-16y5cap-2"})(["background:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),No=(0,m.default)(Po).withConfig({displayName:"table__StickyTableHeader",componentId:"sc-16y5cap-3"})(["width:100%;border-top:0;border-bottom:0;th{height:100%;background:",";position:sticky;z-index:2;top:",";:first-child{border-top-left-radius:",";border-bottom-left-radius:",";}:last-child{border-top-right-radius:",";border-bottom-right-radius:",";}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{topOffset:t}=e;return`${t}px`}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.borders.radius.small})),Ro=m.default.th.withConfig({displayName:"table__TableHeaderCell",componentId:"sc-16y5cap-4"})(["padding:16px;text-align:left;white-space:nowrap;"]),xo=(0,m.default)(Ro).withConfig({displayName:"table__TablePreviewHeaderCell",componentId:"sc-16y5cap-5"})(["padding-right:0;"]),Mo=(0,m.default)(Ro).withConfig({displayName:"table__TableDateHeaderCell",componentId:"sc-16y5cap-6"})(["min-width:160px;"]),Do=(0,m.default)(Ro).withConfig({displayName:"table__TableStatusHeaderCell",componentId:"sc-16y5cap-7"})(["display:table-cell;min-width:100px;@media ","{display:none;}"],(e=>{let{theme:t}=e;return t.breakpoint.tabletMax})),Bo=(0,m.default)(Ro).withConfig({displayName:"table__TableAuthorHeaderCell",componentId:"sc-16y5cap-8"})(["min-width:110px;"]),Fo=(0,m.default)(Ro).withConfig({displayName:"table__TableTitleHeaderCell",componentId:"sc-16y5cap-9"})(["padding-left:0;width:30%;min-width:135px;span{display:none;margin-right:5px;}"]),Ho=((0,m.default)(Ro).withConfig({displayName:"table__TableContentHeaderCell",componentId:"sc-16y5cap-10"})(["width:17.5%;min-width:150px;"]),m.default.tr.withConfig({displayName:"table__TableRow",componentId:"sc-16y5cap-11"})(["min-width:1250px;@media ","{min-width:0;}"],(e=>{let{theme:t}=e;return t.breakpoint.tabletMax}))),Uo=m.default.td.withConfig({displayName:"table__TableCell",componentId:"sc-16y5cap-12"})(["padding:","px;font-weight:normal;word-break:break-word;height:","px;vertical-align:middle;span{color:",";line-height:20px;}"],16,82,(e=>{let{theme:t}=e;return t.colors.standard.black})),Go=(0,m.default)(Uo).withConfig({displayName:"table__TableStatusCell",componentId:"sc-16y5cap-13"})(["display:table-cell;span{color:",";}@media ","{display:none;}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.breakpoint.tabletMax})),Yo=((0,m.default)(Uo).withConfig({displayName:"table__TableTitleCell",componentId:"sc-16y5cap-14"})(["width:30%;word-wrap:break-word;"]),(0,m.default)(Uo).withConfig({displayName:"table__TableContentCell",componentId:"sc-16y5cap-15"})(["width:17.5%;min-width:150px;word-wrap:break-word;"]),(0,m.default)(Uo).withConfig({displayName:"table__TablePreviewCell",componentId:"sc-16y5cap-16"})(["width:","px;"],Le[Oe]));var zo=a(27856),jo=a(73715);function Vo(){return Vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Vo.apply(this,arguments)}function Tooltip(e){let{placement:t=zo.PLACEMENT.BOTTOM,...a}=e;const{isRTL:o}=E(),n=o?zo.RTL_PLACEMENT[t]:t;return r.createElement(jo.BaseTooltip,Vo({placement:n},a))}var $o=a(2779),qo=a(98477);const Wo=m.default.div.withConfig({displayName:"viewStyleBar__Container",componentId:"sc-17r9rf0-0"})(["display:flex;justify-content:flex-end;align-items:center;"]),Zo=m.default.button.withConfig({displayName:"viewStyleBar__ToggleButton",componentId:"sc-17r9rf0-1"})(["border:none;border-radius:",";"," padding:0;background:transparent;cursor:pointer;&:hover svg{color:",";}&:active svg{color:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),Gt.focusableOutlineCSS,(e=>{let{theme:t}=e;return t.colors.interactiveFg.hover}),(e=>{let{theme:t}=e;return t.colors.interactiveFg.active}));function ViewStyleBar(e){let{onPress:t,layoutStyle:a}=e;return r.createElement(Wo,null,r.createElement(Tooltip,{title:Fe[a],placement:zo.PLACEMENT.BOTTOM_END,hasTail:!0},r.createElement(Zo,{"aria-label":Fe[a],onClick:t},a===Be.GRID&&r.createElement($o.default,{height:"32px",width:"32px","data-testid":"list-icon"}),a===Be.LIST&&r.createElement(qo.default,{height:"32px",width:"32px","data-testid":"grid-icon"}))))}const Ko=(0,m.createGlobalStyle)(["h1,h2,h3,h4,h5,h6,p,a{margin:0;}"]),Xo=e=>""===e?(0,n.__)("Untitled","web-stories"):e;a(26699);const Qo=(0,m.createGlobalStyle)(["*:focus{outline:none !important;}"]),Jo=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab"],er=()=>{const[e,t]=(0,h.useState)(!1),a=a=>{!e&&Jo.includes(a.key)&&t(!0)},o=()=>{e&&t(!1)};return(0,h.useEffect)((()=>(document.addEventListener("keydown",a),document.addEventListener("mousedown",o),function(){document.removeEventListener("keydown",a),document.removeEventListener("mousedown",o)}))),(0,h.useEffect)((()=>{document.body.classList.toggle("useskeyboard",e)}),[e]),e?null:r.createElement(Qo,null)};function tr(e){let{isActiveSearch:t,currentFilter:a,totalResults:o,view:r}=e;return(0,h.useMemo)((()=>{const e=o??0,i=Ge[r]?.[a]||"",l="function"==typeof i?i(e):i;return t?(0,M.default)(
/* translators: %s: number of results */
(0,n._n)("%s result","%s results",e,"web-stories"),(0,M.default)("<strong>%s</strong>",e)):l}),[t,o,r,a])}var ar=a(15985);const or=e=>Math.round(e/ar.PAGE_RATIO),rr=e=>e<=Ie?Ce:Ae,nr=(e,t)=>{let{bp:a,respectSetWidth:o,availableContainerSpace:r}=t;if(o){return{width:e,height:or(e)}}a===Ae&&(r-=ve);const n=Math.floor(r/e),i=e+(r-(e*n+ke*(n-1)+2*Ne))/n;return{width:i,height:or(i)}},ir=e=>window.innerWidth<Ie?Ie:e;function lr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{thumbnailMode:t=!1,isGrid:a}=e,{containerId:o}=E(),r=(0,h.useRef)(document.getElementById(o)),[n,i]=(0,h.useState)(window.innerWidth),[l,s]=(0,h.useState)(rr(n)),[c,d]=(0,h.useState)(ir(r.current?.offsetWidth||window.innerWidth)),u=(0,h.useDebouncedCallback)((e=>{i(e)}),500);return(0,h.useEffect)((()=>{s(rr(n))}),[n]),(0,h.useResizeEffect)(r,(e=>{let{width:t}=e;d(ir(t)),window.innerWidth!==n&&u(window.innerWidth)}),[d,n,u]),(0,h.useMemo)((()=>({pageSize:nr(Le[t?Oe:l],{respectSetWidth:!a||t,availableContainerSpace:c,bp:l})})),[l,a,t,c])}var sr=a(80475);kt().shape({style:kt().oneOf(Object.values(Be)),toggleStyle:kt().func,pageSize:Vt}),kt().shape({filterId:kt().number,toggleFilterId:kt().func,queriedAuthors:kt().arrayOf(kt().shape({id:kt().number,name:kt().string})).isRequired,setQueriedAuthors:kt().func}),kt().shape({value:kt().oneOfType([kt().number,kt().string]),set:kt().func}),kt().shape({value:kt().oneOf(Object.values(j)),set:kt().func,direction:kt().oneOf(Object.values(z)),setDirection:kt().func}),kt().shape({value:kt().number,set:kt().func,requestNextPage:kt().func}),kt().shape({keyword:kt().string,setKeyword:kt().func}),kt().shape({current:kt().bool});kt().shape({style:kt().oneOf(Object.values(Be)),pageSize:Vt}),kt().shape({value:kt().oneOfType([kt().number,kt().string]),set:kt().func}),kt().shape({value:kt().number,set:kt().func,requestNextPage:kt().func}),kt().shape({keyword:kt().string,setKeyword:kt().func}),kt().shape({value:kt().oneOf(Object.values(Ee)),set:kt().func});const cr=()=>{},dr=()=>({isRTL:!1,userId:1,locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},newStoryURL:"",archiveURL:"",defaultArchiveURL:"",cdnURL:"https://wp.stories.google/static/main/",allowedImageMimeTypes:["image/webp","image/png","image/jpeg","image/gif"],version:"",encodeMarkup:!0,api:{},maxUpload:314572800,maxUploadFormatted:"300 MB",capabilities:{canManageSettings:!1,canUploadFiles:!1},canViewDefaultTemplates:!1,localeData:[],flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0}});Object.defineProperty(b.default,"name",{value:"stylisRTLPlugin"});const ur=function Dashboard(e){let{config:t,children:a}=e;const o=(0,i.default)(dr(),t),n={...l.theme,colors:s.light},{isRTL:h,flags:_,styleConstants:{leftOffset:E,topOffset:S}={}}=o;return r.createElement(f.FlagsProvider,{features:_},r.createElement(m.StyleSheetManager,{stylisPlugins:h?[b.default]:[]},r.createElement(m.ThemeProvider,{theme:n},r.createElement(p.Styles,null),r.createElement(c.ModalGlobalStyle,null),r.createElement(g,{config:o},r.createElement(ApiProvider,null,r.createElement(NavProvider,null,r.createElement(oo,null,r.createElement(d.default,null,r.createElement(u.default,{value:{isRTL:h,leftOffset:E,topOffset:S}},r.createElement(Ko,null),r.createElement(er,null),a)))))))))};var pr=a(36798),mr=a(71577),br=a(30963),fr=a(66044);const hr="UPDATE_FILTER",_r="REGISTER_FILTERS",gr=(e,t)=>{let{type:a,payload:o={}}=t;switch(a){case hr:{const{key:t,value:a}=o,r=e.filters.find((e=>e.key===t));if(!r)return e;a.filterId&&r?.filterId===a.filterId&&(a.filterId=null);const n=e.filters.indexOf(r),i=[...e.filters];return i[n]={...r,...a},{...e,filters:i}}case _r:{const{value:t}=o;return{...e,filtersLoading:!1,filters:t}}default:return e}};function Er(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.identity;return(0,h.useContextSelector)(At,e)}const Sr=function(){const[e,t]=(0,h.useState)([]),{getTaxonomies:a,getTaxonomyTerms:o}=Er((e=>{let{actions:{taxonomyApi:{getTaxonomies:t,getTaxonomyTerms:a}}}=e;return{getTaxonomies:t,getTaxonomyTerms:a}})),r=(0,h.useCallback)((e=>{const a={};for(const t of e){const e=t[0]?.taxonomy;e&&(a[e]=t)}t((e=>e.map((e=>({...e,data:a[e.slug]||[]})))))}),[t]),n=(0,h.useCallback)((async(e,t)=>{const{restBase:a,restPath:r}=e;return(await o(r,{search:t,per_page:-1})).map((e=>({...e,restBase:a,restPath:r})))}),[o]),i=(0,h.useCallback)((async()=>{const e=await a({hierarchical:!0,show_ui:!0}),o=[];for(const t of e)t.data=[],o.push(n(t));t(e),Promise.all(o).then((e=>{r(e)}))}),[t,a,n,r]),l=(0,h.useCallback)((()=>e.map((e=>({key:e.restBase,restPath:e.restPath,labels:e.labels,filterId:null,primaryOptions:e.data,queriedOptions:e.data,query:n,placeholder:e.labels.allItems,ariaLabel:e.labels.filterByItem,noMatchesFoundLabel:e.labels.notFound,searchPlaceholder:e.labels.searchItems})))),[n,e]);return(0,h.useEffect)((()=>{i()}),[i]),(0,h.useMemo)((()=>({taxonomies:e,initializeTaxonomyFilters:l})),[e,l])},Tr=(0,h.createContext)({state:{},actions:{}});function FiltersProvider(e){let{children:t}=e;const{initializeTaxonomyFilters:a}=Sr(),[o,n]=(0,h.useReducer)(gr,{filtersLoading:!0,filters:[]}),i=(0,h.useCallback)(((e,t)=>{n({type:hr,payload:{key:e,value:t}})}),[]),l=(0,h.useCallback)((e=>{n({type:_r,payload:{value:e}})}),[]),s=(0,h.useCallback)((()=>{const e=a();l(e)}),[l,a]),c=(0,h.useCallback)((()=>{const e={};for(const t of o.filters){const{key:a,filterId:o}=t;o&&(e[a]=o)}return e}),[o.filters]),d=(0,h.useMemo)((()=>({state:o,actions:{updateFilter:i,registerFilters:l,getFiltersObject:c}})),[o,i,l,c]);return(0,h.useEffect)((()=>{s()}),[s]),r.createElement(Tr.Provider,{value:d},t)}function yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.identity;return(0,h.useContextSelector)(Tr,e)}const wr=m.default.div.withConfig({displayName:"bodyViewOptions__DisplayFormatContainer",componentId:"sc-x2ax3p-0"})(["height:76px;display:flex;justify-content:space-between;align-items:center;margin-top:-10px;"]),vr=m.default.div.withConfig({displayName:"bodyViewOptions__StorySortDropdownContainer",componentId:"sc-x2ax3p-1"})(["margin:auto 8px;align-self:flex-end;"]),Ir=m.default.div.withConfig({displayName:"bodyViewOptions__ControlsContainer",componentId:"sc-x2ax3p-2"})(["display:flex;justify-content:center;align-items:center;"]),Cr=(0,m.default)(mr.DropDown).withConfig({displayName:"bodyViewOptions__StyledDropDown",componentId:"sc-x2ax3p-3"})(["width:210px;"]),Ar=m.default.div.withConfig({displayName:"bodyViewOptions__BodyViewOptionsHeader",componentId:"sc-x2ax3p-4"})([""]),Or=(0,m.default)(br.default.DropDown).withConfig({displayName:"bodyViewOptions__StyledDatalist",componentId:"sc-x2ax3p-5"})(["width:150px;"]),Lr={filterId:null,toggleFilterId:fr.noop,queriedAuthors:[]};function BodyViewOptions(e){let{currentSort:t,handleLayoutSelect:a,handleSortChange:o,resultsLabel:i,layoutStyle:l,pageSortOptions:s=[],showGridToggle:c,showSortDropdown:d,sortDropdownAriaLabel:u,showAuthorDropdown:p=!1,author:m=Lr,queryAuthorsBySearch:b=fr.noop,filters:f=[]}=e;const{updateFilter:h}=yr((e=>{let{actions:{updateFilter:t}}=e;return{updateFilter:t}}));return r.createElement(pa,null,r.createElement(Ar,{id:"body-view-options-header"}),r.createElement(wr,null,r.createElement(ha.Text,{as:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,null,i)),r.createElement(Ir,null,l===Be.GRID&&f?.length?f.map((e=>r.createElement(vr,{key:e.key},r.createElement(Or,{hasSearch:!0,hasDropDownBorder:!0,searchResultsLabel:(0,n.__)("Search results","web-stories"),"aria-label":e.ariaLabel,onChange:t=>{let{id:a}=t;h(e.key,{filterId:a})},getOptionsByQuery:async t=>{await e.query(e,t)},selectedId:e.filterId,placeholder:e.placeholder,primaryOptions:e.primaryOptions,options:e.queriedOptions,noMatchesFoundLabel:e.noMatchesFoundLabel,searchPlaceholder:e.searchPlaceholder,offsetOverride:!0})))):null,l===Be.GRID&&p&&r.createElement(vr,null,r.createElement(Or,{hasSearch:!0,hasDropDownBorder:!0,searchResultsLabel:(0,n.__)("Search results","web-stories"),"aria-label":(0,n.__)("Filter stories by author","web-stories"),onChange:m.toggleFilterId,getOptionsByQuery:b,selectedId:m.filterId,placeholder:(0,n.__)("All Authors","web-stories"),primaryOptions:m.queriedAuthors,options:m.queriedAuthors,noMatchesFoundLabel:(0,n.__)("No authors found","web-stories"),searchPlaceholder:(0,n.__)("Search authors","web-stories"),offsetOverride:!0})),l===Be.GRID&&d&&r.createElement(vr,null,r.createElement(Cr,{ariaLabel:u,options:s,type:ye,selectedValue:t,onMenuItemClick:(e,t)=>o(t)})),c&&r.createElement(Ir,null,r.createElement(ViewStyleBar,{layoutStyle:l,onPress:a})))))}var kr,Pr,Nr;function Rr(){return Rr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Rr.apply(this,arguments)}const SvgDesertColor=e=>{let{title:t,titleId:a,...o}=e;return r.createElement("svg",Rr({viewBox:"0 0 274 118",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},o),t?r.createElement("title",{id:a},t):null,kr||(kr=r.createElement("path",{d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.794-10.544a10.003 10.003 0 0 0 2.525-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675c.436.215.886.397 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a9.985 9.985 0 0 1-2.818-.186Z",fill:"#F4F2EF"})),Pr||(Pr=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4V26ZM120.857 53.178a2.143 2.143 0 0 1 4.286 0v14.25h1.714v-5.357a1.072 1.072 0 0 1 2.143 0V68.5a1.146 1.146 0 0 1-.048.319 1.073 1.073 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714v-12.25ZM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.987 3.987 0 0 1-2.828-1.171A3.988 3.988 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572V8Z",fill:"#FBBC04"})),Nr||(Nr=r.createElement("circle",{cx:213,cy:72,r:13,fill:"#4285F4"})))},xr=(0,r.memo)(SvgDesertColor),Mr=m.default.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-1wgc64w-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:20vh auto;& > *{text-align:center;margin:0 auto;}button,a{margin-top:48px;}"]),Dr=(0,m.default)(xr).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-1wgc64w-1"})(["margin-bottom:48px;"]);const Br=function EmptyContentMessage(e){let{children:t}=e;return r.createElement(Mr,null,r.createElement(Dr,{"aria-hidden":!0,width:274,height:118}),t)};var Fr=a(3605);const Hr=m.default.h1.withConfig({displayName:"display__Display",componentId:"sc-xgoq85-0"})([""," ",""],Fr.defaultTypographyStyle,(e=>{let{size:t,theme:a}=e;return Ca.expandPresetStyles({preset:a.typography.presets.display[t],theme:a})}));Hr.propTypes={as:kt().oneOf(["h1","h2","h3","h4","h5","h6"]).isRequired,size:kt().oneOf(Ia.THEME_CONSTANTS.TYPOGRAPHY.DISPLAY_SIZES)},Hr.defaultProps={size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM};var Ur=a(36514),Gr=a(13578);const Yr=m.default.div.withConfig({displayName:"components__DropDownContainer",componentId:"sc-8mm6ey-0"})(["display:flex;flex-direction:column;width:100%;"]),zr=(0,m.default)(ha.Text).withConfig({displayName:"components__Label",componentId:"sc-8mm6ey-1"})(["margin-bottom:8px;color:",";"],(e=>{let{theme:t,disabled:a}=e;return t.colors.fg[a?"disable":"primary"]}));zr.propTypes={disabled:kt().bool};const jr=(0,m.default)(ha.Text).withConfig({displayName:"components__Hint",componentId:"sc-8mm6ey-2"})(["margin-top:12px;padding-left:2px;color:",";"],(e=>{let{theme:t,hasError:a}=e;return t.colors.fg[a?"negative":"tertiary"]}));jr.propTypes={hasError:kt().bool};var Vr=a(99566),$r=a(65727),qr=a(97642),Wr=a(37309);function Zr(){return Zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Zr.apply(this,arguments)}const Kr=m.default.div.withConfig({displayName:"search__SearchInputWrapper",componentId:"sc-63vr7b-0"})([""]),Search=e=>{let{ariaInputLabel:t=Vr.DEFAULT_ARIA_INPUT_LABEL,ariaClearLabel:a=Vr.DEFAULT_ARIA_CLEAR_LABEL,disabled:o,handleSearchValueChange:i,hasError:l,hint:s,label:c,onMenuItemClick:d,onClear:u,options:p=[],placeholder:m=Vr.DEFAULT_PLACEHOLDER,placement:b=zo.PLACEMENT.BOTTOM,popupFillWidth:f=Vr.DEFAULT_POPUP_FILL_WIDTH,popupZIndex:_,selectedValue:g={},...E}=e;const S=(0,h.useMemo)((()=>`list-${(0,Zt.default)()}`),[]),T=(0,h.useMemo)((()=>`select-button-${(0,Zt.default)()}`),[]),y=(0,h.useMemo)((()=>`clear-button-${(0,Zt.default)()}`),[]),w=(0,h.useRef)(),v=(0,h.useRef)(),{activeOption:I,getActiveOption:C,inputState:A,isMenuFocused:O,isOpen:L,normalizedOptions:k}=function(e){let{handleSearchValueChange:t,selectedValue:a,options:o}=e;const r=(0,Wr.default)("assertive"),[i,l]=(0,h.useState)(!1),s=(0,h.useDebouncedCallback)(l,100),c=(0,h.useMemo)((()=>({value:i,set:s})),[i,s]),[d,u]=(0,h.useState)(!1),p=(0,h.useDebouncedCallback)(u,300,{leading:!0}),m=(0,h.useMemo)((()=>({value:d,set:p})),[d,p]);(0,h.useEffect)((()=>{c.value||p(!1)}),[c,p]);const b=(0,h.useMemo)((()=>o&&0!==o.length?(0,qr.getOptions)(o):[]),[o]),f=(0,h.useCallback)((e=>b.flatMap((e=>e.group)).find((t=>t?.value?.toString().toLowerCase()===e.toString().toLowerCase()))),[b]),_=(0,h.useMemo)((()=>a?.value&&0!==b.length?f(a.value):null),[a,b,f]),[g,E]=(0,h.useState)(void 0),S=(0,h.useMemo)((()=>({value:g,set:E})),[g]);return(0,h.useEffect)((()=>{void 0===S?.value&&void 0!==a?.value&&S.set(a?.label||"")}),[S,a]),(0,h.useEffect)((()=>{t?.(S.value)}),[t,S]),(0,h.useEffect)((()=>{if(c.value&&S.value?.length){const e=o.length?(0,M.default)(
/* translators: %d number of results. */
(0,n._n)("%d result found.","%d results found.",o.length,"web-stories"),o.length):(0,n.__)("No results found.","web-stories");r(e)}}),[S.value,c.value,o.length,r]),{activeOption:_,getActiveOption:f,normalizedOptions:b,inputState:S,isMenuFocused:m,isOpen:c}}({options:p,selectedValue:g,handleSearchValueChange:i}),P=(0,h.useMemo)((()=>Boolean(o||0===A?.value?.length)),[o,A]),N=(0,h.useCallback)((()=>{L.set(!0),O.set(!1)}),[L,O]),R=(0,h.useCallback)((e=>{e.preventDefault(),L.set(!0)}),[L]),x=(0,h.useCallback)((e=>{(!y||e?.srcElement?.id!==y&&e?.srcElement?.nearestViewportElement?.id!==y)&&L.set(!1)}),[y,L]),D=(0,h.useCallback)(((e,t)=>{L.set(!1);const a=C(t)||{label:t,value:t};A.set(a.label),d?.(e,a)}),[C,A,L,d]),B=(0,h.useCallback)((()=>w?.current?.focus()),[]),F=(0,h.useCallback)((e=>{let{target:t}=e;A.set(t.value),t.value.length>0&&!L.value&&L.set(!L.value)}),[A,L]),H=(0,h.useCallback)((()=>{A.set(void 0),u(),B()}),[B,A,u]),U=(0,h.useCallback)((()=>{L.set(!1),O.set(!1)}),[L,O]),G=(0,h.useCallback)((()=>O.set(!0)),[O]),Y=(0,h.useCallback)((()=>{(P||0===A.value?.trim().length)&&(O.set(!1),L.set(!1))}),[A,O,P,L]),z=(0,h.useCallback)((e=>{const{key:t}=e;"Escape"===t?P||O.set(!1):"Tab"===t?Y(e):"ArrowDown"===t?G():"Enter"===t&&A.value.trim().length>0&&D(e,A.value)}),[P,O,Y,G,D,A.value]);return(0,h.useFocusOut)(v,Y,[Y]),r.createElement(Yr,null,c&&r.createElement(zr,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,disabled:o,forwardedAs:"span",isBold:!0},c),r.createElement(Kr,{ref:v},r.createElement($r.default,Zr({"aria-label":t,hasError:l,id:T,onChange:F,onClick:R,onFocus:N,onKeyDown:z,placeholder:m,ariaClearLabel:a,clearId:y,disabled:o,handleClearInput:H,handleTabClear:U,inputValue:A?.value||"",isOpen:L?.value,listId:S,ref:w},E))),!P&&r.createElement(Gr.Popup,{anchor:w,isOpen:L?.value,placement:b,fillWidth:f,zIndex:_},r.createElement(Ur.Menu,Zr({activeValue:I?.value,handleReturnToParent:B,isMenuFocused:O.value,listId:S,menuAriaLabel:(0,M.default)(
/* translators: %s: dropdown aria label or general dropdown label if there is no specific aria label. */
(0,n.__)("%s Option List Selector","web-stories"),t),onDismissMenu:x,onMenuItemClick:D,options:k,parentId:T},E))),s&&r.createElement(jr,{hasError:l,size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},s))},Xr=(0,m.default)(pa).withConfig({displayName:"pageHeading__HeadingContainer",componentId:"sc-1ln7suo-0"})(["display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:16px;padding-top:48px;border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.secondary})),Qr=(0,m.default)(Hr).withConfig({displayName:"pageHeading__StyledHeadline",componentId:"sc-1ln7suo-1"})(["display:flex;align-items:center;margin-right:28px;padding-bottom:24px;white-space:nowrap;"]),Jr=m.default.div.withConfig({displayName:"pageHeading__HeadlineFilters",componentId:"sc-1ln7suo-2"})(["display:flex;align-items:center;margin:auto 0 auto 0;padding-bottom:24px;"]),en=m.default.div.withConfig({displayName:"pageHeading__HeaderSearch",componentId:"sc-1ln7suo-3"})(["width:208px;max-width:208px;min-width:208px;margin:auto 0;padding-bottom:24px;"]),tn=e=>{let{children:t,heading:a,searchPlaceholder:o,searchOptions:i=[],showSearch:l,handleSearchChange:s,searchValue:c="",onClear:d=fr.noop}=e;return r.createElement(Xr,null,r.createElement(Qr,{as:"h2",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(vo,{showOnlyOnSmallViewport:!0}),a),t&&r.createElement(Jr,null,t),l&&r.createElement(en,null,r.createElement(Search,{placeholder:o,selectedValue:{label:c,value:c},options:i,handleSearchValueChange:s,onClear:d,emptyText:(0,n.__)("No options available","web-stories")})))};var an=a(96905),on=a(15242),rn=a(55177),nn=a(13293),ln=a(65132);const sn=e=>{let{menuItems:t,story:a,isLocked:o}=e;const r=t.default?()=>t.default(a):cr;return t.filter((e=>void 0===e.isEnabled||e.isEnabled(a))).map((e=>{let{capability:n,value:i,...l}=e;const s=(e=>t.find((t=>t?.value===e)))(i),c={onClick:s?()=>s.action(a):r};switch(i){case D:c.href=a.bottomTargetAction,c.openNewTab=!1;break;case G:c.href=a.previewLink,c.openNewTab=!0;break;case B:case H:c.disabled=o}return delete l?.action,{...l,...c}}))};var cn=a(37233);const dn=m.default.div.withConfig({displayName:"components__PreviewImage",componentId:"sc-1w22569-0"})(["display:inline-block;background:",";width:","px;height:","px;object-fit:contain;border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.gradient.placeholder}),Le[Oe],Le[Oe]/(3/4),(e=>{let{theme:t}=e;return t.borders.radius.small})),un=m.default.div.withConfig({displayName:"components__PreviewWrapper",componentId:"sc-1w22569-1"})(["position:relative;"]),pn=(0,m.default)(cn.default).withConfig({displayName:"components__LockIcon",componentId:"sc-1w22569-2"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:24px;display:block;margin:auto;background-color:",";color:",";border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.brandNormal}),(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.borders.radius.round})),mn=(0,m.default)(Ho).withConfig({displayName:"components__StyledTableRow",componentId:"sc-1w22569-3"})(["&:hover ",",&:focus-within ","{opacity:1;}"],ra,ra),bn=m.default.div.withConfig({displayName:"components__TitleTableCellContainer",componentId:"sc-1w22569-4"})(["display:flex;align-items:center;justify-content:flex-start;","{margin:10px auto;}&:hover ",",&:active ","{opacity:1;}"],ra,ra,ra);function fn(e){window.getSelection().selectAllChildren(e.target)}function hn(){window.getSelection().removeAllRanges()}const StoryListItem=e=>{let{story:t,renameStory:a,userId:o,storyMenu:i,storyStatus:l}=e;const s=(0,h.useMemo)((()=>t?.locked&&o!==t?.lockUser.id),[t,o]),c=Xo(t.title),d=(0,h.useMemo)((()=>sn({menuItems:i.menuItems,story:t,isLocked:s})),[i,t,s]),u=(0,h.useMemo)((()=>d.length?r.createElement(StoryMenu,{menuLabel:(0,M.default)(
/* translators: %s: story title.*/
(0,n.__)("Context menu for %s","web-stories"),c),onMoreButtonSelected:(e,t)=>i.handleMenuToggle(t),contextMenuId:i.contextMenuId,storyId:t.id,menuItems:d,verticalAlign:"center"}):null),[d,c,i,t]);return r.createElement(mn,{"data-testid":`story-list-item-${t.id}`},r.createElement(Yo,null,r.createElement(Tooltip,{title:s&&t?.lockUser.name?(0,M.default)(
/* translators: %s: user name */
(0,n.__)("%s is currently editing this story","web-stories"),t?.lockUser.name):""},r.createElement(un,null,r.createElement(dn,t.featuredMediaUrl?{src:t.featuredMediaUrl,alt:(0,M.default)(
/* translators: %s: Story title. */
(0,n.__)("%s Poster image","web-stories"),c),as:"img",decoding:"async"}:null),s&&r.createElement(pn,null)))),r.createElement(Uo,null,r.createElement(bn,null,a.id===t.id?r.createElement(Ba,{onEditComplete:e=>a.handleOnRenameStory(t,e),onEditCancel:a.handleCancelRename,value:t.title,id:t.id,label:(0,n.__)("Rename story","web-stories")}):r.createElement(r.Fragment,null,r.createElement(co.Headline,{tabIndex:0,onFocus:fn,onBlur:hn,size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL,as:"h3","aria-label":s?(0,M.default)(
/* translators: 1: story title. 2: user currently editing the story. */
(0,n.__)("%1$s (locked by %2$s)","web-stories"),c,t?.lockUser.name):c},c),u))),r.createElement(Uo,null,r.createElement(ha.Text,{as:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},t.author?.name||"—")),r.createElement(Uo,null,r.createElement(ha.Text,{as:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},ft(t.createdGmt))),r.createElement(Uo,null,r.createElement(ha.Text,{as:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},ft(t.modifiedGmt))),l!==W.DRAFT&&r.createElement(Go,null,r.createElement(ha.Text,{as:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Z[t?.status])))};var _n=a(86954);const{focusableOutlineCSS:gn}=_n,En=m.default.div.withConfig({displayName:"components__ListView",componentId:"sc-15nl0r5-0"})(["width:100%;"]),Sn=m.default.div.withConfig({displayName:"components__ArrowIcon",componentId:"sc-15nl0r5-1"})(["width:32px;height:100%;display:inline-grid;color:",";vertical-align:middle;svg{visibility:",";transition:transform 0.15s;",";}"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{active:t}=e;return t?"visible":"hidden"}),(e=>{let{asc:t}=e;return t&&(0,m.css)(["transform:rotate(180deg);"])})),Tn=m.default.div.withConfig({displayName:"components__EmptyIconSpace",componentId:"sc-15nl0r5-2"})(["height:32px;width:32px;"]),yn=(0,m.default)(Sn).withConfig({displayName:"components__ArrowIconWithTitle",componentId:"sc-15nl0r5-3"})(["display:",";position:absolute;top:16px;@media ","{margin-left:4px;}"],(e=>{let{active:t}=e;return!t&&"none"}),(e=>{let{theme:t}=e;return t.breakpoint.mobile})),wn=(0,m.default)(ha.Text).attrs({tabIndex:0,isBold:!0}).withConfig({displayName:"components__SelectableTitle",componentId:"sc-15nl0r5-4"})(["color:",";cursor:pointer;",";"],(e=>{let{theme:t}=e;return t.colors.blue[70]}),(e=>{let{theme:t}=e;return gn(t.colors.border.focus,t.colors.bg.secondary)})),vn={[z.DESC]:z.ASC,[z.ASC]:z.DESC};function StoryListView(e){let{handleSortChange:t,handleSortDirectionChange:a,hideStoryList:o,renameStory:i,sortDirection:l,stories:s,storyMenu:c,storySort:d,storyStatus:u}=e;const{userId:p,styleConstants:{topOffset:m}}=E(),b=(0,h.useCallback)((e=>{e!==d?(t(e),a(V[e])):a(vn[l])}),[a,t,d,l]),f=(0,h.useCallback)(((e,t)=>{let{key:a}=e;"Enter"===a&&b(t)}),[b]),_=(0,h.useMemo)((()=>!o&&s.map((e=>r.createElement(StoryListItem,{key:`story-${e.id}`,story:e,userId:p,renameStory:i,storyStatus:u,storyMenu:c})))),[o,i,s,u,c,p]);return r.createElement(En,{"data-testid":"story-list-view"},r.createElement(Lo,{"aria-label":(0,n.__)("List view of created stories","web-stories")},r.createElement(No,{topOffset:m},r.createElement(Ho,null,r.createElement(xo,{onClick:()=>b(j.NAME),onKeyDown:e=>f(e,j.NAME)},r.createElement(wn,{"aria-label":(0,n.__)("Title, select to sort table by story title","web-stories"),forwardedAs:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,n.__)("Title","web-stories"))),r.createElement(Fo,{onClick:()=>b(j.NAME),onKeyDown:e=>f(e,j.NAME)},r.createElement(wn,{"aria-hidden":!0,active:d===j.NAME,forwardedAs:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,n.__)("Title","web-stories")),r.createElement(Sn,{active:d===j.NAME,asc:l===z.ASC},r.createElement(ln.default,null))),r.createElement(Bo,null,r.createElement(wn,{"aria-label":(0,n.__)("Author, select to sort table by story author","web-stories"),onClick:()=>b(j.CREATED_BY),onKeyDown:e=>f(e,j.CREATED_BY),active:d===j.CREATED_BY,forwardedAs:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,n.__)("Author","web-stories")),r.createElement(yn,{"aria-hidden":!0,active:d===j.CREATED_BY,asc:l===z.ASC},d===j.CREATED_BY?r.createElement(ln.default,null):r.createElement(Tn,null))),r.createElement(Mo,null,r.createElement(wn,{"aria-label":(0,n.__)("Creation date, select to sort table by date story was created","web-stories"),onClick:()=>b(j.DATE_CREATED),onKeyDown:e=>f(e,j.DATE_CREATED),active:d===j.DATE_CREATED,forwardedAs:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,n.__)("Date Created","web-stories")),r.createElement(yn,{"aria-hidden":!0,active:d===j.DATE_CREATED,asc:l===z.ASC},r.createElement(ln.default,null))),r.createElement(Mo,null,r.createElement(wn,{"aria-label":(0,n.__)("Modification date, select to sort table by date story was last modified","web-stories"),onClick:()=>b(j.LAST_MODIFIED),onKeyDown:e=>f(e,j.LAST_MODIFIED),active:d===j.LAST_MODIFIED,forwardedAs:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,n.__)("Last Modified","web-stories")),r.createElement(yn,{"aria-hidden":!0,active:d===j.LAST_MODIFIED,asc:l===z.ASC},r.createElement(ln.default,null))),u!==W.DRAFT&&r.createElement(Do,null,r.createElement(ha.Text,{as:"span",isBold:!0,size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,n.__)("Publish State","web-stories"))))),r.createElement(ko,null,_)))}var In=a(87098);const Cn=m.default.div.withConfig({displayName:"components__Gradient",componentId:"sc-fbjjp8-0"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.gradient.posterOverlay})),An=m.default.div.withConfig({displayName:"components__Scrim",componentId:"sc-fbjjp8-1"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-end;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.opacity.black3})),On=m.default.div.withConfig({displayName:"components__Container",componentId:"sc-fbjjp8-2"})(["position:relative;"]),Ln=m.default.div.withConfig({displayName:"components__Poster",componentId:"sc-fbjjp8-3"})(["height:100%;width:100%;object-fit:cover;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.gradient.placeholder})),kn=(0,m.default)(la).withConfig({displayName:"components__CustomCardGridItem",componentId:"sc-1vhey8s-0"})(["display:grid;grid-template-columns:100%;grid-template-rows:",";"],(e=>{let{$posterHeight:t}=e;return`${t}px auto`}));kn.propTypes={$posterHeight:kt().number};const Pn=m.default.div.withConfig({displayName:"components__CardWrapper",componentId:"sc-1vhey8s-1"})(["position:absolute;height:100%;width:100%;"]),Nn=m.default.a.withConfig({displayName:"components__ScrimAnchor",componentId:"sc-1vhey8s-2"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;border-radius:",";&:hover,&:focus{box-shadow:none;border:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return`4px solid ${t.colors.interactiveBg.active}`})),Rn=m.default.div.withConfig({displayName:"components__StyledStoryDisplayContent",componentId:"sc-1vhey8s-3"})(["padding:20px 12px 8px 12px;display:flex;flex-direction:column;width:100%;"]),xn=m.default.div.withConfig({displayName:"components__Row",componentId:"sc-1vhey8s-4"})(["width:100%;display:flex;align-items:flex-end;flex-wrap:wrap;"]),Mn=(0,m.default)(xn).withConfig({displayName:"components__LockedRow",componentId:"sc-1vhey8s-5"})(["position:absolute;top:8px;right:8px;justify-content:flex-end;align-items:center;"]),Dn=m.default.div.withConfig({displayName:"components__CardDetailsGrid",componentId:"sc-1vhey8s-6"})(["display:grid;grid-template-columns:80% auto;margin-top:4px;"]),Bn=m.default.div.withConfig({displayName:"components__CardDetailsColumn",componentId:"sc-1vhey8s-7"})(["display:flex;align-items:space-between;flex-direction:column;align-self:flex-end;"]),Fn=(0,m.default)(co.Headline).attrs({as:"h3",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"components__Title",componentId:"sc-1vhey8s-8"})(["overflow:hidden;text-overflow:ellipsis;color:",";margin:0;max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;"],(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary})),Hn=(0,m.default)(ha.Text).attrs({forwardedAs:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"components__DetailCopy",componentId:"sc-1vhey8s-9"})(["color:",";margin:0;"],(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary})),Un=m.default.img.withConfig({displayName:"components__LockAvatar",componentId:"sc-1vhey8s-10"})(["height:40px;width:40px;border:",";border-radius:",";z-index:3;"],(e=>{let{theme:t}=e;return`2px solid ${t.colors.interactiveBg.brandNormal}`}),(e=>{let{theme:t}=e;return t.borders.radius.small})),Gn=(0,m.default)(cn.default).withConfig({displayName:"components__LockIcon",componentId:"sc-1vhey8s-11"})(["color:",";display:inline;height:36px;width:36px;margin:-4px -4px -4px -10px;"],(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary})),Yn=e=>{let{author:t,contextMenu:a,displayDate:o,editMode:i,formattedTitle:l,id:s,isLocked:c,lockUser:d={},onEditComplete:u,onEditCancel:p,status:m,title:b}=e;const f=(0,h.useMemo)((()=>{if(!o)return null;switch(m){case W.PUBLISH:return(0,M.default)(
/* translators: %s: published date */
(0,n.__)("Published %s","web-stories"),o);case W.FUTURE:return(0,M.default)(
/* translators: %s: future publish date */
(0,n.__)("Scheduled %s","web-stories"),o);default:return(0,M.default)(
/* translators: %s: last modified date */
(0,n.__)("Modified %s","web-stories"),o)}}),[m,o]),{name:_,avatar:g}=d,E=c&&g&&r.createElement(Mn,null,r.createElement(Tooltip,{position:zo.PLACEMENT.BOTTOM_START,title:_&&(0,M.default)(
/* translators: %s: user name */
(0,n.__)("%s is currently editing this story","web-stories"),_)},r.createElement(Un,{src:g,alt:_,decoding:"async",height:24,width:24,"data-test-id":"lock-user-avatar"})));return r.createElement(Rn,null,E,i?r.createElement(Ba,{onEditComplete:u,onEditCancel:p,value:b,id:s,label:(0,n.__)("Rename story","web-stories"),isInverted:!0}):r.createElement(xn,null,c&&r.createElement(Gn,null),r.createElement(Fn,null,l)),r.createElement(Dn,null,r.createElement(Bn,null,m===W.DRAFT&&r.createElement(Hn,{isBold:!0},(0,n.__)("Draft","web-stories")),m===W.PENDING&&r.createElement(Hn,{isBold:!0},(0,n.__)("Pending","web-stories")),t?.name&&r.createElement(Hn,null,t?.name),r.createElement(Hn,{className:"dashboard-grid-item-date"},f)),r.createElement(Bn,null,a)))};function zn(){return zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},zn.apply(this,arguments)}const jn=(0,h.forwardRef)(((e,t)=>{let{onFocus:a,isActive:o,pageSize:i,renameStory:l,story:s,storyMenu:c}=e;const{userId:d}=E(),u=o?0:-1,p=l?{editMode:l?.id===s?.id,onEditComplete:e=>l?.handleOnRenameStory(s,e),onEditCancel:l?.handleCancelRename}:{},b=(0,h.useMemo)((()=>s?.locked&&d!==s?.lockUser.id),[s,d]),f=(0,h.useMemo)((()=>sn({menuItems:c.menuItems,story:s,isLocked:b})),[c,s,b]),_=ft(s?.status===W.DRAFT?s?.modifiedGmt:s?.createdGmt),g=Xo(s.title),S=(0,h.useMemo)((()=>f.length?r.createElement(StoryMenu,{menuLabel:b?(0,M.default)(
/* translators: 1: story title. 2: user currently editing the story. */
(0,n.__)("Context menu for %1$s (locked by %2$s)","web-stories"),g,s?.lockUser.name):(0,M.default)(
/* translators: %s: story title.*/
(0,n.__)("Context menu for %s","web-stories"),g),itemActive:o,tabIndex:u,onMoreButtonSelected:c.handleMenuToggle,contextMenuId:c.contextMenuId,storyId:s.id,isInverted:!0,menuItems:f,menuStyleOverrides:(0,m.css)(["margin:0 0 0 auto;"])}):null),[b,g,s?.lockUser?.name,s.id,o,u,c,f]);return r.createElement(kn,{"data-testid":`story-grid-item-${s.id}`,onFocus:a,$posterHeight:i.height,ref:t,"aria-label":(0,M.default)(
/* translators: %s: story title.*/
(0,n.__)("Details about %s","web-stories"),g)},r.createElement(On,null,r.createElement(Pn,null,r.createElement(Ln,zn({},s.featuredMediaUrl?{alt:(0,M.default)(
/* translators: %s: Story title. */
(0,n.__)("%s Poster image","web-stories"),g),as:"img",src:s.featuredMediaUrl,decoding:"async"}:null,{width:je,height:ze})),r.createElement(Cn,null),r.createElement(An,null,s?.capabilities?.hasEditAction&&r.createElement(Nn,{className:"grid-item-anchor","data-testid":"story-editor-grid-link",tabIndex:u,href:s.editStoryLink},r.createElement(In.VisuallyHidden,null,(0,M.default)(
/* translators: %s: Story title. */
(0,n.__)("Open %s in Editor","web-stories"),g))),r.createElement(Yn,zn({author:s.author,contextMenu:S,displayDate:_,formattedTitle:g,id:s.id,isLocked:b,lockUser:s?.lockUser,status:s?.status,title:s.title},p))))))}));jn.displayName="StoryGridItem";const Vn=jn,$n=(0,m.default)(qt).withConfig({displayName:"storyGridView__StoryGrid",componentId:"sc-1fwq7hb-0"})(["width:calc(100% - ","px);"],Ne),qn=e=>{let{stories:t,pageSize:a,storyMenu:o,renameStory:i,returnStoryFocusId:l}=e;const{isRTL:s}=E(),c=(0,h.useRef)(),d=(0,h.useRef)(),u=(0,h.useRef)({}),[p,m]=(0,h.useState)(),b=(0,h.useRef)(),f=(0,h.useMemo)((()=>t.map((e=>{let{id:t}=e;return t}))),[t]);(0,Ot.default)({containerRef:c,gridRef:d,itemRefs:u,isRTL:s,currentItemId:p,items:t}),(0,h.useEffect)((()=>{if(!p&&l?.value&&!b.current){const e=l?.value;m(e);const t=u.current?.[e]?.querySelectorAll(["button","a"])?.[0];t?.focus()}}),[p,l]),(0,h.useEffect)((()=>{p&&(b.current=p)}),[p]);const _=(0,h.useCallback)(((e,t)=>{if(o.handleMenuToggle(t),t<0&&9===e?.keyCode){const t=!e?.shiftKey?f[f.indexOf(p)+1]:p;l.set(t),b.current=null,m(null)}}),[p,f,l,o]),g=(0,h.useCallback)((()=>{b.current=null,m(null),l.set(null)}),[l]);(0,h.useFocusOut)(c,(()=>m(null)),[]);const S=(0,h.useMemo)((()=>{const e=[H,B,F],t=o.menuItems.map((t=>{const a={...t};return e.includes(t?.value)&&(a.action=e=>{g(),t.action(e)}),a}));return{...o,handleMenuToggle:_,menuItems:t}}),[_,o,g]),T=(0,h.useMemo)((()=>t.map((e=>r.createElement(Vn,{onFocus:()=>m(e.id),isActive:p===e.id,ref:t=>{u.current[e.id]=t},key:e.id,pageSize:a,renameStory:i,story:e,storyMenu:S})))),[p,S,a,i,t]);return r.createElement("div",{ref:c},r.createElement($n,{pageSize:a,ref:d,role:"list",ariaLabel:(0,n.__)("Viewing stories","web-stories")},T))},Wn="DELETE_STORY";const Zn=function StoriesView(e){let{filterValue:t,loading:a,sort:o,storyActions:i,stories:l,view:s}=e;const[c,d]=(0,h.useState)(-1),[u,p]=(0,h.useState)(-1),[m,b]=(0,h.useState)(""),[f,_]=(0,h.useState)(null),[g,E]=(0,h.useState)({}),[S,T]=(0,h.useState)(null),{showSnackbar:w}=(0,an.useSnackbar)(),v=m===Wn&&f,I=(0,h.useMemo)((()=>l.map((e=>{let{id:t}=e;return t}))),[l]);(0,h.useEffect)((()=>{if(g.id&&!S){const e=I.indexOf(g.id),t=e>0?-1:1,a=g.isDeleted?t:0,o=I[e+a];o&&T(o)}}),[g,S,I]),(0,h.useEffect)((()=>{m||_(null)}),[m,_]),(0,h.useEffect)((()=>{m&&(E({}),T(null))}),[m]);const C=(0,h.useCallback)(((e,t)=>{p(-1),(0,y.trackEvent)("rename_story"),i.updateStory({...e,title:{raw:t}})}),[i]),A=(0,h.useCallback)((()=>{(0,y.trackEvent)("delete_story"),i.trashStory(f),E({id:f.id,isDeleted:!0}),b("")}),[i,f]),O=(0,h.useCallback)((()=>{d(-1),(0,y.trackEvent)("open_in_editor")}),[]),L=(0,h.useCallback)((e=>{d(-1),p(e.id)}),[]),k=(0,h.useCallback)((e=>{d(-1),(0,y.trackEvent)("duplicate_story"),i.duplicateStory(e),E({id:e.id})}),[i]),P=(0,h.useCallback)((e=>{d(-1),_(e),b(Wn)}),[]),N=(0,h.useCallback)((e=>{d(-1),window.navigator.clipboard.writeText(e.link),w({message:(0,M.default)(
/* translators: %s: story title. */
(0,n.__)("%s has been copied to your clipboard.","web-stories"),Xo(e.title)),dismissible:!0}),E({id:e.id})}),[w]),R=Y.map((e=>{switch(e?.value){case U:e.action=N;break;case H:e.action=P;break;case F:e.action=k;break;case G:e.action=O;break;case B:e.action=L;break;default:e.action=()=>d(-1)}return e})),x=(0,h.useMemo)((()=>({handleMenuToggle:d,contextMenuId:c,menuItems:R})),[c,R,d]),D=(0,h.useMemo)((()=>({id:u,handleOnRenameStory:C,handleCancelRename:()=>p(-1)})),[C,p,u]),z=(0,h.useMemo)((()=>s.style===Be.LIST?r.createElement(StoryListView,{handleSortChange:o.set,handleSortDirectionChange:o.setDirection,hideStoryList:a?.isLoading&&!a?.showStoriesWhileLoading.current,pageSize:s.pageSize,renameStory:D,sortDirection:o.direction,stories:l,storyMenu:x,storySort:o.value,storyStatus:t}):!a?.isLoading||a?.isLoading&&a?.showStoriesWhileLoading.current?r.createElement(qn,{isLoading:a?.isLoading,pageSize:s.pageSize,renameStory:D,storyMenu:x,stories:l,returnStoryFocusId:{value:S,set:T}}):null),[a,t,D,S,o,l,x,s]);return r.createElement(r.Fragment,null,z,a?.isLoading&&!a?.showStoriesWhileLoading.current&&r.createElement(Wa,null,r.createElement(nn.LoadingSpinner,null)),v&&r.createElement(fa,{isOpen:!0,contentLabel:(0,n.__)("Dialog to confirm deleting a story","web-stories"),title:(0,n.__)("Delete Story","web-stories"),onClose:()=>{E({id:f.id}),b("")},secondaryText:(0,n.__)("Cancel","web-stories"),secondaryRest:{"aria-label":(0,M.default)(
/* translators: %s: story title. */
(0,n.__)('Cancel deleting story "%s"',"web-stories"),Xo(f.title))},primaryText:(0,n.__)("Delete","web-stories"),onPrimary:A,primaryRest:{"aria-label":(0,M.default)(
/* translators: %s: story title. */
(0,n.__)('Confirm deleting story "%s"',"web-stories"),Xo(f.title))}},r.createElement(ha.Text,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,M.default)(
/* translators: %s: story title. */
(0,n.__)('Are you sure you want to delete "%s"?',"web-stories"),Xo(f.title)))))};const Kn=function(e){let{allPagesFetched:t,canViewDefaultTemplates:a,filter:o,loading:i,page:l,search:s,sort:c,stories:d,storyActions:u,view:p}=e;return r.createElement(ja.Scrollable,null,r.createElement(pa,null,d.length>0?r.createElement(r.Fragment,null,r.createElement(Zn,{filterValue:o.value,sort:c,storyActions:u,stories:d,view:p,loading:i}),r.createElement(rn.default,{canLoadMore:!t,isLoading:i?.isLoading,allDataLoadedMessage:(0,n.__)("No more stories","web-stories"),allDataLoadedAriaMessage:(0,n.__)("All stories are loaded","web-stories"),loadingAriaMessage:(0,n.__)("Loading more stories","web-stories"),onLoadMore:l.requestNextPage})):r.createElement(Br,null,r.createElement(co.Headline,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"h3"},s?.keyword?(0,M.default)(
/* translators: %s: search term. */
(0,n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),s.keyword):(0,n.__)("Start telling Stories.","web-stories")),!s?.keyword&&a&&r.createElement(Pt.Button,{type:Nt.BUTTON_TYPES.PRIMARY,size:Nt.BUTTON_SIZES.MEDIUM,as:"a",href:no(xe.TEMPLATES_GALLERY)},(0,n.__)("Explore Templates","web-stories")))))};var Xn=a(56226);const Qn=function(e){return e.reduce(((e,t)=>!t.title||t?.title.trim().length<=0?e:[...e,{label:t.title,value:t.title}]),[])};var Jn=a(52829);const ei="VERTICAL",ti="COLOR",ai="TAG",oi="TITLE";const ri=function(e){const t=Object.values(e),a=t.flatMap((e=>e.colors)).map((e=>({label:e.family,value:e.family,type:ti}))),o=t.flatMap((e=>e.tags)).map((e=>({label:e,value:e,type:ai}))),r=t.map((e=>e.vertical)).map((e=>({label:e,value:e,type:ei}))),n=t.map((e=>({label:e.title,value:e.title,type:oi})));return[...(0,Jn.default)(o,"label"),...(0,Jn.default)(a,"label"),...(0,Jn.default)(r,"label"),...(0,Jn.default)(n,"label")]};const ni=function(e){return t=>!e||e.some((e=>{switch(e?.type){case ai:return t.tags.map((e=>e.toLowerCase())).includes(e.value.toLowerCase());case ti:return t.colors.map((e=>e.label.toLowerCase())).includes(e.value.toLowerCase());case ei:return t.vertical.toLowerCase().includes(e.value.toLowerCase());case oi:return t.title.toLowerCase().includes(e.value.toLowerCase());default:return!0}}))},ii=(0,m.default)(Xn.default).withConfig({displayName:"header__StyledPill",componentId:"sc-vdoh83-0"})(["margin:0 2px;white-space:nowrap;& > span{padding-left:8px;color:",";}"],(e=>{let{theme:t,isActive:a}=e;return a?t.colors.gray[20]:t.colors.fg.tertiary}));const li=(0,h.memo)((function(e){let{filter:t,filters:a,initialPageReady:o,search:i,sort:l,stories:s,totalStoriesByStatus:c,view:d,author:u,queryAuthorsBySearch:p,showAuthorDropdown:m}=e;const{actions:{scrollToTop:b}}=Ua(),{setKeyword:f}=i,_=(0,h.useMemo)((()=>Qn(s)),[s]),g=tr({currentFilter:t.value,isActiveSearch:Boolean(i.keyword),totalResults:(t.value.split(",")||[]).reduce(((e,t)=>e+(c[t]||0)),0),view:He}),E=(0,h.useCallback)((e=>{t.set(e),b()}),[t,b]),S=(0,h.useMemo)((()=>!o||c&&0===Object.keys(c).length?null:r.createElement(r.Fragment,null,K.map((e=>{const{label:a,status:o,value:i}=e;if(!(o in c))return null;const l=c[o];if(0===l)return null;const s=(0,M.default)(
/* translators: %s is story status */
(0,n.__)("Filter stories by %s","web-stories"),a);return r.createElement(ii,{key:i,onClick:()=>E(i),isActive:t.value===i,disabled:l<=0,"aria-label":s},a,l&&r.createElement("span",null,l))})).filter(Boolean))),[c,t.value,o,E]),T=(0,h.useCallback)((e=>{l.set(e),b()}),[b,l]),w=(0,h.useDebouncedCallback)((async e=>{await(0,y.trackEvent)("search",{search_type:"dashboard",search_term:e}),f(e)}),300),v=(0,h.useCallback)((()=>f("")),[f]);return r.createElement(r.Fragment,null,r.createElement(tn,{heading:(0,n.__)("Dashboard","web-stories"),searchPlaceholder:(0,n.__)("Search Stories","web-stories"),searchOptions:_,handleSearchChange:w,showSearch:o,searchValue:i.keyword,onClear:v},S),r.createElement(BodyViewOptions,{showGridToggle:!0,filters:a,showSortDropdown:!0,showAuthorDropdown:m,resultsLabel:g,layoutStyle:d.style,handleLayoutSelect:d.toggleStyle,currentSort:l.value,pageSortOptions:$,handleSortChange:T,author:u,queryAuthorsBySearch:p,sortDropdownAriaLabel:(0,n.__)("Choose sort option for display","web-stories")}))}));const si=function MyStories(){const{duplicateStory:e,fetchStories:t,trashStory:a,updateStory:o,allPagesFetched:n,isLoading:i,stories:l,storiesOrderById:s,totalPages:c,totalStoriesByStatus:d,getAuthors:u}=Er((e=>{let{actions:{storyApi:{duplicateStory:t,fetchStories:a,trashStory:o,updateStory:r},usersApi:{getAuthors:n}},state:{stories:{allPagesFetched:i,isLoading:l,stories:s,storiesOrderById:c,totalPages:d,totalStoriesByStatus:u}}}=e;return{duplicateStory:t,fetchStories:a,trashStory:o,updateStory:r,allPagesFetched:i,isLoading:l,stories:s,storiesOrderById:c,totalPages:d,totalStoriesByStatus:u,getAuthors:n}})),{filters:p,filtersLoading:m,getFiltersObject:b}=yr((e=>{let{state:{filters:t,filtersLoading:a},actions:{getFiltersObject:o}}=e;return{filters:t,filtersLoading:a,getFiltersObject:o}})),{apiCallbacks:f,canViewDefaultTemplates:_}=E(),g=(0,h.useRef)(!1);(0,h.useEffect)((()=>(g.current=!0,()=>{g.current=!1})),[]);const{filter:S,page:T,search:w,sort:v,view:I,showStoriesWhileLoading:C,initialPageReady:A,author:O}=function(e){let{filters:t,isLoading:a=!1,totalPages:o}=e;const[r,n]=(0,h.useState)(Be.GRID),[i,l]=(0,h.useState)(j.LAST_MODIFIED),[s,c]=(0,h.useState)(t.length>0?t[0].value:null),[d,u]=(0,h.useState)(z.DESC),[p,m]=(0,h.useState)(1),[b,f]=(0,h.useState)(""),[_,g]=(0,h.useState)(null),[E,S]=(0,h.useState)([]),T=(0,h.useRef)(!1),[w,v]=(0,h.useState)(!1),{pageSize:I}=lr({thumbnailMode:r===Be.LIST,isGrid:r===Be.GRID}),C=(0,h.useCallback)((e=>{const t={MIN:1,MAX:o};m((0,sr.clamp)(e,t))}),[o]),A=(0,h.useCallback)((e=>{l(e),C(1)}),[C]),O=(0,h.useCallback)((e=>{c(e),C(1)}),[C]),L=(0,h.useCallback)((e=>{e!==d&&u(e)}),[d]),k=(0,h.useCallback)((()=>{const e=r===Be.LIST?Be.GRID:Be.LIST;if(n(e),e===Be.LIST){const e=i===j.NAME?z.ASC:z.DESC;L(e)}}),[i,L,r,n]),P=(0,h.useCallback)((e=>{C(1),f(e)}),[C]),N=(0,h.useCallback)((()=>{T.current=!0,C(p+1)}),[p,C]),R=(0,h.useCallback)((e=>{let{id:t}=e;g((e=>e===t?null:t))}),[]);return(0,h.useEffect)((()=>{b.length&&(0,y.trackEvent)("search",{search_type:"dashboard_stories",search_term:b,search_filter:s,search_author_filter:_,search_order:d,search_orderby:i,search_view:r})}),[b,s,d,i,r,_]),(0,h.useEffect)((()=>{a||(T.current=!1)}),[a]),(0,h.useEffect)((()=>{o&&!w&&v(!0)}),[o,w]),(0,h.useMemo)((()=>({view:{style:r,toggleStyle:k,pageSize:I},sort:{value:i,direction:d,set:A,setDirection:L},filter:{value:s,set:O},page:{value:p,set:m,requestNextPage:N},search:{keyword:b,setKeyword:P},author:{filterId:_,toggleFilterId:R,queriedAuthors:E,setQueriedAuthors:S},initialPageReady:w,showStoriesWhileLoading:T})),[r,k,I,i,A,d,L,s,w,O,p,N,b,P,_,R,E,S])}({filters:K,isLoading:i,totalPages:c}),{setQueriedAuthors:L}=O;let k=(0,h.useCallback)((e=>u(e).then((e=>{if(!g.current)return;const t=e.map((e=>{let{id:t,name:a}=e;return{id:t,name:a}}));L((e=>{const a=e.map((e=>{let{id:t}=e;return t})),o=t.filter((e=>!a.includes(e.id)));return[...e,...o]}))}))),[u,L]);u||(k=cr),(0,h.useEffect)((()=>{k()}),[k]),(0,h.useEffect)((()=>{t({page:T.value,searchTerm:w.keyword,sortDirection:v.direction,sortOption:v.value,status:S.value,author:O.filterId,filters:b()})}),[t,S.value,T.value,w.keyword,v.direction,v.value,O.filterId,f,b]);const P=(0,h.useMemo)((()=>s.map((e=>l[e]))),[l,s]),N="function"==typeof u;return r.createElement(ja.Provider,null,r.createElement(li,{initialPageReady:A,filter:S,filters:p,search:w,sort:v,stories:P,totalStoriesByStatus:d,view:I,author:O,queryAuthorsBySearch:k,showAuthorDropdown:N}),r.createElement(Kn,{allPagesFetched:n,canViewDefaultTemplates:_,filter:S,loading:{isLoading:i&&m,showStoriesWhileLoading:C},page:T,search:w,sort:v,stories:P,storyActions:{duplicateStory:e,trashStory:a,updateStory:o},view:I}),r.createElement(ja.Fixed,null,r.createElement(Oo,null)))},ci=m.default.div.withConfig({displayName:"components__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],Cn,An,Cn,An,(e=>{let{$isSelected:t}=e;return t?1:0})),di=m.default.div.withConfig({displayName:"components__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),ui=(0,m.default)(Ln).attrs({as:"picture"}).withConfig({displayName:"components__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.medium})),pi="focus_template",mi=(0,m.default)(Pt.Button).attrs({type:Nt.BUTTON_TYPES.TERTIARY,size:Nt.BUTTON_SIZES.SMALL}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white})),bi=(0,h.forwardRef)(((e,t)=>{let{onCreateStory:a,onFocus:o,height:i,id:l,isActive:s,posterSrc:c,slug:d,title:u,status:p,onSeeDetailsClick:m=fr.noop}=e;const b=s?0:-1,f=(0,M.default)(
/* translators: %s: Template title. */
(0,n.__)("First page of %s template","web-stories"),u);return r.createElement(la,{ref:t,id:`template-grid-item-${l}`,className:"templateGridItem","data-testid":`template-grid-item-${l}`,$posterHeight:i,onFocus:o},r.createElement(On,null,r.createElement(ci,{$isSelected:s},r.createElement(ui,null,r.createElement("source",{srcSet:c?.webp,type:"image/webp"}),r.createElement("source",{srcSet:c?.png,type:"image/png"}),r.createElement("img",{src:c?.png,alt:f,decoding:"async",width:je,height:ze})),r.createElement(Cn,null),r.createElement(An,{"data-testid":"card-action-container","data-template-slug":d},r.createElement(di,null,r.createElement(mi,{ariaLabel:(0,M.default)(
/* translators: %s: template title.*/
(0,n.__)("Go to detail view of %s","web-stories"),u),onClick:()=>m(l,u),className:pi,tabIndex:b},Te[p]),a&&r.createElement(Pt.Button,{size:Nt.BUTTON_SIZES.SMALL,type:Nt.BUTTON_TYPES.PRIMARY,onClick:a,tabIndex:b,ariaLabel:(0,M.default)(
/* translators: %s: template title.*/
(0,n.__)("Create new story from %s","web-stories"),u)},(0,n.__)("Use template","web-stories")))))))}));bi.displayName="TemplateGridItem";const fi=bi;const hi=function TemplateGridView(e){let{pageSize:t,templates:a,templateActions:o}=e;const{isRTL:i,apiCallbacks:l}=E(),s=(0,h.useRef)(),c=(0,h.useRef)(),d=(0,h.useRef)({}),[u,p]=(0,h.useState)(null),{handleDetailsToggle:m,createStoryFromTemplate:b}=o||{},f=Boolean(l?.createStoryFromTemplate);(0,Ot.default)({containerRef:s,gridRef:c,itemRefs:d,isRTL:i,currentItemId:u,items:a}),(0,h.useEffect)((()=>{u&&d.current?.[u]?.querySelector(".focus_template")?.focus()}),[u]),(0,h.useFocusOut)(s,(()=>p(null)),[]);const _=(0,h.useMemo)((()=>a.map((e=>{let{id:a,slug:o,status:n,title:i,postersByPage:l}=e;const s=u===a,c=l?.[0];return r.createElement(fi,{onCreateStory:f?()=>b(a):cr,onFocus:()=>{p(a)},onSeeDetailsClick:m,height:t.height,id:a,isActive:s,key:o,posterSrc:c,ref:e=>{d.current[a]=e},slug:o,status:n,title:i})}))),[a,u,f,m,t.height,b]);return r.createElement("div",{ref:s},r.createElement(qt,{pageSize:t,role:"list",ref:c,ariaLabel:(0,n.__)("Viewing available templates","web-stories")},_))};const _i=function(e){let{allPagesFetched:t,isLoading:a,page:o,templates:i,view:l,totalTemplates:s,search:c,templateActions:d}=e;const{newStoryURL:u}=E(),p=(0,h.useMemo)((()=>a?r.createElement(Wa,null,r.createElement(nn.LoadingSpinner,null)):s>0?r.createElement(r.Fragment,null,r.createElement(hi,{templates:i,pageSize:l.pageSize,templateActions:d}),r.createElement(rn.default,{canLoadMore:!t,isLoading:a,allDataLoadedMessage:(0,n.__)("No more templates","web-stories"),allDataLoadedAriaMessage:(0,n.__)("All templates are loaded","web-stories"),loadingAriaMessage:(0,n.__)("Loading more templates","web-stories"),onLoadMore:o.requestNextPage})):r.createElement(Br,null,r.createElement(co.Headline,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"h3"},c?.keyword?(0,M.default)(
/* translators: %s: search term. */
(0,n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),c.keyword):(0,n.__)("No templates currently available.","web-stories")),!c?.keyword&&r.createElement(Pt.Button,{type:Nt.BUTTON_TYPES.PRIMARY,size:Nt.BUTTON_SIZES.MEDIUM,as:"a",href:u},(0,n.__)("Create New Story","web-stories")))),[t,a,u,o.requestNextPage,c.keyword,d,i,s,l.pageSize]);return r.createElement(ja.Scrollable,null,r.createElement(pa,null,p))};const gi=function(e){let{filter:t,isLoading:a,totalTemplates:o,sort:i,view:l,search:s,searchOptions:c=[]}=e;const d=(0,f.useFeature)("enableInProgressTemplateActions"),{setKeyword:u}=s,p=(0,h.useDebouncedCallback)((e=>{u(e)}),300),m=(0,h.useCallback)((()=>u("")),[u]),b=tr({totalResults:o,currentFilter:t.value,view:Ue});return r.createElement(r.Fragment,null,r.createElement(tn,{heading:(0,n.__)("Explore Templates","web-stories"),searchPlaceholder:(0,n.__)("Search Templates","web-stories"),showSearch:!0,searchOptions:c,searchValue:s.keyword,handleSearchChange:p,onClear:m}),r.createElement(BodyViewOptions,{resultsLabel:b,layoutStyle:l.style,handleLayoutSelect:l.toggleStyle,currentSort:i.value,isLoading:a,pageSortOptions:Se,showSortDropdown:d,handleSortChange:d?i.set:()=>{},sortDropdownAriaLabel:(0,n.__)("Choose sort option for display","web-stories")}))};var Ei=a(94320);const Si=m.default.nav.withConfig({displayName:"header__Nav",componentId:"sc-1wko3r4-0"})(["justify-content:space-between;align-items:center;display:flex;margin:48px auto;width:calc(76% + 121px);"]),Ti=(0,m.default)(Pt.Button).attrs({type:Nt.BUTTON_TYPES.PRIMARY,size:Nt.BUTTON_SIZES.SMALL}).withConfig({displayName:"header__CTAButton",componentId:"sc-1wko3r4-1"})(["padding:10px 16px;"]);const yi=function(e){let{templateTitle:t,templateId:a,templateActions:o,canCreateStory:i}=e;const{createStoryFromTemplate:l,handleDetailsToggle:s}=o||{};return r.createElement(Si,null,r.createElement(Pt.Button,{type:Nt.BUTTON_TYPES.TERTIARY,variant:Nt.BUTTON_VARIANTS.SQUARE,size:Nt.BUTTON_SIZES.SMALL,"aria-label":(0,n.__)("Close","web-stories"),onClick:s},r.createElement(Ei.default,null)),i&&r.createElement(Ti,{onClick:()=>l(a),"aria-label":(0,M.default)(
/* translators: %s: template title */
(0,n.__)("Use %s template to create new story","web-stories"),t)},(0,n.__)("Use template","web-stories")))};var wi=a(32214),vi=a(2039),Ii=a(80908);const Ci=m.default.section.withConfig({displayName:"components__Panel",componentId:"sc-1cvs5jb-0"})(["padding:16vh 0 14vh 0;"]),Ai=m.default.div.withConfig({displayName:"components__Container",componentId:"sc-1cvs5jb-1"})(["position:relative;width:76%;max-width:","px;margin:0 auto;"],1459.2),Oi=m.default.div.withConfig({displayName:"components__Inner",componentId:"sc-1cvs5jb-2"})(["display:flex;align-items:start;"]),Li=m.default.section.attrs({"aria-label":(0,n.__)("Template Details","web-stories")}).withConfig({displayName:"components__DetailContainer",componentId:"sc-1cvs5jb-3"})(["padding:0 0 0 60px;margin-right:auto;"]),ki=m.default.div.withConfig({displayName:"components__TemplateDetails",componentId:"sc-1cvs5jb-4"})(["position:relative;display:flex;width:500px;"]),Pi=(m.default.section.attrs({"aria-label":(0,n.__)("Related Templates","web-stories")}).withConfig({displayName:"components__RowContainer",componentId:"sc-1cvs5jb-5"})(["display:flex;flex-wrap:wrap;padding-bottom:40px;margin:0 80px 0;& > h3{padding-bottom:32px;}& > div{width:100%;}"]),(0,m.default)(Ci).withConfig({displayName:"content__StyledPanel",componentId:"sc-jxjpbh-0"})(["padding:0 0 48px 0;"])),Ni=(0,m.default)(ha.Text).withConfig({displayName:"content__ByLineText",componentId:"sc-jxjpbh-1"})(["color:",";margin:8px 0 24px;"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Ri=(0,m.default)(ha.Text).withConfig({displayName:"content__DescriptionText",componentId:"sc-jxjpbh-2"})(["margin-bottom:24px;"]),xi=m.default.div.withConfig({displayName:"content__PaginationContainer",componentId:"sc-jxjpbh-3"})(["position:absolute;top:","px;",""],235,(e=>{let{alignLeft:t}=e;return t?"\n          left: 0;\n          transform: translate(-187.5%, -50%);\n        ":"\n          right: 0;\n          transform: translate(187.5%, -50%);\n        "})),Mi=(0,m.default)(wi.Chip).attrs({forwardedAs:"li"}).withConfig({displayName:"content__TemplateTag",componentId:"sc-jxjpbh-4"})(["margin-right:12px;margin-bottom:12px;> span{color:"," !important;}"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),Di=m.default.div.withConfig({displayName:"content__MetadataContainer",componentId:"sc-jxjpbh-5"})(["margin-bottom:24px;display:flex;flex-wrap:wrap;align-items:center;"]);const Bi=function DetailsContent(e){let{activeTemplateIndex:t,isRTL:a,filteredTemplatesLength:o,switchToTemplateByOffset:i,template:l}=e;const{postersByPage:s,title:c,description:d,tags:u,colors:p}=l||{},[m,b]=(0,h.useState)([]);(0,h.useEffect)((()=>{s&&b(Object.values(s).map(((e,t)=>({id:t,...e}))))}),[s]);const{NextButton:f,PrevButton:_}=(0,h.useMemo)((()=>{const e=a?t-1:t+1,l=a?t+1:t-1,s=a?!o||t===o-1:!o||0===t,c=a?!o||0===t:!o||t===o-1,d=r.createElement(Pt.Button,{type:Nt.BUTTON_TYPES.TERTIARY,size:Nt.BUTTON_SIZES.SMALL,variant:Nt.BUTTON_VARIANTS.SQUARE,"aria-label":(0,n.__)("View previous template","web-stories"),onClick:()=>{i(l),b([])},disabled:s},r.createElement(vi.default,{height:32,width:32})),u=r.createElement(Pt.Button,{type:Nt.BUTTON_TYPES.TERTIARY,size:Nt.BUTTON_SIZES.SMALL,variant:Nt.BUTTON_VARIANTS.SQUARE,"aria-label":(0,n.__)("View next template","web-stories"),onClick:()=>{i(e),b([])},disabled:c},r.createElement(Ii.default,{height:32,width:32}));return a?{NextButton:d,PrevButton:u}:{NextButton:u,PrevButton:d}}),[o,t,a,i]),g=l?(0,M.default)(
/* translators: byline. %s: author name. */
(0,n.__)("By %s","web-stories"),l.createdBy):null;return r.createElement(Pi,null,r.createElement(Ai,null,r.createElement(xi,{alignLeft:!0},_),r.createElement(Oi,null,r.createElement(Ht,{galleryPosters:m,isRTL:a,galleryLabel:(0,n.__)("Template details by page","web-stories")}),r.createElement(ki,null,r.createElement(Li,null,r.createElement(Hr,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"h3","data-testid":"template-details-title"},c),r.createElement(Ni,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},g),r.createElement(Ri,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},d),r.createElement(Di,{role:"list","aria-label":(0,n.__)("Template tags","web-stories")},u.map((e=>r.createElement(Mi,{key:e,disabled:!0},e)))),r.createElement(Di,null,r.createElement(ua,{colors:p,size:32,"aria-label":(0,n.__)("Template colors","web-stories")}))))),r.createElement(xi,null,f)))};const Fi=function TemplateDetailsModal(e){let{activeTemplateIndex:t,activeTemplate:a,filteredTemplatesLength:o,isDetailsViewOpen:i,templateActions:s}=e;const{isRTL:d,apiCallbacks:u}=E(),p=Boolean(u?.createStoryFromTemplate),{handleDetailsToggle:m,switchToTemplateByOffset:b}=s||{};return r.createElement(c.Modal,{isOpen:i,onClose:m,contentLabel:(0,M.default)(
/* translators: %s: template title */
(0,n.__)("Template Details for %s","web-stories"),a?.title),overlayStyles:{backgroundColor:`${l.theme.colors.opacity.overlayDark}`},contentStyles:{display:"block",height:"90vh",width:"90vw",backgroundColor:`${l.theme.colors.standard.white}`}},r.createElement(yi,{templateTitle:a?.title,templateId:a?.id,templateActions:s,canCreateStory:p}),r.createElement(Bi,{activeTemplateIndex:t,isRTL:d,filteredTemplatesLength:o,switchToTemplateByOffset:b,template:a}))};const Hi=function ExploreTemplates(){const e=(0,Wr.default)(),[t,a]=(0,h.useState)(!1),[o,i]=(0,h.useState)(null),[l,s]=(0,h.useState)(0),{templateIdParam:c,replace:d}=ro((e=>{let{actions:t,state:a}=e;return{templateIdParam:a.queryParams.id,replace:t.replace}})),u=(0,h.useRef)(c),{allPagesFetched:p,isLoading:m,templates:b,templatesOrderById:f,totalPages:_,totalTemplates:g,createStoryFromTemplate:E,fetchExternalTemplates:S}=Er((e=>{let{state:{templates:{allPagesFetched:t,isLoading:a,templates:o,templatesOrderById:r,totalPages:n,totalTemplates:i}},actions:{storyApi:{createStoryFromTemplate:l},templateApi:{fetchExternalTemplates:s}}}=e;return{allPagesFetched:t,isLoading:a,templates:o,templatesOrderById:r,totalPages:n,totalTemplates:i,createStoryFromTemplate:l,fetchExternalTemplates:s}})),{filter:T,page:w,search:v,sort:I,view:C}=function(e){let{totalPages:t}=e;const[a,o]=(0,h.useState)(""),[r,n]=(0,h.useState)(Ee.POPULAR),[i,l]=(0,h.useState)(1),{pageSize:s}=lr({isGrid:!0}),c=(0,h.useCallback)((e=>{const a={MIN:1,MAX:t};l((0,sr.clamp)(e,a))}),[t]),d=(0,h.useCallback)((()=>c(i+1)),[i,c]),u=(0,h.useCallback)((e=>{n(e),c(1)}),[c]),p=(0,h.useCallback)((e=>{c(1),o(e)}),[c]);return(0,h.useMemo)((()=>({view:{style:Be.GRID,pageSize:s},sort:{value:r,set:u},filter:{value:_e.ALL,set:()=>{}},page:{value:i,set:l,requestNextPage:d},search:{keyword:a,setKeyword:p}})),[s,r,u,i,d,a,p])}({totalPages:_}),A=(0,h.useMemo)((()=>ri(b)),[b]),O=(0,h.useMemo)((()=>v.keyword?A.filter((e=>e.label.toLowerCase().includes(v.keyword.toLowerCase()))):A),[A,v.keyword]),L=(0,h.useMemo)((()=>f.map((e=>b[e])).filter(ni(O))),[f,b,O]),k=(0,h.useMemo)((()=>g!==L.length?L.length:g),[L,g]),P=(0,h.useMemo)((()=>(0,Jn.default)(O,"label")),[O]),N=(0,h.useCallback)((e=>{const t=b[e];(0,y.trackEvent)("use_template",{name:t.title,template_id:t.id}),E(t)}),[E,b]),R=(0,h.useCallback)((e=>{const t=L.find((t=>t.id===e));i(t),s(L.findIndex((t=>t.id===e))),u.current&&(u.current=void 0),d(`?id=${t.id}&isLocal=${t.isLocal}`)}),[d,L]),x=(0,h.useCallback)(((t,o)=>{a((a=>{const r=!a;return o&&(0,y.trackScreenView)(o),r&&t&&R(t),r||(d(""),e((0,n.__)("Exit detail templates view","web-stories"))),r}))}),[d,e,R]),D=(0,h.useCallback)((t=>{const a=L[t];i(a),s(t),d(`?id=${a.id}&isLocal=${a.isLocal}`),e((0,M.default)(
/* translators: %s: template title */
(0,n.__)("Viewing %s","web-stories"),a.title))}),[L,d,e]),B=(0,h.useMemo)((()=>({createStoryFromTemplate:N,handleDetailsToggle:x,switchToTemplateByOffset:D})),[N,x,D]);return(0,h.useEffect)((()=>{S()}),[S]),(0,h.useEffect)((()=>{if(u.current&&L.length){if(!L.some((e=>e.id===parseInt(u.current))))return void d("");a(!0),R(parseInt(u.current))}}),[L,d,R]),r.createElement(ja.Provider,null,r.createElement(gi,{isLoading:m&&!g,filter:T,sort:I,totalTemplates:k,search:v,searchOptions:P,view:C}),r.createElement(_i,{isLoading:m,allPagesFetched:p,page:w,templates:L,totalTemplates:k,search:v,view:C,templateActions:B}),r.createElement(ja.Fixed,null,r.createElement(Oo,null)),r.createElement(Fi,{activeTemplate:o,activeTemplateIndex:l,isDetailsViewOpen:t,templateActions:B,filteredTemplatesLength:L.length}))};const Ui=function(){const{storyError:e,templateError:t}=Er((e=>{let{state:{stories:{error:t},templates:{error:a}}}=e;return{storyError:t,templateError:a}})),{showSnackbar:a}=(0,an.useSnackbar)(),o=(0,h.useDebouncedCallback)((e=>a({message:e,dismissible:!0})),200);(0,h.useEffect)((()=>{e?.id&&o(e.message)}),[e,o]),(0,h.useEffect)((()=>{t?.id&&o(t.message)}),[t,o])};function Gi(){return Gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Gi.apply(this,arguments)}const Yi=e=>{let{additionalRoutes:t}=e;const{currentPath:a,templateId:o,availableRoutes:i}=ro((e=>{let{state:t}=e;return{...t,templateId:t.queryParams.id}})),{push:l,setAvailableRoutes:s}=ro((e=>{let{actions:t}=e;return t})),{canViewDefaultTemplates:c,leftRailSecondaryNavigation:d=[],documentTitleSuffix:u=(0,n.__)("Web Stories","web-stories")}=E(),{addInitialFetchListener:p}=Er((e=>{let{actions:{storyApi:{addInitialFetchListener:t}},state:{templates:{templates:a}}}=e;return{currentTemplate:void 0!==o?a[o]?.title:void 0,addInitialFetchListener:t}})),m=(0,h.useRef)(a===xe.DASHBOARD),[b,f]=(0,h.useState)(!m.current);(0,h.useEffect)((()=>p?.((e=>{e?.all<=0&&m.current&&c&&l(xe.TEMPLATES_GALLERY),f(!0)}))),[p,l,a,c]),(0,h.useEffect)((()=>{if(i.length>0)return;const e=t?t.map((e=>{let{path:t}=e;return t})):[];s([...Object.values(xe),...e])}),[t,i.length,s]),(0,h.useEffect)((()=>{if(!b)return;const e=d.find((e=>e.value===a)),t=Me[a]||e?.label||Me.DEFAULT;document.title=(0,M.default)(
/* translators: Admin screen title. 1: Admin screen name, 2: Network or site name. */
(0,n.__)("%1$s ‹ %2$s","web-stories"),t,u),(0,y.trackScreenView)(t)}),[a,b,d,u]),Ui();const{clearSnackbar:_,removeSnack:g,placement:S,currentSnacks:T}=(0,an.useSnackbar)(),w=(0,h.usePrevious)(a);return(0,h.useEffect)((()=>{a!==w&&_()}),[_,a,w]),r.createElement(r.Fragment,null,r.createElement(Va,null,r.createElement(To,null),r.createElement(FiltersProvider,null,r.createElement($a,null,r.createElement(io,{exact:!0,isDefault:!0,path:xe.DASHBOARD,component:r.createElement(si,null)}),c&&r.createElement(io,{path:xe.TEMPLATES_GALLERY,component:r.createElement(Hi,null)}),t&&t.map((e=>r.createElement(io,Gi({key:e.path},e))))))),r.createElement(on.Snackbar.Container,{notifications:T,onRemove:g,placement:S,max:1}))};var zi=a(43246),ji=a(51048),Vi=a(89511),$i=a(88914),qi=(a(88766),a(27342),a(40630),a(95740),a(98465),a(72858),a(1861));window.wp.domReady;var Wi=a(6389);const Zi=window.wp.apiFetch,Ki=["id","title","status","date","date_gmt","modified","modified_gmt","link","preview_link","edit_link","body","status","headers"].join(","),Xi=["id","title"],Qi=["title","link"],Ji="wp:lock,wp:lockuser,author,wp:featuredmedia",el="wp:action-edit",tl="wp:action-delete";function al(e){const{id:t,title:a,status:o,date:r,date_gmt:n,modified:i,modified_gmt:l,link:s,preview_link:c,edit_link:d,_embedded:{author:u=[{name:"",id:0}],"wp:featuredmedia":p=[{source_url:""}],"wp:lock":m=[{locked:!1}],"wp:lockuser":b=[{id:0,name:""}]}={},_links:f={}}=e;if(!t)return null;const{source_url:h}=p[0],_={hasEditAction:Object.prototype.hasOwnProperty.call(f,el),hasDeleteAction:Object.prototype.hasOwnProperty.call(f,tl)};return{id:t,status:o,title:a.raw,created:r,createdGmt:`${n}Z`,modified:i,modifiedGmt:`${l}Z`,author:{name:u[0].name,id:u[0].id},locked:m[0]?.locked,lockUser:{id:b[0].id,name:b[0].name,avatar:b[0]?.avatar_urls?.[96]||null},bottomTargetAction:d,featuredMediaUrl:h,editStoryLink:d,previewLink:c,link:s,capabilities:_}}function ol(e,t){const{status:a=W.ALL,sortOption:o=j.LAST_MODIFIED,sortDirection:r,searchTerm:n,page:i=1,perPage:l=Ye,author:s,filters:c={}}=t,d={_embed:Ji,context:"edit",_web_stories_envelope:!0,search:n||void 0,orderby:o,page:i,per_page:l,order:r||V[o],status:a,_fields:Ki,author:s,...c};return Zi({path:(0,Wi.default)(e.api.stories,d)}).then((e=>{let{body:t,headers:a}=e;const o=a&&parseInt(a["X-WP-TotalPages"]),r=a&&JSON.parse(a["X-WP-TotalByStatus"]),n=[];return{stories:t.reduce(((e,t)=>t?(n.push(t.id),e[t.id]=al(t),e):e),{}),fetchedStoryIds:n,totalPages:o,totalStoriesByStatus:r}}))}function rl(e,t){const a=(0,Wi.default)(`${e.api.stories}${t}`,{_method:"DELETE"});return Zi({path:a,method:"POST"})}function nl(e,t){const a=(0,Wi.default)(`${e.api.stories}${t.id}/`,{_embed:Ji}),o={id:t.id,author:t.author.id,title:t.title?.raw||t.title};return Zi({path:a,data:o,method:"POST"}).then(al)}const il=async(e,t)=>{const o=(0,Wi.default)(e.api.stories,{_fields:"edit_link"}),{createdBy:r,pages:n,version:i,colors:l}=t,{getStoryMarkup:s}=await a.e(5985).then(a.bind(a,7159)),c={featuredMedia:{id:0,url:""},publisherLogo:{url:""},title:""},d={content:s(c,n,{publisher:r}),pages:n,featuredMedia:c.featuredMedia,title:c.title,status:"auto-draft",meta:{web_stories_publisher_logo:c.publisherLogo.id}},u=l.map((e=>{let{color:t}=e;return(0,sa.default)(t)}));return Zi({path:o,data:{...d,story_data:{pages:n,version:i,autoAdvance:!0,defaultPageDuration:7,currentStoryStyles:{colors:u}}},method:"POST"}).then(ji.snakeToCamelCaseObjectKeys)};function ll(e,t){const a=(0,Wi.default)(e.api.stories,{_embed:Ji,_fields:Ki});return Zi({path:a,data:{original_id:t.id,status:"draft"},method:"POST"}).then(al)}function sl(e,t){return Zi({path:(0,Wi.default)(e.api.users,{per_page:"100",who:"authors",search:t})})}async function cl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=await Zi({path:(0,Wi.default)(e.api.taxonomies,{type:"web-story",context:"edit",...t})});return Object.values(a).map((e=>(e.restPath=e._links?.["wp:items"]?.[0]?.href,delete e._links,(0,ji.snakeToCamelCaseObjectKeys)(e,["capabilities","visibility"]))))}function dl(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Zi({url:(0,Wi.default)(t,a)})}function ul(e,t){return Zi({path:(0,Wi.default)(e.api.products,{per_page:1,search:t})})}var pl=a(95370);const ml={SETTINGS:{UPDATED:(0,n.__)("Setting saved.","web-stories")}},bl={UPLOAD_PUBLISHER_LOGO:{MESSAGE:(0,n.__)("Unable to add publisher logo","web-stories"),MESSAGE_PLURAL:(0,n.__)("Unable to add publisher logos","web-stories")},REMOVE_PUBLISHER_LOGO:{MESSAGE:(0,n.__)("Unable to remove publisher logo","web-stories")},REMOVE_FONT:{MESSAGE:(0,n.__)("Unable to remove font","web-stories")},UPDATE_PUBLISHER_LOGO:{MESSAGE:(0,n.__)("Unable to update publisher logo","web-stories")},LOAD_PUBLISHER_LOGOS:{MESSAGE:(0,n.__)("Unable to load publisher logos","web-stories")},LOAD_SETTINGS:{MESSAGE:(0,n.__)("Unable to load settings","web-stories")},UPDATE_EDITOR_SETTINGS:{MESSAGE:(0,n.__)("Unable to update settings data","web-stories")}},fl="/editor-settings",hl=[{value:fl,label:(0,n.__)("Settings","web-stories")},{value:(0,n.__)("https://wordpress.org/support/plugin/web-stories/","web-stories"),label:(0,n.__)("Support","web-stories"),isExternal:!0,trackingEvent:"click_support_page"}],_l="none",gl="adsense",El="admanager",Sl={DEFAULT:"default",DISABLED:"disabled",CUSTOM:"custom"},Tl="none",yl="woocommerce",wl="shopify",vl=(0,m.createGlobalStyle)(["body.web-story_page_stories-dashboard #wpbody{",";}.","{top:","px !important;left:","px !important;}body.folded .","{left:","px !important;}"],pl.scrollbarCSS,c.OVERLAY_CLASS,32,160,c.OVERLAY_CLASS,36);const Il=function(){const{currentPath:e}=ro((e=>{let{state:{currentPath:t}}=e;return{currentPath:t}}));(0,h.useEffect)((()=>{let t=`a[href$="#${e}"]`;e.length<=1&&(t='a[href$="page=stories-dashboard"]');const a=document.querySelectorAll("#menu-posts-web-story ul.wp-submenu li");a?.forEach((e=>{e.classList.remove("current"),e.querySelector("a")?.classList.remove("current"),e.querySelector("a")?.removeAttribute("aria-current")})),a?.forEach((e=>{e.querySelector(t)&&(e.classList.add("current"),e.querySelector("a")?.classList.add("current"),e.querySelector("a")?.setAttribute("aria-current","page"))}))}),[e])},Cl=(0,h.createContext)({state:{},actions:{}});const Al=function(e){return(0,h.useContextSelector)(Cl,e??h.identity)};const Ol={getItemByKey:function(e){let t=null;try{const a=localStorage.getItem(e);t=JSON.parse(a)}catch(e){(0,y.trackError)("local_storage_read",e.message)}return t},setItemByKey:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){(0,y.trackError)("local_storage_write",e.message)}}},Ll="web_stories_tracking_optin_banner_closed";function kl(){const e=localStorage.getItem(Ll);return Boolean(JSON.parse(e))}function Pl(){const{showSnackbar:e}=(0,an.useSnackbar)(),[t,a]=(0,h.useState)(kl),[o,r]=(0,h.useState)(!1),{currentUser:n,toggleWebStoriesTrackingOptIn:i}=Al((e=>{let{state:{currentUser:t},actions:{usersApi:{toggleWebStoriesTrackingOptIn:a}}}=e;return{currentUser:t,toggleWebStoriesTrackingOptIn:a}})),{currentPath:l}=ro((e=>{let{state:{currentPath:t}}=e;return{currentPath:t}})),s=void 0!==n.data.meta?.webStoriesTrackingOptin,c=Boolean(n.data.meta?.webStoriesTrackingOptin);(0,h.useEffect)((()=>{c?(0,y.enableTracking)():(0,y.disableTracking)()}),[c]);const d=(0,h.useCallback)((()=>{i(),Ol.setItemByKey(Ll,!0),r(!0),e({"aria-label":ml.SETTINGS.UPDATED,message:ml.SETTINGS.UPDATED,dismissible:!0})}),[e,i]),u=(0,h.useCallback)((()=>{a(!0),Ol.setItemByKey(Ll,!0)}),[]);let p=!0;return(t||l===fl||!s||!o&&c)&&(p=!1),{bannerVisible:p,optedIn:c,disabled:n.isUpdating,closeBanner:u,toggleWebStoriesTrackingOptIn:d}}const Nl=function(){const{settingsError:e,mediaError:t,settingSaved:a,publisherLogosError:o}=Al((e=>{let{state:{settings:{error:t,settingSaved:a},media:{error:o},publisherLogos:{error:r,settingSaved:n}}}=e;return{settingsError:t,mediaError:o,settingSaved:a||n,publisherLogosError:r}})),{showSnackbar:r}=(0,an.useSnackbar)(),n=(0,h.useDebouncedCallback)((e=>r({"aria-label":e,message:e,dismissible:!0})),200);(0,h.useEffect)((()=>{e?.id&&n(e.message)}),[e,n]),(0,h.useEffect)((()=>{a&&n(ml.SETTINGS.UPDATED)}),[n,a]),(0,h.useEffect)((()=>{t?.id&&n(t.message)}),[t,n]),(0,h.useEffect)((()=>{o?.id&&n(o.message)}),[o,n])},Rl=m.default.div.withConfig({displayName:"components__Wrapper",componentId:"sc-1y9ilpk-0"})([""]),xl=(0,m.default)(pa).withConfig({displayName:"components__Main",componentId:"sc-1y9ilpk-1"})(["display:flex;flex-direction:column;padding-top:36px;margin-top:20px;margin-bottom:56px;max-width:945px;"]),Ml=m.default.form.withConfig({displayName:"components__SettingForm",componentId:"sc-1y9ilpk-2"})(["display:grid;grid-template-columns:27% minmax(400px,1fr);column-gap:6.56%;padding-bottom:52px;@media ","{grid-template-columns:100%;row-gap:20px;}"],(e=>{let{theme:t}=e;return t.breakpoint.mobile})),Dl=(0,m.default)(co.Headline).attrs({as:"h3"}).withConfig({displayName:"components__SettingHeading",componentId:"sc-1y9ilpk-3"})(["",";margin:8px 0;"],(e=>{let{theme:t}=e;return Ca.expandPresetStyles({preset:{...t.typography.presets.label[Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.LARGE]},theme:t})})),Bl=(0,m.default)(Kt.Link).withConfig({displayName:"components__InlineLink",componentId:"sc-1y9ilpk-4"})(["display:inline-block;"]),Fl=(0,m.default)(ha.Text).withConfig({displayName:"components__HelperText",componentId:"sc-1y9ilpk-5"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Hl=(0,m.default)(ha.Text).withConfig({displayName:"components__ConnectionHelperText",componentId:"sc-1y9ilpk-6"})(["padding-top:12px;color:",";"],(e=>{let{hasError:t,theme:a}=e;return t?a.colors.fg.negative:a.colors.fg.tertiary})),Ul=(0,m.default)(ha.Text).withConfig({displayName:"components__CenterMutedText",componentId:"sc-1y9ilpk-7"})(["color:",";text-align:center;"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Gl=(0,m.default)(Fl).withConfig({displayName:"components__SettingSubheading",componentId:"sc-1y9ilpk-8"})(["padding:8px 0;"]),Yl=(0,m.default)(Fl).withConfig({displayName:"components__TextInputHelperText",componentId:"sc-1y9ilpk-9"})(["padding-top:12px;"]),zl=(0,m.default)(ha.Text).withConfig({displayName:"components__CheckboxLabel",componentId:"sc-1y9ilpk-10"})(["display:flex;justify-content:flex-start;margin-top:8px;cursor:pointer;"]),jl=(0,m.default)(Fl).withConfig({displayName:"components__CheckboxLabelText",componentId:"sc-1y9ilpk-11"})(["margin-left:8px;"]),Vl=(0,m.default)(Ul).withConfig({displayName:"components__Error",componentId:"sc-1y9ilpk-12"})(["padding-bottom:10px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.negative})),$l=m.default.div.withConfig({displayName:"components__UploadedContainer",componentId:"sc-1y9ilpk-13"})(["display:grid;grid-template-columns:repeat(auto-fill,102px);grid-auto-rows:102px;grid-column-gap:12px;grid-row-gap:20px;padding-bottom:20px;margin-bottom:4px;border:1px solid transparent;",";"],Gt.focusableOutlineCSS),ql=m.default.div.withConfig({displayName:"components__GridItemContainer",componentId:"sc-1y9ilpk-14"})(["position:relative;",";&:hover,&:focus-within{button{opacity:1 !important;}}"],(e=>{let{active:t,theme:a}=e;return t&&(0,m.css)(["border:1px solid ",";border-radius:",";"],a.colors.border.defaultActive,a.borders.radius.small)})),Wl=m.default.button.withConfig({displayName:"components__GridItemButton",componentId:"sc-1y9ilpk-15"})(["display:block;background-color:transparent;border:2px solid transparent;width:100%;height:100%;border-radius:4px;padding:0;",";"],Gt.focusableOutlineCSS),Zl=m.default.img.withConfig({displayName:"components__Logo",componentId:"sc-1y9ilpk-16"})(["object-fit:cover;width:100%;height:100%;border-radius:4px;"]),Kl=m.default.div.withConfig({displayName:"components__MenuContainer",componentId:"sc-1y9ilpk-17"})(["position:absolute;top:0;width:100%;height:100%;"]),Xl=(0,m.default)(Pt.Button).attrs({size:Nt.BUTTON_SIZES.SMALL,type:Nt.BUTTON_TYPES.SECONDARY,variant:Nt.BUTTON_VARIANTS.CIRCLE}).withConfig({displayName:"components__LogoMenuButton",componentId:"sc-1y9ilpk-18"})(["opacity:",";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"],(e=>{let{isActive:t,menuOpen:a}=e;return a||t?1:0})),Ql=(0,m.default)(Pt.Button).withConfig({displayName:"components__SaveButton",componentId:"sc-1y9ilpk-19"})(["height:36px;"]),Jl=(0,m.default)(Pt.Button).withConfig({displayName:"components__TestConnectionButton",componentId:"sc-1y9ilpk-20"})(["height:36px;margin-top:12px;"]),es=m.default.div.withConfig({displayName:"components__InlineForm",componentId:"sc-1y9ilpk-21"})(["display:flex;align-items:flex-start;"]),ts=m.default.label.withConfig({displayName:"components__VisuallyHiddenLabel",componentId:"sc-1y9ilpk-22"})(_a.visuallyHidden),as=(0,m.default)(Ma).withConfig({displayName:"components__SettingsTextInput",componentId:"sc-1y9ilpk-23"})(["margin-right:8px;"]),os=(m.default.span.withConfig({displayName:"components__VisuallyHiddenDescription",componentId:"sc-1y9ilpk-24"})(_a.visuallyHidden),(0,m.default)(Ml).withConfig({displayName:"components__MultilineForm",componentId:"sc-1y9ilpk-25"})(["margin-bottom:28px;","{margin-top:20px;}"],es)),rs={SLOT_ID_LABEL:(0,n.__)("Monetization type","web-stories"),HELPER_MESSAGE_ADSENSE:(0,n.__)("Learn more about <a>how to monetize your Web Stories</a> using AdSense. Once configured, AdSense will determine where and how to insert ads into the story. Consult <help>AdSense Help</help> for any further assistance.","web-stories"),HELPER_MESSAGE_ADMANAGER:(0,n.__)("Learn how to <a>enable programmatic demand in Web Stories</a> through Ad Manager.","web-stories"),HELPER_LINK_ADSENSE:(0,n.__)("https://support.google.com/adsense/answer/10175505","web-stories"),HELPER_LINK_ADSENSE_HELP:(0,n.__)("https://support.google.com/adsense/","web-stories"),HELPER_LINK_ADMANAGER:(0,n.__)("https://support.google.com/admanager/answer/9416436","web-stories")},ns=[{label:(0,n._x)("None","ad network","web-stories"),value:_l},{label:(0,n.__)("Google AdSense","web-stories"),value:gl},{label:(0,n.__)("Google Ad Manager","web-stories"),value:El}];const is=function AdNetworkSettings(e){let{adNetwork:t,handleUpdate:a}=e;const[o,n]=(0,h.useState)(t);(0,h.useEffect)((()=>n(t)),[t]);const i=(0,h.useMemo)((()=>El===o?rs.HELPER_MESSAGE_ADMANAGER:gl===o?rs.HELPER_MESSAGE_ADSENSE:null),[o]),l=(0,h.useMemo)((()=>El===o?rs.HELPER_LINK_ADMANAGER:gl===o?rs.HELPER_LINK_ADSENSE:null),[o]),s=(0,h.useCallback)((e=>(0,y.trackClick)(e,"click_monetization_docs")),[]);return r.createElement(r.Fragment,null,r.createElement(mr.DropDown,{ariaLabel:rs.SLOT_ID_LABEL,options:ns,selectedValue:o,onMenuItemClick:(e,t)=>a(t),fillWidth:!0}),i&&r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:l,rel:"noreferrer",target:"_blank",onClick:s,size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}),help:r.createElement(Bl,{href:rs.HELPER_LINK_ADSENSE_HELP,rel:"noreferrer",target:"_blank",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},i)))},ls=/^\/\d+(,\d+)?(\/[\w\d_\-.*\\!<:()]{1,99}[^/])*$/;const ss={SLOT_ID_CONTEXT:(0,M.default)(
/* translators: %s: example value. */
(0,n.__)("Example: %s","web-stories"),"/123456789/a4a/amp_story_dfp_example"),SLOT_ID_PLACEHOLDER:(0,n.__)("Enter your Slot ID","web-stories"),SLOT_ID_LABEL:(0,n.__)("Google Ad Manager Slot ID","web-stories"),INPUT_ERROR:(0,n.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories")};const cs=function GoogleAdManagerSettings(e){let{slotId:t,handleUpdate:a}=e;const[o,n]=(0,h.useState)(t),[i,l]=(0,h.useState)(""),s=o!==t&&!i,c=!s;(0,h.useEffect)((()=>{n(t)}),[t]);const d=(0,h.useCallback)((e=>{const{value:t}=e.target;n(t),0===t.length||function(){return Boolean((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().match(ls))}(t)?l(""):l(ss.INPUT_ERROR)}),[]),u=(0,h.useCallback)((()=>{s&&a(o)}),[s,o,a]),p=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),u())}),[u]);return r.createElement(r.Fragment,null,r.createElement(es,null,r.createElement(ts,{htmlFor:"adManagerSlotId"},ss.SLOT_ID_LABEL),r.createElement(as,{id:"adManagerSlotId","aria-label":ss.SLOT_ID_LABEL,value:o,onChange:d,onKeyDown:p,placeholder:ss.SLOT_ID_PLACEHOLDER,hasError:Boolean(i),hint:i}),r.createElement(Ql,{type:Nt.BUTTON_TYPES.SECONDARY,size:Nt.BUTTON_SIZES.SMALL,disabled:c,onClick:u},ss.SUBMIT_BUTTON)),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},ss.SLOT_ID_CONTEXT))},ds=/^(ca-)?pub-\d{16}$/;const us=/^\d{10}$/;const ps={PUBLISHER_ID_CONTEXT:(0,M.default)(
/* translators: 1: first example. 2: second example. */
(0,n.__)("Example: %1$s or %2$s. <a>Find your AdSense Publisher ID</a>.","web-stories"),"pub-1234567891234567","ca-pub-1234567891234567"),PUBLISHER_ID_CONTEXT_LINK:(0,n.__)("https://support.google.com/adsense/answer/105516","web-stories"),PUBLISHER_ID_PLACEHOLDER:(0,n.__)("Enter your Publisher ID","web-stories"),PUBLISHER_ID_LABEL:(0,n.__)("Google AdSense Publisher ID","web-stories"),SLOT_ID_CONTEXT:(0,M.default)(
/* translators: %s: example value. */
(0,n.__)("Example: %s. Copy the slot ID from <a>your ad unit’s code</a>. The same ad unit will be used for all of your Web Stories.","web-stories"),"1234567890"),SLOT_ID_CONTEXT_LINK:(0,n.__)("https://support.google.com/adsense/answer/9274019","web-stories"),SLOT_ID_PLACEHOLDER:(0,n.__)("Enter your Slot ID","web-stories"),SLOT_ID_LABEL:(0,n.__)("Google AdSense Slot ID","web-stories"),INPUT_ERROR:(0,n.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories")};const ms=function GoogleAdSenseSettings(e){let{publisherId:t,slotId:a,handleUpdatePublisherId:o,handleUpdateSlotId:n}=e;const[i,l]=(0,h.useState)(t),[s,c]=(0,h.useState)(""),d=i!==t&&!s,u=!d,[p,m]=(0,h.useState)(a),[b,f]=(0,h.useState)(""),_=p!==a&&!b,g=!_;(0,h.useEffect)((()=>{l(t)}),[t]);const E=(0,h.useCallback)((e=>{const{value:t}=e.target;l(t),0===t.length||function(){return Boolean((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().match(ds))}(t)?c(""):c(ps.INPUT_ERROR)}),[]),S=(0,h.useCallback)((()=>{d&&o(i)}),[d,i,o]),T=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),S())}),[S]);(0,h.useEffect)((()=>{m(a)}),[a]);const w=(0,h.useCallback)((e=>{const{value:t}=e.target;m(t),0===t.length||function(){return Boolean((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().match(us))}(t)?f(""):f(ps.INPUT_ERROR)}),[]),v=(0,h.useCallback)((()=>{_&&n(p)}),[_,p,n]),I=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),v())}),[v]),C=(0,h.useCallback)((e=>(0,y.trackClick)(e,"click_adsense_publisher_id_docs")),[]);return r.createElement(r.Fragment,null,r.createElement(es,null,r.createElement(ts,{htmlFor:"adSensePublisherId"},ps.PUBLISHER_ID_LABEL),r.createElement(as,{"aria-label":ps.PUBLISHER_ID_LABEL,id:"adSensePublisherId",name:"adSensePublisherId","data-testid":"adSensePublisherId",value:i,onChange:E,onKeyDown:T,placeholder:ps.PUBLISHER_ID_PLACEHOLDER,hasError:Boolean(s),hint:s}),r.createElement(Ql,{type:Nt.BUTTON_TYPES.SECONDARY,size:Nt.BUTTON_SIZES.SMALL,disabled:u,onClick:S,"data-testid":"adSensePublisherIdButton"},ps.SUBMIT_BUTTON)),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:ps.PUBLISHER_ID_CONTEXT_LINK,rel:"noreferrer",target:"_blank",onClick:C,size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},ps.PUBLISHER_ID_CONTEXT)),r.createElement(es,null,r.createElement(ts,{htmlFor:"adSenseSlotId"},ps.SLOT_ID_LABEL),r.createElement(as,{id:"adSenseSlotId","aria-label":ps.SLOT_ID_LABEL,name:"adSenseSlotId","data-testid":"adSenseSlotId",value:p,onChange:w,onKeyDown:I,placeholder:ps.SLOT_ID_PLACEHOLDER,hasError:Boolean(b),hint:b}),r.createElement(Ql,{type:Nt.BUTTON_TYPES.SECONDARY,size:Nt.BUTTON_SIZES.SMALL,disabled:g,onClick:v,"data-testid":"adSenseSlotIdButton"},ps.SUBMIT_BUTTON)),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:ps.SLOT_ID_CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},ps.SLOT_ID_CONTEXT)))},bs={SECTION_HEADING:(0,n.__)("Monetization","web-stories"),HELPER_MESSAGE_NONE:(0,n.__)("Monetize your content by showing ads in your Web Stories. <a>Learn more</a>.","web-stories"),HELPER_LINK_NONE:(0,n.__)("https://amp.dev/documentation/guides-and-tutorials/develop/advertise_amp_stories/","web-stories"),SITE_KIT_NOT_INSTALLED:(0,n.__)("Install <a>Site Kit by Google</a> to easily enable Google AdSense for Web Stories.","web-stories"),SITE_KIT_INSTALLED:(0,n.__)("Use Site Kit by Google to easily<a>activate Google AdSense</a> for Web Stories.","web-stories"),SITE_KIT_IN_USE:(0,n.__)("Site Kit by Google has already enabled Google AdSense for your Web Stories, all changes to your ad configuration should occur there.","web-stories")};const fs=function AdManagement(e){let{updateSettings:t,adNetwork:a,publisherId:o,adSenseSlotId:n,adManagerSlotId:i,siteKitStatus:l}=e;const{adsenseActive:s,installed:c,adsenseLink:d}=l,u=(0,h.useCallback)((e=>(0,y.trackClick)(e,"monetization","dashboard",bs.HELPER_LINK_NONE)),[]),p=(0,h.useCallback)((e=>t({adSensePublisherId:e})),[t]),m=(0,h.useCallback)((e=>t({adSenseSlotId:e})),[t]),b=(0,h.useCallback)((e=>t({adManagerSlotId:e})),[t]),f=(0,h.useCallback)((e=>{t({adNetwork:e}),(0,y.trackEvent)("change_ad_network",{name:e})}),[t]),_=(0,h.useCallback)((e=>(0,y.trackClick)(e,"click_site_kit_link")),[]),g=(0,h.useMemo)((()=>s?null:r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:d,rel:"noreferrer",target:"_blank",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:_})}},c?bs.SITE_KIT_INSTALLED:bs.SITE_KIT_NOT_INSTALLED)),[s,c,d,_]);return r.createElement(os,{onSubmit:e=>e.preventDefault()},r.createElement("div",null,r.createElement(Dl,null,bs.SECTION_HEADING),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:bs.HELPER_LINK_NONE,rel:"noreferrer",target:"_blank",onClick:u,size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},bs.HELPER_MESSAGE_NONE)),r.createElement(Gl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},g)),s?r.createElement("div",null,r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},bs.SITE_KIT_IN_USE)):r.createElement("div",null,r.createElement(is,{handleUpdate:f,adNetwork:a}),gl===a&&r.createElement(ms,{handleUpdatePublisherId:p,handleUpdateSlotId:m,publisherId:o,slotId:n,siteKitStatus:l}),El===a&&r.createElement(cs,{handleUpdate:b,slotId:i})))};var hs=a(25252);Lt.shape({value:Lt.number,set:Lt.func}).isRequired,Lt.number,Lt.bool,Lt.arrayOf(Lt.shape({disabled:Lt.bool,href:Lt.string,label:Lt.string.isRequired,openNewTab:Lt.bool,onClick:Lt.func,onFocus:Lt.func})).isRequired,Lt.func.isRequired,Lt.shape({url:Lt.string,title:Lt.string,id:Lt.number,active:Lt.bool}).isRequired;const _s=function PopoverLogoContextMenu(e){let{isActive:t,idx:a,publisherLogo:o,contextMenuId:i,onMenuItemToggle:l,items:s}=e;const c=i.value===o.id,d=t?0:-1,u=(0,h.useCallback)((e=>i.set(e)),[i]),p=(0,h.useCallback)((()=>u(-1)),[u]);return r.createElement(Kl,null,r.createElement(Xl,{tabIndex:d,isActive:t,menuOpen:c,"data-testid":`publisher-logo-context-menu-button-${a}`,"aria-label":(0,M.default)(
/* translators: %s: logo title */
(0,n.__)("Publisher logo menu for %s","web-stories"),o.title),onClick:e=>{e.preventDefault(),l(c?null:o.id),u(c?-1:o.id)},onFocus:()=>{l(c?null:o.id)}},r.createElement(hs.default,{"aria-hidden":"true"})),r.createElement(Wt.default,{animate:!0,isOpen:c,"data-testid":`publisher-logo-context-menu-${a}`,onDismiss:p},s.map((e=>{let{label:t,separator:a,...o}=e;const n=o.href?ta:aa.default;return r.createElement(h.Fragment,{key:t},"top"===a&&r.createElement(oa.default,null),r.createElement(n,o,t),"bottom"===a&&r.createElement(oa.default,null))}))))},gs=(0,h.forwardRef)(((e,t)=>{let{contextMenuId:a,index:o,onMenuItemToggle:i,onRemoveLogo:l,onUpdateDefaultLogo:s,publisherLogo:c,setFocusedPublisherLogoId:d,showLogoContextMenu:u,isFocused:p}=e;const m=[{label:(0,n.__)("Set as Default","web-stories"),onClick:e=>{e.preventDefault(),s(c)},disabled:c.active},{label:(0,n.__)("Delete","web-stories"),onClick:e=>{e.preventDefault(),l(c,o)}}];return r.createElement(ql,{ref:t,role:"listitem",active:c.active,"data-testid":`publisher-logo-${o}`},r.createElement(Wl,{onFocus:()=>{d(c.id)},"data-testid":`uploaded-publisher-logo-${o}`,isSelected:p,tabIndex:p?0:-1,onClick:e=>{e.preventDefault(),d(c.id)},"aria-label":(0,M.default)(
/* translators: %s: logo title.*/
(0,n.__)("Publisher Logo %s","web-stories"),c.title)},r.createElement(Zl,{src:c.url,alt:c.title})),c.active&&r.createElement(Ul,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,n.__)("Default","web-stories")),u&&r.createElement(_s,{isActive:p,idx:o,items:m,publisherLogo:c,onMenuItemToggle:i,contextMenuId:a}))}));gs.displayName="GridItem";const Es={SECTION_HEADING:(0,n.__)("Publisher Logo","web-stories"),UPLOAD_CONTEXT:(0,n.__)("Upload your logos here and they will become available to any stories you create.","web-stories"),CLICK_CONTEXT:(0,n.__)("Click on logo to set as default if you want that logo to be used on default logo for all your stories.","web-stories"),REMOVAL:(0,n.__)("Removing a logo from your settings won't remove it from any stories using that logo.","web-stories"),INSTRUCTIONS:(0,n.__)("Avoid vector files, such as svg or eps. Logos should be at least 96x96 pixels and a perfect square. The background should not be transparent.","web-stories"),SUBMIT:(0,n.__)("Upload logo","web-stories"),ARIA_LABEL:(0,n.__)("Click to upload a new logo","web-stories"),HELPER_UPLOAD:(0,n.__)("Drag a jpg, png, or static gif in this box. Or click “Upload logo” below.","web-stories")};const Ss=function PublisherLogoSettings(e){let{canUploadFiles:t,onAddLogos:a,onRemoveLogo:o,onUpdateDefaultLogo:i,isLoading:l,publisherLogos:s,uploadError:c}=e;const{isRTL:d,allowedImageMimeTypes:u}=E(),p=(0,h.useRef)(),m=(0,h.useRef)(),b=(0,h.useRef)({}),[f,_]=(0,h.useState)(null),[g,S]=(0,h.useState)(null),[T,y]=(0,h.useState)(null),w=1===s.length,v=(0,h.useRef)(s.length),I=(0,h.useCallback)(((e,t)=>{y(-1),o?.(e),S(t),v.current=s.length}),[o,s.length]),C=(0,h.useCallback)((e=>{y(-1),i?.(e)}),[i]);(0,h.useEffect)((()=>{if(Boolean(g?.toString())&&s.length!==v.current){if(0===s.length)return p.current?.getElementsByTagName("input")[0].focus();const e=g>0?s[g-1]:s[0];return _(e.id),b.current[e.id].firstChild.focus(),S(null)}}),[g,s,_]),(0,Ot.default)({containerRef:p,gridRef:m,itemRefs:b,isRTL:d,currentItemId:f,items:s});const A=(0,h.useCallback)((e=>{_(e)}),[]);return(0,h.useFocusOut)(p,(()=>{_(null),y(null)}),[]),r.createElement(Ml,null,r.createElement("div",null,r.createElement(Dl,null,Es.SECTION_HEADING),r.createElement(Gl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Es.UPLOAD_CONTEXT),r.createElement(Gl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Es.CLICK_CONTEXT),r.createElement(Gl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Es.REMOVAL)),r.createElement("div",{ref:p,"data-testid":"publisher-logos-container"},s.length>0&&r.createElement($l,{tabIndex:0,ref:m,role:"list","aria-label":(0,n.__)("Viewing existing publisher logos","web-stories")},s.map(((e,t)=>r.createElement(gs,{key:e.id,ref:t=>{b.current[e.id]=t},contextMenuId:{set:y,value:T},index:t,isFocused:f===e.id,onMenuItemToggle:A,onRemoveLogo:I,onUpdateDefaultLogo:C,publisherLogo:e,setFocusedPublisherLogoId:_,showLogoContextMenu:!w})))),c&&r.createElement(Vl,{role:"alert"},c),t&&r.createElement(r.Fragment,null,r.createElement(va,{onSubmit:a,id:"settings_publisher_logos",isLoading:l,label:Es.SUBMIT,isMultiple:!0,ariaLabel:Es.ARIA_LABEL,instructionalText:Es.HELPER_UPLOAD,acceptableFormats:Object.values(u)}),r.createElement(Gl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Es.INSTRUCTIONS))))};var Ts=a(98415);function TelemetrySettings(e){let{selected:t,onCheckboxSelected:a,disabled:o}=e;const i=(0,h.useMemo)((()=>`telemetry-opt-in-${(0,Zt.default)()}`),[]);return r.createElement(Ml,null,r.createElement("div",null,r.createElement(Dl,null,(0,n.__)("Data Sharing Opt-in","web-stories"))),r.createElement("div",null,r.createElement(zl,{forwardedAs:"label",htmlFor:i},r.createElement(Ts.Checkbox,{id:i,"data-testid":"telemetry-settings-checkbox",disabled:o,onChange:a,checked:Boolean(t)}),r.createElement(jl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,"aria-checked":Boolean(t),forwardedAs:"span"},r.createElement(pr.default,{mapping:{a:r.createElement("a",{href:(0,n.__)("https://policies.google.com/privacy","web-stories"),rel:"noreferrer",target:"_blank","aria-label":(0,n.__)("Learn more by visiting Google Privacy Policy","web-stories")})}},(0,n.__)("Check the box to help us improve the Web Stories plugin by allowing tracking of product usage stats. All data are treated in accordance with <a>Google Privacy Policy</a>.","web-stories"))))))}function MediaOptimizationSettings(e){let{selected:t,onCheckboxSelected:a,disabled:o}=e;const i=(0,h.useMemo)((()=>`media-optimization-${(0,Zt.default)()}`),[]);return r.createElement(Ml,null,r.createElement("div",null,r.createElement(Dl,null,(0,n.__)("Video Optimization","web-stories"))),r.createElement("div",null,r.createElement(zl,{forwardedAs:"label",htmlFor:i},r.createElement(Ts.Checkbox,{id:i,"data-testid":"media-optimization-settings-checkbox",disabled:o,onChange:a,checked:Boolean(t)}),r.createElement(jl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,"aria-checked":Boolean(t),forwardedAs:"span"},(0,n.__)("Automatically optimize videos used in Web Stories. We recommend enabling this feature. Video files that are too large or have an unsupported format (like .mov) will otherwise not display properly.","web-stories")))))}function VideoCacheSettings(e){let{isEnabled:t=!1,updateSettings:a}=e;const o=(0,h.useMemo)((()=>`video-cache-${(0,Zt.default)()}`),[]),i=(0,h.useCallback)((()=>a({videoCache:!t})),[a,t]);return r.createElement(Ml,null,r.createElement("div",null,r.createElement(Dl,null,(0,n.__)("Video Cache","web-stories"))),r.createElement("div",null,r.createElement(zl,{forwardedAs:"label",htmlFor:o},r.createElement(Ts.Checkbox,{id:o,"data-testid":"video-cache-settings-checkbox",onChange:i,checked:Boolean(t)}),r.createElement(jl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,"aria-checked":Boolean(t),forwardedAs:"span"},(0,n.__)("Reduce hosting costs and improve user experience by serving videos from the Google cache.","web-stories")))))}const ys={LABEL:(0,n.__)("Stories Archives","web-stories"),SECTION_HEADING:(0,n.__)("Stories Archives","web-stories"),ARCHIVE_CONTENT:(0,n.__)("By default WordPress automatically creates an archive page, displaying your latest stories in your theme's layout.","web-stories"),ARCHIVE_CONTENT_2:(0,n.__)("You can customize or disable this behavior.","web-stories"),SUB_TEXT_CUSTOM:(0,n.__)("Choose a page to serve as your Web Stories archive. Use the Web Stories block to add stories to this page.","web-stories")},ws=[{label:(0,n._x)("Default","archive type","web-stories"),value:Sl.DEFAULT},{label:(0,n.__)("Disabled","web-stories"),value:Sl.DISABLED},{label:(0,n.__)("Create your own","web-stories"),value:Sl.CUSTOM}],vs=m.default.div.withConfig({displayName:"archive__SearchWrapper",componentId:"sc-u9kj1r-0"})(["padding-top:12px;"]);function ArchiveSettings(e){let{archive:t=Sl.DEFAULT,archiveURL:a,defaultArchiveURL:o,archivePageId:i,updateSettings:l,searchPages:s,getPageById:c}=e;const[d,u]=(0,h.useState)(a),[p,m]=(0,h.useState)(i?{value:i}:void 0),[b,f]=(0,h.useState)([]),_=(0,h.useCallback)(((e,t)=>{u(a);const o=t===Sl.CUSTOM?i:0;m(o),l({archive:t,archivePageId:o})}),[l,i,a]),g=(0,h.useCallback)(((e,t)=>{const a=Number(t.value);a!==i&&(m(a?{value:a}:void 0),l({archivePageId:a}))}),[i,l]);(0,h.useEffect)((()=>{let e=!0;return i&&Sl.CUSTOM===t&&(async()=>{const{title:t,link:a}=await c(i);if(e&&t){const e={value:i,label:t};f((t=>[e,...t])),m(e),u(a)}})(),()=>{e=!1}}),[t,i,c]);const E=(0,h.useDebouncedCallback)((async e=>{await(0,y.trackEvent)("archive_page_search",{search_type:"dashboard",search_term:e}),f(await s(e))}),300);return r.createElement(Ml,null,r.createElement("div",null,r.createElement(Dl,null,ys.SECTION_HEADING),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},ys.ARCHIVE_CONTENT),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},ys.ARCHIVE_CONTENT_2)),r.createElement("div",null,r.createElement(mr.DropDown,{ariaLabel:ys.LABEL,options:ws,selectedValue:t,onMenuItemClick:_,fillWidth:!0}),Sl.DISABLED===t&&r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,{mapping:{code:r.createElement("code",null)}},(0,M.default)(
/* translators: %s: archive url. */
(0,n.__)("Turn off the default archive page at <code>%s</code>. Users will see a 404 Not Found page when trying to access the default archive page.","web-stories"),d))),Sl.CUSTOM===t&&r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},ys.SUB_TEXT_CUSTOM),Sl.CUSTOM===t&&r.createElement(vs,null,r.createElement(Search,{placeholder:(0,n.__)("Select page","web-stories"),selectedValue:p,options:b,handleSearchValueChange:E,emptyText:(0,n.__)("No pages available","web-stories"),onMenuItemClick:g})),Sl.DISABLED!==t&&r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:d,rel:"noreferrer",target:"_blank",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"a"}),code:r.createElement("code",null)}},i&&d!==o?(0,M.default)(
/* translators: 1. current archive url, 2. default archive url. */
(0,n.__)("Visit archive page at <a>%1$s</a>. <code>%2$s</code> will automatically redirect to this page.","web-stories"),d,o):(0,M.default)(
/* translators: %s: archive url. */
(0,n.__)("Visit archive page at <a>%1$s</a>.","web-stories"),d)))))}ArchiveSettings.defaultProps={archive:Sl.DEFAULT};var Is=a(98240),Cs=a(41044);function As(){return As=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},As.apply(this,arguments)}const Os={PRIMARY:"primary",SECONDARY:"secondary",TERTIARY:"tertiary",QUATERNARY:"quaternary",POSITIVE:"positive",NEGATIVE:"negative",ACCENT:"accent"};function Ls(e){return 9*(e-1)}const ks=m.default.div.withConfig({displayName:"notificationBubble__Bubble",componentId:"sc-1w06lrc-0"})([""," position:relative;height:","px;width:","px;",";"],(e=>{let{theme:t,variant:a}=e;return(0,m.css)(["color:",";background-color:",";border-radius:",";"],t.colors.fg.primary,t.colors.bg[a],t.borders.radius.round)}),24,(e=>{let{digitLen:t}=e;return 24+Ls(t)}),(e=>{let{digitLen:t,$isSmall:a}=e;return a&&(0,m.css)(["height:","px;width:","px;"],20,20+Ls(t))})),Ps=m.default.span.withConfig({displayName:"notificationBubble__Inner",componentId:"sc-1w06lrc-1"})([""," "," ",";font-weight:",";color:",";user-select:none;"],Is.fullSizeAbsolute,Cs.centerContent,(e=>{let{$isSmall:t,theme:a}=e;return Ca.expandTextPreset(((e,a)=>{let{paragraph:o}=e;return o[t?a.X_SMALL:a.SMALL]}))({theme:a})}),(e=>{let{theme:t}=e;return t.typography.weight.bold}),(e=>{let{$invertColor:t,theme:a}=e;return t?a.colors.inverted.fg.primary:a.colors.fg.primary})),Ns=/^ua-\d+-\d+$/;const Rs=(0,m.default)((e=>{let{notificationCount:t,isSmall:a,variant:o=Os.ACCENT,invertTextColor:n,...i}=e;return r.createElement(ks,As({variant:o,$isSmall:a,digitLen:t?.toString().length||1},i),r.createElement(Ps,{$invertColor:n,$isSmall:a},t))})).withConfig({displayName:"googleAnalytics__StyledNotificationBubble",componentId:"sc-svg62t-0"})(["display:inline-block;margin-left:10px;"]),xs={CONTEXT:(0,n.__)("The story editor will append a default, configurable AMP analytics configuration to your story. If you’re interested in going beyond what the default configuration, read this <a>article</a>.","web-stories"),CONTEXT_LINK:"https://blog.amp.dev/2019/08/28/analytics-for-your-amp-stories/",SECTION_HEADING:(0,n.__)("Google Analytics","web-stories"),PLACEHOLDER:(0,n.__)("Enter your Google Analytics Tracking ID","web-stories"),ARIA_LABEL:(0,n.__)("Enter your Google Analytics Tracking ID","web-stories"),INPUT_ERROR:(0,n.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories"),SITE_KIT_NOT_INSTALLED:(0,n.__)("Install <a>Site Kit by Google</a> to easily enable Google Analytics for Web Stories.","web-stories"),SITE_KIT_INSTALLED:(0,n.__)("Use Site Kit by Google to easily<a>activate Google Analytics</a> for Web Stories.","web-stories"),SITE_KIT_IN_USE:(0,n.__)("Site Kit by Google has already enabled Google Analytics for your Web Stories, all changes to your analytics tracking should occur there.","web-stories")};const Ms=function GoogleAnalyticsSettings(e){let{googleAnalyticsId:t,handleUpdateAnalyticsId:a,usingLegacyAnalytics:o,handleMigrateLegacyAnalytics:i,siteKitStatus:l={}}=e;const[s,c]=(0,h.useState)(t),[d,u]=(0,h.useState)(""),p=s!==t&&!d,m=!p,{analyticsActive:b,installed:f,analyticsLink:_}=l;(0,h.useEffect)((()=>{c(t)}),[t]);const g=(0,h.useCallback)((e=>{const{value:t}=e.target;c(t),0===t.length||function(){return Boolean((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().match(Ns))}(t)?u(""):u(xs.INPUT_ERROR)}),[]),E=(0,h.useCallback)((()=>{p&&a(s)}),[p,s,a]),S=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),E())}),[E]),T=(0,h.useCallback)((e=>{e.preventDefault(),i(),(0,y.trackEvent)("migrate_story_auto_analytics")}),[i]),w=(0,h.useCallback)((e=>(0,y.trackClick)(e,"click_auto_analytics_link")),[]),v=(0,h.useCallback)((e=>(0,y.trackClick)(e,"click_site_kit_link")),[]),I=(0,h.useCallback)((e=>(0,y.trackClick)(e,"click_analytics_docs")),[]),C=(0,h.useMemo)((()=>b?null:r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:_,rel:"noreferrer",target:"_blank",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:v})}},f?xs.SITE_KIT_INSTALLED:xs.SITE_KIT_NOT_INSTALLED)),[b,f,_,v]);return r.createElement(Ml,{onSubmit:e=>e.preventDefault()},r.createElement("div",null,r.createElement(Dl,{htmlFor:"gaTrackingID",as:"h3"},xs.SECTION_HEADING,o&&r.createElement(Rs,{notificationCount:1,isSmall:!0})),r.createElement(Gl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},C),o&&r.createElement(r.Fragment,null,r.createElement(Gl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:"https://wp.stories.google/docs/seo/",rel:"noreferrer",target:"_blank",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:w})}},(0,n.__)("An improved analytics configuration is now available. <a>Learn more</a>.","web-stories"))),r.createElement(Gl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(Ql,{type:Nt.BUTTON_TYPES.SECONDARY,size:Nt.BUTTON_SIZES.SMALL,onClick:T},(0,n.__)("Migrate","web-stories"))))),b?r.createElement("div",null,r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},xs.SITE_KIT_IN_USE)):r.createElement("div",null,r.createElement(es,null,r.createElement(ts,{htmlFor:"gaTrackingId"},xs.ARIA_LABEL),r.createElement(as,{"aria-label":xs.ARIA_LABEL,id:"gaTrackingId",value:s,onChange:g,onKeyDown:S,placeholder:xs.PLACEHOLDER,hasError:Boolean(d),hint:d,disabled:b}),r.createElement(Ql,{type:Nt.BUTTON_TYPES.SECONDARY,size:Nt.BUTTON_SIZES.SMALL,disabled:m,onClick:E},xs.SUBMIT_BUTTON)),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:xs.CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"a",onClick:I})}},xs.CONTEXT))))};var Ds=a(71469),Bs=a(37136),Fs=a(96921);const Hs=function ConfirmationDialog(e){let{onClose:t,onPrimary:a}=e;return r.createElement(m.ThemeProvider,{theme:l.theme},r.createElement(ma.Dialog,{isOpen:!0,onClose:t,title:(0,n.__)("Delete Font","web-stories"),actions:r.createElement(r.Fragment,null,r.createElement(Pt.Button,{type:Nt.BUTTON_TYPES.TERTIARY,size:Nt.BUTTON_SIZES.SMALL,onClick:()=>t()},(0,n.__)("Cancel","web-stories")),r.createElement(Pt.Button,{type:Nt.BUTTON_TYPES.PRIMARY,size:Nt.BUTTON_SIZES.SMALL,onClick:()=>a()},(0,n.__)("Delete Font","web-stories")))},r.createElement(ha.Text,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,n.__)("Deleting a font will delete it from every previous story it’s in. Would you like to proceed?","web-stories"))))};const Us=async function(e){const{load:t}=await Promise.all([a.e(4422),a.e(2794)]).then(a.bind(a,44422)),o=await t(e);return{name:o.names.fullName.en,family:o.names.fullName.en,weights:[400],styles:["regular"],variants:[[0,400]],service:"custom",fallbacks:["sans-serif"],metrics:{upm:o.unitsPerEm,asc:o.ascender,des:o.descender,tAsc:o.tables.os2.sTypoAscender,tDes:o.tables.os2.sTypoDescender,tLGap:o.tables.os2.sTypoLineGap,wAsc:o.tables.os2.usWinAscent,wDes:o.tables.os2.usWinDescent,xH:o.tables.os2.sxHeight,capH:o.tables.os2.sCapHeight,yMin:o.tables.head.yMin,yMax:o.tables.head.yMax,hAsc:o.tables.hhea.ascender,hDes:o.tables.hhea.descender,lGap:o.tables.hhea.lineGap}}},Gs={ADD_CONTEXT:(0,n.__)("Add and manage your custom and brand fonts via link here. They’ll appear in your font list in the editor.","web-stories"),REMOVAL:(0,n.__)("Removing a font from this settings page will remove it from your font list in all stories.","web-stories"),SECTION_HEADING:(0,n.__)("Custom Fonts","web-stories"),LABEL:(0,n.__)("Insert Font URL","web-stories"),INPUT_CONTEXT:(0,n.__)("Insert a public URL to a font file. Allowed formats are .otf, .ttf, .woff.","web-stories"),INPUT_ERROR:(0,n.__)("Invalid URL format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Add Font","web-stories"),FONTS_HEADING:(0,n.__)("Current Fonts","web-stories"),FONTS_CONTEXT:(0,n.__)("Deleting fonts will delete them from your in-editor font list and all previous stories.","web-stories")},Ys=(0,m.default)(Ql).withConfig({displayName:"customFonts__AddButton",componentId:"sc-4md0nd-0"})(["min-width:90px;margin-top:32px;"]),zs=m.default.div.withConfig({displayName:"customFonts__InputsWrapper",componentId:"sc-4md0nd-1"})(["margin-top:8px;"]),js=m.default.div.withConfig({displayName:"customFonts__FontsWrapper",componentId:"sc-4md0nd-2"})(["margin-top:34px;"]),Vs=(0,m.default)(ha.Text).withConfig({displayName:"customFonts__ListHeading",componentId:"sc-4md0nd-3"})(["margin-bottom:10px;display:inline-block;"]),$s=m.default.div.withConfig({displayName:"customFonts__FontsList",componentId:"sc-4md0nd-4"})(["padding:12px 0;border:",";:focus-within{","}"],(e=>{let{theme:t}=e;return`1px solid ${t.colors.divider.primary}`}),(e=>{let{theme:t}=e;return Gt.focusCSS(t.colors.border.focus)})),qs=(0,m.default)(Pt.Button).withConfig({displayName:"customFonts__DeleteButton",componentId:"sc-4md0nd-5"})(["visibility:hidden;opacity:0;transition:visibility 0s,opacity ease-in-out 300ms;&:focus{","}"],(e=>{let{theme:t}=e;return Gt.focusCSS(t.colors.border.focus)})),Ws=m.default.div.withConfig({displayName:"customFonts__FontRow",componentId:"sc-4md0nd-6"})(["padding:0 12px;display:flex;height:32px;width:100%;justify-content:space-between;transition:background-color ease-in-out 300ms;&[aria-selected='true'],&:hover,&:focus{background-color:",";button{visibility:visible;opacity:1;}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),Zs=m.default.div.withConfig({displayName:"customFonts__FontData",componentId:"sc-4md0nd-7"})(["line-height:32px;white-space:nowrap;display:flex;font-size:14px;max-width:calc(100% - 32px);"]),Ks=(0,m.default)(ha.Text).attrs({as:"span"}).withConfig({displayName:"customFonts__StyledText",componentId:"sc-4md0nd-8"})([""]),Xs=(0,m.default)(Ks).withConfig({displayName:"customFonts__FontUrl",componentId:"sc-4md0nd-9"})(["color:",";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Qs=m.default.div.withConfig({displayName:"customFonts__Divider",componentId:"sc-4md0nd-10"})(["width:4px;height:4px;background-color:",";border-radius:",";margin:0 6px;align-self:center;"],(e=>{let{theme:t}=e;return t.colors.standard.black}),(e=>{let{theme:t}=e;return t.borders.radius.round})),Js=[".otf",".ttf",".woff"];const ec=function CustomFontsSettings(e){let{customFonts:t=[],addCustomFont:a,deleteCustomFont:o}=e;const i=(0,Wr.default)(),[l,s]=(0,h.useState)(""),[c,d]=(0,h.useState)(""),[u,p]=(0,h.useState)(!1),[m,b]=(0,h.useState)(null),f=!c&&l,_=(0,h.useRef)(null),g=(0,h.useRef)([]),[E,S]=(0,h.useState)(0),[T,w]=(0,h.useState)(),{showSnackbar:v}=(0,an.useSnackbar)(),I=(0,h.useCallback)((e=>{const{value:t}=e.target;s(t),0===t.length||(0,Bs.isValidUrl)((0,Bs.withProtocol)(t))?d(""):d(Gs.INPUT_ERROR)}),[]),C=(0,h.useCallback)((async()=>{try{await o(m),i((0,n.__)("Font deleted","web-stories"))}catch(e){(0,y.trackError)("remove_custom_font",e?.message),v({"aria-label":bl.REMOVE_FONT.MESSAGE,message:bl.REMOVE_FONT.MESSAGE,dismissible:!0})}finally{b(null),p(!1),d("")}}),[o,m,v,i]),A=(0,h.useCallback)((async()=>{if(f){const e=(0,Bs.withProtocol)(l);try{await fetch(e,{method:"HEAD"})}catch(e){return(0,y.trackError)("add_custom_font",e?.message),void d((0,n.__)("Please ensure correct CORS settings for allowing font usage on this site.","web-stories"))}let t;try{if((0,y.trackEvent)("add_custom_font",{url:e}),t=await Us(e),!t.family)return void d((0,n.__)("Something went wrong, please try again.","web-stories"))}catch(e){return(0,y.trackError)("add_custom_font",e?.message),void d((0,M.default)(
/* translators: %s: list of allowed font types. */
(0,n.__)("Getting font data failed, please ensure the URL points directly to a %s file.","web-stories"),(0,Ds.default)(Js)))}try{await a({...t,url:e}),s("")}catch(e){(0,y.trackError)("add_custom_font",e?.message),d((0,M.default)(
/* translators: %s: font name. */
(0,n.__)("A font with the name %s already exists.","web-stories"),t.family))}}}),[a,f,l]),O=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),A())}),[A]);(0,h.useEffect)((()=>{const e=g.current[`row-${E}`];e&&(e.focus(),w(e.id))}),[E]);const L=e=>E===e,k=(0,h.useCallback)((e=>{const{key:a}=e;"ArrowUp"===a?(e.preventDefault(),S((e=>Math.max(0,e-1)))):"ArrowDown"===a&&(e.preventDefault(),S((e=>Math.min(t.length-1,e+1))))}),[t]);return r.createElement(Ml,{onSubmit:e=>e.preventDefault()},r.createElement("div",null,r.createElement(Dl,{as:"h3"},Gs.SECTION_HEADING),r.createElement(Gl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Gs.ADD_CONTEXT),r.createElement(Gl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Gs.REMOVAL)),r.createElement(zs,null,r.createElement(es,null,r.createElement(as,{value:l,onChange:I,onKeyDown:O,hasError:Boolean(c),hint:c,label:Gs.LABEL}),r.createElement(Ys,{type:Nt.BUTTON_TYPES.PRIMARY,size:Nt.BUTTON_SIZES.SMALL,disabled:!f,onClick:A},Gs.SUBMIT_BUTTON)),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Gs.INPUT_CONTEXT),t?.length>0&&r.createElement(js,null,r.createElement(Vs,{forwardedAs:"span"},Gs.FONTS_HEADING),r.createElement($s,{ref:_,role:"listbox",tabIndex:0,onKeyDown:k,"aria-activedescendant":T||t[0]?.id},t.map(((e,t)=>{let{id:a,family:o,url:i}=e;return r.createElement(Ws,{id:`font-${a}`,ref:e=>g.current[`row-${t}`]=e,key:o,role:"option",onClick:()=>{S(t)},"aria-selected":L(t)},r.createElement(Zs,null,r.createElement(Ks,null,o),r.createElement(Qs,null),r.createElement(Xs,null,i)),r.createElement(Tooltip,{hasTail:!0,title:(0,n.__)("Delete font","web-stories")},r.createElement(qs,{"aria-label":(0,M.default)(
/*translators: %s: font family. */
(0,n.__)("Delete %s","web-stories"),o),type:Nt.BUTTON_TYPES.TERTIARY,size:Nt.BUTTON_SIZES.SMALL,variant:Nt.BUTTON_VARIANTS.SQUARE,onClick:()=>{b(a),p(!0)}},r.createElement(Fs.default,null))))}))),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Gs.FONTS_CONTEXT))),u&&r.createElement(Hs,{onClose:()=>p(!1),onPrimary:C}))};var tc=a(42096);const ac=/[\w-]+\.myshopify\.com/i;function oc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Boolean(e.toLowerCase().match(ac))}const rc=m.default.div.withConfig({displayName:"shopify__Loading",componentId:"sc-ur0gaq-0"})(["position:relative;margin-top:10px;"]),nc=m.default.div.withConfig({displayName:"shopify__Spinner",componentId:"sc-ur0gaq-1"})(["position:absolute;top:0;"]),ic={HOST_CONTEXT:(0,M.default)(
/* translators: 1: first example. 2: second example. */
(0,n.__)("Without <code>%1$s</code> or <code>%2$s</code>. Example: %3$s. <a>Find your URL</a>.","web-stories"),"https://","www.","yourstore.myshopify.com"),HOST_CONTEXT_LINK:(0,n.__)("https://help.shopify.com/en/manual/domains","web-stories"),HOST_PLACEHOLDER:(0,n.__)("Enter your .myshopify.com domain","web-stories"),HOST_LABEL:(0,n.__)("Shopify Domain","web-stories"),ACCESS_TOKEN_CONTEXT:(0,n.__)("<a>Learn how to get one</a>.","web-stories"),ACCESS_TOKEN_CONTEXT_LINK:(0,n.__)("https://help.shopify.com/en/manual/apps/custom-apps#get-the-api-credentials-for-a-custom-app","web-stories"),ACCESS_TOKEN_PLACEHOLDER:(0,n.__)("Enter your API access token","web-stories"),ACCESS_TOKEN_LABEL:(0,n.__)("Storefront API Access Token","web-stories"),INPUT_ERROR:(0,n.__)("Invalid format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories"),CONNECTION_TEST_BUTTON:(0,n.__)("Test connection","web-stories"),CONNECTION_CHECKING:(0,n.__)("Testing connection…","web-stories"),CONNECTION_SUCCESS:(0,n.__)("Connection successful","web-stories"),CONNECTION_ERROR_DEFAULT:(0,n.__)("Connection failed. Please try again.","web-stories")};const lc=function ShopifySettings(e){let{host:t,accessToken:a,handleUpdateHost:o,handleUpdateAccessToken:i}=e;const l=(0,Wr.default)(),[s,c]=(0,h.useState)(t),[d,u]=(0,h.useState)(""),p=s!==t&&!d,m=!p,[b,f]=(0,h.useState)(a),[_,g]=(0,h.useState)(""),S=b!==a&&!_,T=!S,{apiCallbacks:{getProducts:w}}=E(),[v,I]=(0,h.useState)(!1),[C,A]=(0,h.useState)(""),[O,L]=(0,h.useState)(!1);(0,h.useEffect)((()=>{c(t)}),[t]),(0,h.useEffect)((()=>{f(a)}),[a]);const k=(0,h.useCallback)((e=>{const{value:t}=e.target;c(t),0===t.length||oc(t)?u(""):u(ic.INPUT_ERROR)}),[]),P=(0,h.useCallback)((e=>{const{value:t}=e.target;oc(t)&&c(t.match(ac)[0])}),[]),N=(0,h.useCallback)((()=>{p&&o(s)}),[p,s,o]),R=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),N())}),[N]),x=(0,h.useCallback)((e=>{const{value:t}=e.target;g(""),f(t)}),[]),M=(0,h.useCallback)((()=>{S&&i(b)}),[S,b,i]),D=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),M())}),[M]),B=(0,h.useCallback)((async()=>{L(!1),I(!0),l(ic.CONNECTION_CHECKING),(0,y.trackEvent)("test_shopping_connection");try{await w((new Date).getTime()),A(ic.CONNECTION_SUCCESS),l(ic.CONNECTION_SUCCESS)}catch(e){(0,y.trackError)("test_shopping_connection",e?.message),L(!0),A(ic.CONNECTION_ERROR_DEFAULT),l(ic.CONNECTION_ERROR_DEFAULT)}finally{I(!1)}}),[w,l]),F=s&&!d&&b&&!_&&!v,H=(0,h.useCallback)((e=>(0,y.trackClick)(e,"click_shopify_docs")),[]);return r.createElement(r.Fragment,null,r.createElement(es,null,r.createElement(ts,{htmlFor:"shopifyHost"},ic.HOST_LABEL),r.createElement(as,{"aria-label":ic.HOST_LABEL,id:"shopifyHost",name:"shopifyHost","data-testid":"shopifyHost",value:s,onChange:k,onKeyDown:R,onBlur:P,placeholder:ic.HOST_PLACEHOLDER,hasError:Boolean(d),hint:d}),r.createElement(Ql,{type:Nt.BUTTON_TYPES.SECONDARY,size:Nt.BUTTON_SIZES.SMALL,disabled:m,onClick:N,"data-testid":"shopifyHostButton"},ic.SUBMIT_BUTTON)),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:ic.HOST_CONTEXT_LINK,rel:"noreferrer",target:"_blank",onClick:H,size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},ic.HOST_CONTEXT)),r.createElement(es,null,r.createElement(ts,{htmlFor:"shopifyAccessToken"},ic.ACCESS_TOKEN_LABEL),r.createElement(as,{id:"shopifyAccessToken","aria-label":ic.ACCESS_TOKEN_LABEL,name:"shopifyAccessToken","data-testid":"shopifyAccessToken",value:b,onChange:x,onKeyDown:D,placeholder:ic.ACCESS_TOKEN_PLACEHOLDER,hasError:Boolean(_),hint:_}),r.createElement(Ql,{type:Nt.BUTTON_TYPES.SECONDARY,size:Nt.BUTTON_SIZES.SMALL,disabled:T,onClick:M,"data-testid":"shopifyAccessTokenButton"},ic.SUBMIT_BUTTON)),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:ic.ACCESS_TOKEN_CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},ic.ACCESS_TOKEN_CONTEXT)),r.createElement(Jl,{onFocus:()=>A(""),type:Nt.BUTTON_TYPES.SECONDARY,size:Nt.BUTTON_SIZES.SMALL,disabled:!F,onClick:B},v?ic.CONNECTION_CHECKING:ic.CONNECTION_TEST_BUTTON),v&&r.createElement(rc,null,r.createElement(nc,null,r.createElement(tc.default,{size:24}))),C&&r.createElement(Hl,{"data-testid":"api-status","aria-label":(0,n.__)("API connection status","web-stories"),hasError:O,size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},C))},sc={SLOT_ID_LABEL:(0,n.__)("Shopping provider","web-stories")};const cc=function ShoppingProviderDropDown(e){let{vendors:t,shoppingProvider:a,handleUpdate:o}=e;const n=[];return Object.entries(t).forEach((e=>{let[t,a]=e;return n.push({label:a,value:t})})),r.createElement(mr.DropDown,{ariaLabel:sc.SLOT_ID_LABEL,options:n,selectedValue:a,onMenuItemClick:(e,t)=>o(t),fillWidth:!0})},dc={SECTION_HEADING:(0,n.__)("Shopping","web-stories"),SHOPPING_PROVIDER_HELPER_MESSAGE:(0,n.__)("Once configured you can add products from this provider.","web-stories"),HELPER_MESSAGE:(0,n.__)("Connect your store so you can easily add products to your stories.","web-stories"),WOOCOMMERCE_INSTALL:(0,n.__)("Install <a>WooCommerce</a> to easily add shoppable products to Web Stories.","web-stories"),WOOCOMMERCE_ACTIVE:(0,n.__)("Activate <a>WooCommerce</a> to easily add shoppable products to Web Stories.","web-stories"),WOOCOMMERCE_MANAGE:(0,n.__)("Manage products in <a>WooCommerce</a> to make them available in Web Stories.","web-stories")};const uc=function Shopping(e){let{updateSettings:t,shoppingProvider:a,shopifyHost:o,shopifyAccessToken:n,vendors:i,woocommerce:l}=e;const s=(0,h.useCallback)((e=>{t({shoppingProvider:e}),(0,y.trackEvent)("change_shopping_provider",{name:e})}),[t]),c=(0,h.useCallback)((e=>t({shopifyHost:e})),[t]),d=(0,h.useCallback)((e=>t({shopifyAccessToken:e})),[t]),u=(0,h.useCallback)((e=>(0,y.trackClick)(e,"click_woocommerce_link")),[]),{canManage:p,installed:m,active:b,link:f}=l;let _;return!1===m?_=dc.WOOCOMMERCE_INSTALL:!1===b?_=dc.WOOCOMMERCE_ACTIVE:!0===p&&(_=dc.WOOCOMMERCE_MANAGE),r.createElement(os,{onSubmit:e=>e.preventDefault()},r.createElement("div",null,r.createElement(Dl,null,dc.SECTION_HEADING),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},dc.HELPER_MESSAGE),a===yl&&_&&f&&r.createElement(Yl,{"data-testid":"woocommerceMessage",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(Bl,{href:f,rel:"noreferrer",target:"_blank",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:u})}},_))),r.createElement("div",null,r.createElement(cc,{vendors:i,shoppingProvider:a,handleUpdate:s}),r.createElement(Yl,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},dc.SHOPPING_PROVIDER_HELPER_MESSAGE),a===wl&&r.createElement(lc,{handleUpdateHost:c,handleUpdateAccessToken:d,host:o,accessToken:n})))};const pc=function EditorSettings(){const{fetchSettings:e,updateSettings:t,googleAnalyticsId:a,usingLegacyAnalytics:o,adSensePublisherId:i,adSenseSlotId:l,adManagerSlotId:s,adNetwork:c,uploadMedia:d,newlyCreatedMediaIds:u,isMediaLoading:p,videoCache:m,archive:b,archivePageId:_,searchPages:g,getPageById:S,customFonts:T,addCustomFont:w,deleteCustomFont:v,fetchCustomFonts:I,publisherLogos:C,addPublisherLogo:A,fetchPublisherLogos:O,removePublisherLogo:L,setPublisherLogoAsDefault:k,shoppingProvider:P,shopifyHost:N,shopifyAccessToken:R}=Al((e=>{let{actions:{fontsApi:{addCustomFont:t,deleteCustomFont:a,fetchCustomFonts:o},settingsApi:{fetchSettings:r,updateSettings:n},pagesApi:{searchPages:i,getPageById:l},mediaApi:{uploadMedia:s},publisherLogosApi:{fetchPublisherLogos:c,addPublisherLogo:d,removePublisherLogo:u,setPublisherLogoAsDefault:p}},state:{settings:{googleAnalyticsId:m,usingLegacyAnalytics:b,adSensePublisherId:f,adSenseSlotId:h,adManagerSlotId:_,adNetwork:g,videoCache:E,archive:S,archivePageId:T,shoppingProvider:y,shopifyHost:w,shopifyAccessToken:v},media:{isLoading:I,newlyCreatedMediaIds:C},publisherLogos:{publisherLogos:A},customFonts:O}}=e;return{fetchSettings:r,updateSettings:n,googleAnalyticsId:m,usingLegacyAnalytics:b,adSensePublisherId:f,adSenseSlotId:h,adManagerSlotId:_,adNetwork:g,uploadMedia:s,isMediaLoading:I,newlyCreatedMediaIds:C,videoCache:E,archive:S,archivePageId:T,searchPages:i,getPageById:l,customFonts:O,addCustomFont:t,deleteCustomFont:a,fetchCustomFonts:o,fetchPublisherLogos:c,addPublisherLogo:d,removePublisherLogo:u,setPublisherLogoAsDefault:p,publisherLogos:A,shoppingProvider:y,shopifyHost:w,shopifyAccessToken:v}})),x=(0,f.useFeature)("shoppingIntegration"),{capabilities:{canUploadFiles:D,canManageSettings:B}={},plugins:{siteKit:F={},woocommerce:H={}},maxUpload:U,maxUploadFormatted:G,allowedImageMimeTypes:Y,archiveURL:z,defaultArchiveURL:j,vendors:V}=E(),{disabled:$,toggleWebStoriesTrackingOptIn:q,optedIn:W}=Pl(),{disabled:Z,toggleWebStoriesMediaOptimization:K,mediaOptimization:X}=function(){const{showSnackbar:e}=(0,an.useSnackbar)(),{currentUser:t,toggleWebStoriesMediaOptimization:a}=Al((e=>{let{state:{currentUser:t},actions:{usersApi:{toggleWebStoriesMediaOptimization:a}}}=e;return{currentUser:t,toggleWebStoriesMediaOptimization:a}})),o=Boolean(t.data.meta?.webStoriesMediaOptimization),r=(0,h.useCallback)((()=>{a(),(0,y.trackEvent)("video_optimization_optin",{status:o?"off":"on"}),e({"aria-label":ml.SETTINGS.UPDATED,message:ml.SETTINGS.UPDATED,dismissible:!0})}),[o,e,a]);return{mediaOptimization:o,disabled:t.isUpdating,toggleWebStoriesMediaOptimization:r}}(),[Q,J]=(0,h.useState)("");(0,h.useEffect)((()=>{B&&(e(),O(),I())}),[e,O,B,I]),(0,h.useEffect)((()=>{u.length>0&&A(u)}),[u,A]),Nl();const ee=(0,h.useCallback)((e=>t({googleAnalyticsId:e})),[t]),te=(0,h.useCallback)((()=>t({usingLegacyAnalytics:!1})),[t]),ae=(0,h.useCallback)((async e=>{let t=!0,a=!0,o=!1;const r=[];if(e.forEach((e=>{t=t&&e.size<=U;const o=Y.includes(e.type);a=a&&o,o||r.push(new Promise(((t,a)=>{const o=new Image;o.onload=()=>t(o),o.onerror=()=>a(new Error(e.name)),o.src=URL.createObjectURL(e)})))})),!t){const t=1===e.length?(0,M.default)(
/* translators: %s: max upload size for media */
(0,n.__)("Sorry, this file is too big. Make sure your logo is under %s.","web-stories"),G):(0,M.default)(
/* translators: %s: max upload size for media */
(0,n.__)("Sorry, one or more of these files are too big. Make sure your logos are all under %s.","web-stories"),G);return J(t)}if(!a){const t=1===e.length?(0,n.__)("Sorry, this file type is not supported. Only jpg, png, and static gifs are supported for publisher logos.","web-stories"):(0,n.__)("Sorry, one or more of these files are of an unsupported file type. Only jpg, png, and static gifs are supported for publisher logos.","web-stories");return J(t)}const i=await Promise.all(r).catch((()=>{o=!0}));if(o){const t=1===e.length?(0,n.__)("Sorry, there was an error processing your upload. Please try again.","web-stories"):(0,n.__)("Sorry, there was an error processing one or more of your uploads. Please try again.","web-stories");return J(t)}if(!i.every((e=>{let{height:t,width:a}=e;return t>=96&&a>=96}))){const t=1===e.length?(0,M.default)(
/* translators: 1 = minimum width, 2 = minimum height */
(0,n.__)("Sorry, this file is too small. Make sure your logo is larger than %s.","web-stories"),(0,M.default)("%1$dx%2$dpx",96,96)):(0,M.default)(
/* translators: %s: image dimensions in pixels. */
(0,n.__)("Sorry, one or more files are too small. Make sure your logos are all larger than %s.","web-stories"),(0,M.default)("%1$dx%2$dpx",96,96));return J(t)}return J(""),d(e)}),[U,G,d,Y]),oe=(0,h.useCallback)((e=>{L(e.id)}),[L]),re=(0,h.useCallback)((e=>k(e.id)),[k]);return r.createElement(ja.Provider,null,r.createElement(Rl,{"data-testid":"editor-settings"},r.createElement(tn,{heading:(0,n.__)("Settings","web-stories")}),r.createElement(ja.Scrollable,null,r.createElement(xl,null,B&&r.createElement(r.Fragment,null,r.createElement(Ms,{googleAnalyticsId:a,handleUpdateAnalyticsId:ee,usingLegacyAnalytics:o,handleMigrateLegacyAnalytics:te,siteKitStatus:F}),r.createElement(Ss,{onAddLogos:ae,onRemoveLogo:oe,onUpdateDefaultLogo:re,publisherLogos:C,canUploadFiles:D,isLoading:p,uploadError:Q})),r.createElement(ec,{customFonts:T,addCustomFont:w,deleteCustomFont:v}),r.createElement(TelemetrySettings,{disabled:$,onCheckboxSelected:q,selected:W}),D&&r.createElement(MediaOptimizationSettings,{disabled:Z,onCheckboxSelected:K,selected:X}),B&&r.createElement(r.Fragment,null,r.createElement(VideoCacheSettings,{isEnabled:m,updateSettings:t}),r.createElement(ArchiveSettings,{archive:b,archiveURL:z,defaultArchiveURL:j,updateSettings:t,searchPages:g,archivePageId:_,getPageById:S}),r.createElement(fs,{updateSettings:t,adNetwork:c,publisherId:i,adSenseSlotId:l,adManagerSlotId:s,siteKitStatus:F}),x&&r.createElement(uc,{updateSettings:t,shoppingProvider:P,shopifyHost:N,shopifyAccessToken:R,vendors:V,woocommerce:H}))))))};function mc(){const[e,t]=(0,h.useState)({}),[a,o]=(0,h.useState)(!1),{api:{currentUser:r}}=E();(0,h.useEffect)((()=>{var a;Object.keys(e).length||(a=r,Zi({path:a}).then(ji.snakeToCamelCaseObjectKeys)).then(t)}),[r,e]);return{api:{toggleWebStoriesTrackingOptIn:(0,h.useCallback)((async()=>{o(!0);try{t(await function(e,t){return Zi({path:e,data:{meta:{web_stories_tracking_optin:!t.meta.webStoriesTrackingOptin}},method:"POST"}).then(ji.snakeToCamelCaseObjectKeys)}(r,e))}finally{o(!1)}}),[r,e]),toggleWebStoriesMediaOptimization:(0,h.useCallback)((async()=>{o(!0);try{t(await function(e,t){return Zi({path:e,data:{meta:{web_stories_media_optimization:!t.meta.webStoriesMediaOptimization}},method:"POST"}).then(ji.snakeToCamelCaseObjectKeys)}(r,e))}finally{o(!1)}}),[r,e])},currentUser:{data:e,isUpdating:a}}}const bc="loading_media",fc="add_media_success",hc="add_media_failure",_c={error:{},isLoading:!1,newlyCreatedMediaIds:[]};const gc=function(e,t){switch(t.type){case bc:return{...e,isLoading:!0,newlyCreatedMediaIds:[]};case hc:return{...e,error:{...t.payload,id:Date.now()},isLoading:!1};case fc:return{...e,error:{},isLoading:!1,newlyCreatedMediaIds:t.payload.newlyCreatedMediaIds||e.newlyCreatedMediaIds};default:return e}};function Ec(){const[e,t]=(0,h.useReducer)(gc,_c),{api:{media:a}}=E();return{media:e,api:{uploadMedia:(0,h.useCallback)((async e=>{t({type:bc});try{const o=await function(e,t){return Promise.all(Object.values(t).map((t=>{const a=new window.FormData;return a.append("file",t,t.name||t.type.replace("/",".")),Zi({path:e,body:a,method:"POST"}).then(ji.snakeToCamelCaseObjectKeys)})))}(a,e);t({type:fc,payload:{media:o,newlyCreatedMediaIds:o.map((e=>{let{id:t}=e;return t}))}})}catch(a){t({type:hc,payload:{message:bl.UPLOAD_PUBLISHER_LOGO[e.length>1?"MESSAGE_PLURAL":"MESSAGE"]}})}}),[a])}}}const Sc="update_settings_success",Tc="update_settings_failure",yc="setting_saved",wc="fetch_settings_success",vc="fetch_settings_failure",Ic={error:{},googleAnalyticsId:"",usingLegacyAnalytics:!1,adSensePublisherId:"",adSenseSlotId:"",adManagerSlotId:"",adNetwork:_l,archive:Sl.DEFAULT,archivePageId:0,videoCache:!1,settingSaved:!1,shoppingProvider:Tl,shopifyHost:"",shopifyAccessToken:""};const Cc=function(e,t){switch(t.type){case yc:return{...e,settingSaved:t.payload};case Tc:case vc:return{...e,error:{...t.payload,id:Date.now()}};case wc:case Sc:return{...e,error:{},googleAnalyticsId:t.payload.googleAnalyticsId,usingLegacyAnalytics:t.payload.usingLegacyAnalytics,adSensePublisherId:t.payload.adSensePublisherId,adSenseSlotId:t.payload.adSenseSlotId,adManagerSlotId:t.payload.adManagerSlotId,adNetwork:t.payload.adNetwork,videoCache:t.payload.videoCache,archive:t.payload.archive,archivePageId:t.payload.archivePageId,shoppingProvider:t.payload.shoppingProvider,shopifyHost:t.payload.shopifyHost,shopifyAccessToken:t.payload.shopifyAccessToken};default:return e}},Ac=e=>({googleAnalyticsId:e.web_stories_ga_tracking_id,usingLegacyAnalytics:e.web_stories_using_legacy_analytics,adSensePublisherId:e.web_stories_adsense_publisher_id,adSenseSlotId:e.web_stories_adsense_slot_id,adManagerSlotId:e.web_stories_ad_manager_slot_id,adNetwork:e.web_stories_ad_network,videoCache:e.web_stories_video_cache,archive:e.web_stories_archive,archivePageId:e.web_stories_archive_page_id,shoppingProvider:e.web_stories_shopping_provider,shopifyHost:e.web_stories_shopify_host,shopifyAccessToken:e.web_stories_shopify_access_token});function Oc(){const[e,t]=(0,h.useReducer)(Cc,Ic),{api:{settings:a}}=E();return{settings:e,api:{fetchSettings:(0,h.useCallback)((async()=>{try{const o=await(e=a,Zi({path:e}).then(Ac));t({type:wc,payload:o})}catch(e){t({type:vc,payload:{message:bl.LOAD_SETTINGS.MESSAGE}})}var e}),[a]),updateSettings:(0,h.useCallback)((async e=>{t({type:yc});try{const o=await function(e,t){const{googleAnalyticsId:a,usingLegacyAnalytics:o,adSensePublisherId:r,adSenseSlotId:n,adManagerSlotId:i,adNetwork:l,videoCache:s,archive:c,archivePageId:d,shoppingProvider:u,shopifyHost:p,shopifyAccessToken:m}=t,b={};void 0!==a&&(b.web_stories_ga_tracking_id=a),void 0!==o&&(b.web_stories_using_legacy_analytics=o),void 0!==r&&(b.web_stories_adsense_publisher_id=r),void 0!==n&&(b.web_stories_adsense_slot_id=n),void 0!==i&&(b.web_stories_ad_manager_slot_id=i),void 0!==l&&(b.web_stories_ad_network=l),void 0!==s&&(b.web_stories_video_cache=Boolean(s)),void 0!==c&&(b.web_stories_archive=c),void 0!==d&&(b.web_stories_archive_page_id=d),void 0!==u&&(b.web_stories_shopping_provider=u),void 0!==p&&(b.web_stories_shopify_host=p),void 0!==m&&(b.web_stories_shopify_access_token=m);const f=(0,Wi.default)(e,b);return Zi({path:f,method:"POST"}).then(Ac)}(a,e);t({type:Sc,payload:o}),t({type:yc,payload:!0})}catch(e){t({type:Tc,payload:{message:bl.UPDATE_EDITOR_SETTINGS.MESSAGE}})}}),[a])}}}function Lc(){const{api:{pages:e}}=E(),t=(0,h.useCallback)((async t=>{try{const{title:a,link:o}=await function(e,t){const a=(0,Wi.default)(`${e}${t}/`,{_fields:Qi});return Zi({path:a})}(e,t);return{title:a.rendered,link:o}}catch(e){return null}}),[e]);return{api:{searchPages:(0,h.useCallback)((async t=>{try{const a=await function(e,t){const a=(0,Wi.default)(e,{per_page:100,search:t,_fields:Xi});return Zi({path:a})}(e,t);return a.map((e=>{let{id:t,title:a}=e;return{value:t,label:a.rendered}}))}catch(e){return[]}}),[e]),getPageById:t}}}const kc="loading",Pc="update_failure",Nc="update_success",Rc="fetch_failure",xc="fetch_success",Mc="remove_failure",Dc="remove_success",Bc="add_failure",Fc="add_success",Hc={error:{},isLoading:!1,publisherLogos:[],settingSaved:!1};const Uc=function(e,t){switch(t.type){case kc:return{...e,isLoading:!0,settingSaved:!1};case Bc:case Pc:case Mc:case Rc:return{...e,error:{...t.payload,id:Date.now()},isLoading:!1,settingSaved:!1};case xc:return{...e,error:{},isLoading:!1,publisherLogos:[...t.payload.publisherLogos]};case Fc:{const a=[...e.publisherLogos,t.payload.publisherLogo];return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:a}}case Nc:{const a=[...e.publisherLogos].map((e=>(e.active=e.id===t.payload.publisherLogo.id,e)));return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:a}}case Dc:{const a=e.publisherLogos.some((e=>{let{id:a,active:o}=e;return a===t.payload.id&&o})),o=[...e.publisherLogos].filter((e=>{let{id:a}=e;return a!==t.payload.id})).map(((e,t)=>(e.active=a?0===t:e.active,e)));return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:o}}default:return e}};function Gc(){const[e,t]=(0,h.useReducer)(Uc,Hc),{api:{publisherLogos:a}}=E(),o=(0,h.useCallback)((async()=>{t({type:kc});try{const o=await(e=a,Zi({path:e}));Array.isArray(o)?t({type:xc,payload:{publisherLogos:o}}):t({type:Rc,payload:{message:bl.LOAD_PUBLISHER_LOGOS.MESSAGE}})}catch(e){t({type:Rc,payload:{message:bl.LOAD_PUBLISHER_LOGOS.MESSAGE}})}var e}),[a]),r=(0,h.useCallback)((async e=>{t({type:kc});try{await function(e,t){const a=(0,Wi.default)(`${e}${t}/`,{_method:"DELETE"});return Zi({path:a,method:"POST"})}(a,e),t({type:Dc,payload:{id:e}})}catch(e){t({type:Rc,payload:{message:bl.REMOVE_PUBLISHER_LOGO.MESSAGE}})}}),[a]),n=(0,h.useCallback)((async e=>{t({type:kc});try{const n=await(o=a,r=e,Zi({path:o,data:{id:r},method:"POST"})),i=Array.isArray(n)?n:[n];for(const e of i)t({type:Fc,payload:{publisherLogo:e}})}catch(e){t({type:Bc,payload:{message:bl.UPLOAD_PUBLISHER_LOGO.MESSAGE}})}var o,r}),[a]);return{publisherLogos:e,api:{fetchPublisherLogos:o,addPublisherLogo:n,removePublisherLogo:r,setPublisherLogoAsDefault:(0,h.useCallback)((async e=>{t({type:kc});try{const n=await(o=a,r=e,Zi({path:`${o}${r}/`,data:{active:!0},method:"POST"}));t({type:Nc,payload:{publisherLogo:n}})}catch(e){t({type:Rc,payload:{message:bl.UPDATE_PUBLISHER_LOGO.MESSAGE}})}var o,r}),[a])}}}function Yc(){const{api:{fonts:e}}=E(),[t,a]=(0,h.useState)(null),o=(0,h.useCallback)((async()=>{try{const t=(await function(e){const t=(0,Wi.default)(e,{per_page:100,service:"custom"});return Zi({path:t})}(e)).map((e=>{let{id:t,family:a,url:o}=e;return{id:t,family:a,url:o}}));return a(t),t}catch{return null}}),[e]),r=(0,h.useCallback)((async o=>{const r=await function(e,t){const a=(0,Wi.default)(`${e}${t}/`,{_method:"DELETE"});return Zi({path:a,method:"POST"})}(e,o),n=t.filter((e=>e.id!==o));return a(n),r}),[t,e]),n=(0,h.useCallback)((async o=>{const r=await function(e,t){return Zi({path:e,data:t,method:"POST"})}(e,o),{id:n,family:i,url:l}=r,s={id:n,family:i,url:l};return a([s,...t]),s}),[t,e]);return{customFonts:t,api:{addCustomFont:n,deleteCustomFont:r,fetchCustomFonts:o}}}const zc=function EditorSettingsProvider(e){let{children:t}=e;const{customFonts:a,api:o}=Yc(),{currentUser:n,api:i}=mc(),{media:l,api:s}=Ec(),{settings:c,api:d}=Oc(),{api:u}=Lc(),{publisherLogos:p,api:m}=Gc(),b={state:{media:l,settings:c,currentUser:n,customFonts:a,publisherLogos:p},actions:{fontsApi:o,mediaApi:s,settingsApi:d,usersApi:i,pagesApi:u,publisherLogosApi:m}};return r.createElement(Cl.Provider,{value:b},t)};var jc=a(18969);function Vc(){return Vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Vc.apply(this,arguments)}const $c=(0,m.default)(co.Headline).withConfig({displayName:"banner__Title",componentId:"sc-13q35ui-0"})(["grid-area:title;padding-left:8px;"]),qc=m.default.div.withConfig({displayName:"banner__Content",componentId:"sc-13q35ui-1"})(["grid-area:content;margin-bottom:4px;max-width:408px;min-width:50%;"]),Wc=(0,m.default)(Pt.Button).withConfig({displayName:"banner__CloseButton",componentId:"sc-13q35ui-2"})(["grid-area:closeButton;justify-self:end;align-self:flex-start;"]),Zc=m.default.div.withConfig({displayName:"banner__Container",componentId:"sc-13q35ui-3"})(["display:grid;width:100%;min-height:60px;grid-template-columns:104px 1fr auto;grid-column-gap:32px;grid-template-areas:'title content closeButton';align-items:baseline;padding:6px 8px;background-color:",";background-image:url('","');border-radius:",";",""],(e=>{let{theme:t}=e;return t.colors.gray[5]}),(e=>{let{backgroundUrl:t}=e;return t}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{isDashboard:t}=e;return t&&(0,m.css)(["max-height:184px;border-radius:0;grid-template-columns:1fr 32px;grid-template-rows:3;grid-column-gap:0;grid-template-areas:'. closeButton' 'title title' 'content content';text-align:center;","{padding-left:0;margin-top:-10px;}","{margin:8px auto 18px;max-width:480px;}"],$c,qc)})),Kc=(0,h.forwardRef)(((e,t)=>{let{backgroundUrl:a,children:o,closeButtonLabel:n,isDashboard:i,title:l,onClose:s,...c}=e;return r.createElement(Zc,Vc({ref:t,backgroundUrl:a,isDashboard:i},c),r.createElement($c,{as:"h2",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES[i?"X_SMALL":"XX_SMALL"]},l),r.createElement(Wc,{type:Nt.BUTTON_TYPES.TERTIARY,variant:Nt.BUTTON_VARIANTS.SQUARE,size:Nt.BUTTON_SIZES.SMALL,"aria-label":n,onClick:s},r.createElement(jc.default,{"aria-hidden":!0})),r.createElement(qc,null,o))}));Kc.displayName="Banner";const Xc=a.p+"images/631db33b339209fd6ab0.png";function Qc(){return Qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Qc.apply(this,arguments)}const Jc=m.default.label.attrs({htmlFor:"telemetry-banner-opt-in"}).withConfig({displayName:"telemetryBanner__Label",componentId:"sc-inh4j2-0"})(["display:flex;cursor:pointer;"]),ed=(0,m.default)(ha.Text).withConfig({displayName:"telemetryBanner__LabelText",componentId:"sc-inh4j2-1"})(["margin-bottom:16px;margin-left:8px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),td=(0,m.default)(ha.Text).withConfig({displayName:"telemetryBanner__VisitSettingsText",componentId:"sc-inh4j2-2"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),ad=(0,m.default)(Kt.Link).withConfig({displayName:"telemetryBanner__NavLink",componentId:"sc-inh4j2-3"})(["display:inline-block;margin:0;"]),od=(0,h.forwardRef)(((e,t)=>{let{visible:a=!0,disabled:o=!1,onChange:i=(()=>{}),onClose:l=(()=>{}),checked:s=!1}=e;const c=(0,h.useRef)(),d=(0,h.useRef)(!1),u=s?(0,n.__)("Your selection has been updated. Thank you for helping to improve the editor!","web-stories"):(0,n.__)("Help improve the editor!","web-stories");return(0,h.useEffect)((()=>{d.current&&c.current.focus()})),a?r.createElement(Kc,{backgroundUrl:Xc,closeButtonLabel:(0,n.__)("Dismiss telemetry banner","web-stories"),onClose:l,title:u,ref:t,isDashboard:!0},r.createElement(Jc,null,r.createElement(Ts.Checkbox,{id:"telemetry-banner-opt-in",checked:s,disabled:o,onChange:()=>{i(),d.current=!0},onBlur:()=>{d.current=!1},ref:c}),r.createElement(ed,{forwardedAs:"span","aria-checked":s,size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(ad,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,href:(0,n.__)("https://policies.google.com/privacy","web-stories"),rel:"noreferrer",target:"_blank","aria-label":(0,n.__)("Learn more by visiting Google Privacy Policy","web-stories")})}},(0,n.__)("Check the box to help us improve the Web Stories plugin by allowing tracking of product usage stats. All data are treated in accordance with <a>Google Privacy Policy</a>.","web-stories")))),r.createElement(td,{forwardedAs:"span",size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},r.createElement(pr.default,{mapping:{a:r.createElement(ad,{size:Ia.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,href:no(fl),"aria-label":(0,n.__)("Settings","web-stories")})}},(0,n.__)("You can update your selection later by visiting <a>Settings</a>.","web-stories")))):null}));function TelemetryBannerContainer(e){const{bannerVisible:t,closeBanner:a,optedIn:o,disabled:n,toggleWebStoriesTrackingOptIn:i}=Pl(),l=(0,h.useRef)(),s=(0,h.useRef)(t);return(0,h.useLayoutEffect)((()=>{t&&!1===s.current&&l.current?s.current=!0:!t&&s.current&&(s.current=!1)}),[t]),r.createElement(od,Qc({ref:l,visible:t,checked:o,disabled:n,onChange:i,onClose:a},e))}function TelemetryBanner(){const{currentPath:e}=ro((e=>{let{state:t}=e;return{currentPath:t.currentPath}})),t=(0,h.useRef)(null),[,a]=(0,h.useState)(!1);return(0,h.useEffect)((()=>{[xe.DASHBOARD,xe.TEMPLATES_GALLERY].includes(e)&&(t.current=document.getElementById("body-view-options-header"),a((e=>!e)))}),[e,a]),t.current?(0,h.createPortal)(r.createElement(TelemetryBannerContainer,null),t.current):null}od.displayName="TelemetryOptInBanner";const rd=function(){return Il(),r.createElement(zc,null,r.createElement(Yi,{additionalRoutes:[{path:fl,component:r.createElement(pc,null)}]}),r.createElement(TelemetryBanner,null))};window.webStories=window.webStories||{},window.webStories.initializeStoryDashboard=(e,t)=>{const a=document.getElementById(e);(0,zi.setAppElement)(a),(0,ct.updateSettings)(t.locale),(0,y.initializeTracking)("Dashboard",!1),qi.default.forEach($i.registerElementType);const i={...t,apiCallbacks:(0,Vi.default)(o,t),leftRailSecondaryNavigation:hl,documentTitleSuffix:(0,n.__)("Web Stories − WordPress","web-stories"),styleConstants:{topOffset:32,leftOffset:36},containerId:"wpbody"};(0,h.render)(r.createElement(h.StrictMode,null,r.createElement(ur,{config:i},r.createElement(vl,null),r.createElement(rd,null))),a)}}},i={};function __webpack_require__(e){var t=i[e];if(void 0!==t)return t.exports;var a=i[e]={exports:{}};return n[e].call(a.exports,a,a.exports,__webpack_require__),a.exports}__webpack_require__.m=n,__webpack_require__.amdO={},e=[],__webpack_require__.O=(t,a,o,r)=>{if(!a){var n=1/0;for(c=0;c<e.length;c++){for(var[a,o,r]=e[c],i=!0,l=0;l<a.length;l++)(!1&r||n>=r)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](a[l])))?a.splice(l--,1):(i=!1,r<n&&(n=r));if(i){e.splice(c--,1);var s=o();void 0!==s&&(t=s)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,o,r]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var r=Object.create(null);__webpack_require__.r(r);var n={};t=t||[null,a({}),a([]),a(a)];for(var i=2&o&&e;"object"==typeof i&&!~t.indexOf(i);i=a(i))Object.getOwnPropertyNames(i).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,__webpack_require__.d(r,n),r},__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,a)=>(__webpack_require__.f[a](e,t),t)),[])),__webpack_require__.u=e=>1814===e?"1814.js":({8:"chunk-web-stories-template-5",69:"chunk-web-stories-template-60-metaData",274:"chunk-web-stories-template-56",354:"chunk-web-stories-template-19",410:"chunk-web-stories-template-24",533:"chunk-web-stories-template-42-metaData",824:"chunk-web-stories-template-36",827:"chunk-web-stories-template-27-metaData",884:"chunk-web-stories-template-18-metaData",907:"chunk-web-stories-template-57",1049:"chunk-web-stories-template-37",1066:"chunk-web-stories-template-44-metaData",1197:"chunk-web-animations-js",1231:"chunk-web-stories-template-12",1340:"chunk-web-stories-template-30-metaData",1380:"chunk-web-stories-template-33-metaData",1403:"chunk-web-stories-template-37-metaData",1738:"chunk-web-stories-template-32",1789:"chunk-web-stories-template-43",1813:"chunk-web-stories-template-10-metaData",1847:"chunk-web-stories-template-12-metaData",1858:"chunk-web-stories-template-1",1970:"chunk-web-stories-template-22-metaData",2068:"chunk-web-stories-template-46",2167:"chunk-web-stories-template-32-metaData",2191:"chunk-web-stories-template-49-metaData",2235:"chunk-web-stories-template-51-metaData",2246:"chunk-web-stories-template-45-metaData",2319:"chunk-web-stories-template-31-metaData",2338:"chunk-web-stories-template-25",2374:"chunk-web-stories-template-2-metaData",2454:"chunk-web-stories-template-6",2558:"chunk-web-stories-template-53-metaData",2776:"chunk-web-stories-template-9-metaData",2794:"chunk-opentype",2830:"chunk-web-stories-template-36-metaData",2880:"chunk-web-stories-template-8",2894:"chunk-web-stories-template-34-metaData",3041:"chunk-web-stories-template-15-metaData",3194:"chunk-web-stories-template-29-metaData",3245:"chunk-web-stories-template-28",3289:"chunk-web-stories-template-43-metaData",3304:"chunk-web-stories-template-49",3441:"chunk-web-stories-template-45",3529:"chunk-web-stories-template-39",3710:"chunk-web-stories-template-35",3772:"chunk-web-stories-template-60",3777:"chunk-web-stories-template-34",3864:"chunk-web-stories-template-4-metaData",3969:"chunk-web-stories-template-9",4051:"chunk-web-stories-template-40-metaData",4142:"chunk-web-stories-template-29",4178:"chunk-web-stories-template-24-metaData",4386:"chunk-web-stories-template-41",4585:"chunk-web-stories-template-38-metaData",4874:"chunk-web-stories-template-35-metaData",4991:"chunk-web-stories-templates",5016:"chunk-web-stories-template-21-metaData",5040:"chunk-web-stories-template-16",5157:"chunk-web-stories-template-33",5312:"chunk-web-stories-template-14",5372:"chunk-web-stories-template-6-metaData",5397:"chunk-web-stories-template-8-metaData",5432:"chunk-web-stories-template-26",5535:"chunk-web-stories-template-15",5543:"chunk-web-stories-template-31",5553:"chunk-web-stories-template-20-metaData",5570:"chunk-web-stories-template-54-metaData",5573:"chunk-web-stories-template-52-metaData",5575:"chunk-resize-observer-polyfill",5748:"chunk-web-stories-template-54",5835:"chunk-web-stories-template-30",5985:"chunk-getStoryMarkup",6053:"chunk-web-stories-template-16-metaData",6188:"chunk-web-stories-template-42",6204:"chunk-web-stories-template-0-metaData",6271:"chunk-web-stories-template-39-metaData",6305:"chunk-web-stories-template-5-metaData",6311:"chunk-web-stories-template-23-metaData",6353:"chunk-web-stories-template-1-metaData",6406:"chunk-web-stories-template-4",6428:"chunk-web-stories-template-13",6500:"chunk-web-stories-template-0",6517:"chunk-web-stories-template-52",6539:"chunk-web-stories-template-58-metaData",6592:"chunk-web-stories-template-51",6641:"chunk-web-stories-template-28-metaData",6766:"chunk-web-stories-template-19-metaData",6841:"chunk-web-stories-template-58",6852:"chunk-web-stories-template-27",7131:"chunk-web-stories-template-20",7314:"chunk-web-stories-template-25-metaData",7343:"chunk-web-stories-template-47",7346:"chunk-web-stories-template-7",7399:"chunk-web-stories-template-38",7441:"chunk-web-stories-template-48",7502:"chunk-web-stories-template-23",7528:"chunk-web-stories-template-14-metaData",7586:"chunk-web-stories-template-40",7588:"chunk-web-stories-template-55-metaData",7685:"chunk-web-stories-template-59",7798:"chunk-web-stories-template-50-metaData",7799:"chunk-web-stories-template-3",7863:"chunk-web-stories-template-47-metaData",7952:"chunk-web-stories-template-3-metaData",8022:"chunk-web-stories-template-26-metaData",8189:"chunk-web-stories-template-56-metaData",8203:"chunk-web-stories-template-44",8257:"chunk-web-stories-template-22",8344:"chunk-web-stories-template-10",8422:"chunk-web-stories-template-41-metaData",8551:"chunk-web-stories-template-18",8624:"chunk-focus-visible",8768:"chunk-web-stories-template-11-metaData",8856:"chunk-web-stories-template-48-metaData",9074:"chunk-web-stories-template-7-metaData",9233:"chunk-web-stories-template-53",9288:"chunk-web-stories-template-55",9302:"chunk-web-stories-template-17-metaData",9375:"chunk-web-stories-template-57-metaData",9393:"chunk-web-stories-template-59-metaData",9557:"chunk-web-stories-template-13-metaData",9591:"chunk-web-stories-template-50",9603:"chunk-web-stories-template-17",9607:"chunk-web-stories-template-2",9700:"chunk-web-stories-template-11",9738:"chunk-web-stories-template-46-metaData",9811:"chunk-web-stories-template-21"}[e]||e)+".js?v="+{8:"62f48c943362be75dde6",69:"ee8bf6a37ece865f9fde",274:"49986a50cfec69f8a8d8",354:"21701c9bb7dc9de8e903",410:"f2b1685a440ddb51f829",533:"7031543bbf0ac9875728",824:"cca56f39ee2354beeb1c",827:"4f4dc18fab8674b3fa25",884:"d121f5f5280f132b5597",907:"ddf0d94935aeeb5f9b29",1049:"e051f32082205f79d19c",1066:"a635c0f83fd51db6ac06",1197:"45f526a251ead370165a",1231:"0e881ddf3a5dca4f5b43",1340:"658339eae27be828c9d2",1380:"2ca16dfc5daadd31e068",1403:"88b6b87bdb2c9e25e03e",1738:"c6d12e0233116e40adbe",1789:"d24574fa712b1479f5e8",1813:"38319dc6a0a3f890b221",1847:"a4057b4c746081be9263",1858:"a72c93c859283416ebac",1970:"78b7a2bd8812f2bf6406",2068:"47c0a6bcf385f89e3eee",2167:"63718570f9ee6fc4c997",2191:"9e9359bd105429600d80",2235:"235e98e7f0a194e663df",2246:"ad654f9224067fefa563",2319:"de459568067e6a86c7ac",2338:"45b0a0bddeaeccff92e4",2374:"bdfd30cc435b8733776b",2454:"c1f02d36e388601ee93a",2558:"dd3a56a23eef473743c2",2776:"2a94f2790f69801857f7",2794:"edff2f2b0b1755963f5f",2830:"f8c41181823fb6e56a2a",2880:"5a970aa4c5ee275902ed",2894:"d72ef1b8371f0de9d4b7",3041:"acafde2d8f1a6980eb81",3194:"76e25e1bb5380222d1e6",3245:"dd9ae4e530a10801c9e9",3289:"667fa6d0a0f6165df08a",3304:"7c66775981ad6712995c",3441:"db38a2c18c581dab30d1",3529:"f735383152e06dee91d7",3710:"681c6765fe6ee63989df",3772:"0151a08850e7d199048e",3777:"32457dc282cf13690a58",3864:"205a38118d76188f1497",3969:"5f3eeb34b188592586e9",4051:"a3859c6f25fb906796aa",4142:"00be70528ca40ed53b45",4178:"1bb9fee64db965ad4c77",4386:"ff7fe8d505c23dfcc14b",4422:"6254037e2631b87dc69f",4585:"934e6e9b938e8e0c0832",4874:"8d02e508eb5953a8f03e",4991:"95aec1c9b22e9cf6269d",5016:"416c3be02c2ca809fc3f",5040:"280a87a741d45028bd72",5157:"b2e8a89540391dd72495",5312:"5ead1d2681b6c2e43ea0",5372:"8cff45ed4d0f60a1881d",5397:"59ce47b435a56f9e93f6",5432:"481f3754e9ebeb95086c",5535:"2ad146a9aff0b0c75a03",5543:"db8c05e7971e4e112526",5553:"46ade91fdf2e8a4501d5",5570:"1a2bca995e7c5853b966",5573:"d11139be60f7b14c9ffc",5575:"a97a5e5ec0e812a389ed",5748:"627091a0027160e28832",5835:"1d3dc9abe4467c369ae8",5985:"58c3d820197003b25984",6053:"cd8f59acf99cb495fe77",6188:"3571ed18b36b107eb6dc",6204:"ffa8c4d1cc9dd090d896",6271:"49df2acd6d02d6aebdb7",6305:"f8bb7423de5e3aabca11",6311:"efd3cdbbbecec5cdafa2",6353:"78c4ce9232efce7cc087",6406:"6e024e0ebb0a89677d8b",6428:"6e42df44263b06907366",6500:"5b642d52229cff29396f",6517:"fe0aca5c0a8d5cf81a57",6539:"64a365f05a34a2adf367",6592:"535b235f72e0ff797e79",6641:"bade12d3bb5f6781a58f",6766:"1bc7a9e7a79469a5af79",6841:"73b31e266acf1281dcb1",6852:"35ddb0a2da2984a1b24b",7131:"09333faf6e6735deb15e",7314:"979d5b962e46e47de7f7",7343:"8498b35b4fedfb63a2f9",7346:"10673013e512b913493a",7399:"e749dbd85fddb70d1d34",7441:"d269a6e18ed8f7a17697",7502:"b6d691e97a889aa9db7b",7528:"8d631193e3fc67f254d9",7586:"47838fa1e9462f151802",7588:"ed34aaadc0ad2abddde5",7685:"33264baee027a93c07f1",7798:"a03fe4c4b1d6abf8541f",7799:"37d47adb1bf1c3d9355b",7863:"582b6c2ce8eaad76fc82",7952:"f206bee0645c91e855ef",8022:"5bb8b28faa28034ae43b",8189:"37686cfc4a640c7e0f40",8203:"17070712208bfec54b06",8257:"2f339371692f425db1f0",8344:"e1e9ae4748303d0817ff",8422:"3f42e89ce0dd7e802975",8551:"1202b4bf2ee58bf65086",8624:"705c5bfc48fb43676444",8768:"04036e7d0f2b8b2c1b24",8856:"7e61600bafdf93fbef22",9074:"c956f3be9f5f3f084d97",9233:"95aa91bc0f954778c4c0",9288:"678083dc9343a66fbd71",9302:"b0227828b5a500a82b1d",9375:"41a6095cbe70256cfb67",9393:"363f78c9382ef94434e8",9557:"39986c27dabeda720306",9591:"16deb0841809d79ab2eb",9603:"573e10b8e766bab31c0a",9607:"74a4b305f26ead9d17b0",9700:"84bb5757f7155a91741e",9738:"d8b00ffb3193a85920f1",9811:"47d5f65f0cf96d4f12ce"}[e],__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},r="web-stories-wp:",__webpack_require__.l=(e,t,a,n)=>{if(o[e])o[e].push(t);else{var i,l;if(void 0!==a)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+a){i=d;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",r+a),i.src=e),o[e]=[t];var u=(t,a)=>{i.onerror=i.onload=null,clearTimeout(p);var r=o[e];if(delete o[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(a))),t)return t(a)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),l&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="",(()=>{var e={402:0};__webpack_require__.f.j=(t,a)=>{var o=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise(((a,r)=>o=e[t]=[a,r]));a.push(o[2]=r);var n=__webpack_require__.p+__webpack_require__.u(t),i=new Error;__webpack_require__.l(n,(a=>{if(__webpack_require__.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",i.name="ChunkLoadError",i.type=r,i.request=n,o[1](i)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,a)=>{var o,r,[n,i,l]=a,s=0;if(n.some((t=>0!==e[t]))){for(o in i)__webpack_require__.o(i,o)&&(__webpack_require__.m[o]=i[o]);if(l)var c=l(__webpack_require__)}for(t&&t(a);s<n.length;s++)r=n[s],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(c)},a=globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=__webpack_require__.O(void 0,[7120,5980,7],(()=>__webpack_require__(53715)));l=__webpack_require__.O(l)})();