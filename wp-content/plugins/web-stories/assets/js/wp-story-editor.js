(()=>{var e,t,n,r,a,o={8968:(e,t,n)=>{"use strict";n.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=n(72070),a=n(97765);const __WEBPACK_DEFAULT_EXPORT__=function(e){return(0,r.useContextSelector)(a.StoryAnimationContext,e??r.identity)}},44258:(e,t,n)=>{"use strict";n.d(t,{ANIMATION_EFFECTS:()=>l,ANIMATION_PARTS:()=>s,ANIMATION_TYPES:()=>o,AXIS:()=>m,BACKGROUND_ANIMATION_EFFECTS:()=>i,BEZIER:()=>a,BG_MAX_SCALE:()=>b,BG_MIN_SCALE:()=>h,DIRECTION:()=>c,FIELD_TYPES:()=>f,ROTATION:()=>p,SCALE_DIRECTION:()=>d,SCALE_DIRECTION_MAP:()=>u,STORY_ANIMATION_STATE:()=>g});var r=n(91655);const a={linear:"linear",in:"ease-in",out:"ease-out",inOut:"ease-in-out",inQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",outQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",inOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",inCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",outCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",inOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1)",inQuart:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",outQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",inOutQuart:"cubic-bezier(0.77, 0, 0.175, 1)",inQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",outQuint:"cubic-bezier(0.23, 1, 0.32, 1)",inOutQuint:"cubic-bezier(0.86, 0, 0.07, 1)",inSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",outSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",inOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",inExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",outExpo:"cubic-bezier(0.19, 1, 0.22, 1)",inOutExpo:"cubic-bezier(1, 0, 0, 1)",inCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",outCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",inOutCirc:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",default:"cubic-bezier(0.4, 0.4, 0.0, 1)"},o={BLINK_ON:"blinkOn",BOUNCE:"bounce",FADE:"fade",FLIP:"flip",FLOAT_ON:"floatOn",MOVE:"move",PULSE:"pulse",SPIN:"spin",ZOOM:"zoom"},l={DROP:{value:"effect-drop",name:(0,r._x)("Drop","animation effect","web-stories")},FADE_IN:{value:"effect-fade-in",name:(0,r._x)("Fade In","animation effect","web-stories")},FLY_IN:{value:"effect-fly-in",name:(0,r._x)("Fly In","animation effect","web-stories")},PAN:{value:"effect-pan",name:(0,r._x)("Pan","animation effect","web-stories")},PULSE:{value:"effect-pulse",name:(0,r._x)("Pulse","animation effect","web-stories")},TWIRL_IN:{value:"effect-twirl-in",name:(0,r._x)("Twirl In","animation effect","web-stories")},WHOOSH_IN:{value:"effect-whoosh-in",name:(0,r._x)("Whoosh In","animation effect","web-stories")},ZOOM:{value:"effect-zoom",name:(0,r._x)("Scale","animation effect","web-stories")},ROTATE_IN:{value:"effect-rotate-in",name:(0,r._x)("Rotate In","animation effect","web-stories")}},i={ZOOM:{value:"effect-background-zoom",name:(0,r._x)("Zoom","animation effect","web-stories")},PAN:{value:"effect-background-pan",name:l.PAN.name},PAN_AND_ZOOM:{value:"effect-background-pan-and-zoom",name:(0,r._x)("Pan and Zoom","animation effect","web-stories")}},s={BLINK_ON:{value:o.BLINK_ON,name:(0,r._x)("Blink On","animation effect","web-stories")},BOUNCE:{value:o.BOUNCE,name:(0,r._x)("Bounce","animation effect","web-stories")},FADE:{value:o.FADE,name:(0,r._x)("Fade","animation effect","web-stories")},FLIP:{value:o.FLIP,name:(0,r._x)("Flip","animation effect","web-stories")},FLOAT_ON:{value:o.FLOAT_ON,name:(0,r._x)("Float On","animation effect","web-stories")},MOVE:{value:o.MOVE,name:(0,r._x)("Move","animation effect","web-stories")},PULSE:{value:o.PULSE,name:(0,r._x)("Pulse","animation effect","web-stories")},SPIN:{value:o.SPIN,name:(0,r._x)("Spin","animation effect","web-stories")},ZOOM:{value:o.ZOOM,name:(0,r._x)("Zoom","animation effect","web-stories")}},c={TOP_TO_BOTTOM:"topToBottom",RIGHT_TO_LEFT:"rightToLeft",BOTTOM_TO_TOP:"bottomToTop",LEFT_TO_RIGHT:"leftToRight"},d={DYNAMIC_PROPERTY_VALUE:"dynamicPropertyValue",SCALE_IN:"scaleIn",SCALE_OUT:"scaleOut",SCALE_OUT_TOP_RIGHT:"scaleOutTopRight",SCALE_OUT_BOTTOM_LEFT:"scaleOutBottomLeft",SCALE_IN_TOP_LEFT:"scaleInTopLeft",SCALE_IN_BOTTOM_RIGHT:"scaleInBottomRight"},u={SCALE_IN:[d.SCALE_IN_TOP_LEFT,d.SCALE_IN_BOTTOM_RIGHT],SCALE_OUT:[d.SCALE_OUT_TOP_RIGHT,d.SCALE_OUT_BOTTOM_LEFT]},p={CLOCKWISE:"clockwise",COUNTER_CLOCKWISE:"counterClockwise",PING_PONG:"pingPong"},m={X:"x",Y:"y"},f={DROPDOWN:"dropdown",HIDDEN:"hidden",ROTATION_PICKER:"rotation_picker",DIRECTION_PICKER:"direction_picker",NUMBER:"number",FLOAT:"float",TEXT:"text",CHECKBOX:"checkbox",RANGE:"RANGE"},g={RESET:"reset",PAUSED:"paused",SCRUBBING:"scrubbing",PLAYING:"playing",PLAYING_SELECTED:"playing-selected"},h=100,b=400},77175:(e,t,n)=>{"use strict";n.d(t,{FlyInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={flyInDir:a().shape(i.AnimationInputPropTypes)},c={flyInDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.TOP_TO_BOTTOM,l.DIRECTION.BOTTOM_TO_TOP,l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.BOTTOM_TO_TOP},duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}}},47730:(e,t,n)=>{"use strict";n.d(t,{PanEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={panDir:a().shape(i.AnimationInputPropTypes)},c={panDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.TOP_TO_BOTTOM,l.DIRECTION.BOTTOM_TO_TOP,l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.BOTTOM_TO_TOP}}},78582:(e,t,n)=>{"use strict";n.d(t,{PulseEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={scale:a().shape(i.AnimationInputPropTypes),iterations:a().shape(i.AnimationInputPropTypes)},c={scale:{label:(0,o.__)("Scale","web-stories"),tooltip:"Valid values are greater than or equal to 0",type:l.FIELD_TYPES.FLOAT,defaultValue:.5},iterations:{label:(0,o._x)("Pulses","number of pulses","web-stories"),type:l.FIELD_TYPES.NUMBER,defaultValue:1},duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:1450}}},32619:(e,t,n)=>{"use strict";n.d(t,{RotateInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={rotateInDir:a().shape(i.AnimationInputPropTypes)},c={rotateInDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.LEFT_TO_RIGHT}}},27609:(e,t,n)=>{"use strict";n.d(t,{WhooshInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={whooshInDir:a().shape(i.AnimationInputPropTypes)},c={whooshInDir:{label:(0,o.__)("Direction","web-stories"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.DIRECTION.LEFT_TO_RIGHT,l.DIRECTION.RIGHT_TO_LEFT],defaultValue:l.DIRECTION.LEFT_TO_RIGHT},duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}}},4891:(e,t,n)=>{"use strict";n.d(t,{ZoomEffectInputPropTypes:()=>c,default:()=>d});var r=n(45697),a=n.n(r),o=n(91655),l=n(87602),i=n(44258),s=n(87745);const c={scaleDirection:a().shape(s.AnimationInputPropTypes)},d={scaleDirection:{label:(0,o.__)("Direction","web-stories"),tooltip:(0,l.default)(
/* translators: 1: scaleIn. 2: scaleOut */
(0,o.__)("Valid values are %1$s or %2$s","web-stories"),"scaleIn","scaleOut"),type:i.FIELD_TYPES.DIRECTION_PICKER,values:[i.SCALE_DIRECTION.SCALE_IN,i.SCALE_DIRECTION.SCALE_OUT],defaultValue:i.SCALE_DIRECTION.SCALE_IN},duration:{label:(0,o.__)("Duration","web-stories"),type:i.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}}},58373:(e,t,n)=>{"use strict";n.d(t,{ANIMATION_EFFECTS:()=>d.ANIMATION_EFFECTS,ANIMATION_PARTS:()=>d.ANIMATION_PARTS,AnimationProps:()=>u.AnimationProps,BACKGROUND_ANIMATION_EFFECTS:()=>d.BACKGROUND_ANIMATION_EFFECTS,BG_MAX_SCALE:()=>d.BG_MAX_SCALE,BG_MIN_SCALE:()=>d.BG_MIN_SCALE,DIRECTION:()=>d.DIRECTION,FIELD_TYPES:()=>d.FIELD_TYPES,ROTATION:()=>d.ROTATION,SCALE_DIRECTION:()=>d.SCALE_DIRECTION,SCALE_DIRECTION_MAP:()=>d.SCALE_DIRECTION_MAP,STORY_ANIMATION_STATE:()=>d.STORY_ANIMATION_STATE,StoryAnimation:()=>c,getAnimationEffectDefaults:()=>u.getAnimationEffectDefaults,getAnimationEffectProps:()=>u.getAnimationEffectProps,getTotalDuration:()=>p.getTotalDuration,hasOffsets:()=>p.hasOffsets,useStoryAnimationContext:()=>s.default});var r=n(97765),a=n(79968),o=n(5954),l=n(98236),i=n(34433),s=n(8968);const c={Provider:r.default,WAAPIWrapper:a.default,AMPWrapper:o.default,AMPKeyframes:l.default,AMPAnimations:i.default};var d=n(44258),u=n(40320),p=(n(13418),n(93478));n(69332)},79871:(e,t,n)=>{"use strict";n.d(t,{BasicAnimationInputPropTypes:()=>s,basicAnimationProps:()=>c});var r=n(45697),a=n.n(r),o=n(91655),l=n(44258),i=n(87745);const s={duration:a().shape(i.AnimationInputPropTypes),delay:a().shape(i.AnimationInputPropTypes)},c={duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:1e3},delay:{label:(0,o.__)("Delay","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:0}};l.FIELD_TYPES.HIDDEN,(0,o.__)("Animation Type","web-stories"),l.FIELD_TYPES.DROPDOWN,Object.values(l.ANIMATION_TYPES),Object.values(l.ANIMATION_EFFECTS).map((e=>e.value)),l.FIELD_TYPES.DROPDOWN,(0,o.__)("Easing Presets","web-stories"),l.FIELD_TYPES.DROPDOWN,Object.keys(l.BEZIER),Object.keys(l.BEZIER)[0],l.FIELD_TYPES.TEXT,l.FIELD_TYPES.DROPDOWN,(0,o.__)('Valid values are numerical or the word "infinity"',"web-stories"),l.FIELD_TYPES.TEXT},40320:(e,t,n)=>{"use strict";n.d(t,{AnimationPart:()=>AnimationPart,AnimationProps:()=>Y.AnimationProps,getAnimationEffectDefaults:()=>V,getAnimationEffectProps:()=>W});var r=n(67294),a=n(44258);const o=e=>{switch(e){case a.FIELD_TYPES.CHECKBOX:return!1;case a.FIELD_TYPES.NUMBER:case a.FIELD_TYPES.FLOAT:case a.FIELD_TYPES.RANGE:return 0;default:return""}};var l=n(11533),i=n(96302),s=n(5644),c=n(3200),d=n(37308),u=n(84276),p=n(54913),m=n(63898),f=n(75590),g=n(51352),h=n(93886),b=n(44130),E=n(45697),y=n.n(E),_=n(91655),v=n(87745);y().shape(v.AnimationInputPropTypes);const w={duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}};var T=n(77175),S=n(47730),C=n(78582),I=n(32619),x=n(27609),A=n(4891);y().shape(v.AnimationInputPropTypes);const k={duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:1600}};var O=n(87602);y().shape(v.AnimationInputPropTypes),y().shape(v.AnimationInputPropTypes);const P={zoomDirection:{label:(0,_.__)("Direction","web-stories"),tooltip:(0,O.default)(
/* translators: 1: scaleIn. 2: scaleOut */
(0,_.__)("Valid values are %1$s or %2$s","web-stories"),"zoomIn","zoomOut"),type:a.FIELD_TYPES.DIRECTION_PICKER,values:[a.SCALE_DIRECTION.SCALE_IN,a.SCALE_DIRECTION.SCALE_OUT],defaultValue:a.SCALE_DIRECTION.SCALE_OUT},duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}},N=(y().shape(v.AnimationInputPropTypes),y().shape(v.AnimationInputPropTypes),{panDir:{label:(0,_.__)("Direction","web-stories"),type:a.FIELD_TYPES.DIRECTION_PICKER,values:[a.DIRECTION.TOP_TO_BOTTOM,a.DIRECTION.BOTTOM_TO_TOP,a.DIRECTION.LEFT_TO_RIGHT,a.DIRECTION.RIGHT_TO_LEFT],defaultValue:a.DIRECTION.BOTTOM_TO_TOP},duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}});var R=n(93478),M=n(85242),L=n(15604),D=n(75351),B=n(83072),F=n(60106),H=n(11006),U=n(76585),j=n(10638),z=n(8748),G=n(79871),Y=n(66776);function EmptyAMPTarget(e){let{children:t,...n}=e;return r.createElement("div",n,t)}function Z(){return{id:-1,generatedKeyframes:{},WAAPIAnimation:{},AMPTarget:EmptyAMPTarget,AMPAnimation:()=>null}}function AnimationPart(e,t){const n={[a.ANIMATION_TYPES.BOUNCE]:M.AnimationBounce,[a.ANIMATION_TYPES.BLINK_ON]:L.AnimationBlinkOn,[a.ANIMATION_TYPES.FADE]:D.AnimationFade,[a.ANIMATION_TYPES.FLIP]:B.AnimationFlip,[a.ANIMATION_TYPES.FLOAT_ON]:F.AnimationFloatOn,[a.ANIMATION_TYPES.MOVE]:H.AnimationMove,[a.ANIMATION_TYPES.PULSE]:U.AnimationPulse,[a.ANIMATION_TYPES.SPIN]:j.AnimationSpin,[a.ANIMATION_TYPES.ZOOM]:z.AnimationZoom,[a.ANIMATION_EFFECTS.FADE_IN.value]:i.EffectFadeIn,[a.ANIMATION_EFFECTS.FLY_IN.value]:s.EffectFlyIn,[a.ANIMATION_EFFECTS.PAN.value]:c.EffectPan,[a.ANIMATION_EFFECTS.PULSE.value]:d.EffectPulse,[a.ANIMATION_EFFECTS.TWIRL_IN.value]:u.EffectTwirlIn,[a.ANIMATION_EFFECTS.WHOOSH_IN.value]:p.EffectWhooshIn,[a.ANIMATION_EFFECTS.ZOOM.value]:m.EffectZoom,[a.ANIMATION_EFFECTS.DROP.value]:l.EffectDrop,[a.ANIMATION_EFFECTS.ROTATE_IN.value]:f.EffectRotateIn,[a.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:g.EffectBackgroundZoom,[a.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:h.EffectBackgroundPan,[a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:b.EffectBackgroundPanAndZoom}[e?.value||e]||Z;return t.easing=t.easing||a.BEZIER[t.easingPreset],t.easingPreset=void 0,n(t)}function W(e){const t={[a.ANIMATION_EFFECTS.FLY_IN.value]:T.default,[a.ANIMATION_EFFECTS.PAN.value]:S.default,[a.ANIMATION_EFFECTS.PULSE.value]:C.default,[a.ANIMATION_EFFECTS.ROTATE_IN.value]:I.default,[a.ANIMATION_EFFECTS.FADE_IN.value]:w,[a.ANIMATION_EFFECTS.WHOOSH_IN.value]:x.default,[a.ANIMATION_EFFECTS.ZOOM.value]:A.default,[a.ANIMATION_EFFECTS.DROP.value]:k,[a.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:P,[a.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:N,[a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:N};let n=Object.keys({...t[e]||{},...G.basicAnimationProps});if(e===a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value){const e="zoomDirection",t=n.indexOf(e);t>-1&&(n=[...n.slice(0,t),...n.slice(t+1),e])}return{type:e,props:(0,R.orderByKeys)({obj:{...G.basicAnimationProps,...t[e]||{}},keys:n})}}function V(e){const{props:t}=W(e);return Object.keys(t).reduce(((e,n)=>({...e,[n]:t[n].defaultValue??o(t[n].type)})),{})}},93478:(e,t,n)=>{"use strict";n.d(t,{defaultUnit:()=>r.defaultUnit,getGlobalSpace:()=>a.getGlobalSpace,getMediaBoundOffsets:()=>d,getMediaOrigin:()=>f.getMediaOrigin,getOffPageOffset:()=>o.default,getTotalDuration:()=>l.getTotalDuration,hasOffsets:()=>u,orderByKeys:()=>m});var r=n(30491),a=n(17161),o=n(53020),l=n(18034),i=n(1787),s=n(15985),c=n(7868);function d(e){let{element:t}=e;const n=(0,i.getBox)(t,s.PAGE_WIDTH,s.PAGE_HEIGHT),r=(0,c.default)(t.resource,n.width,n.height,t.scale,t.focalX,t.focalY);return{top:r.offsetY/r.height*100,right:(r.width-(r.offsetX+s.PAGE_WIDTH))/r.width*-1*100,left:r.offsetX/r.width*100,bottom:(r.height-(r.offsetY+s.FULLBLEED_HEIGHT))/r.height*-1*100}}function u(e){let{element:t}=e;const n=d({element:t});return r=n,a=e=>Math.abs(e)>1,Object.entries(r).reduce(((e,t)=>{let[n,r]=t;return e[n]=a(r),e}),{});var r,a}n(26699);function p(e){let{obj:t={},keys:n=[]}=e;return Object.keys(t).reduce(((e,r)=>(n.includes(r)||(e[r]=t[r]),e)),{})}function m(e){let{obj:t={},keys:n=[]}=e;return{...n.reduce(((e,n)=>{const r=t[n];return n in t&&(e[n]=r),e}),{}),...p({obj:t,keys:n})}}var f=n(9223)},52589:(e,t,n)=>{"use strict";n.d(t,{CONTEXT_MENU_MIN_WIDTH:()=>g,default:()=>y});var r=n(67294),a=(n(26699),n(45697)),o=n.n(a),l=n(72070),i=n(26300),s=n(40981),c=n(66044),d=n(66394),u=n(82302),p=n(8682),m=n(19683);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}const g=200,h=i.default.div.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-1xfj06c-0"})((e=>{let{theme:t}=e;return(0,i.css)(["background-color:",";border-radius:",";border:1px solid ",";gap:6px;display:flex;"," *:last-child{margin-bottom:0;}"],(e=>{let{isSecondary:n}=e;return n?t.colors.bg.secondary:t.colors.bg.primary}),(e=>{let{isHorizontal:n}=e;return n?t.borders.radius.medium:t.borders.radius.small}),t.colors.border.disable,(e=>{let{isHorizontal:t,isIconMenu:n}=e;return t?(0,i.css)(["height:52px;padding:7px 10px;align-items:center;"]):(0,i.css)(["flex-direction:column;width:",";padding:",";max-width:","px;",";"],n?"40px":"auto",n?"4px 3px":"8px 0",300,!n&&(0,i.css)(["min-width:","px;"],g))}))}));function b(e,t){const n=Array.from(e.querySelectorAll(s.FOCUSABLE_SELECTORS.join(", ")));return t?n:n.filter((e=>!e.matches(`[role="menu"], [role="menu"] [role="menu"] *, .${m.CONTEXT_MENU_SKIP_ELEMENT}`)))}h.propTypes={isIconMenu:o().bool,isHorizontal:o().bool,isSecondary:o().bool};const E=(0,l.forwardRef)(((e,t)=>{let{children:n,disableControlledTabNavigation:a,isOpen:o,onFocus:i=c.noop,isSubMenu:m=!1,isSecondary:g=!1,parentMenuRef:E,onCloseSubMenu:y=c.noop,dismissOnEscape:_=!0,...v}=e;const{isRTL:w}=v,{focusedId:T,isIconMenu:S,isHorizontal:C,onDismiss:I,setFocusedId:x}=(0,p.default)((e=>{let{state:t,actions:n}=e;return{focusedId:t.focusedId,isIconMenu:t.isIconMenu,isHorizontal:t.isHorizontal,onDismiss:n.onDismiss,setFocusedId:n.setFocusedId}})),A=(0,d.default)((()=>{o&&!m&&I()})),k=(0,l.useRef)(null),O=(0,l.useCombinedRefs)(A,k,t),P=(0,l.useCallback)((e=>{i(e);const t=k.current.children||[],n=t.length&&![...t].some((t=>t.contains(e.target)));if(k.current===e.target&&n){const e=b(k.current);document.dispatchEvent(new KeyboardEvent("keydown",{key:"tab"})),e?.[0]?.focus()}}),[i]),N=(0,l.useCallback)((e=>{let t=e.findIndex((e=>e.id===T));return-1===t&&(t=e.findIndex((e=>e.id===document.activeElement.id))),t}),[T]),R=(0,l.useCallback)((e=>{const{key:t}=e;if("Escape"===t)return void I(e);const n=b(k.current,m);let r=N(n);-1===r&&n.length&&(x(n[0].id),r=0);const a=C?s.KEYS.LEFT:s.KEYS.UP;if([a,C?s.KEYS.RIGHT:s.KEYS.DOWN].includes(t)){let e=r+(a===t?-1:1);-1===e&&(e=n.length-1);const o=n[e%n.length];return o?.focus(),void x(o?.id||-1)}const o=C?s.KEYS.UP:w?s.KEYS.RIGHT:s.KEYS.LEFT;if(m&&o===t){E.current.querySelector('button[aria-expanded="true"]')?.focus(),y()}}),[m,N,C,w,I,x,E,y]);(0,l.useEffect)((()=>{if(o){const e=b(k.current);e.length&&(e?.[0]?.focus(),x(e?.[0]?.id))}}),[o,x]);const M=(0,l.useMemo)((()=>a?{key:[]}:{key:["tab"],shift:!0}),[a]);return(0,u.useKeyDownEffect)(k,{key:_?["esc","down","up","left","right"]:["down","up","left","right"]},R,[R,_]),(0,u.useKeyDownEffect)(k,M,I,[M,I]),r.createElement(h,f({ref:O,"data-testid":"context-menu-list",role:"menu",isIconMenu:S,isHorizontal:C,isSecondary:g,tabIndex:k.current?.contains(document.activeElement)?-1:0,onFocus:P},v),n)})),y=(o().node,o().func,o().bool,o().bool,o().func,o().bool,o().bool,o().bool,o().object,o().bool,E)},82302:(e,t,n)=>{"use strict";n.d(t,{Shortcut:()=>Shortcut,createShortcutAriaLabel:()=>A,isPlatformMacOS:()=>C,prettifyShortcut:()=>x,useEscapeToBlurEffect:()=>v,useGlobalIsKeyPressed:()=>_,useGlobalKeyDownEffect:()=>y,useKeyDownEffect:()=>h,useKeyEffect:()=>g});var r=n(67294),a=(n(26699),n(42441)),o=n.n(a),l=n(72070),i=n(91655),s=n(8579);const c="__WEB_STORIES_MT__",d=["submit","button","checkbox","radio","image","file","range","reset","hidden"],u=["submit","button","checkbox","radio","image","file","reset"],p=(0,l.createRef)();function m(){p.current||(p.current=document.documentElement)}function f(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const{keys:o}=(0,l.useContext)(s.default),i=(0,l.useBatchingCallback)(r,a||[]);(0,l.useEffect)((()=>{const r=void 0!==e?.current?e.current:e;if(!r)return;if(1!==r.nodeType&&9!==r.nodeType)throw new Error("only an element or a document node can be used");const a=T(o,t);if(1===a.key.length&&""===a.key[0])return;const l=w(r),s=S(r,a,i);return l.bind(a.key,s,n),()=>{l.unbind(a.key,n)}}),[i,o])}function g(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;f(e,t,void 0,n,r)}function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;f(e,t,"keydown",n,r)}function b(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;f(e,t,"keyup",n,r)}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const[r,a]=(0,l.useState)(!1),o=(0,l.useCallback)((()=>{a(!1)}),[]);return(0,l.useEffect)((()=>(window.addEventListener("blur",o),function(){window.removeEventListener("blur",o)})),[o]),h(e,t,(()=>a(!0)),n),b(e,t,(()=>a(!1)),n),r}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;m(),h(p,e,t,n)}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return m(),E(p,e,t)}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;h(e,{key:"esc",editable:!0},(()=>{const t=void 0!==e?.current?e.current:e,{activeElement:n}=document;t.contains(n)&&n.blur()}),t)}function w(e){return e[c]||(e[c]=new(o())(e))}function T(e,t){const n="string"==typeof t||Array.isArray(t)?{key:t}:t,{key:r,shift:a=!1,repeat:o=!0,clickable:l=!0,editable:i=!1,dialog:s=!1,allowDefault:c=!1}=n,d=function(e,t){if(!t)return e;return e.concat(e.map((e=>`shift+${e}`)))}([].concat(r).map((t=>e[t]||t)).flat(),a);return{key:d,shift:a,clickable:l,repeat:o,editable:i,dialog:s,allowDefault:c}}function S(e,t,n){let{repeat:r,editable:a,clickable:o,dialog:l,allowDefault:i=!1}=t;return t=>{const{repeat:s,target:c}=t;if((r||!s)&&(a||!function(e){let{tagName:t,isContentEditable:n,type:r,readOnly:a}=e;if(!0===a)return!1;if(n||"TEXTAREA"===t)return!0;if("INPUT"===t)return!d.includes(r);return!1}(c))&&(o||!function(e){let{tagName:t,type:n}=e;if(["BUTTON","A"].includes(t))return!0;if("INPUT"===t)return u.includes(n);return!1}(c))&&(l||!function(e,t){if(1!==e.nodeType)return!1;const n=e.closest('dialog,[role="dialog"]');return n&&t!==n&&t.contains(n)}(c,e)))return n(t),i}}function C(){const{platform:e}=window.navigator;return e.includes("Mac")||["iPad","iPhone"].includes(e)}function I(e){const t=C();return{alt:t?"⌥":"Alt",ctrl:t?"^":"Ctrl",mod:t?"⌘":"Ctrl",cmd:"⌘",shift:t?"⇧":"Shift"}[e]||e}function x(e){const t=C()?"":"+";return e.toLowerCase().replace("alt",I("alt")).replace("ctrl",I("ctrl")).replace("mod",I("mod")).replace("cmd",I("cmd")).replace("shift",I("shift")).replace("left","←").replace("up","↑").replace("right","→").replace("down","↓").replace("delete","⌫").replace("enter","⏎").split("+").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(t)}function A(e){const t=C(),n=(0,i.__)("Command","web-stories"),r=(0,i.__)("Control","web-stories"),a=(0,i.__)("Option","web-stories"),o=(0,i.__)("Alt","web-stories"),l={alt:t?a:o,mod:t?n:r,
/* translators: Control key on the keyboard */
ctrl:(0,i.__)("Control","web-stories"),
/* translators: shift key on the keyboard */
shift:(0,i.__)("Shift","web-stories"),
/* translators: delete key on the keyboard */
delete:(0,i.__)("Delete","web-stories"),
/* translators: comma character ',' */
",":(0,i.__)("Comma","web-stories"),
/* translators: period character '.' */
".":(0,i.__)("Period","web-stories"),
/* translators: backtick character '`' */
"`":(0,i.__)("Backtick","web-stories")},s=t?" ":"+";
/* translators: Command key on the keyboard */return e.toLowerCase().replace("alt",l.alt).replace("ctrl",l.ctrl).replace("mod",l.mod).replace("cmd",l.cmd).replace("shift",l.shift).replace("delete",l.delete).replace(",",l[","]).replace(".",l["."]).replace("`",l["`"]).split(/[\s+]/).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(s)}const Kbd=()=>r.createElement("kbd",null);function Shortcut(e){let{component:t=Kbd,shortcut:n=""}=e;const a=n.split(" ");return r.createElement(t,{"aria-label":A(n)},a.map(((e,n)=>r.createElement(t,{key:`${n}-${e}`},x(e)))))}},27856:(e,t,n)=>{"use strict";n.d(t,{PLACEMENT:()=>a,PopupContainer:()=>o});var r=n(26300);const a={TOP:"top",TOP_START:"top-start",TOP_END:"top-end",BOTTOM:"bottom",BOTTOM_START:"bottom-start",BOTTOM_END:"bottom-end",RIGHT:"right",RIGHT_START:"right-start",RIGHT_END:"right-end",LEFT:"left",LEFT_START:"left-start",LEFT_END:"left-end"},o=(a.TOP,a.TOP,a.TOP_START,a.TOP_START,a.TOP_END,a.TOP_END,a.BOTTOM,a.BOTTOM,a.BOTTOM_END,a.BOTTOM_END,a.BOTTOM_START,a.BOTTOM_START,a.RIGHT,a.LEFT,a.RIGHT_START,a.LEFT_START,a.RIGHT_END,a.LEFT_END,a.LEFT,a.RIGHT,a.LEFT_START,a.RIGHT_START,a.LEFT_END,a.RIGHT_END,r.default.div.attrs((e=>{let{$offset:{x:t,y:n,width:r},fillWidth:a,transforms:o,zIndex:l}=e;return{style:{transform:`translate(${t}px, ${n}px) ${o}`,...a?{width:`${r}px`}:{},zIndex:l}}})).withConfig({displayName:"constants__PopupContainer",componentId:"sc-1y4wru5-0"})(["/*! @noflip */ left:0px;top:0px;position:fixed;",";max-height:",";"],(e=>{let{noOverFlow:t}=e;return t?"":"overflow-y: auto;"}),(e=>{let{topOffset:t}=e;return`calc(100vh - ${t}px)`})))},99566:(e,t,n)=>{"use strict";n.d(t,{Z_INDEX:()=>a});var r=n(91655);(0,r.__)("Search","web-stories"),(0,r.__)("Clear Search","web-stories"),(0,r.__)("Search","web-stories");const a={CLEAR_BUTTON:5}},19722:(e,t,n)=>{"use strict";n.d(t,{FOCUS_VISIBLE_DATA_ATTRIBUTE:()=>o,FOCUS_VISIBLE_SELECTOR:()=>a,overrideFocusOutlineStyles:()=>l});var r=n(26300);n.e(8624).then(n.t.bind(n,35202,23)).catch((()=>{}));const a="focus-visible",o="data-focus-visible-added",l=(0,r.css)([".js-focus-visible :focus:not(.","):not([data-focus-visible-added]),.js-focus-visible :focus-visible:not(.","):not([data-focus-visible-added]){outline:none;}"],a,a);(0,r.createGlobalStyle)(["",";"],l)},72676:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});n(26699);function r(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>({...t,[n]:e[n]})),{})}},88766:(e,t,n)=>{"use strict";n.d(t,{SHARED_DEFAULT_ATTRIBUTES:()=>r.SHARED_DEFAULT_ATTRIBUTES,elementFillContent:()=>s,elementWithBackgroundColor:()=>g,elementWithBorder:()=>f,elementWithBorderRadius:()=>p,elementWithFlip:()=>E,elementWithFont:()=>h,elementWithHighlightBorderRadius:()=>m,elementWithPosition:()=>c,elementWithRotation:()=>u,elementWithSize:()=>d,elementWithTextParagraphStyle:()=>b,useColorTransformHandler:()=>y.default});var r=n(56527),a=n(26300),o=n(18535),l=n(25784),i=n(95740);const s=(0,a.css)(["position:absolute;top:0;left:0;width:100%;height:100%;"]),c=(0,a.css)(["position:absolute;z-index:1;left:",";top:",";"],(e=>{let{x:t}=e;return`${t}px`}),(e=>{let{y:t}=e;return`${t}px`})),d=(0,a.css)(["width:",";height:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`})),u=(0,a.css)(["transform:",";"],(e=>{let{rotationAngle:t}=e;return`rotate(${t}deg)`})),p=(0,a.css)(["",""],(e=>(0,l.getBorderRadius)(e))),m=e=>{let{borderRadius:t,dataToEditorY:n}=e;return n&&(0,a.css)(["border-radius:","px ","px ","px ","px;"],n(t?.topLeft||0),n(t?.topRight||0),n(t?.bottomRight||0),n(t?.bottomLeft||0))},f=(0,a.css)([""," background-clip:padding-box;"],(e=>{let{border:t,borderRadius:n,width:r,height:a,mask:o}=e;return(0,l.getBorderStyle)({border:t,borderRadius:n,width:r,height:a,mask:o})})),g=(0,a.css)(["",";"],(e=>{let{backgroundColor:t}=e;return t&&(0,o.default)(t)})),h=(0,a.css)(["white-space:pre-line;font-family:",";overflow-wrap:break-word;word-break:break-word;letter-spacing:normal;font-style:",";font-size:","px;font-weight:",";color:#000000;"],(e=>{let{font:t}=e;return(0,i.generateFontFamily)(t)}),(e=>{let{fontStyle:t}=e;return t}),(e=>{let{fontSize:t}=e;return t}),(e=>{let{fontWeight:t}=e;return t})),b=(0,a.css)(["margin:",";padding:",";line-height:",";text-align:",";overflow-wrap:break-word;"],(e=>{let{margin:t}=e;return t}),(e=>{let{padding:t}=e;return t||0}),(e=>{let{lineHeight:t}=e;return t}),(e=>{let{textAlign:t}=e;return t})),E=(0,a.css)(["transform:",";"],(e=>{let{transformFlip:t}=e;return t}));var y=n(66027)},88914:(e,t,n)=>{"use strict";n.d(t,{BACKGROUND_TEXT_MODE:()=>i,BackgroundAudioPropType:()=>k,DEFAULT_PAGE_BACKGROUND_COLOR:()=>m,ELEMENT_TYPES:()=>r,MEDIA_ELEMENT_TYPES:()=>a,OverlayType:()=>s,StoryPropTypes:()=>A,TEXT_ELEMENT_DEFAULT_FONT:()=>l,createNewElement:()=>p,createPage:()=>f,duplicateElement:()=>h,duplicatePage:()=>b,elementTypes:()=>w.elementTypes,getDefinitionForType:()=>c.default,getLayerName:()=>v,getTransformFlip:()=>y.default,isElementBelowLimit:()=>E.default,registerElementType:()=>w.registerElementType});const r={IMAGE:"image",SHAPE:"shape",TEXT:"text",VIDEO:"video",GIF:"gif",STICKER:"sticker",PRODUCT:"product"},a=[r.IMAGE,r.VIDEO,r.GIF,r.PRODUCT],o="((MULTIPLE))",l={family:"Roboto",weights:[100,300,400,500,700,900],styles:["italic","regular"],variants:[[0,100],[1,100],[0,300],[1,300],[0,400],[1,400],[0,500],[1,500],[0,700],[1,700],[0,900],[1,900]],fallbacks:["Helvetica Neue","Helvetica","sans-serif"],service:"fonts.google.com",metrics:{upm:2048,asc:1900,des:-500,tAsc:1536,tDes:-512,tLGap:102,wAsc:1946,wDes:512,xH:1082,capH:1456,yMin:-555,yMax:2163,hAsc:1900,hDes:-500,lGap:0}},i={NONE:"NONE",FILL:"FILL",HIGHLIGHT:"HIGHLIGHT"},s={NONE:"none",SOLID:"solid",LINEAR:"linear",RADIAL:"radial"};var c=n(77839),d=n(44586),u=n(72676);const p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,c.default)(e);if(!n)throw new Error(`Unknown element type: ${e}`);const{defaultAttributes:r}=n,a={...r,...t,type:e,id:(0,d.default)()};return t.isDefaultBackground?(0,u.default)(a,["backgroundColor"]):a};const m=(0,n(80852).default)(255,255,255),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t={x:1,y:1,width:1,height:1,mask:{type:"rectangle"},isBackground:!0,isDefaultBackground:!0},n=p("shape",t),r={elements:[n],backgroundColor:m,...e};return p("page",r)};n(26699);var g=n(15985);const h=function(e){let{element:t,animations:n=[],existingElements:r=[]}=e;const{type:a,...o}=t,l={...t,...p(a,o)};l.basedOn=t.id,r.forEach((e=>{if(e.id===l.basedOn||e.basedOn===l.basedOn){const e=function(e,t){const n=e+30,r=t+30;return{x:g.PAGE_WIDTH-n>20?n:30,y:g.PAGE_HEIGHT-r>20?r:30}}(l.x,l.y);l.x=e.x,l.y=e.y}}));const i=n.filter((e=>e.targets.includes(t.id))).map((e=>({...e,targets:[l.id],id:(0,d.default)()}))).filter((e=>e.targets.length>0));return{element:l,elementAnimations:i}},b=e=>{const{elements:t,animations:n,postId:r,title:a,...o}=e,l=(0,u.default)(o,["postId","title"]),{elements:i,animations:s}=t.reduce(((e,t)=>{let{elements:r,animations:a}=e;const{element:o,elementAnimations:l}=h({element:t,animations:n});return{elements:[...r,o],animations:[...a,...l]}}),{elements:[],animations:[]}),c={elements:i,animations:s,...l};return p("page",c)};var E=n(58474),y=n(24901),_=n(91655);const v=function(e){return e.layerName?e.layerName:e.isBackground?(0,_.__)("Background","web-stories"):(0,c.default)(e.type).getLayerText(e)};var w=n(55993),T=n(45697),S=n.n(T),C=n(15662),I=n(9675),x=n(58373);const A={},k=S().shape({id:S().number,src:S().string,length:S().number,lengthFormatted:S().string,mimeType:S().string,needsProxy:S().bool});A.mask=S().shape({type:S().string.isRequired}),A.link=S().shape({url:S().string.isRequired,desc:S().string,needsProxy:S().bool,icon:S().string,rel:S().arrayOf(S().string)}),A.box=S().exact({x:S().number.isRequired,y:S().number.isRequired,width:S().number.isRequired,height:S().number.isRequired,rotationAngle:S().number.isRequired}),A.page=S().shape({id:S().string.isRequired,animations:S().arrayOf(S().shape(x.AnimationProps)),elements:S().arrayOf(S().shape(A.element)),overlay:S().oneOf(Object.values(s)),backgroundAudio:S().shape({resource:k,loop:S().bool,tracks:S().arrayOf(I.ResourcePropTypes.trackResource)})});const O={id:S().string.isRequired,type:S().string.isRequired};A.flip=S().shape({vertical:S().bool,horizontal:S().bool});const P={id:S().string.isRequired,groupId:S().string,type:S().string.isRequired,x:S().number.isRequired,y:S().number.isRequired,width:S().number.isRequired,height:S().number.isRequired,flip:A.flip,rotationAngle:S().number.isRequired,mask:A.mask,link:A.link,opacity:S().number,lockAspectRatio:S().bool,isBackground:S().bool},N={scale:S().number.isRequired,focalX:S().number,focalY:S().number};A.element=S().shape(P),A.layer=S().shape(O),A.elements={},A.elements.image=S().shape({...P,...N,resource:I.ResourcePropTypes.imageResource}),A.elements.video=S().shape({...P,...N,resource:I.ResourcePropTypes.videoResource,poster:S().string,tracks:S().arrayOf(I.ResourcePropTypes.trackResource),loop:S().bool}),A.elements.gif=S().shape({...P,...N,resource:I.ResourcePropTypes.gifResource}),A.elements.media=S().oneOfType([A.elements.image,A.elements.video,A.elements.gif]);const R=S().shape({family:S().string,service:S().string,weights:S().arrayOf(S().number),styles:S().arrayOf(S().string),variants:S().arrayOf(S().array),fallbacks:S().array}),M=S().shape({horizontal:S().oneOfType([S().number,S().oneOf([o])]),vertical:S().oneOfType([S().number,S().oneOf([o])]),locked:S().oneOfType([S().bool,S().oneOf([o])])}),L={content:S().string,backgroundTextMode:S().oneOf(Object.values(i)),backgroundColor:C.PatternPropType,font:R.isRequired,fontSize:S().number,lineHeight:S().number,padding:M,textAlign:S().string,tagName:S().oneOf(["h1","h2","h3","p","auto"])};A.textContent=S().shape({...L}),A.elements.text=S().shape({...P,...L}),A.elements.shape=S().shape({...P,backgroundColor:C.PatternPropType}),A.elements.sticker=S().shape({...P,sticker:S().shape({type:S().string.isRequired})}),A.elements.background=S().shape({...O,inner:A.element})},25784:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_MASK:()=>a.DEFAULT_MASK,DisplayWithMask:()=>l.default,FrameWithMask:()=>y,MASKS:()=>a.MASKS,MaskTypes:()=>a.MaskTypes,OutputWithMask:()=>_.default,canMaskHaveBorder:()=>r.canMaskHaveBorder,canSupportMultiBorder:()=>r.canSupportMultiBorder,generateMaskId:()=>r.generateMaskId,getBorderPositionCSS:()=>o.getBorderPositionCSS,getBorderRadius:()=>o.getBorderRadius,getBorderStyle:()=>o.getBorderStyle,getMaskByType:()=>r.getMaskByType,getResponsiveBorder:()=>o.getResponsiveBorder,shouldDisplayBorder:()=>o.shouldDisplayBorder});var r=n(99371),a=n(71356),o=n(34075),l=n(3562),i=n(67294),s=n(26300),c=n(72070),d=n(88914);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}const p={position:"absolute",top:0,left:0,right:0,bottom:0},m=(0,s.css)(["position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"]),f=s.default.svg.withConfig({displayName:"frame__DropTargetSVG",componentId:"sc-1cagagv-0"})([""," z-index:",";"],m,(e=>{let{active:t}=e;return t?1:-1})),g=s.default.svg.withConfig({displayName:"frame__Filler",componentId:"sc-1cagagv-1"})(["",""],m),h=s.default.path.withConfig({displayName:"frame__FillerPath",componentId:"sc-1cagagv-2"})(["pointer-events:",";"],(e=>{let{isClickable:t}=e;return t?"all":"none"})),b=s.default.path.withConfig({displayName:"frame__DropTargetPath",componentId:"sc-1cagagv-3"})(["transition:opacity 0.5s;pointer-events:visibleStroke;opacity:",";stroke:",";"],(e=>{let{active:t}=e;return t?.3:0}),(e=>{let{theme:t}=e;return t.colors.border.selection})),E=s.default.div.withConfig({displayName:"frame__Wrapper",componentId:"sc-1cagagv-4"})(["width:100%;height:100%;::before{transition:opacity 0.5s;opacity:",";display:block;content:'';position:absolute;width:calc(100% + 8px);height:calc(100% + 8px);border-radius:8px;left:-4px;top:-4px;border:1px solid ",";}"],(e=>{let{hasBackgroundOutline:t}=e;return t?1:0}),(e=>{let{theme:t}=e;return t.colors.border.selection}));function WithDropTarget(e){let{element:t,children:n,hover:a,draggingResource:o,activeDropTargetId:l,isDropSource:s,registerDropTarget:d,unregisterDropTarget:p}=e;const m=(0,c.useRef)(null),{id:g,resource:h,isBackground:y,isLocked:_}=t,v=(0,r.getElementMask)(t);if((0,c.useEffect)((()=>{if(!_)return d(g,m.current),()=>{p(g)}}),[g,_,d,p]),!v)return n;const w=a&&!o||Boolean(o)&&s(o.type)&&o!==h,T=!_&&w,S=T&&!y,C=T&&y,I={vectorEffect:"non-scaling-stroke",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",d:v?.path};return i.createElement(E,{hasBackgroundOutline:C},n,i.createElement(f,{viewBox:"0 0 1 "+1/v.ratio,width:"100%",height:"100%",preserveAspectRatio:"none",active:l===t.id},i.createElement(b,u({},I,{strokeWidth:"3",style:{opacity:S?1:0}})),i.createElement(b,u({ref:m,strokeWidth:"48"},I))))}const y=(0,c.forwardRef)(((e,t)=>{let{element:n,fill:o,style:l,children:s,flip:m,draggingResource:f,activeDropTargetId:b,isDropSource:E,isSelected:y=!1,registerDropTarget:_,unregisterDropTarget:v,...w}=e;const[T,S]=(0,c.useState)(!1),{isBackground:C,isLocked:I}=n,x=!I||y,A={draggingResource:f,activeDropTargetId:b,isDropSource:E,registerDropTarget:_,unregisterDropTarget:v},k=(0,r.getElementMask)(n),O=m?{transform:(0,d.getTransformFlip)(m)}:null;if(!k?.type||C&&k.type!==a.MaskTypes.RECTANGLE)return i.createElement("div",u({style:{...o?p:{},...l,...O}},w),s);const P=(0,r.generateMaskId)(n,"frame");return i.createElement("div",u({ref:t,style:{...o?p:{},...l,...O,...C?{}:{clipPath:`url(#${P})`}}},w,{onPointerOver:()=>S(!0),onPointerOut:()=>S(!1)}),i.createElement("svg",{width:0,height:0},i.createElement("defs",null,i.createElement("clipPath",{id:P,transform:`scale(1 ${k.ratio})`,clipPathUnits:"objectBoundingBox"},i.createElement("path",{d:k.path})))),i.createElement(g,{viewBox:"0 0 1 "+1/k.ratio,width:"100%",height:"100%",preserveAspectRatio:"none"},i.createElement(h,{isClickable:x,fill:"none",d:k?.path})),x?i.createElement(WithDropTarget,u({element:n,hover:T},A,w),s):s)}));var _=n(12204)},50136:(e,t,n)=>{"use strict";n.d(t,{createBlob:()=>a,isBlobURL:()=>l,revokeBlob:()=>o});const r={};function a(e){const t=window.URL.createObjectURL(e);return r[t]=e,t}function o(e){(function(e){return r[e]})(e)&&window.URL.revokeObjectURL(e),delete r[e]}function l(e){return e?.startsWith("blob:")}},17001:(e,t,n)=>{"use strict";n.d(t,{CropMoveableGlobalStyle:()=>E,DefaultMoveableGlobalStyle:()=>_,InOverlay:()=>f,Moveable:()=>b,areEventsDragging:()=>S.default,withOverlay:()=>T});var r=n(67294),a=n(72070),o=n(29154),l=n(45697),i=n.n(l),s=n(26300);const c=(0,a.createContext)({container:null,layer:null});function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}const u=(0,s.css)(["",""],(e=>{let{pointerEvents:t}=e;return t&&"string"==typeof t?`pointer-events: ${t};`:""})),p=s.default.div.withConfig({displayName:"overlay__Wrapper",componentId:"sc-1ibws6s-0"})([""," position:absolute;top:0;left:0;width:0;height:0;z-index:",";"],u,(e=>{let{zIndex:t}=e;return`${t}`}));function InOverlayWithRef(e,t){let{zIndex:n,pointerEvents:o,render:l,children:i=null,...s}=e;const{container:u,overlay:m}=(0,a.useContext)(c);if(!u||!m)return null;const f=r.createElement(p,d({},s,{ref:t,zIndex:n||0,pointerEvents:o,onMouseDown:e=>e.stopPropagation()}),l?l({container:u,overlay:m}):i);return(0,a.createPortal)(f,m)}const m=(0,a.forwardRef)(InOverlayWithRef);InOverlayWithRef.propTypes={zIndex:i().number,pointerEvents:i().string,render:i().func,children:i().node};const f=m;function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}const h=(0,a.forwardRef)((function MoveableWithRef(e,t){let{onContextMenu:n,...a}=e;return r.createElement(f,{onContextMenu:n,zIndex:10,pointerEvents:"initial",render:e=>{let{container:n}=e;return r.createElement(o.default,g({ref:t,container:n},a))}})}));h.propTypes={onContextMenu:i().func};const b=h,E=(0,s.createGlobalStyle)([".crop-moveable .moveable-control{background:"," !important;border:none !important;}.crop-moveable .moveable-control.moveable-n,.crop-moveable .moveable-control.moveable-s,.crop-moveable .moveable-control.moveable-e,.crop-moveable .moveable-control.moveable-w{border:1px solid "," !important;border-radius:4px;}.crop-moveable .moveable-control.moveable-n,.crop-moveable .moveable-control.moveable-s{width:","px !important;height:","px !important;margin-left:-12px !important;}.crop-moveable .moveable-control.moveable-n{margin-top:-8px !important;}.crop-moveable .moveable-control.moveable-s{margin-top:0px !important;}.crop-moveable .moveable-control.moveable-e{margin-left:0 !important;}.crop-moveable .moveable-control.moveable-w{margin-top:0 !important;margin-left:-8px !important;}.crop-moveable .moveable-control.moveable-e,.crop-moveable .moveable-control.moveable-w{width:","px !important;height:","px !important;margin-top:-12px !important;}.crop-moveable .moveable-control.moveable-nw,.crop-moveable .moveable-control.moveable-ne,.crop-moveable .moveable-control.moveable-sw,.crop-moveable .moveable-control.moveable-se,.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before,.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{left:initial !important;right:initial !important;top:initial !important;bottom:initial !important;background:"," !important;position:absolute !important;border-style:solid !important;border-color:"," !important;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before,.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{content:'';}.crop-moveable .moveable-control.moveable-nw,.crop-moveable .moveable-control.moveable-ne,.crop-moveable .moveable-control.moveable-sw,.crop-moveable .moveable-control.moveable-se{width:","px !important;height:","px !important;}.crop-moveable .moveable-control.moveable-nw{top:-","px !important;left:-","px !important;border-width:1px 0 0 1px !important;border-radius:2px 0 0 0 !important;}.crop-moveable .moveable-control.moveable-ne{top:-","px !important;right:-","px !important;border-width:1px 1px 0 0 !important;border-radius:0 2px 0 0 !important;}.crop-moveable .moveable-control.moveable-sw{left:-","px !important;bottom:-","px !important;border-width:0 0 1px 1px !important;border-radius:0 0 0 2px !important;}.crop-moveable .moveable-control.moveable-se{right:-","px !important;bottom:-","px !important;border-width:0 1px 1px 0 !important;border-radius:0 0 2px 0 !important;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before{width:","px !important;height:","px !important;top:0;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-sw::before{left:","px !important;border-width:1px 1px 1px 0;border-radius:0 2px 2px 0;}.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-se::before{right:","px !important;border-width:1px 0 1px 1px;border-radius:2px 0 0 2px;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before{top:-","px !important;}.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before{bottom:-","px !important;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{width:","px !important;height:","px !important;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after{top:","px !important;border-width:0 1px 1px 1px;border-radius:0 0 2px 2px;}.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{bottom:","px !important;border-width:1px 1px 0 1px;border-radius:2px 2px 0 0;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-sw::after{left:-","px !important;}.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-se::after{right:-",'px !important;}.crop-moveable .moveable-line.moveable-direction[data-line-index="0"]{margin-top:-4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="3"]{margin-top:4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="1"]{margin-left:4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="2"]{margin-left:-4px;}.crop-moveable .moveable-direction.moveable-line{background:'," !important;width:2px;height:2px;pointer-events:none;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),24,8,8,24,(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),7,7,1,1,1,7,1,7,7,7,17,8,6,6,1,1,8,17,6,6,1,1,(e=>{let{theme:t}=e;return t.colors.border.selection}));var y=n(37047);const _=(0,s.createGlobalStyle)([".default-moveable .moveable-control,.default-moveable .moveable-line.moveable-rotation-line .moveable-control{background:"," !important;border:1px solid "," !important;}.default-moveable.type-text .moveable-direction.moveable-n,.default-moveable.type-text .moveable-direction.moveable-s{pointer-events:none;}.default-moveable .moveable-control.moveable-n{display:none !important;}.default-moveable .moveable-line{border:0;background:transparent !important;width:1px;height:1px;}.default-moveable .moveable-horizontal{border-bottom:1px dashed "," !important;}.default-moveable .moveable-vertical{border-right:1px dashed "," !important;}.default-moveable .moveable-gap{border-color:"," !important;}.default-moveable .moveable-target{border-style:solid !important;}.default-moveable .moveable-control.moveable-s,.default-moveable .moveable-control.moveable-e,.default-moveable .moveable-control.moveable-w{border-radius:4px;}.default-moveable .moveable-control.moveable-nw,.default-moveable .moveable-control.moveable-ne,.default-moveable .moveable-control.moveable-sw,.default-moveable .moveable-control.moveable-se{border-radius:2px;width:8px;height:8px;margin-left:-4px;margin-top:-4px;}.default-moveable .moveable-control.moveable-s{height:6px !important;width:16px !important;margin-top:-3px !important;}.default-moveable .moveable-control.moveable-e{height:16px !important;width:6px !important;margin-left:-3px !important;}.default-moveable .moveable-control.moveable-w{height:16px !important;width:6px !important;margin-left:-3px !important;}.default-moveable.moveable-control-box .moveable-line.moveable-direction{background:"," !important;width:1px;height:1px;}.default-moveable.moveable-control-box .moveable-line.moveable-rotation-line{background:"," !important;width:1px;height:12px;top:28px;}.default-moveable.moveable-control-box .moveable-control.moveable-rotation-control{border-radius:50px;width:29px;height:29px;margin-left:-14.5px;top:10.5px;}.default-moveable.moveable-control-box .moveable-control.moveable-rotation-control::after{content:'';position:absolute;width:28px;height:28px;left:-1px;top:-1px;background-image:url(\"",'");background-size:100%;filter:invert(100%);}.default-moveable.hide-handles .moveable-line.moveable-rotation-line,.default-moveable.hide-handles .moveable-line.moveable-direction{display:none;}.default-moveable.visually-hide-handles .moveable-control.moveable-e,.default-moveable.visually-hide-handles .moveable-control.moveable-w,.default-moveable.visually-hide-handles .moveable-control.moveable-s,.default-moveable.visually-hide-handles .moveable-control.moveable-ne,.default-moveable.visually-hide-handles .moveable-control.moveable-nw,.default-moveable.visually-hide-handles .moveable-control.moveable-sw{opacity:0;}.default-moveable.immoveable .moveable-line.moveable-direction{cursor:default;}'],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.negativePress}),(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{theme:t}=e;return t.colors.border.selection}),y);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}const w=s.default.div.withConfig({displayName:"withOverlay__Overlay",componentId:"sc-hntauo-0"})(["position:absolute;top:0;/*! @noflip */ left:0;width:0;height:0;z-index:",";"],(e=>{let{zIndex:t}=e;return t}));const T=function(e){const t=(0,a.forwardRef)((function WithOverlay(t,n){let{children:o,...l}=t;const[i,s]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),{zIndex:p=1}=l;return r.createElement(c.Provider,{value:{container:d,overlay:i}},r.createElement(e,v({ref:(0,a.useCombinedRefs)(n,u)},l),o,r.createElement(w,{ref:s,zIndex:p})))}));return t};var S=n(8580)},72070:(e,t,n)=>{"use strict";n.d(t,{Component:()=>o.Component,Fragment:()=>o.Fragment,StrictMode:()=>o.StrictMode,Suspense:()=>o.Suspense,cloneElement:()=>o.cloneElement,createContext:()=>a.createContext,createElement:()=>o.createElement,createPortal:()=>l.createPortal,createRef:()=>o.createRef,forwardRef:()=>o.forwardRef,identity:()=>a.identity,lazy:()=>o.lazy,memo:()=>o.memo,render:()=>l.render,renderToStaticMarkup:()=>f.default,shallowEqual:()=>E.default,unmountComponentAtNode:()=>l.unmountComponentAtNode,useBatchingCallback:()=>i.default,useCallback:()=>o.useCallback,useCombinedRefs:()=>s.default,useContext:()=>a.useContext,useContextReact:()=>o.useContextReact,useContextSelector:()=>c.default,useDebouncedCallback:()=>r.default,useEffect:()=>o.useEffect,useFocusOut:()=>d.default,useImperativeHandle:()=>o.useImperativeHandle,useInitializedValue:()=>b,useLayoutEffect:()=>o.useLayoutEffect,useMemo:()=>o.useMemo,usePrevious:()=>u.default,useReducer:()=>o.useReducer,useReduction:()=>p,useRef:()=>o.useRef,useResizeEffect:()=>m.default,useState:()=>o.useState,useUnmount:()=>g.default});var r=n(19302),a=n(24778),o=n(66803),l=n(73935),i=n(6075),s=n(20814),c=n(76969),d=n(24114),u=n(95471);function p(e,t){const[n,r]=(0,o.useReducer)(function(e){return(t,n)=>n&&n.type&&e[n.type]?e[n.type](t,n):t}(t),e),a=(0,o.useMemo)((()=>function(e,t){return Object.keys(e).reduce(((e,n)=>(e[n]||(e[n]=e=>{t({type:n,payload:e})}),e)),{})}(t,r)),[t]);return[n,a]}var m=n(13920),f=n(86757),g=n(84067),h=(n(40083),n(67294));const b=function(e){return(0,h.useState)(e)[0]};var E=n(14821)},66803:(e,t,n)=>{"use strict";n.d(t,{Component:()=>r.Component,Fragment:()=>r.Fragment,StrictMode:()=>r.StrictMode,Suspense:()=>r.Suspense,cloneElement:()=>r.cloneElement,createElement:()=>r.createElement,createRef:()=>r.createRef,forwardRef:()=>r.forwardRef,lazy:()=>r.lazy,memo:()=>r.memo,useCallback:()=>r.useCallback,useContextReact:()=>r.useContext,useEffect:()=>r.useEffect,useImperativeHandle:()=>r.useImperativeHandle,useLayoutEffect:()=>r.useLayoutEffect,useMemo:()=>r.useMemo,useReducer:()=>r.useReducer,useRef:()=>r.useRef,useState:()=>r.useState});var r=n(67294)},53649:(e,t,n)=>{"use strict";n.d(t,{fauxStylesToCSS:()=>i,useFauxSelection:()=>l});n(26699);var r=n(72070),a=n(9041);const o="CUSTOM-FAUX";function l(e,t){const[n,l]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(!e)return void l(null);const r=e.getCurrentContent(),i=e.getSelection(),s=i?.getHasFocus(),c=(u=i,!((d=n)&&u&&d.serialize().replace(/has focus: .*$/i,"")===u.serialize().replace(/has focus: .*$/i,"")));var d,u;const p=Boolean(n);if(!s&&!p){const n=a.Modifier.applyInlineStyle(r,i,o),s=a.EditorState.push(e,n,"change-inline-style");t(s),l(i)}s&&c&&p&&(t((e=>{try{const t=a.Modifier.removeInlineStyle(e.getCurrentContent(),n,o),r=a.EditorState.push(e,t,"change-inline-style");return a.EditorState.forceSelection(r,e.getSelection())}catch(t){return e}})),l(null))}),[n,e,t])}function i(e,t){if(!e.includes(o))return null;const n={backgroundColor:"rgba(169, 169, 169, 0.7)"};return t?.color&&(n.color=`var(--faux-selection-color, ${t.color})`),n}},56862:(e,t,n)=>{"use strict";n.d(t,{RichTextEditor:()=>T.default,RichTextProvider:()=>w,getCaretCharacterOffsetWithin:()=>x.default,getFontVariants:()=>I.default,getHTMLFormatters:()=>A.getHTMLFormatters,getHTMLInfo:()=>A.getHTMLInfo,usePasteTextContent:()=>C,useRichText:()=>S.default});var r=n(67294),a=n(72070),o=n(9041),l=n(34224),i=n(97643),s=n(47682),c=n(53649),d=n(21229),u=n(11810),p=n(92507);const m={BOLD:(0,n(28020).weightToStyle)("700"),ITALIC:p.ITALIC,UNDERLINE:p.UNDERLINE};const f=function(e,t,n){let r=n,a=null;return e.findStyleRanges((e=>(a=e,!0)),((e,n)=>{const l=a.getStyle().toArray(),i=function(e){return e.map((e=>e in m?m[e]:null)).filter(Boolean)}(l),s=t.merge({anchorOffset:e,focusOffset:n});l.forEach((e=>{r=o.Modifier.removeInlineStyle(r,s,e)})),i.forEach((e=>{r=o.Modifier.applyInlineStyle(r,s,e)}))})),r};class CustomBlockRenderMap{constructor(){this._map={unstyled:{element:"div",aliasedElements:["p","h1","h2","h3","blockquote","pre"]},"unordered-list-item":{element:"li"},"ordered-list-item":{element:"li"}}}mapKeys(e){return Object.keys(this._map).map((t=>e(t,this._map[t])))}}const g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=new CustomBlockRenderMap,{contentBlocks:r,entityMap:a}=(0,o.convertFromHTML)(e,void 0,n),l=o.ContentState.createFromBlockArray(r,a),i=h(l),s=o.Modifier.applyEntity(l,i,null),c=s.getBlocksAsArray();let d=s,u=null,p=0;c.forEach((e=>{const t=o.SelectionState.createEmpty(e.getKey());d=f(e,t,d);const n=e.getType();if("unstyled"!==n){let r=null;switch(n){case"unordered-list-item":r="– ";break;case"ordered-list-item":p=u===n?p+1:1,r=`${p}. `}r&&(d=o.Modifier.insertText(d,t,r));const a=t.merge({focusOffset:e.getLength()});d=o.Modifier.setBlockType(d,a,"unstyled")}u=n}));const m=h(d);return t.forEach((e=>{d=o.Modifier.applyInlineStyle(d,m,e)})),d.getBlockMap()};function h(e){const t=e.getFirstBlock(),n=e.getLastBlock();return o.SelectionState.createEmpty(t.getKey()).merge({focusKey:n.getKey(),focusOffset:n.getLength()})}var b=n(54530);const E=function(e){return(0,a.useCallback)(((t,n,r)=>{const a=r.getCurrentContent(),l=r.getSelection();let i,s;if(n){let e=(0,b.getPrefixStylesInSelection)(r,p.COLOR);e.length>1&&(e=e.slice(0,1));const t=g(n,e);i=o.Modifier.replaceWithFragment(a,l,t),s="insert-fragment"}else{const e=r.getCurrentInlineStyle();i=o.Modifier.replaceText(a,l,t,e),s="insert-characters"}const c=o.EditorState.push(r,i,s);return e(c),!0}),[e])};var y=n(33251);const _=function(e,t){const n=(0,a.useRef)(null),r=(0,a.useRef)(null);(0,a.useEffect)((()=>{n.current=e,e?e.getSelection().hasFocus&&(r.current=e.getSelection()):r.current=null}),[e]);const l=(0,a.useCallback)((function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const l=n.current,i=r.current,s=a?o.EditorState.forceSelection(l,i):l,c=e(s);t(c)}),[t]),i=(0,a.useCallback)((e=>`${e}InSelection`),[]),s=(0,a.useCallback)(((e,t)=>function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return l((t=>e(t,...r)),t)}),[l]);return(0,a.useMemo)((()=>y.default.reduce(((e,t)=>{let{setters:n,autoFocus:r}=t;return{...e,...Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[i(t),s(n,r)]})))}}),{})),[i,s])},v={isBold:!1,isItalic:!1,isUnderline:!1,isUppercase:!1};const w=function RichTextProvider(e){let{children:t,editingState:n}=e;const[p,m]=(0,a.useState)(null),f=(0,a.useRef)(null),g=(0,a.useMemo)((()=>p?(0,s.default)(p):v),[p]),h=(0,a.useCallback)((e=>{const{offset:t,clearContent:r,selectAll:a}=n||{};let l,s=o.EditorState.createWithContent((0,d.default)(e));r&&(s=o.EditorState.push(s,(0,d.default)(""),"remove-range")),a?l=(0,i.getSelectionForAll)(s.getCurrentContent()):isNaN(t)||(l=(0,i.getSelectionForOffset)(s.getCurrentContent(),t)),l&&(s=o.EditorState.forceSelection(s,l)),f.current=s.getCurrentInlineStyle(),m(s)}),[n,m]);(0,c.useFauxSelection)(p,m);const b=(0,a.useCallback)((e=>{let t=(0,i.getFilteredState)(e,p);""===t.getCurrentContent().getPlainText("")?t=o.EditorState.setInlineStyleOverride(t,f.current):f.current=t.getCurrentInlineStyle(),m(t)}),[p,m]),y=(0,a.useCallback)((()=>(0,i.getHandleKeyCommandFromState)(b)),[b]),w=E(m),T=(0,a.useCallback)((()=>{m(null)}),[m]),S=Boolean(p),C=_(p,m),I={state:{editorState:p,hasCurrentEditor:S,selectionInfo:g},actions:{setStateFromContent:h,updateEditorState:b,getHandleKeyCommand:y,handlePastedText:w,clearState:T,selectionActions:C,getContentFromState:u.default}};return r.createElement(l.default.Provider,{value:I},t)};var T=n(4517),S=n(56991);const C=function(e,t){return(0,a.useCallback)((n=>{const r=g(n).toArray(),a=o.ContentState.createFromBlockArray(r),l=o.EditorState.createWithContent(a),i=(0,u.default)(l);return!!i&&(e("text",{...t,content:i}),!0)}),[e,t])};var I=n(44397),x=n(40098),A=n(67187)},97643:(e,t,n)=>{"use strict";n.d(t,{getFilteredState:()=>c,getHandleKeyCommandFromState:()=>d,getSelectionForAll:()=>u,getSelectionForOffset:()=>p});var r=n(9041),a=n(84693),o=n(28020),l=n(28653),i=n(57778),s=n(15948);function c(e,t){return t.getCurrentContent()!==e.getCurrentContent()&&"insert-fragment"===e.getLastChangeType()?(0,a.filterEditorState)({blocks:[],styles:["BOLD","ITALIC","UNDERLINE"],entities:[],maxNesting:1,whitespacedCharacters:[]},e):e}const d=e=>(t,n)=>{const a=function(e,t){switch(e){case"bold":return o.default.setters.toggleBold(t);case"italic":return l.default.setters.toggleItalic(t);case"underline":return i.default.setters.toggleUnderline(t);case"uppercase":return s.default.setters.toggleUppercase(t);case"selectall":return r.EditorState.forceSelection(t,u(t.getCurrentContent()));default:return null}}(t,n);return a?(e(a),"handled"):"not-handled"};function u(e){const t=e.getFirstBlock(),n=e.getLastBlock();return new r.SelectionState({anchorKey:t.getKey(),anchorOffset:0,focusKey:n.getKey(),focusOffset:n.getLength()})}function p(e,t){const n=e.getBlocksAsArray();let a=t;for(let e=0;e<n.length&&a>=0;e++){const t=n[e],o=t.getLength();if(a<=o){return new r.SelectionState({anchorKey:t.getKey(),anchorOffset:a,focusKey:t.getKey(),focusOffset:a})}a-=o+1}return null}},24359:(e,t,n)=>{"use strict";n.d(t,{getTimeTracker:()=>c.default,initializeTracking:()=>r.default,trackClick:()=>o.default,trackError:()=>l.default,trackEvent:()=>i.default,trackTiming:()=>s});var r=n(73323),a=(n(82303),n(51165));n(35467);var o=n(99365),l=n(16373),i=n(86602);const s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"click";(0,i.default)("timing_complete",{name:r,value:t,event_category:e,event_label:n,send_to:a.config.trackingId}),(0,i.default)(r,{value:t,event_category:e,event_label:n,send_to:a.config.trackingIdGA4})};n(53419);var c=n(20904)},2357:(e,t,n)=>{"use strict";n.d(t,{TransformProvider:()=>i,useTransform:()=>s,useTransformHandler:()=>c});var r=n(67294),a=n(72070),o=n(62531);const l=e=>{if(null===e)return!0;return 1===Object.keys(e).length&&"dropTargets"in e},i=function TransformProvider(e){let{children:t}=e;const n=(0,a.useRef)({}),i=(0,a.useRef)({}),[s,c]=(0,a.useState)(!1),d={state:{isAnythingTransforming:s},actions:{registerTransformHandler:(0,a.useCallback)(((e,t)=>{const r=n.current,a=r[e]||(r[e]=[]);return a.push(t),()=>{a.splice(a.indexOf(t),1)}}),[]),pushTransform:(0,a.useCallback)(((e,t)=>{const r=n.current,a=i.current,o=r[e];if(o&&o.forEach((e=>e(t))),a[e]=null===t?null:{...a[e],...t},l(a[e])){Object.values(a).every(l)&&(i.current={},c(!1))}else t.staticTransformation||c(!0)}),[]),clearTransforms:(0,a.useCallback)((()=>{i.current={},c(!1)}),[c])}};return r.createElement(o.default.Provider,{value:d},t)};const s=function(e){return(0,a.useContextSelector)(o.default,e??a.identity)};const c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r=s((e=>{let{actions:t}=e;return t.registerTransformHandler}));(0,a.useEffect)((()=>r(e,t)),n)}},15985:(e,t,n)=>{"use strict";n.d(t,{DANGER_ZONE_HEIGHT:()=>s,DEFAULT_DPR:()=>d,DEFAULT_EM:()=>c,FULLBLEED_HEIGHT:()=>i,FULLBLEED_RATIO:()=>l,PAGE_HEIGHT:()=>o,PAGE_RATIO:()=>r,PAGE_WIDTH:()=>a});const r=2/3,a=412,o=618,l=9/16,i=a/l,s=(i-o)/2,c=.02186*o,d=.5},1787:(e,t,n)=>{"use strict";n.d(t,{dataFontEm:()=>o,dataPixels:()=>a,dataToEditorX:()=>i,dataToEditorY:()=>s,dataToFontSizeY:()=>c,editorPixels:()=>l,editorToDataX:()=>d,editorToDataY:()=>u,getBox:()=>p});var r=n(15985);function a(e){return Number(e.toFixed(0))}function o(e){return Number((e*r.DEFAULT_EM).toFixed(1))}function l(e){return Number(e.toFixed(5))}function i(e,t){return l(e*t/r.PAGE_WIDTH)}function s(e,t){return l(e*t/r.PAGE_HEIGHT)}function c(e,t){return(s(e,t)/10).toFixed(6)}function d(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=e*r.PAGE_WIDTH/t;return!1===n?o:a(o)}function u(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=e*r.PAGE_HEIGHT/t;return!1===n?o:a(o)}function p(e,t,n){let{x:a,y:o,width:l,height:c,rotationAngle:d,isBackground:u}=e;return{x:i(u?0:a,t),y:s(u?-r.DANGER_ZONE_HEIGHT:o,n),width:i(u?r.PAGE_WIDTH:l,t),height:s(u?r.FULLBLEED_HEIGHT:c,n),rotationAngle:u?0:d}}},70333:(e,t,n)=>{"use strict";n.d(t,{calcRotatedObjectPositionAndSize:()=>a,default:()=>__WEBPACK_DEFAULT_EXPORT__,getCorners:()=>o});var r=n(1787);function a(e,t,n,r,a){if(!e||0===e)return{x:t,y:n,width:r,height:a};const{topLeftPoint:l,topRightPoint:i,bottomRightPoint:s,bottomLeftPoint:c}=o(e,t,n,r,a),d=Math.min(l.x,i.x,s.x,c.x),u=Math.min(l.y,i.y,s.y,c.y);return{x:d,y:u,width:Math.max(l.x,i.x,s.x,c.x)-d,height:Math.max(l.y,i.y,s.y,c.y)-u}}function o(e,t,n,r,a){const o=t+.5*r,i=n+.5*a,s=e*Math.PI/180;return{topLeftPoint:l(o,i,t,n,s),topRightPoint:l(o,i,t+r,n,s),bottomRightPoint:l(o,i,t+r,n+a,s),bottomLeftPoint:l(o,i,t,n+a,s)}}function l(e,t,n,a,o){const l=n-e,i=a-t,s=Math.sqrt(l*l+i*i);o+=Math.atan2(i,l);return{x:(0,r.dataPixels)(e+s*Math.cos(o)),y:(0,r.dataPixels)(t+s*Math.sin(o))}}const __WEBPACK_DEFAULT_EXPORT__=function(e){const t=e.map((e=>a(e.rotationAngle,e.x,e.y,e.width,e.height))),n=t[0];let r=n.x,o=n.y,l=r+n.width,i=o+n.height;return t.slice(1).forEach((e=>{r=Math.min(e.x,r),o=Math.min(e.y,o),l=Math.max(e.x+e.width,l),i=Math.max(e.y+e.height,i)})),{startX:r,startY:o,endX:l,endY:i,width:l-r,height:i-o}}},38803:(e,t,n)=>{var r={"./contact.json":[34759,2476],"./cover.json":[97478,9027],"./editorial.json":[16989,3871],"./list.json":[12233,2634],"./quote.json":[4971,2563],"./section_header.json":[48438,9843],"./step.json":[89696,7611],"./table.json":[81464,2761]};function a(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((()=>n.t(a,17)))}a.keys=()=>Object.keys(r),a.id=38803,e.exports=a},73502:(e,t,n)=>{"use strict";function r(e,t){return document?.fonts?document.fonts.load(e,t||"").then((()=>document.fonts.check(e,t||""))):Promise.resolve(!0)}n.d(t,{default:()=>r})},58860:(e,t,n)=>{"use strict";n.d(t,{ensureFontLoaded:()=>i.default,escapeHTML:()=>l,loadInlineStylesheet:()=>s.loadInlineStylesheet,loadStylesheet:()=>s.loadStylesheet,stripHTML:()=>a});const r=document.createElement("div");function a(e){return r.innerHTML=e,r.textContent}const o=document.createElement("div");function l(e){return o.textContent=e,o.innerHTML}var i=n(73502),s=n(99659)},99659:(e,t,n)=>{"use strict";function r(e,t){return new Promise(((n,r)=>{const a=document.createElement("link");a.id=t,a.rel="stylesheet",a.href=e,a.crossOrigin="anonymous",a.addEventListener("load",n),a.addEventListener("error",r),document.head.appendChild(a)}))}function a(e,t){if(!t)return;const n=document.createElement("style");n.textContent=t,n.id=e,document.head.appendChild(n)}n.d(t,{loadInlineStylesheet:()=>a,loadStylesheet:()=>r})},49925:(e,t,n)=>{"use strict";n.d(t,{DATA_VERSION:()=>r.DATA_VERSION,migrate:()=>r.migrate});var r=n(84225)},40946:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{addItem:()=>to,cancelUploading:()=>ao,finishItem:()=>mo,finishMuting:()=>so,finishTranscoding:()=>lo,finishTrimming:()=>uo,finishUploading:()=>ro,removeItem:()=>fo,replacePlaceholderResource:()=>po,startMuting:()=>io,startTranscoding:()=>oo,startTrimming:()=>co,startUploading:()=>no});var a={};n.r(a),n.d(a,{deleteMediaElement:()=>di,fetchMediaError:()=>ii,fetchMediaStart:()=>oi,fetchMediaSuccess:()=>li,prependMedia:()=>Ti,removeAudioProcessing:()=>gi,removeBaseColorProcessing:()=>bi,removeBlurhashProcessing:()=>yi,removePosterProcessing:()=>vi,resetFilters:()=>ui,setAudioProcessing:()=>fi,setBaseColorProcessing:()=>hi,setBlurhashProcessing:()=>Ei,setMedia:()=>wi,setMediaType:()=>mi,setNextPage:()=>si,setPosterProcessing:()=>_i,setSearchTerm:()=>pi,updateMediaElement:()=>ci});var o={};n.r(o),n.d(o,{deleteMediaElement:()=>ai,deselectCategory:()=>Ai,fetchCategoriesError:()=>Ii,fetchCategoriesStart:()=>Si,fetchCategoriesSuccess:()=>Ci,fetchMediaError:()=>ti,fetchMediaStart:()=>Jl,fetchMediaSuccess:()=>ei,selectCategory:()=>xi,setNextPage:()=>ni,setSearchTerm:()=>Oi,setSelectedProvider:()=>ki,updateMediaElement:()=>ri});var l={};n.r(l),n.d(l,{AlignBottom:()=>vf,AlignCenter:()=>Cf,AlignLeft:()=>kf,AlignMiddle:()=>Rf,AlignRight:()=>Bf,AlignTextCenter:()=>Uf,AlignTextJustified:()=>Gf,AlignTextLeft:()=>Wf,AlignTextRight:()=>qf,AlignTop:()=>Jf,Angle:()=>ng,ArrowCloud:()=>Tm,ArrowDown:()=>ag.default,ArrowDownLeftCurved:()=>Nd,ArrowDownRightCurved:()=>Ld,ArrowLeft:()=>lg,ArrowLeftCurved:()=>cg,ArrowLeftLarge:()=>ug.default,ArrowOutline:()=>mg,ArrowRight:()=>hg,ArrowRightCurved:()=>yg,ArrowRightLarge:()=>vg.default,ArrowUp:()=>Tg,ArrowsLeftRight:()=>Ig,Border:()=>kg,BorderBox:()=>Ng,Box1:()=>Lg,Box4:()=>Bg.default,Box4Alternate:()=>Hg,Bucket:()=>Gg,Camera:()=>Vg,Captions:()=>Xg,Checkbox:()=>Pp,Checklist:()=>eh,Checkmark:()=>nh.default,CheckmarkCircle:()=>Zp,CheckmarkSmall:()=>rh.default,ChevronDown:()=>ah.default,ChevronDownSmall:()=>fp.default,ChevronRightSmall:()=>lh,ChevronUp:()=>sh.default,ChevronUpSmall:()=>dh,CircleSpeed:()=>fh,ColorBucket:()=>yh,ColorDrop:()=>wh,Corner:()=>Ch,Cross:()=>Ju.default,CrossLarge:()=>Ah.default,CrossSmall:()=>kh.default,DistributeHorizontal:()=>Ph,DistributeVertical:()=>Lh,Dots:()=>Fh,DotsFillSmall:()=>jh,Eraser:()=>Wh,ExclamationOutline:()=>$h.default,ExclamationTriangle:()=>Kh,Eye:()=>zd,FloppyDisk:()=>eb,GearWithGauge:()=>ab,Group:()=>ib,Keyboard:()=>_b,Launch:()=>wb.default,LetterAHeight:()=>Sb,LetterAWidth:()=>xb,LetterBBold:()=>Ob,LetterIItalic:()=>Rb,LetterIOutline:()=>Db,LetterMOutline:()=>Ub,LetterSStrikethrough:()=>Gb,LetterT:()=>Zb.default,LetterTArrow:()=>Vb,LetterTLargeLetterTSmall:()=>nE,LetterTPlus:()=>Kb,LetterTUppercase:()=>Jb,LetterUUnderline:()=>oE,Link:()=>sE,LockClosed:()=>dE.default,LockFilledClosed:()=>pE,LockOpen:()=>gE,Magnifier:()=>EE.default,Media:()=>_E,MirrorLeftRight:()=>CE,MirrorUpDown:()=>OE,Muted:()=>BE,PageMargin:()=>UE,PagePlus:()=>GE,PageSwap:()=>qE,PatternLinear:()=>ey,PatternRadial:()=>oy,PatternSolid:()=>sy,Pencil:()=>dy.default,Percent:()=>py,Picture:()=>gy,PictureSwap:()=>_y,Pipette:()=>Ty,Play:()=>Iy,PlayFilled:()=>Ay.default,PlayOutline:()=>Ry,Plus:()=>Dy,PlusFilled:()=>Hy,PlusFilledSmall:()=>Oy,PlusOutline:()=>zy,QuestionMarkOutline:()=>Wy,RemoveMask:()=>Y_,Rotate:()=>Qy,Scissors:()=>l_,Shapes:()=>c_,Shopping:()=>u_.default,Sort:()=>m_,Sparkles:()=>b_,StopFilled:()=>y_.default,StopOutline:()=>v_,Table:()=>T_.default,TailedRectangle:()=>C_,Timeline:()=>A_,Trash:()=>O_.default,TrashFilledSmall:()=>N_,TurningLine:()=>L_,Union:()=>F_,Video:()=>z_.default});var i={};n.r(i),n.d(i,{addPublisherLogo:()=>J1,getPublisherLogos:()=>Q1});var s={};n.r(s),n.d(s,{addPageTemplate:()=>q5,autoSaveById:()=>M5,createTaxonomyTerm:()=>o3,deleteMedia:()=>G5,deletePageTemplate:()=>X5,getAuthors:()=>x5,getCurrentUser:()=>J5,getCustomPageTemplates:()=>$5,getFonts:()=>l3,getHotlinkInfo:()=>t3,getLinkMetadata:()=>Y5,getMedia:()=>L5,getMediaById:()=>B5,getMediaForCorsCheck:()=>D5,getMutedMediaById:()=>F5,getOptimizedMediaById:()=>H5,getPosterMediaById:()=>U5,getProducts:()=>i3,getProxyUrl:()=>n3,getStoryById:()=>P5,getTaxonomies:()=>r3,getTaxonomyTerm:()=>a3,saveStoryById:()=>R5,updateCurrentUser:()=>e3,updateMedia:()=>z5,updatePageTemplate:()=>K5,uploadMedia:()=>j5});var c=n(67294);n.p=window.webStories.publicPath;var d=n(91655);for(const e of window?.webStories?.localeData||[])(0,d.setLocaleData)(e);var u=n(72070),p=n(26300),m=n(46324),f=n(22049),g=n(45246),h=n(17216),b=n(70250);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}const y=e=>{let{onClose:t,onSecondary:n,onPrimary:r,primaryText:a,secondaryText:o,primaryRest:l,secondaryRest:i,actions:s,children:d,...y}=e;const _=(0,u.useMemo)((()=>a&&c.createElement(m.Button,E({type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:e=>r?.(e)},l),a)),[a,l,r]),v=(0,u.useMemo)((()=>o&&c.createElement(m.Button,E({type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>n?.()||t()},i),o)),[o,i,n,t]);return c.createElement(p.ThemeProvider,{theme:{...g.theme,colors:h.light}},c.createElement(b.Dialog,E({onClose:t},y,{actions:s||c.createElement(c.Fragment,null,v,_)}),d))};var _=n(14194),v=n(7471),w=n(11756),T=n(90997),S=n(59042),C=n(1745),I=n(2357),x=n(17001),A=n(95370);const k=(0,p.createGlobalStyle)(["ul#adminmenu a.wp-has-current-submenu::after{border-right-color:",";}.web-stories-content b,.web-stories-content strong{font-weight:bold;}body.edit-story #wpbody *{",";}"],g.theme.colors.bg.secondary,A.scrollbarCSS);const O=g.theme;var P=n(24359);const N=p.default.div.withConfig({displayName:"errorActions__Message",componentId:"sc-mspoll-0"})(["color:#fff;font-size:16px;font-weight:300;line-height:1.6;padding:20px;button{margin-right:6px;}"]),R=p.default.textarea.withConfig({displayName:"errorActions__TextArea",componentId:"sc-mspoll-1"})(["width:100%;min-height:200px;"]),M=p.default.p.withConfig({displayName:"errorActions__P",componentId:"sc-mspoll-2"})(["margin:0 0 8px 0;"]),L=p.default.div.withConfig({displayName:"errorActions__Wrapper",componentId:"sc-mspoll-3"})(["display:flex;"]);const D=function ErrorActions(e){let{error:t,errorInfo:n}=e;const r=`${t}\n${n.componentStack}`;return c.createElement(N,null,c.createElement(M,null,(0,d.__)("Something went wrong!","web-stories")),c.createElement(M,null,(0,d.__)("The editor has crashed. Please try reloading the page and report the error using the button below.","web-stories")),c.createElement(M,null,(0,d.__)("Apologies for the inconvenience.","web-stories")),c.createElement(M,null,c.createElement(R,{readOnly:!0,value:r,onFocus:e=>e.target.setSelectionRange(0,r.length)})),c.createElement(L,null,c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>{window.location.reload(!0)}},(0,d.__)("Reload","web-stories")),c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,href:"https://wordpress.org/support/plugin/web-stories/#new-topic-0",target:"_blank",rel:"noreferrer"},(0,d.__)("Report Error","web-stories"))))};class ErrorBoundary extends u.Component{state={error:null,errorInfo:null};componentDidCatch(e,t){this.setState({error:e,errorInfo:t});const n=t?`${e.message}\n\n${t.componentName}\n${t.componentStack}`:e.message;(0,P.trackError)("editor_error_boundary",n,!0)}render(){const{error:e,errorInfo:t}=this.state;return e?c.createElement(D,{error:e,errorInfo:t}):this.props.children}}const B=ErrorBoundary,F=(0,u.createContext)({});const H=function ConfigProvider(e){let{config:t,children:n}=e;return c.createElement(F.Provider,{value:t},n)};const U=function(e){return(0,u.useContextSelector)(F,e??u.identity)};var j=n(30065),z=n(16769);const G=(0,j.default)(z.default);const Y=(0,u.createContext)({state:{},actions:{}});const Z=function APIProvider(e){let{children:t}=e;const{apiCallbacks:n,cdnURL:r}=U(),a=(0,u.useRef)({base:[]});return n.getPageTemplates=(0,u.useCallback)((async()=>(0===a.current.base.length&&(a.current.base=await async function(e){let{cdnURL:t}=e;const n=await G(t),r={createdBy:"Google",modified:"2020-04-21"};return n.map(((e,t)=>({id:t+1,...r,...e})))}({cdnURL:r})),a.current.base)),[r]),c.createElement(Y.Provider,{value:{actions:n}},t)};const W=function(e){return(0,u.useContextSelector)(Y,e??u.identity)};n(26699);const V=e=>{let{name:t=""}=e;return t.includes(".")?t.split(".").slice(0,-1).join("."):t},$=e=>{const t=new window.FileReader;return new Promise(((n,r)=>{t.onload=()=>n(t),t.onerror=r,t.readAsArrayBuffer(e)}))};var q=n(50136),K=n(86957);const X=async e=>{const t=await(0,K.default)({src:e});return{width:t.naturalWidth,height:t.naturalHeight}},Q=e=>e?.split("/")[0]||null;const src_normalizeResourceSizes=function(e){const t={};if(!e)return t;for(const n of Object.keys(e)){const r=e[n];t[n]={...r,width:Number(r.width),height:Number(r.height)}}return t};const J=function(e){let{baseColor:t,blurHash:n,type:r,mimeType:a,creationDate:o,src:l,width:i,height:s,poster:c,posterId:d,id:u,length:p,lengthFormatted:m,alt:f,sizes:g,attribution:h,output:b,isPlaceholder:E=!1,isOptimized:y=!1,isMuted:_=!1,isExternal:v=!1,trimData:w,needsProxy:T=!1}=e;return{baseColor:t,blurHash:n,type:r||Q(a),mimeType:a,creationDate:o,src:l,width:Number(i||0),height:Number(s||0),poster:c,posterId:d,id:u,length:p,lengthFormatted:m,alt:f,sizes:src_normalizeResourceSizes(g),attribution:h,output:b,isPlaceholder:E,isOptimized:y,isMuted:_,isExternal:v,trimData:w,needsProxy:T}};var ee=n(15985);const te=function(e){let{width:t,height:n,posterGenerated:r,posterWidth:a,posterHeight:o}=e;return r&&a&&o?{width:a,height:o}:t||n?{width:t,height:n}:{width:ee.PAGE_WIDTH,height:ee.FULLBLEED_HEIGHT}},ne=e=>{const t=document.createElement("video");return t.muted=!0,t.crossOrigin="anonymous",t.preload="metadata",new Promise(((n,r)=>{t.addEventListener("loadedmetadata",(()=>n(t))),t.addEventListener("error",r),t.src=e}))};const re=async function(e){const t=await ne(e);return new Promise(((e,n)=>{t.addEventListener("canplay",(()=>e(t)),{once:!0}),t.addEventListener("error",n),t.preload="auto"}))},ae=e=>e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});const oe=function(e){const t=parseInt(e/3600);e%=3600;const n=parseInt(e/60);return e%=60,t?`${t}:${ae(n)}:${ae(e)}`:`${n}:${ae(e)}`};const le=function(e){const t=!isNaN(e.duration)&&1/0!==e.duration?e.duration:0,n=Math.round(t);return{length:n,lengthFormatted:oe(n)}};const ie=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.99;return e.currentTime===t?Promise.resolve():new Promise(((n,r)=>{e.addEventListener("seeking",(e=>{const t=setTimeout((()=>{clearTimeout(t),r(e)}),3e3)})),e.addEventListener("error",r),e.addEventListener("seeked",(()=>n(e)),{once:!0}),e.currentTime=t}))};const se=function(e){return e.mozHasAudio||Boolean(e.webkitAudioDecodedByteCount)||Boolean(e.audioTracks?.length)};const ce=function(e,t,n){return new File([e],t,{type:n})};const de=function(e){return new Promise((function(t){e.toBlob((e=>{t(e,"image/jpeg")}))}))};const ue=function(e){const t=document.createElement("canvas");return t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height),de(t)};var pe=n(44586);const me={100:(0,d._x)("Thin","font weight","web-stories"),200:(0,d._x)("Extra-light","font weight","web-stories"),300:(0,d._x)("Light","font weight","web-stories"),400:(0,d._x)("Regular","font weight","web-stories"),500:(0,d._x)("Medium","font weight","web-stories"),600:(0,d._x)("Semi-bold","font weight","web-stories"),700:(0,d._x)("Bold","font weight","web-stories"),800:(0,d._x)("Extra-bold","font weight","web-stories"),900:(0,d._x)("Black","font weight","web-stories")},fe=2147483648,ge="jpeg",he="image/jpeg",be="video/mp4",Ee="mp4",ye=720,_e=1280,ve="((MULTIPLE))",we=(0,d.__)("Mixed","web-stories"),Te={PAGE_NAVIGATION:{category:"page",label:"arrow_navigate"},PAGE_PREVIEW_CLICK:{category:"page",label:"carousel_navigate"},PAGE_ADD:{category:"page",label:"add_new"},PAGE_DELETE:{category:"page",label:"delete"},SELECT_ELEMENT:{category:"select_element"},LIBRARY_PANEL_CLICK:{category:"library_panel"},DESIGN_PANEL_CLICK:{category:"design_panel"},INSERT_ELEMENT:{category:"insert_element"},DELETE_ELEMENT:{category:"delete_element"},SET_BACKGROUND_MEDIA:{category:"background",label:"set_media_as_bg"}},Se={FILL:"FILL",FIT:"FIT",FIXED:"FIXED"},Ce={OPEN:"OPEN",OPENING:"OPENING",CLOSED:"CLOSED",CLOSING:"CLOSING"},Ie=300,xe=12,Ae=150,ke="FRONT",Oe="BACK",Pe="FORWARD",Ne="BACKWARD",Re=400,Me=700,Le={horizontal:8,vertical:4},De="dark",Be="light",Fe="style",He="colors",Ue=[],je=e=>e+"-poster."+ge,ze=e=>{const t=V(e),n=Q(e.type);return r={type:n||"image",mimeType:"image"===n?"image/png":"video/mp4",src:"",...te({}),alt:t},J({...r,isPlaceholder:!0});var r},Ge=async e=>{const t=Q(e.type);let n=ze(e),r=null;try{if("image"===t&&(n=await(async e=>{const t=V(e),n=e.type,r=await $(e),a=(0,q.createBlob)(new window.Blob([r.result],{type:n})),{width:o,height:l}=await X(a);return J({type:"image",mimeType:n,src:a,...te({width:o,height:l}),alt:t})})(e)),"video"===t){const t=await(async e=>{const t=V(e),n=e.type,r=await $(e),a=(0,q.createBlob)(new Blob([r.result],{type:n})),o=await re(a),l=""!==o.canPlayType(n),{length:i,lengthFormatted:s}=le(o);await ie(o);const c=se(o),d=ce(await ue(o),je(V(e)),he),u=(0,q.createBlob)(d),{width:p,height:m}=await X(u);return{resource:J({type:"video",mimeType:n,src:l?a:"",...te({width:p,height:m}),poster:u,isMuted:!c,length:i,lengthFormatted:s,alt:t}),posterFile:d}})(e);n=t.resource,r=t.posterFile}}catch{}return n.id=(0,pe.default)(),{resource:n,posterFile:r}};var Ye,Ze,We=n(87602),Ve=n(84967),$e=n(67480),qe=n(91778);function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ke.apply(this,arguments)}const SvgTenorLogoWhite=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ke({viewBox:"0 0 1386 177",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ye||(Ye=c.createElement("defs",null,c.createElement("path",{id:"a",d:"M0 .136H92.92v175.707H0z"}),c.createElement("path",{id:"c",d:"M0 .383h82.728V137.28H0z"}))),Ze||(Ze=c.createElement("g",{fill:"none",fillRule:"evenodd"},c.createElement("path",{d:"M961.4 97.28c-.594-5.14-2.057-9.885-3.995-14.512-11.547-27.168-41.562-27.88-56.984-14.632-8.107 6.96-12.892 15.858-15.265 26.14-.237.949-.316 1.898-.514 3.005H961.4Zm-77.193 20.13c.95 7.118 3.005 13.484 6.644 19.218 8.541 13.485 20.959 19.892 36.856 19.773 13.05-.08 24.24-4.825 33.89-13.525 5.062-4.587 12.18-3.717 15.739 1.78 2.57 3.955 2.056 8.74-1.503 12.299-10.796 10.795-23.648 17.518-38.873 19.377-9.965 1.226-19.89.988-29.58-2.017-22.066-6.841-36.737-21.473-43.262-43.46-7.632-25.823-3.559-49.827 14.434-70.47 12.22-13.96 28.038-20.603 46.663-20.286 16.056.276 30.055 5.734 41.325 17.4 9.372 9.688 14.553 21.512 16.925 34.641.91 4.983 1.305 10.045 1.543 15.106.277 5.576-4.073 9.926-9.65 10.203-.79.04-1.581 0-2.372 0h-85.971c-.791-.04-1.622-.04-2.808-.04ZM1256.802 109.383c-.198-13.564-4.113-24.874-12.694-34.444-17.518-19.575-49.51-18.824-66.318 1.344-13.999 16.807-14.987 46.466 1.266 64.736 14.473 16.293 40.494 19.654 58.21 7 13.485-9.65 19.14-23.293 19.536-38.636m-113.337-1.82c.04-34.957 27.128-67.82 68.571-67.74 38.636.04 68.255 29.975 68.177 68.887-.08 38.24-30.292 68.057-69.007 68.097-37.291 0-67.82-31.161-67.741-69.244M1030.173 59.042c2.491-2.373 4.508-4.39 6.604-6.288 10.123-9.254 22.224-13.05 35.709-12.931 10.637.118 20.643 2.491 29.5 8.66 10.994 7.672 16.966 18.547 19.298 31.478a76.652 76.652 0 0 1 1.187 12.773c.119 24.202.04 48.364.04 72.566 0 4.626-2.927 9.016-7.237 10.598-4.508 1.66-8.74.988-12.22-2.492-2.451-2.412-3.52-5.457-3.52-8.937.04-22.422.12-44.805-.078-67.227-.04-4.429-.672-8.976-1.74-13.247-3.362-13.09-12.734-21.038-26.14-22.58-9.53-1.108-18.586.395-26.534 6.168-10.559 7.672-14.79 18.587-14.83 31.241-.079 22.066 0 44.172-.04 66.238 0 8.463-8.225 13.96-16.055 10.757-4.152-1.7-6.96-6.21-6.96-11.27v-113.1c0-4.469 2.057-7.87 5.853-10.084 3.915-2.294 7.988-2.175 11.824.237 3.282 2.096 5.26 5.141 5.339 9.175.04 2.61 0 5.14 0 8.265",fill:"currentColor"}),c.createElement("g",{transform:"translate(760 .259)"},c.createElement("mask",{id:"b",fill:"currentColor"},c.createElement("use",{xlinkHref:"#a"})),c.createElement("path",{d:"M49.11 42.054h31.044c4.27.199 7.75 1.583 9.965 5.419 3.678 6.445-.079 14.236-7.434 15.343-1.147.158-2.373.198-3.56.197H49.037V135.817c.075 4.745.826 9.293 4.03 13.168 2.61 3.164 6.129 4.509 9.965 5.102 5.734.91 11.428.434 17.004-1.306 5.3-1.7 10.52.673 12.299 5.616 1.819 5.022-.752 9.965-5.655 12.338-6.644 3.243-13.604 4.666-20.96 5.062-19.06.95-36.183-12.892-39.07-31.794-.395-2.452-.514-4.983-.514-7.475-.04-23.53-.04-47.058-.035-70.588v-2.728c-.874-.04-1.586-.12-2.258-.12-4.35 0-8.7.08-13.05-.039C3.674 62.856-.914 57.517.154 50.794c.751-4.745 5.062-8.304 10.48-8.462 4.27-.119 8.58-.04 12.852-.04 2.61 0 2.61 0 2.614-2.728V12.08C26.096 5.357 30.96.216 37.445.136c6.486-.078 11.587 5.102 11.626 11.905.04 9.213 0 18.467 0 27.681.04.751.04 1.542.04 2.53v-.198Z",fill:"currentColor",mask:"url(#b)"})),c.createElement("g",{transform:"translate(1302.955 39.409)"},c.createElement("mask",{id:"d",fill:"currentColor"},c.createElement("use",{xlinkHref:"#c"})),c.createElement("path",{d:"M23.095 28.135c3.4-3.875 6.405-7.711 9.886-11.112 7.948-7.75 17.28-13.169 28.275-15.344 3.321-.672 6.801-.83 10.202-.672 6.446.356 11.27 5.734 11.27 12.061 0 6.249-4.903 11.548-11.27 12.14-4.706.436-9.49.515-14.117 1.503-12.694 2.73-21.671 10.4-27.445 21.909-5.062 10.044-6.762 20.88-6.801 31.992-.08 14.829 0 29.658 0 44.488 0 6.88-5.063 12.22-11.588 12.18C4.943 137.24 0 132.139 0 125.258V11.803C0 6.663 3.638 1.996 8.542.77c5.378-1.345 10.598.87 12.93 5.813.91 1.898 1.425 4.113 1.504 6.248.237 4.39.079 8.819.079 13.248.04.672.04 1.305.04 2.056",fill:"currentColor",mask:"url(#d)"})),c.createElement("path",{d:"M35.938 68.125c6.416 0 12.166 1.417 17.25 4.25 5.083 2.833 9.062 6.792 11.937 11.875s4.313 10.958 4.313 17.625-1.438 12.562-4.313 17.688c-2.875 5.125-6.854 9.104-11.938 11.937-5.083 2.833-10.833 4.25-17.25 4.25-4.75 0-9.104-.917-13.062-2.75s-7.312-4.5-10.063-8v34.25h-12v-90.5h11.5v10.5c2.667-3.667 6.042-6.437 10.126-8.313 4.083-1.875 8.583-2.812 13.5-2.812Zm-1 57.125c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.042-4.708 8-8.25 1.958-3.541 2.938-7.604 2.938-12.187 0-4.583-.98-8.646-2.938-12.188-1.958-3.541-4.625-6.27-8-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.166 0-7.937.98-11.312 2.938-3.375 1.958-6.042 4.687-8 8.187-1.958 3.5-2.938 7.542-2.938 12.125s.959 8.646 2.876 12.188c1.916 3.541 4.583 6.291 8 8.25 3.416 1.958 7.208 2.937 11.375 2.937Zm78.5 10.5c-6.584 0-12.5-1.458-17.75-4.375s-9.355-6.937-12.313-12.063c-2.958-5.125-4.438-10.937-4.438-17.437 0-6.5 1.48-12.312 4.438-17.438 2.958-5.125 7.062-9.124 12.313-12 5.25-2.875 11.166-4.312 17.75-4.312 6.583 0 12.479 1.437 17.687 4.313 5.208 2.875 9.292 6.874 12.25 12 2.958 5.125 4.438 10.937 4.438 17.437 0 6.5-1.48 12.312-4.438 17.438-2.958 5.125-7.042 9.145-12.25 12.062s-11.104 4.375-17.688 4.375Zm0-10.5c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.02-4.708 7.938-8.25 1.916-3.541 2.875-7.604 2.875-12.187 0-4.583-.959-8.646-2.875-12.188-1.917-3.541-4.563-6.27-7.938-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.25 0-8.062.958-11.437 2.875s-6.042 4.646-8 8.188c-1.958 3.541-2.938 7.604-2.938 12.187 0 4.583.98 8.646 2.938 12.188 1.958 3.541 4.625 6.291 8 8.25 3.375 1.958 7.187 2.937 11.438 2.937Zm148.375-56.5L237.063 135h-11.5l-19.125-50.25L187.063 135h-11.5l-24.625-66.25h11.375l19.25 52.75 20-52.75h10.125l19.625 53 19.75-53h10.75Zm69.125 33.5c0 .917-.084 2.125-.25 3.625h-53.75c.75 5.833 3.312 10.52 7.687 14.063 4.375 3.541 9.812 5.312 16.313 5.312 7.916 0 14.291-2.667 19.125-8l6.625 7.75c-3 3.5-6.73 6.167-11.188 8-4.458 1.833-9.437 2.75-14.938 2.75-7 0-13.208-1.437-18.625-4.313-5.416-2.875-9.604-6.895-12.562-12.062s-4.438-11-4.438-17.5c0-6.417 1.438-12.208 4.313-17.375s6.833-9.187 11.875-12.063c5.042-2.875 10.73-4.312 17.063-4.312 6.333 0 11.979 1.437 16.937 4.313 4.958 2.875 8.833 6.895 11.625 12.062s4.188 11.083 4.188 17.75Zm-32.75-24c-5.75 0-10.563 1.75-14.438 5.25s-6.146 8.083-6.813 13.75h42.5c-.666-5.583-2.937-10.146-6.812-13.688-3.875-3.541-8.687-5.312-14.438-5.312Zm59.875 1.625c2.083-3.833 5.166-6.75 9.25-8.75 4.083-2 9.041-3 14.875-3V79.75c-.667-.083-1.584-.125-2.75-.125-6.5 0-11.605 1.937-15.313 5.813-3.708 3.875-5.563 9.395-5.563 16.562v33h-12V68.75h11.5v11.125Zm97.125 22.375c0 .917-.084 2.125-.25 3.625h-53.75c.75 5.833 3.312 10.52 7.687 14.063 4.375 3.541 9.812 5.312 16.313 5.312 7.916 0 14.291-2.667 19.125-8l6.625 7.75c-3 3.5-6.73 6.167-11.188 8-4.458 1.833-9.437 2.75-14.938 2.75-7 0-13.208-1.437-18.625-4.313-5.416-2.875-9.604-6.895-12.562-12.062s-4.438-11-4.438-17.5c0-6.417 1.438-12.208 4.313-17.375s6.833-9.187 11.875-12.063c5.042-2.875 10.73-4.312 17.063-4.312 6.333 0 11.979 1.437 16.937 4.313 4.958 2.875 8.833 6.895 11.625 12.062s4.188 11.083 4.188 17.75Zm-32.75-24c-5.75 0-10.563 1.75-14.438 5.25s-6.146 8.083-6.813 13.75h42.5c-.666-5.583-2.937-10.146-6.812-13.688-3.875-3.541-8.687-5.312-14.438-5.312Zm110.875-36V135h-11.5v-10.5c-2.667 3.667-6.042 6.458-10.125 8.375-4.084 1.917-8.584 2.875-13.5 2.875-6.417 0-12.167-1.417-17.25-4.25-5.084-2.833-9.063-6.812-11.938-11.938-2.875-5.125-4.313-11.02-4.313-17.687 0-6.667 1.438-12.542 4.313-17.625s6.854-9.042 11.938-11.875c5.083-2.833 10.833-4.25 17.25-4.25 4.75 0 9.124.896 13.125 2.688 4 1.791 7.333 4.437 10 7.937v-36.5h12Zm-34.125 83c4.166 0 7.958-.98 11.375-2.938 3.416-1.958 6.083-4.708 8-8.25 1.916-3.541 2.875-7.604 2.875-12.187 0-4.583-.959-8.646-2.875-12.188-1.917-3.541-4.584-6.27-8-8.187-3.417-1.917-7.209-2.875-11.375-2.875-4.25 0-8.063.958-11.438 2.875s-6.042 4.646-8 8.188c-1.958 3.541-2.938 7.604-2.938 12.187 0 4.583.98 8.646 2.938 12.188 1.958 3.541 4.625 6.291 8 8.25 3.375 1.958 7.187 2.937 11.438 2.937Zm123.625-57.125c6.416 0 12.166 1.417 17.25 4.25 5.083 2.833 9.062 6.792 11.937 11.875s4.313 10.958 4.313 17.625-1.438 12.562-4.313 17.688c-2.875 5.125-6.854 9.104-11.938 11.937-5.083 2.833-10.833 4.25-17.25 4.25-4.916 0-9.416-.958-13.5-2.875-4.083-1.917-7.458-4.708-10.125-8.375V135h-11.5V42.25h12v36.5c2.667-3.5 6-6.146 10-7.938 4-1.791 8.375-2.687 13.125-2.687Zm-1 57.125c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.042-4.708 8-8.25 1.958-3.541 2.938-7.604 2.938-12.187 0-4.583-.98-8.646-2.938-12.188-1.958-3.541-4.625-6.27-8-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.166 0-7.958.958-11.375 2.875-3.416 1.917-6.083 4.646-8 8.188-1.916 3.541-2.875 7.604-2.875 12.187 0 4.583.959 8.646 2.875 12.188 1.917 3.541 4.584 6.291 8 8.25 3.417 1.958 7.209 2.937 11.375 2.937Zm106.875-56.5-32.125 72.875c-2.834 6.75-6.146 11.5-9.938 14.25-3.792 2.75-8.354 4.125-13.688 4.125-3.25 0-6.395-.52-9.437-1.563-3.042-1.041-5.563-2.562-7.563-4.562l5.125-9c3.417 3.25 7.375 4.875 11.875 4.875 2.917 0 5.355-.77 7.313-2.313 1.958-1.541 3.73-4.187 5.313-7.937l2.125-4.625-29.25-66.125h12.5l23.125 53 22.875-53h11.75Z",fill:"currentColor",fillRule:"nonzero"}))))},Xe=(0,c.memo)(SvgTenorLogoWhite);var Qe;function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Je.apply(this,arguments)}const SvgUnsplashLogoFull=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Je({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 457.19 104.19","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Qe||(Qe=c.createElement("path",{d:"M59.88 38.66h27.53v48.75H0V38.66h27.53v24.37h32.35zm93 25c0 8.25-5.45 13.13-12.9 13.13-7.28 0-12.81-4.88-12.81-13.13V24.41h-12.22v39.13c0 15.45 11 25.21 25.06 25.21s25.15-9.76 25.15-25.21V24.41h-12.25zm43.7-21.13c-4.7 0-9.94 2-12.6 6.57v-5.41h-11.45v43.64h11.81v-25.1c0-5 3-9 8.16-9 5.68 0 8.08 3.82 8.08 8.7v25.4h11.8V59.82c.03-9.59-4.94-17.31-15.77-17.31zm43.31 18.37-6.48-1.33c-2.47-.5-4-1.77-4-3.9 0-2.49 2.23-4.35 5.33-4.35 4.36 0 6.09 2.25 6.51 4.88h10.18c-.08-6-4.83-13.84-16.51-13.84-9.41 0-16.33 6.47-16.33 14.28 0 6.13 3.81 11.19 12.24 13l6.05 1.33c3.37.71 4.7 2.31 4.7 4.26 0 2.31-2.14 4.35-6 4.35-4.71 0-7.27-2.68-7.87-5.79h-10.5c.59 6.53 5.32 14.84 18.46 14.84 11.45 0 17.22-7.28 17.22-14.38-.01-6.36-4.36-11.59-12.97-13.37zm63.19 4.53c0 13.22-8.26 23-20.59 23-6 0-10.48-2.4-12.61-5.33v21.13h-11.8V43.67h11.45v5.41c2-3.37 6.83-6.39 13.4-6.39 12.81 0 20.18 9.76 20.18 22.72zm-11.63.09c0-7.72-4.79-12.25-10.83-12.25s-10.91 4.53-10.91 12.25 4.88 12.33 10.91 12.33 10.91-4.54 10.91-12.35zm68-21.83h11.45v43.64h-11.8v-5.31c-2 3.5-6.57 6.38-12.61 6.38-12.33 0-20.59-9.77-20.59-23 0-13 7.37-22.72 20.15-22.72 6.57 0 11.32 3.05 13.4 6.39zm-.18 21.83c0-7.72-4.88-12.25-10.91-12.25s-10.83 4.51-10.83 12.23 4.79 12.33 10.83 12.33 10.92-4.6 10.92-12.33zm-50.66 21.81h11.8V24.41h-11.8zm132.35-44.81c-4.17 0-9 1.41-11.81 4.78V24.41h-11.8v62.91h11.8V61.68c.27-4.8 3.2-8.52 8.17-8.52 5.68 0 8.08 3.83 8.07 8.71v25.47h11.81V59.82c-.01-9.59-5.15-17.3-16.24-17.3zm-42 18.36-6.43-1.33c-2.47-.5-4-1.77-4-3.9 0-2.49 2.22-4.35 5.33-4.35 4.35 0 6.08 2.25 6.5 4.88h10.17c-.08-6-4.83-13.84-16.51-13.84-9.41 0-16.33 6.47-16.33 14.28 0 6.13 3.82 11.19 12.25 13l6 1.33c3.37.71 4.7 2.31 4.7 4.26 0 2.31-2.14 4.35-6 4.35-4.71 0-7.27-2.68-7.87-5.79h-10.49c.58 6.53 5.31 14.84 18.45 14.84 11.45 0 17.22-7.28 17.22-14.38 0-6.34-4.35-11.57-12.95-13.35zM59.88 0H27.53v24.37h32.35z"})))},et=(0,c.memo)(SvgUnsplashLogoFull);var tt,nt;function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rt.apply(this,arguments)}const SvgCoverrLogo=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",rt({viewBox:"0 0 742 132",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,tt||(tt=c.createElement("g",{clipPath:"url(#a)"},c.createElement("path",{d:"M17.875 112.892C5.958 100.096 0 84.494 0 65.912c0-18.757 5.958-34.358 17.875-46.804C29.967 6.31 45.04 0 62.914 0h19.453S72.202 26.645 62.563 26.645c-10.514 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.948 11.219 26.462 11.219 8.763 0 14.02 26.646 14.02 26.646H62.74c-17.7.175-32.772-6.136-44.864-18.933Z",fill:"#0072BB"}),c.createElement("path",{d:"M34.699 112.892c-11.917-12.796-17.875-28.398-17.875-46.98 0-18.757 5.958-34.358 17.875-46.804C46.791 6.31 61.862 0 79.738 0H99.19S89.026 26.645 79.387 26.645c-10.515 0-19.277 3.682-26.462 11.22C46.09 45.401 42.41 54.692 42.41 65.912c0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.947 11.219 26.462 11.219 8.763 0 14.02 26.646 14.02 26.646H79.563c-17.7.175-32.772-6.136-44.864-18.933Z",fill:"#7DC24B"}),c.createElement("path",{d:"M51.523 112.892c-11.917-12.796-17.875-28.398-17.875-46.98 0-18.757 5.958-34.358 17.875-46.98C63.79 6.311 78.686 0 96.562 0h19.452s-9.989 26.645-19.627 26.645c-10.515 0-19.278 3.682-26.463 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.713 15.948 11.395 26.462 11.395 8.763 0 14.02 26.645 14.02 26.645H96.562c-17.876 0-32.772-6.311-45.039-19.108Z",fill:"#FED035"}),c.createElement("path",{d:"M68.347 112.892C56.43 100.096 50.47 84.494 50.47 65.912c0-18.757 5.959-34.358 17.876-46.98C80.614 6.311 95.51 0 113.385 0h19.453s-10.164 26.645-19.803 26.645c-10.515 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.514 28.048 7.186 7.538 15.948 11.219 26.463 11.219 8.762 0 14.02 26.646 14.02 26.646H113.21c-17.7.175-32.596-6.136-44.863-18.933Z",fill:"#FF4C3D"}),c.createElement("path",{d:"M86.047 112.892C74.13 100.096 68.17 84.494 68.17 65.912c0-18.757 5.959-34.358 17.876-46.98C98.139 6.311 113.21 0 131.085 0c23.133 0 43.637 12.621 53.101 32.43l-22.082 13.498c-5.432-12.095-16.999-19.283-31.194-19.283-10.515 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.947 11.219 26.462 11.219 14.02 0 25.937-7.538 31.72-19.283l22.081 13.323C174.547 119.378 154.218 132 131.085 132c-17.875 0-32.946-6.311-45.038-19.108ZM213.102 112.892c-12.092-12.796-18.401-28.398-18.401-46.98 0-18.581 6.134-34.183 18.401-46.98C225.194 6.311 240.265 0 257.615 0c17.7 0 32.421 6.31 44.513 19.108 12.092 12.796 18.401 28.398 18.401 46.98 0 18.581-6.134 34.183-18.401 46.98-12.092 12.797-26.988 19.107-44.513 19.107-17.35-.175-32.421-6.486-44.513-19.283Zm44.513-7.187c10.515 0 19.277-3.681 26.462-11.219 7.186-7.538 10.691-17.004 10.691-28.398 0-11.22-3.505-20.86-10.691-28.399-7.185-7.538-15.947-11.394-26.462-11.394s-19.277 3.681-26.462 11.219c-7.186 7.538-10.691 17.004-10.691 28.398 0 11.22 3.505 20.86 10.691 28.399 7.185 7.538 15.947 11.394 26.462 11.394ZM419.895 3.33h28.039l-46.44 125.514h-29.793L325.261 3.331H353.3l33.298 95.362 33.297-95.362ZM479.654 77.482c3.855 19.108 18.401 29.626 38.204 29.626 13.669 0 23.833-5.259 30.668-15.602l21.205 12.972c-11.742 18.231-29.091 27.347-52.224 27.347-19.277 0-35.05-6.311-46.966-18.582-11.917-12.621-17.876-28.398-17.876-47.506 0-18.757 5.959-34.358 17.7-46.98C482.107 6.311 497.354 0 515.755 0c17.349 0 31.72 6.486 42.935 19.283 11.216 12.797 16.999 28.574 16.999 46.98 0 2.805-.175 6.486-.876 11.22h-95.159Zm69.924-22.088c-3.505-20.334-17.175-30.852-33.999-30.852-19.102 0-32.421 11.745-35.925 30.852h69.924ZM623.883 24.366c6.484-15.602 18.751-23.315 36.627-23.315v29.275c-9.814-.701-18.401 1.753-25.762 7.538-7.36 5.434-11.041 14.725-11.041 27.522v63.283h-25.761V3.33h25.937v21.036ZM705.374 24.366C711.858 8.764 724.125 1.051 742 1.051v29.275c-9.813-.701-18.401 1.753-25.761 7.538-7.36 5.434-11.041 14.725-11.041 27.522v63.283h-25.761V3.33h25.761v21.036h.176Z",fill:"#fff"}))),nt||(nt=c.createElement("defs",null,c.createElement("clipPath",{id:"a"},c.createElement("path",{fill:"#fff",d:"M0 0h742v132H0z"})))))},at=(0,c.memo)(SvgCoverrLogo),ot=p.default.div.withConfig({displayName:"attribution__AttributionPill",componentId:"sc-1j8k1n4-0"})(["position:absolute;left:24px;bottom:10px;border-radius:100px;padding:2px 8px;height:24px;display:flex;flex-wrap:nowrap;background-color:",";cursor:pointer;align-items:center;z-index:9999;"],(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.standard.black,.7)})),lt=(0,p.default)($e.Text).withConfig({displayName:"attribution__Text",componentId:"sc-1j8k1n4-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),it=(0,p.css)(["color:",";fill:",";margin-left:6px;line-height:14px;"],(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white})),st=(0,p.default)(et).withConfig({displayName:"attribution__UnsplashLogo",componentId:"sc-1j8k1n4-2"})(["height:14px;",""],it),ct=(0,p.default)(at).withConfig({displayName:"attribution__CoverrLogo",componentId:"sc-1j8k1n4-3"})([""," height:12px;margin-top:2px;"],it),dt=(0,p.default)(Xe).withConfig({displayName:"attribution__TenorLogo",componentId:"sc-1j8k1n4-4"})(["height:14px;"," margin:0 2px 2px 6px;"],it),ut="Coverr",pt="Tenor",mt="Unsplash",ft=e=>(0,We.default)(
/* translators: %s: media provider name. */
(0,d.__)("Powered by %s","web-stories"),e);const gt={IMAGE:"image",VIDEO:"video",GIF:"gif"},ht="coverr",bt="tenor",Et={["unsplash"]:{displayName:(0,d.__)("Images","web-stories"),supportsCategories:!0,requiresAuthorAttribution:!0,attributionComponent:function UnsplashAttribution(){return c.createElement("a",{href:"https://unsplash.com?utm_source=web_stories_wordpress&utm_medium=referral",target:"_blank",rel:"noreferrer","aria-label":ft(mt)},c.createElement(ot,{"aria-hidden":!0},c.createElement(lt,{forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Powered by","web-stories")),c.createElement(st,null)))},fetchMediaErrorMessage:(0,We.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Unsplash"),fetchCategoriesErrorMessage:(0,We.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading categories from %s","web-stories"),"Unsplash")},[ht]:{displayName:(0,d.__)("Video","web-stories"),supportsCategories:!1,requiresAuthorAttribution:!1,attributionComponent:function CoverrAttribution(){return c.createElement("a",{href:"https://coverr.co?utm_source=web_stories_wordpress&utm_medium=referral&utm_campaign=api_powered_by",target:"_blank",rel:"noreferrer","aria-label":ft(ut)},c.createElement(ot,{"aria-hidden":!0},c.createElement(lt,{forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Powered by","web-stories")),c.createElement(ct,null)))},fetchMediaErrorMessage:(0,We.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Coverr"),defaultPreviewWidth:640},[bt]:{displayName:(0,d.__)("GIFs","web-stories"),contentTypeFilter:gt.GIF,supportsCategories:!0,requiresAuthorAttribution:!1,attributionComponent:function TenorAttribution(){return c.createElement("a",{href:"https://tenor.com?utm_source=web_stories_wordpress&utm_medium=referral",target:"_blank",rel:"noreferrer","aria-label":ft(pt)},c.createElement(ot,{"aria-hidden":!0},c.createElement(dt,null)))},fetchMediaErrorMessage:(0,We.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Tenor")}};function yt(e,t){const n=t.sort(((e,t)=>(t.width??0)-(e.width??0))),r=function(e){return{originalWidth:e[0].width,originalHeight:e[0].height}}(n);return n.map((t=>function(e,t,n){const{originalWidth:r,originalHeight:a}=n;if(!r||!a)throw new Error("No original size present.");const o=Et[e.provider.toLowerCase()];if(!(t.width&&t.height||o.defaultPreviewWidth))throw new Error("Missing width and height for: "+e);return{file:e.name,sourceUrl:t.url,mimeType:t.mimeType,width:t.width??o.defaultPreviewWidth,height:t.height??o.defaultPreviewWidth*a/r}}(e,t,r)))}function _t(e){return(e.author||e.registerUsageUrl)&&{author:e.author&&{displayName:e.author.displayName,url:e.author.url},registerUsageUrl:e.registerUsageUrl}}function vt(e){return Math.floor(e/60)+":"+Math.floor(e%60).toString().padStart(2,"0")}function wt(e){const t=function(e){if("image"!==e.type.toLowerCase())throw new Error("Invalid media type.");if(e.imageUrls?.length<3)throw new Error("Invalid number of urls for asset. Need at least 3: "+e);const t=yt(e,e.imageUrls),n=[["full",t[0]],["large",t[1]],...t.slice(2,t.length-1).map((e=>[e.width+"_"+e.height,e])),["web_stories_thumbnail",t[t.length-1]]];return Object.fromEntries(new Map(n))}(e);return J({id:e.name,baseColor:e.color,blurHash:e.blurHash,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,alt:e.description||e.title||e.name,isExternal:!0,isPlaceholder:!1,sizes:t,attribution:_t(e)})}function Tt(e){const t=function(e){if("video"!==e.type.toLowerCase())throw new Error("Invalid media type.");if(e.videoUrls?.length<2)throw new Error("Invalid number of urls for asset. Need at least 2: "+e);const t=yt(e,e.videoUrls);return{full:t[0],preview:t[t.length-1]}}(e),n=parseInt(e.videoMetadata.duration.trimEnd("s"));return J({id:e.name,baseColor:e.color,posterId:e.name,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,poster:e.imageUrls[0].url,length:n,lengthFormatted:vt(n),alt:e.description||e.title||e.name,isExternal:!0,isPlaceholder:!1,isOptimized:!0,isMuted:!0,sizes:t,attribution:_t(e)})}function St(e){const{imageUrls:t,videoUrls:n,previewUrl:r}=function(e){if("gif"!==e.type.toLowerCase())throw new Error("Invalid media type");if(e.imageUrls?.length<3)throw new Error("Invalid number of urls for asset. Need at least 3: "+e);const t=e.imageUrls.filter((e=>{let{imageName:t}=e;return t.endsWith("preview")})).map((e=>{let{url:t}=e;return t})).shift(),n=e.imageUrls.filter((e=>{let{url:n}=e;return n!==t})),r=yt(e,n),a=yt(e,e.videoUrls.filter((e=>{let{mimeType:t}=e;return"image/webm"===t}))),o=yt(e,e.videoUrls.filter((e=>{let{mimeType:t}=e;return"video/mp4"===t}))),l=[["full",r[0]],["large",r[1]],...r.slice(2,r.length-1).map((e=>[e.width+"_"+e.height,e])),["web_stories_thumbnail",r[r.length-1]]];return{imageUrls:Object.fromEntries(new Map(l)),videoUrls:{webm:{full:a[0],preview:a[a.length-1]},mp4:{full:o[0],preview:o[a.length-1]}},previewUrl:t}}(e);return J({id:e.name,baseColor:e.color,posterId:e.name,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,poster:r,alt:e.description||e.title||e.name,isPlaceholder:!1,isOptimized:!0,isExternal:!0,sizes:t,output:{mimeType:n.mp4.full.mimeType,src:n.mp4.full.sourceUrl},attribution:_t(e)})}function Ct(e){switch(e.type.toLowerCase()){case"image":return wt(e);case"video":return Tt(e);case"gif":return St(e);default:throw new Error("Invalid media type.")}}const It=function(e){const t=new Uint8Array(e);let n=0;if(71!==t[0]||73!==t[1]||70!==t[2]||56!==t[3])return!1;for(let e=4;e<t.length;e++)0===t[e]&&33===t[e+1]&&249===t[e+2]&&n++;return n>1};var xt=n(71469),At=n(22133),kt=n.n(At);function Ot(e){return kt().getExtension(e)}function Pt(e){switch(e){case"audio/mpeg":return["mp3","m3a"];case"audio/aac":return["aac"];case"audio/ogg":return["oga","ogg"];case"image/jpeg":return["jpg","jpeg"];default:return[Ot(e)].filter(Boolean)}}const Nt=function(e,t,n){const r=new Error;return r.name=e,r.file=t,r.isUserError=!0,r.message=n,r},Rt=e=>Math.round(e/Math.pow(1024,2));const Mt=function(){const{actions:{uploadMedia:e}}=W(),{storyId:t,maxUpload:n,allowedMimeTypes:{image:r,vector:a,video:o},capabilities:{hasUploadMediaAction:l}}=U(),i=(0,u.useMemo)((()=>[...r,...a,...o]),[r,a,o]),s=(0,u.useMemo)((()=>i.map((e=>Pt(e))).flat()),[i]),c=(0,u.useCallback)((e=>{let{type:t}=e;return i.includes(t)}),[i]),p=(0,u.useCallback)((e=>{let{size:t}=e;return t<=n}),[n]),m=(0,u.useCallback)(((e,t,r)=>{if(!l){const t=(0,d.__)("Sorry, you are not allowed to upload files.","web-stories");throw Nt("PermissionError",e.name,t)}if(t){if(r){const t=(0,We.default)(
/* translators: 1: File size in MB. 2: Maximum allowed file size in MB. */
(0,d.__)("Your file is too large (%1$s MB) and cannot be processed. Please try again with a file that is smaller than %2$s MB.","web-stories"),Rt(e.size),Rt(fe));throw Nt("SizeError",e.name,t)}}else{if(!p(e)){const t=(0,We.default)(
/* translators: first %s is the file size in MB and second %s is the upload file limit in MB */
(0,d.__)("Your file is %1$sMB and the upload limit is %2$sMB. Please resize and try again!","web-stories"),Rt(e.size),Rt(n));throw Nt("SizeError",e.name,t)}if(!c(e)){let t=(0,d.__)("No file types are currently supported.","web-stories");throw s.length&&(
/* translators: %s is a list of allowed file extensions. */
t=(0,We.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to upload.","web-stories"),(0,xt.default)(s))),Nt("ValidError",e.name,t)}}}),[l,p,n,s,c]),f=(0,u.useCallback)((function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(n);const a={storyId:t,altText:V(n),mediaSource:"editor",...r};return e(n,a)}),[m,e,t]);return(0,u.useMemo)((()=>({actions:{uploadFile:f,validateFileForUpload:m}})),[m,f])};function Lt(){}const Dt=e=>e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));const Bt=async function(e){const t=await re(e);return await ie(t),ue(t)},Ft="ADD_PAGE",Ht="UPDATE_PAGE",Ut="DELETE_PAGE",jt="ARRANGE_PAGE",zt="DELETE_ELEMENTS",Gt="ADD_ELEMENTS",Yt="UPDATE_ELEMENTS",Zt="UPDATE_ELEMENTS_BY_RESOURCE_ID",Wt="DELETE_ELEMENTS_BY_RESOURCE_ID",Vt="SET_BACKGROUND_ELEMENT",$t="ARRANGE_ELEMENT",qt="ARRANGE_GROUP",Kt="COMBINE_ELEMENTS",Xt="DUPLICATE_ELEMENTS_BY_ID",Qt="COPY_SELECTED_ELEMENT",Jt="UPDATE_ELEMENTS_BY_FONT_FAMILY",en="SET_CURRENT_PAGE",tn="SET_SELECTED_ELEMENTS",nn="SELECT_ELEMENT",rn="UNSELECT_ELEMENT",an="TOGGLE_ELEMENT_IN_SELECTION",on="TOGGLE_LAYER",ln="UPDATE_STORY",sn="UPDATE_ANIMATION_STATE",cn="ADD_ANIMATIONS",dn="RESTORE",un=["id","elements","groups"],pn=["id","isBackground","isDefaultBackground"],mn="ADD_GROUP",fn="UPDATE_GROUP",gn="DELETE_GROUP",hn="DUPLICATE_GROUP";function bn(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>({...t,[n]:e[n]})),{})}function En(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e&&n?.length?n.reduce(((e,t)=>e.filter((e=>t.includes(e)))),e):e}function yn(e,t,n){return e>=t&&e<=n}function _n(e,t,n){const r=e[t],a=[...e.slice(0,t),...e.slice(t+1)];return[...a.slice(0,n),r,...a.slice(n)]}function vn(e){let{currentPosition:t,minPosition:n,maxPosition:r,desiredPosition:a}=e;if("number"==typeof a)return Math.min(r,Math.max(n,a));if("string"!=typeof a)return t;switch(a){case ke:return r;case Oe:return n;case Pe:return Math.min(r,t+1);case Ne:return Math.max(n,t-1);default:return t}}function wn(e,t){const n=bn("function"==typeof t?t(e):t,pn);return 0===Object.keys(n).length?e:{...e,...n}}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce(((e,n)=>t.some((e=>n.targets?.includes(e)))?e:[...e,n]),[])}function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.values(Object.fromEntries(e.map((e=>[e.id,e]))))}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Sn(t),r=e.map((e=>{let{id:t}=e;return t}));return n.filter((e=>{let{id:t}=e;return!r.includes(t)}))}const In=function(e,t){let{page:n,position:r}=t;const a=null!==r&&yn(r,0,e.pages.length-1),o=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),l=a?r:o+1,{id:i}=n;return n.elements?.length?{...e,pages:[...e.pages.slice(0,l),n,...e.pages.slice(l)],current:i,selection:[n.elements[0].id]}:e};const xn=function(e,t){let{pageId:n}=t;if(e.pages.length<=1)return e;const r=null===n?e.current:n,a=e.pages.findIndex((e=>{let{id:t}=e;return t===r}));if(-1===a)return e;const o=[...e.pages.slice(0,a),...e.pages.slice(a+1)];let l=e.current;if(r===e.current){l=o[Math.min(o.length-1,a)].id}return{...e,pages:o,current:l,selection:[]}};const An=function(e,t){let{pageId:n,properties:r}=t;const a=null===n?e.current:n,o=e.pages.findIndex((e=>{let{id:t}=e;return t===a}));if(-1===o)return e;const l=bn(r,un),i={...e.pages[o],...l},s=[...e.pages.slice(0,o),i,...e.pages.slice(o+1)];return{...e,pages:s}};const kn=function(e,t){let{pageId:n,position:r}=t;if(e.pages.length<2)return e;const a=e.pages.findIndex((e=>{let{id:t}=e;return t===n})),o=yn(r,0,e.pages.length-1);if(-1===a||!o||a===r)return e;const l=_n(e.pages,a,r);return{...e,pages:l}};var On=n(88914);const Pn=function(e,t){let{elements:n}=t;if(!Array.isArray(n))return e;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o=Cn(a.elements,n);if(0===o.length)return e;const l=a?.elements?.filter((e=>{let{type:t}=e;return t===On.ELEMENT_TYPES.PRODUCT})).map((e=>{let{product:t}=e;return t?.productId})),i=o.filter((e=>{let{type:t,product:n}=e;return t===On.ELEMENT_TYPES.PRODUCT&&l.includes(n?.productId)})).map((e=>{let{id:t}=e;return t})),s=o.filter((e=>{let{id:t}=e;return i&&!i.includes(t)})),c=s.filter((e=>{let{type:t}=e;return t===On.ELEMENT_TYPES.PRODUCT})),d=l.length+c.length<=6?c:[],u=[...s.filter((e=>{let{type:t}=e;return t!==On.ELEMENT_TYPES.PRODUCT})),...d];if(0===u.length)return e;const p={...a,elements:[...a.elements,...u]},m=[...e.pages.slice(0,r),p,...e.pages.slice(r+1)],f=u.map((e=>{let{id:t}=e;return t}));return{...e,pages:m,selection:f}};const Nn=function(e,t){let{elementIds:n}=t;const r=null===n?e.selection:n;if(0===r.length)return e;const a=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),o=e.pages[a],l=o.elements.map((e=>{let{id:t}=e;return t})),i=o.elements[0],s=r.some((e=>e===i.id)),c=i.isDefaultBackground,d=s&&c?r.filter((e=>e!==i.id)):r;if(!(En(l,d).length>0))return e;let u=o.elements.filter((e=>!d.includes(e.id)));s&&!c&&(u=[o.defaultBackgroundElement,...u]);const p=o.animations||[],m=p.filter((e=>e.targets.some((e=>!d.includes(e))))),f={...o,elements:u,...p.length>0?{animations:m}:{}},g=[...e.pages.slice(0,a),f,...e.pages.slice(a+1)],h=En(e.selection,d).length>0?e.selection.filter((e=>!d.includes(e))):e.selection;return{...e,pages:g,selection:h}};var Rn=n(58373);const Mn=function(e,t){let{elementIds:n,properties:r}=t;if([Rn.STORY_ANIMATION_STATE.PLAYING,Rn.STORY_ANIMATION_STATE.PLAYING_SELECTED,Rn.STORY_ANIMATION_STATE.SCRUBBING].includes(e.animationState))return e;const a=null===n?e.selection:n;if(0===a.length)return e;const o=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),l=e.pages[o];if(!(En(l.elements.map((e=>{let{id:t}=e;return t})),a).length>0))return e;const i=l.elements.reduce(((e,t)=>{if(!a.includes(t.id))return e;const{animation:n,...o}=wn(t,r),l=n?{[n.id]:{...n,targets:[o.id]}}:{};return{...e,...l}}),{}),s=l.elements.reduce(((e,t)=>{if(!a.includes(t.id))return[...e,t];const{animation:n,...o}=wn(t,r);return[...e,o]}),[]),c=Object.keys(i).length>0,d=c?function(e,t){const n=e.reduce(((e,n)=>{const r=t[n.id];return delete t[n.id],r?.delete?e:r?[...e,r]:[...e,n]}),[]);return Object.values(t).forEach((e=>n.push(e))),n}(l.animations||[],i):l.animations,u=d&&{animations:d},p={elements:s},m={...l,...c?u:p},f=[...e.pages.slice(0,o),m,...e.pages.slice(o+1)];return{...e,pages:f}};const Ln=function(e,t){let{id:n,properties:r}=t;if(!n)return e;if(!e.pages.some((e=>e.elements.some((e=>e.resource?.id===n)))))return e;const a=e.pages.map((e=>{const t=e.elements.map((e=>e.resource?.id===n?wn(e,r):e));return{...e,elements:t}}));return{...e,pages:a}};const Dn=function(e,t){let{id:n}=t;if(null===n)return e;if(!e.pages.some((e=>e.elements.some((e=>e.resource?.id===n)))))return e;const r=[],a=e.pages.map((e=>{const{elements:t,animations:a}=e,o=t[0].resource?.id===n;let l=t.map((e=>{const{id:t,resource:a}=e;if(a?.id!==n)return e;r.push(t)}));o&&(l=[e.defaultBackgroundElement,...l]),l=l.filter(Boolean);const i=a||[],s=i.filter((e=>e.targets.some((e=>!r.includes(e)))));return{...e,elements:l,...i.length>0?{animations:s}:{}}})),o=e.selection.filter((e=>!r.includes(e)));return{...e,pages:a,selection:o}};const Bn=function(e,t){let{elementId:n}=t;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o=a.elements[0];let l,i=e.selection;if(null===n){if(o.isDefaultBackground)return e;const t=a.defaultBackgroundElement,n=a.elements.map((e=>e.isBackground?bn(e,["isBackground"]):e));l={...a,elements:[t,...n]},i=[t.id]}else{const t=a.elements.findIndex((e=>{let{id:t}=e;return t===n})),r=0===t;if(!(-1!==t)||r)return e;const s=o.isDefaultBackground?o:a.defaultBackgroundElement,c=a.elements.slice(1),d=t-1;e.selection.includes(o.id)&&(i=e.selection.filter((e=>e!==o.id)));const u=_n(c,d,0).map((e=>e.id===n?{...e,isBackground:!0,...Object.prototype.hasOwnProperty.call(e,"opacity")&&{opacity:100}}:e));e.selection.includes(n)&&e.selection.length>1&&(i=e.selection.filter((e=>e!==n))),l={...a,defaultBackgroundElement:s,elements:u}}const s=a.elements.find((e=>e.isBackground)),c=Tn(a.animations,[n,s.id]),d=[...e.pages.slice(0,r),{...l,animations:c},...e.pages.slice(r+1)];return{...e,pages:d,selection:i}};const Fn=function(e,t){let{elementId:n,position:r,groupId:a=!1}=t;if(null===n&&1!==e.selection.length)return e;const o=null!==n?n:e.selection[0],l=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),i=e.pages[l];if(i.elements.length<3)return e;const s=i.elements.findIndex((e=>{let{id:t}=e;return t===o}));if(-1===s||i.elements[0].id===o)return e;const c=vn({currentPosition:s,minPosition:1,maxPosition:i.elements.length-1,desiredPosition:r}),d=i.elements[s].groupId;if(s===c&&d===a)return e;const u=[...i.elements];u[s]={...u[s]},!1!==a&&(u[s].groupId=a);const p=_n(u,s,c),m=[...e.pages.slice(0,l),{...i,elements:p},...e.pages.slice(l+1)];return{...e,pages:m}};const Hn=function(e,t){let{groupId:n,position:r}=t;const a=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),o=e.pages[a],l=o.elements.findIndex((e=>e.groupId===n)),i=o.elements.findLastIndex((e=>e.groupId===n)),s=[...o.elements],c=s.slice(l,i+1),d=[...s.slice(0,l),...s.slice(i+1)],u=vn({currentPosition:r-1,minPosition:1,maxPosition:o.elements.length-1,desiredPosition:r-1});d.splice(u,0,...c);const p=[...e.pages.slice(0,a),{...o,elements:d},...e.pages.slice(a+1)];return{...e,pages:p}};var Un=n(25784),jn=n(88766),zn=(n(27342),n(40630)),Gn=n(95740),Yn=n(98465),Zn=(n(72858),n(1861));function Wn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&"object"==typeof e?Object.assign({},...t.map((t=>e&&t in e?{[t]:e&&e[t]}:{}))):{}}const Vn=function(e,t){let{firstElement:n,secondId:r,shouldRetainAnimations:a=!0}=t;if(!n||!r)return e;const o=n.id,l=n,i=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),s=e.pages[i],c=s.elements.findIndex((e=>{let{id:t}=e;return t===r})),d=s.elements[c];if(!l||!l.resource||!d)return e;const u=d.isDefaultBackground?{defaultBackgroundElement:{...d,id:(0,pe.default)()}}:{},p=["alt","type","resource","scale","focalX","focalY","tracks","poster"];d.isBackground?(p.push("flip"),p.push("overlay")):(p.push("link"),p.push("border"),(0,Un.canSupportMultiBorder)(d)&&p.push("borderRadius"));const m=Wn(l,p),f=Wn(l,["width","height","x","y"]),g={...bn(d,["isDefaultBackground"]),...Yn.DEFAULT_ATTRIBUTES_FOR_MEDIA,...m,...d.isBackground?f:{}},h=s.elements.filter((e=>{let{id:t}=e;return t!==o})).map((e=>e.id===r?g:e)),b=Tn(s.animations,a?[o]:[o,r]),E={...s,elements:h,...u,animations:b},y=[...e.pages.slice(0,i),E,...e.pages.slice(i+1)];return{...e,pages:y,selection:[r]}};const $n=function(e,t){let{elementIds:n}=t;if(!Array.isArray(n))return e;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o={...a},l=[];if(n.forEach((e=>{const t=o.elements.findIndex((t=>{let{id:n}=t;return n===e}));if(t<0)return;const n=o.elements[t];if(n.isBackground)return;if(n.type===On.ELEMENT_TYPES.PRODUCT)return;const{element:r,elementAnimations:i}=(0,On.duplicateElement)({element:n,animations:a.animations,existingElements:a.elements});l.push(r.id),o.animations=[...o.animations||[],...i],o.elements=[...o.elements.slice(0,t),n,r,...o.elements.slice(t+1)]})),!l.length)return e;const i=[...e.pages.slice(0,r),o,...e.pages.slice(r+1)];return{...e,pages:i,selection:l}},qn=["background","backgroundColor","backgroundTextMode","border","borderRadius","content","flip","font","fontSize","lineHeight","lockAspectRatio","opacity","overlay","padding","rotationAngle","textAlign"];const Kn=function(e){if(1!==e.selection?.length)return e;const t=e.selection[0],n=e.pages.find((t=>{let{id:n}=t;return n===e.current})),r=n.elements.findIndex((e=>{let{id:n}=e;return n===t})),a=n.elements[r],o=(n.animations||[]).filter((e=>{let{targets:t}=e;return t.includes(a.id)})),l=Wn(a,qn);return{...e,copiedElementState:{animations:o,styles:l,type:a.type}}};const Xn=function(e,t){let{family:n,properties:r}=t;if(!n)return e;if(!e.pages.some((e=>e.elements.some((e=>"text"===e.type&&e?.font?.family===n)))))return e;const a=e.pages.map((e=>{const t=e.elements.map((e=>e?.font?.family===n?wn(e,r):e));return{...e,elements:t}}));return{...e,pages:a}};const Qn=function(e,t){let{pageId:n}=t;return e.pages.some((e=>{let{id:t}=e;return t===n}))?e.current===n?e:{...e,current:n,selection:[]}:e};const Jn=function(e,t){let{elementIds:n,withLinked:r=!1}=t;const a="function"==typeof n?n(e.selection):n;if(!Array.isArray(a))return e;const o=e.pages.find((t=>{let{id:n}=t;return n===e.current}));let l=a;if(r){const e=o.elements.filter((e=>{let{id:t}=e;return a.includes(t)})).map((e=>{let{groupId:t}=e;return t})).filter(Boolean),t=o.elements.filter((t=>{let{groupId:n}=t;return e.includes(n)})).map((e=>{let{id:t}=e;return t}));l=l.concat(t)}const i=[...new Set(l)];if(e.selection.length===i.length){if(En(e.selection,i).length===e.selection.length)return e}const s=e=>o.elements.find((t=>{let{id:n}=t;return n===e})),c=i.length>1&&!r?i.filter((e=>(e=>o.elements[0].id!==e)(e)&&(e=>!s(e).resource?.isPlaceholder)(e)&&(e=>!s(e).isLocked)(e))):i;return{...e,animationState:Rn.STORY_ANIMATION_STATE.RESET,selection:c}};const er=function(e,t){let{elementId:n}=t;if(!n||e.selection.includes(n))return e;const r=e.pages.find((t=>{let{id:n}=t;return n===e.current})),a=e=>r.elements.find((t=>{let{id:n}=t;return n===e})),o=r.elements[0].id===n,l=a(n),i=l?.resource?.isPlaceholder,s=e.selection.length>0;if((o||i)&&s)return e;const c=l?.isLocked,d=e.selection.includes(r.elements[0].id),u=e.selection.some((e=>a(e).isLocked));return d||c||u?{...e,selection:[n]}:{...e,selection:[...e.selection,n]}};const tr=function(e,t){let{elementId:n}=t;return n&&e.selection.includes(n)?{...e,selection:e.selection.filter((e=>e!==n))}:e};const nr=function(e,t){let{elementId:n,withLinked:r=!1}=t;if(!n)return e;const a=e.selection.includes(n),o=e.pages.find((t=>{let{id:n}=t;return n===e.current})),l=o.elements[0].id,i=l===n,s=e.selection.length>0,c=o.elements.find((e=>{let{id:t}=e;return t===n}))?.groupId;let d=[n];if(c&&r){const t=o.elements.filter((e=>{let{groupId:t}=e;return c===t})).map((e=>{let{id:t}=e;return t})),n=e.selection.concat(t);d=d.concat(n)}if(!a){if(i&&s)return e;const t=e.selection.includes(l),r=e=>o.elements.find((t=>{let{id:n}=t;return n===e})),a=e.selection.length>0&&r(e.selection[0]).isLocked,c=r(n);return t||a||c.isLocked?{...e,selection:d}:{...e,selection:[...e.selection,...d]}}return{...e,selection:e.selection.filter((e=>!d.includes(e)))}};const rr=function(e,t){let{elementId:n,metaKey:r,shiftKey:a,withLinked:o=!1}=t;if(r)return nr(e,{elementId:n,withLinked:o});if(e.selection.length<=0||!a)return Jn(e,{elementIds:[n],withLinked:o});const l=e.selection[0],i=e.pages.find((t=>{let{id:n}=t;return n===e.current})).elements.map((e=>e.id)),s=i.findIndex((e=>e===l)),c=i.findIndex((e=>e===n)),d=Math.min(s,c),u=Math.max(s,c),p=i.slice(d,u+1);return l!==p[0]&&p.reverse(),Jn(e,{elementIds:p,withLinked:o})};const ar=function(e,t){let{animationState:n}=t;return e.animationState===n?e:{...e,animationState:n}};const or=function(e,t){let{animations:n}=t;if(!Array.isArray(n))return e;const r=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),a=e.pages[r],o=a.animations||[],l=Cn(o,n);if(0===l.length)return e;const i={...a,animations:[...o,...l]},s=[...e.pages.slice(0,r),i,...e.pages.slice(r+1)];return{...e,pages:s}};const lr=function(e,t){let{pages:n,current:r,selection:a,story:o,capabilities:l}=t;if(!Array.isArray(n)||0===n.length)return e;const i="object"==typeof o?o:{},s="object"==typeof l?l:{},c=r??e.current,d=n.some((e=>{let{id:t}=e;return t===c}))?c:n[0].id;return{pages:n,current:d,selection:Array.isArray(a)?a:[],story:i,animationState:e.animationState,capabilities:s,copiedElementState:{}}};const ir=function(e,t){let{properties:n}=t;return{...e,story:"function"==typeof n?n(e.story):{...e.story,...n}}};const sr=function(e,t){let{groupId:n,name:r,isLocked:a=!1}=t;const o=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),l={...e.pages[o].groups,[n]:{name:r,isLocked:a}},i={...e.pages[o],groups:l},s=[...e.pages.slice(0,o),i,...e.pages.slice(o+1)];return{...e,pages:s}};const cr=function(e,t){let{groupId:n,properties:r}=t;const a=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),o={...e.pages[a].groups,[n]:{...e.pages[a].groups[n],...r}},l={...e.pages[a],groups:o},i=[...e.pages.slice(0,a),l,...e.pages.slice(a+1)];return{...e,pages:i}};const dr=function(e,t){let{groupId:n,includeElements:r=!1}=t;const a=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),o={...e.pages[a].groups};delete o[n];const l=e.pages[a],i={...l,groups:o};i.elements=i.elements.map((e=>{if(e.groupId===n){const t={...e};return delete t.groupId,t}return e}));const s=[...e.pages.slice(0,a),i,...e.pages.slice(a+1)],c={...e,pages:s};if(r){const e=l.elements.filter((e=>n&&e.groupId===n)).map((e=>e.id));return Nn(c,{elementIds:e})}return c};const ur=function(e,t){let{oldGroupId:n,groupId:r,name:a,isLocked:o}=t;const l=sr(e,{groupId:r,name:a,isLocked:o}),i=l.pages.findIndex((e=>{let{id:t}=e;return t===l.current})),s=l.pages[i],c=[],d={...s};if(d.elements.filter((e=>e.groupId===n)).map((e=>e.id)).forEach((e=>{const t=d.elements.findIndex((t=>{let{id:n}=t;return n===e}));if(t<0)return;const n=d.elements[t];if(n.isBackground)return;const{element:a,elementAnimations:o}=(0,On.duplicateElement)({element:n,animations:s.animations,existingElements:s.elements});a.groupId=r,c.push(a.id),d.animations=[...d.animations||[],...o],d.elements=[...d.elements.slice(0,t),n,a,...d.elements.slice(t+1)]})),!c.length)return e;const u=[...e.pages.slice(0,i),d,...e.pages.slice(i+1)];let p={...e,pages:u,selection:c};const m=d.elements.filter((e=>e.groupId===r)),f=Math.max(...m.map((e=>d.elements.findIndex((t=>{let{id:n}=t;return n===e?.id})))));for(const[e,t]of m.reverse().entries()){if(d.elements.findIndex((e=>{let{id:n}=e;return n===t?.id}))!==f){const n=f-e;p=Fn(p,{elementId:t.id,position:n})}}return p},pr=(0,u.createContext)({state:{},actions:{}});var mr=n(49925),fr=n(82302);const gr=(0,u.createContext)({listeners:new Map});const hr=function(){const e=(0,u.useContext)(gr);return(0,u.useCallback)(((t,n)=>{n?(e.listeners.has(t)||e.listeners.set(t,(e=>((e,t)=>{e.preventDefault(),e.returnValue=t})(e,t))),window.addEventListener("beforeunload",e.listeners.get(t))):(window.removeEventListener("beforeunload",e.listeners.get(t)),e.listeners.delete(t))}),[e])},br="set_state",Er="clear",yr="replay",_r={entries:[],offset:0,requestedState:null,versionNumber:0},vr=e=>(t,n)=>{let{type:r,payload:a}=n;const o=t.entries[t.offset];switch(r){case br:if(t.requestedState){if(Object.keys(t.requestedState).every((e=>t.requestedState[e]===a[e]))){const e=t.entries.indexOf(t.requestedState);if(o.pages!==t.requestedState.pages&&o.pages.length===t.requestedState.pages.length&&o.current!==t.requestedState.current){const n=o.pages.filter(((e,n)=>e!==t.requestedState.pages[n]));if(1===n.length){const r=n[0].id,a={...t.requestedState,current:r};return{...t,offset:e,requestedState:a}}}return{...t,offset:e,requestedState:null}}}return{entries:[a,...t.entries.slice(t.offset)].slice(0,e),versionNumber:t.versionNumber+1,offset:0,requestedState:null};case yr:return{...t,versionNumber:t.versionNumber+(t.offset-a),requestedState:t.entries[a]};case Er:return{..._r};default:throw new Error(`Unknown history reducer action: ${r}`)}};const wr=function(e){const[t,n]=(0,u.useReducer)(vr(e),{..._r}),{entries:r,offset:a,requestedState:o,versionNumber:l}=t,i=r.length,s=(0,u.useCallback)((e=>{const t=a+e;return!(t<0||t>i-1)&&(n({type:yr,payload:t}),!0)}),[n,a,i]),c=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s("number"==typeof e?e:1)}),[s]),d=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s("number"==typeof e?-e:-1)}),[s]),p=(0,u.useCallback)((()=>n({type:Er})),[n]);return{requestedState:o,stateToHistory:(0,u.useCallback)((e=>{n({type:br,payload:e})}),[n]),clearHistory:p,currentEntry:r?.[a],offset:a,historyLength:i,versionNumber:l,undo:c,redo:d}},Tr=(0,u.createContext)({state:{},actions:{}});function HistoryProvider(e){let{children:t,size:n}=e;const{requestedState:r,stateToHistory:a,clearHistory:o,currentEntry:l,offset:i,historyLength:s,undo:d,redo:p,versionNumber:m}=wr(n),[f,g]=(0,u.useState)(!1),h=hr(),b=(0,u.useRef)(1);(0,u.useEffect)((()=>(h("history",f),()=>h("history",!1))),[h,f]),(0,u.useEffect)((()=>{g(m!==b.current)}),[m]);const E=(0,u.useCallback)((()=>{b.current=m,g(!1)}),[m]),y={state:{currentEntry:l,hasNewChanges:f,requestedState:r,canUndo:i<s-1,canRedo:i>0,versionNumber:m},actions:{stateToHistory:a,clearHistory:o,resetNewChanges:E,undo:d,redo:p}};return(0,fr.useGlobalKeyDownEffect)({key:"undo",dialog:!0},(()=>d()),[d]),(0,fr.useGlobalKeyDownEffect)({key:"redo",dialog:!0},(()=>p()),[p]),c.createElement(Tr.Provider,{value:y},t)}HistoryProvider.defaultProps={size:50};const Sr=HistoryProvider;const Cr=function(e){return(0,u.useContextSelector)(Tr,e??u.identity)};const Ir=function(e){const t=e.map((e=>JSON.stringify(e)));return Array.from(new Set(t)).map((e=>JSON.parse(e)))};function xr(e,t,n,r){const{title:{raw:a=""}={},status:o,slug:l,date:i,modified:s,excerpt:{raw:c=""}={},link:d,storyData:u,permalinkTemplate:p,stylePresets:m={},password:f,previewLink:g,editLink:h,embedPostLink:b,author:E,capabilities:y={publish:!1,"assign-author":!1},extras:_={},featuredMedia:v,publisherLogo:w,taxonomies:T,terms:S}=t,C=!["draft","auto-draft","pending"].includes(o)||i!==s&&i?i:null,[I,x]=p?p.split(/%(?:postname|pagename)%/):[],A=void 0!==I&&void 0!==x?{prefix:I,suffix:x}:null,k="auto-draft"===o?"draft":o;r();const O=u&&(0,mr.migrate)(u,u.version||0),P=O?.pages?.length>0?O.pages:[(0,On.createPage)()],N={colors:m.colors?Ir(m.colors):[],textStyles:m.textStyles?Ir(m.textStyles):[]};n({pages:P,story:{storyId:e,title:a,status:k,author:E,date:C,modified:s,excerpt:c,slug:l,link:d,extras:_,featuredMedia:v,permalinkConfig:A,publisherLogo:w,password:f,previewLink:g,editLink:h,embedPostLink:b,currentStoryStyles:{colors:O?.currentStoryStyles?.colors?Ir(O.currentStoryStyles.colors):[]},globalStoryStyles:N,autoAdvance:O?.autoAdvance,defaultPageDuration:O?.defaultPageDuration,backgroundAudio:O?.backgroundAudio,taxonomies:T,terms:S},selection:[],current:null,capabilities:y})}const Ar=function(e){let{storyId:t,story:n,shouldLoad:r,restore:a}=e;const{actions:{getStoryById:o}}=W(),{actions:{clearHistory:l}}=Cr();(0,u.useEffect)((()=>{t&&r&&(n?xr(t,n,a,l):o(t).then((e=>{xr(t,e,a,l)})))}),[t,n,r,a,o,l])};var kr=n(96905),Or=n(58860);const Pr=function(e,t){return(0,u.useCallback)((()=>{try{const n=new URL(t);n.hash=window.location.hash,window.history.replaceState({id:e},(0,We.default)(
/* translators: %d: current story id. */
(0,d.__)("Post %d","web-stories"),e),n.toString())}catch(e){}}),[e,t])},Nr=e=>{const t=[{src:"https://cdn.ampproject.org/v0.js"},{name:"amp-story",src:"https://cdn.ampproject.org/v0/amp-story-1.0.js"}],n={name:"amp-video",src:"https://cdn.ampproject.org/v0/amp-video-0.1.js"},r={name:"amp-story-captions",src:"https://cdn.ampproject.org/v0/amp-story-captions-0.1.js"},a={name:"amp-story-shopping",src:"https://cdn.ampproject.org/v0/amp-story-shopping-0.1.js"};for(const{elements:o,backgroundAudio:l}of e){l?.resource?.src&&l?.tracks?.length>0&&(t.push(n),t.push(r));for(const{type:e,tracks:l}of o)switch(e){case"video":t.push(n),l?.length>0&&t.push(r);break;case"gif":t.push(n);break;case"product":t.push(a)}}return[...new Set(t)]};const Rr=function Boilerplate(){return c.createElement(c.Fragment,null,c.createElement("style",{"amp-boilerplate":"",dangerouslySetInnerHTML:{__html:"body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}"}}),c.createElement("noscript",null,c.createElement("style",{"amp-boilerplate":"",dangerouslySetInnerHTML:{__html:"body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}"}})))};const Mr=function(e){return/^#(?:[a-f0-9]{3}){1,2}$/i.test(e)};const Lr=function CustomStyles(){const e=ee.PAGE_RATIO/ee.FULLBLEED_RATIO,t=1/e,n=ee.PAGE_RATIO,r=ee.FULLBLEED_RATIO,a=g.theme.colors.bg.primary,o=Mr(a)?a:"#1B1D1C";return c.createElement("style",{"amp-custom":"",dangerouslySetInnerHTML:{__html:`\n              h1, h2, h3 { font-weight: normal; }\n\n              amp-story-page {\n                background-color: ${o};\n              }\n\n              amp-story-grid-layer {\n                overflow: visible;\n              }\n\n              @media (max-aspect-ratio: 9 / 16)  {\n                @media (min-aspect-ratio: 320 / 678) {\n                  amp-story-grid-layer.grid-layer {\n                    margin-top: calc((100% / ${r} - 100% / ${n}) / 2);\n                  }\n                }\n              }\n          \n              @media not all and (min-resolution:.001dpcm) {\n                @media {\n                  p.text-wrapper > span {\n                    font-size: calc(100% - 0.5px);\n                  }\n                }\n              }\n\n              .page-fullbleed-area,\n              .page-background-overlay-area {\n                position: absolute;\n                overflow: hidden;\n                width: 100%;\n                left: 0;\n                height: calc(${e} * 100%);\n                top: calc((1 - ${e}) * 100% / 2);\n              }\n\n              .element-overlay-area {\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n              }\n\n              .page-safe-area {\n                overflow: visible;\n                position: absolute;\n                top: 0;\n                bottom: 0;\n                left: 0;\n                right: 0;\n                width: 100%;\n                height: calc(${t} * 100%);\n                margin: auto 0;\n              }\n\n              .mask {\n                position: absolute;\n                overflow: hidden;\n              }\n\n              .fill {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                margin: 0;\n              }\n\n              @media (prefers-reduced-motion: no-preference) {\n                .animation-wrapper {\n                  opacity: var(--initial-opacity);\n                  transform: var(--initial-transform);\n                }\n              }\n\n              amp-story-grid-layer.align-bottom {\n                align-content: end;\n                padding: 0;\n              }\n\n              .captions-area {\n                padding: 0 32px 0;\n              }\n\n              amp-story-captions {\n                margin-bottom: 16px;\n                text-align: center;\n              }\n\n              amp-story-captions span {\n                display: inline-block;\n                margin: 0;\n                padding: 6px 12px;\n                vertical-align: middle;\n                border-radius: 15px;\n                background: rgba(11, 11, 11, 0.6);\n                color: rgba(255, 255, 255, 1);\n                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;;\n                font-size: calc(4 * var(--story-page-vw));\n                line-height: 1.4;\n                word-break: break-word;\n                word-wrap: break-word;\n                overflow-wrap: break-word;\n              }\n              `}})},Dr=["Karla","Lato","Lora","Merriweather","Montserrat","Nunito","Oswald","Playfair Display","Poppins","Raleway","Roboto","Roboto Condensed","Source Serif Pro","Titillium Web","Work Sans","Alegreya","Arimo","EB Garamond","IBM Plex Mono","IBM Plex Serif","Inconsolata","Mulish","Noto Sans","Noto Serif","Open Sans","PT Mono","PT Sans","PT Serif","Roboto Mono","Source Sans Pro","Ubuntu","Anton","BioRhyme","Bungee","Bungee Shade","Cookie","Dancing Script","Monoton","Nothing You Could Do","Parisienne","Rock Salt","UnifrakturMaguntia"];const Br=function(e,t){const n=function(e){const t=e.split(/[#?]/)[0].split(".").pop().trim();switch(t){case"woff":case"woff2":return t;case"ttf":return"truetype";case"otf":return"opentype";default:return null}}(t);return n?`@font-face {\n    font-family: "${e}";\n    src: url('${t}') format('${n}');\n    font-weight: normal;\n    font-display:swap;\n  }`:null};const Fr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"swap";const n=new URL("https://fonts.googleapis.com/css2");n.searchParams.append("display",t);for(const{family:t,variants:r=[]}of e){const e=r.reduce(((e,t)=>{let[n,r]=t;return 1!==n||e.includes("ital")||e.push("ital"),r&&400!==r&&!e.includes("wght")&&e.push("wght"),e}),[]).sort();let a=t;const o=e.join(",");o&&(a+=":"+o);const l=r.sort(((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:e[1]-t[1])).map((t=>{let[n,r]=t;const a=[];return e.includes("ital")&&a.push(n),e.includes("wght")&&a.push(r),a})).join(";"),i="400"===l;l&&!i&&(a+="@"+l),n.searchParams.append("family",a)}return decodeURI(n.toString())};var Hr=n(56862);const Ur=(e,t)=>e.some((e=>e[0]===t[0]&&e[1]===t[1])),jr=(e,t)=>Math.abs(e[0]+e[1]-t[0]-t[1]),zr=(e,t)=>e.reduce(((e,n)=>jr(n,t)<jr(e,t)?n:e));const Gr=function FontDeclarations(e){let{pages:t}=e;const n=new Map;for(const{elements:e}of t){const t=e.filter((e=>{let{type:t}=e;return"text"===t}));for(const{font:e,content:r}of t){const{service:t,family:a,variants:o=[],url:l}=e;if(!t||"system"===t)continue;const i=n.get(t)||new Map;n.set(t,i);const s=i.get(a)||{family:a,variants:[],url:l},c=(0,Hr.getFontVariants)(r);if(o.length>0)for(const e of c){const t=zr(o,e),n=Ur(s.variants,t),r=Ur(o,t);!n&&r&&s.variants.push(t)}i.set(a,s)}}return c.createElement(c.Fragment,null,Array.from(n.keys()).map((e=>{const t=n.get(e);switch(e){case"fonts.google.com":return c.createElement("link",{key:e,href:Fr(Array.from(t.values())),rel:"stylesheet"});case"custom":return Array.from(t.values()).map((e=>{let{family:t,url:n}=e;const r=Br(t,n);return c.createElement("style",{key:t,dangerouslySetInnerHTML:{__html:r}})}));default:return null}})))};var Yr=n(18535);const Zr=7,Wr=!0;var Vr=n(1787);function $r(e,t){try{return new URL(t,e).href}catch(e){return t}}function qr(e){try{return new URL(e),!0}catch{return!1}}function Kr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https";return/^(http:\/\/|https:\/\/|tel:|mailto:)/.test(e)?e:`${t}://${e}`}function Xr(){return Xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xr.apply(this,arguments)}const Qr=function WithLink(e){let{element:t,children:n,...r}=e;const a=t.link||{},{url:o,icon:l,desc:i,rel:s=[]}=a;if(!o)return n;const d=s.concat(["noreferrer"]),u=Kr(o);return c.createElement("a",Xr({href:u,"data-tooltip-icon":l||void 0,"data-tooltip-text":i,target:"_blank",rel:d.join(" ")},r),n)};const Jr=function OutputElement(e){let{element:t,flags:n}=e;const{id:r,opacity:a,type:o,border:l,backgroundColor:i,backgroundTextMode:s,overlay:d}=t,{Output:u,isMaskable:p}=(0,On.getDefinitionForType)(o),m=(0,Vr.getBox)(t,100,100),{x:f,y:g,width:h,height:b,rotationAngle:E}=m,y={backgroundClip:"content-box",...(0,Yr.default)(i)};return c.createElement("div",{style:{position:"absolute",pointerEvents:"none",left:f?`${f}%`:0,top:g?`${g}%`:0,width:`${h}%`,height:`${b}%`,...(0,Un.shouldDisplayBorder)(t)?(0,Un.getBorderPositionCSS)({...l,width:`${h}%`,height:`${b}%`,posTop:`${g}%`,posLeft:`${f}%`}):null,transform:E?`rotate(${E}deg)`:null,opacity:void 0!==a?a/100:null}},c.createElement(Rn.StoryAnimation.AMPWrapper,{target:r},c.createElement(Un.OutputWithMask,{className:p?"mask":void 0,element:t,id:"el-"+r,style:{...(0,Un.shouldDisplayBorder)(t)?(0,Un.getBorderStyle)(t):null,pointerEvents:"initial",width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0,zIndex:0,...(0,Un.getBorderRadius)(t),...s===On.BACKGROUND_TEXT_MODE.FILL?y:null},skipDefaultMask:!0},c.createElement(Qr,{element:t,style:{width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0}},c.createElement(u,{element:t,box:m,flags:n})),d&&c.createElement("div",{className:"element-overlay-area",style:(0,Yr.default)(d)}))))};function ea(){return ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ea.apply(this,arguments)}const ta=function BackgroundAudio(e){let{backgroundAudio:t,id:n}=e;const{resource:r,tracks:a,loop:o}=t||{},{mimeType:l,src:i}=r,s={loop:o?"loop":void 0,id:`page-${n}-background-audio`,"captions-id":a?.length>0?`el-${n}-captions`:void 0,crossorigin:a?.length>0?"anonymous":void 0},d={type:l,src:i};return c.createElement("amp-story-grid-layer",{template:"fill"},c.createElement("amp-video",ea({autoPlay:"autoplay",layout:"fixed",width:"1",height:"1",poster:""},s),c.createElement("source",d),a&&a.map(((e,t)=>{let{srclang:n,label:r,kind:a,track:o,id:l}=e;return c.createElement("track",{srcLang:n,label:r,kind:a,src:o,key:l,default:0===t})}))))};const na=function(e){return e.sort(((e,t)=>e.y-t.y)).reduce(((e,t)=>{let{id:n,fontSize:r,content:a}=t;if(a.length<=3)return e.set(n,"p"),e;const o=Array.from(e.values()).includes("h1");return r>=36&&!o?(e.set(n,"h1"),e):(r>=27?e.set(n,"h2"):r>=21?e.set(n,"h3"):e.set(n,"p"),e)}),new Map)};const ra=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.filter((e=>{let{type:t,loop:n}=e;const{isMedia:r}=(0,On.getDefinitionForType)(t);return r&&!n})).reduce(((e,n)=>n?.resource?.length?n?.resource?.length<t||e?.resource?.length>n?.resource?.length?e:n:e),void 0)};const aa=function(e){let{animations:t,defaultPageDuration:n=Zr,elements:r,backgroundAudio:a,id:o}=e;const{resource:l,loop:i}=a||{},s=(0,Rn.getTotalDuration)({animations:t})/1e3,c=!i&&l?.length?l.length:0,d=ra(r,Math.max(s||1,c));if(d?.id)return`el-${d?.id}-media`;const u=Math.max(s||0,c,n);return u>c?`${u}s`:`page-${o}-background-audio`};const oa=function Outlink(e){let{ctaText:t,url:n,icon:r,theme:a,rel:o=[]}=e;return c.createElement("amp-story-page-outlink",{layout:"nodisplay","cta-image":r||void 0,theme:a},c.createElement("a",{href:n,rel:o.join(" ")},t||(0,d.__)("Learn more","web-stories")))};const la=function ShoppingAttachment(e){let{products:t,theme:n,ctaText:r}=e;return c.createElement("amp-story-shopping-attachment",{theme:n,"cta-text":r||void 0},c.createElement("script",{type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify({items:t})}}))};function ia(){return ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ia.apply(this,arguments)}const sa=`${ee.PAGE_WIDTH}:${ee.PAGE_HEIGHT}`;const ca=function OutputPage(e){let{page:t,autoAdvance:n=Wr,defaultPageDuration:r=Zr,flags:a}=e;const{id:o,animations:l,elements:i,backgroundColor:s,backgroundAudio:d,pageAttachment:u={},shoppingAttachment:p={}}=t,[m,...f]=i,g=m?.resource?.baseColor,h=g?{backgroundColor:g}:{backgroundColor:"white",...(0,Yr.default)(s)},b=n?aa({animations:l,elements:i,defaultPageDuration:r,backgroundAudio:d,id:o}):void 0,E=na(f.filter((e=>{let{type:t}=e;return"text"===t}))),y=f.map((e=>{const t="text"===e.type,n=u?.url&&(0,On.isElementBelowLimit)(e);if(!(t||n))return e;const r={...e};return t&&(r.tagName=E.get(e.id)),n&&delete r.link,r})),_=i.filter((e=>{let{type:t}=e;return t===On.ELEMENT_TYPES.PRODUCT})).map((e=>{let{product:t}=e;return t})).filter(Boolean),v=_.length>0&&a?.shoppingIntegration,w=u?.url&&!v,T=i.filter((e=>{let{type:t,tracks:n}=e;return t===On.ELEMENT_TYPES.VIDEO&&n?.length>0})).map((e=>{let{id:t}=e;return`el-${t}-captions`})),S=d?.resource?.src,C=d?.tracks?.length>0,I=C||!1===d?.loop&&d?.resource?.length;return S&&C&&T.push(`el-${o}-captions`),c.createElement("amp-story-page",{id:o,"auto-advance-after":b,"background-audio":S&&!I?S:void 0},c.createElement(Rn.StoryAnimation.Provider,{animations:l,elements:i},c.createElement(Rn.StoryAnimation.AMPAnimations,null),m&&c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":sa,class:"grid-layer"},c.createElement("div",{className:"page-fullbleed-area",style:h},c.createElement("div",{className:"page-safe-area"},c.createElement(Jr,{element:m,flags:a}),m.overlay&&c.createElement("div",{className:"page-background-overlay-area",style:(0,Yr.default)(m.overlay)})))),c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":sa,class:"grid-layer"},c.createElement("div",{className:"page-fullbleed-area"},c.createElement("div",{className:"page-safe-area"},y.map((e=>c.createElement(Jr,{key:e.id,element:e,flags:a}))))))),S&&I&&c.createElement(ta,{backgroundAudio:d,id:o}),T.length>0&&c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":sa,class:"grid-layer align-bottom"},c.createElement("div",{className:"captions-area"},T.map((e=>c.createElement("amp-story-captions",{key:e,id:e,layout:"fixed-height",height:"100"}))))),w&&c.createElement(oa,u),v&&c.createElement(la,ia({products:_},p)))};const da=function(e){const t=[];if(0===e.length)return t;for(const{type:n,resource:r,isBackground:a}of e[0].elements){if(!["image","video","gif"].includes(n))continue;if(!a)continue;const e=r?.output?.src||r.src;t.push({url:e,type:"image"===n?"image":"video"})}return t};const ua=function OutputStory(e){let{story:{featuredMedia:t,link:n,title:r,autoAdvance:a,defaultPageDuration:o,backgroundAudio:l,publisherLogo:i},pages:s,metadata:{publisher:d},flags:u}=e;const p=Nr(s),m=da(s),f=t?.url||"",g=i?.url||"";return c.createElement("html",{amp:"",lang:"en"},c.createElement("head",null,c.createElement("meta",{charSet:"utf-8"}),c.createElement("meta",{name:"viewport",content:"width=device-width,minimum-scale=1,initial-scale=1"}),p.map((e=>{let{name:t,src:n}=e;return c.createElement("script",{key:n,async:"async",src:n,"custom-element":t})})),c.createElement(Gr,{pages:s}),m.map((e=>{let{url:t,type:n}=e;return c.createElement("link",{key:t,href:t,rel:"preload",as:n})})),c.createElement(Rr,null),c.createElement(Lr,null),c.createElement("meta",{name:"web-stories-replace-head-start"}),c.createElement("title",null,r),n&&c.createElement("link",{rel:"canonical",href:n}),c.createElement("meta",{name:"web-stories-replace-head-end"})),c.createElement("body",null,c.createElement("amp-story",{standalone:"",publisher:d,"publisher-logo-src":g,title:r,"poster-portrait-src":f,"background-audio":l?.resource?.src??void 0},s.map((e=>c.createElement(ca,{key:e.id,page:e,autoAdvance:a,defaultPageDuration:o,flags:u}))))))};function pa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,u.renderToStaticMarkup)(c.createElement(ua,{story:e,pages:t,metadata:n,flags:r}))}const ma=function(e){const t=[],n=[];return e.forEach((e=>{let{elements:r}=e;return r.forEach((e=>{let{product:r,type:a}=e;a===On.ELEMENT_TYPES.PRODUCT&&r&&!n.includes(r?.productId)&&(t.push(r),n.push(r?.productId))}))})),t};const fa=function(e){let{story:t,pages:n,metadata:r,flags:a}=e;const{terms:o,...l}=Wn(t,["title","status","author","date","modified","slug","excerpt","featuredMedia","password","currentStoryStyles","globalStoryStyles","autoAdvance","defaultPageDuration","backgroundAudio","terms"]),i=ma(n);return{content:pa(t,n,r,a),pages:n,...l,...o,meta:{web_stories_publisher_logo:t.publisherLogo?.id,web_stories_products:i}}},ga={400:(0,d._x)("Bad Request","HTTP status description","web-stories"),401:(0,d._x)("Unauthorized","HTTP status description","web-stories"),403:(0,d._x)("Forbidden","HTTP status description","web-stories"),500:(0,d._x)("Internal Server Error","HTTP status description","web-stories")};const ha=function(e){let{storyId:t,pages:n,story:r,updateStory:a}=e;const{actions:{saveStoryById:o}}=W(),{actions:{resetNewChanges:l}}=Cr(),{metadata:i,flags:s}=U(),{showSnackbar:c}=(0,kr.useSnackbar)(),[p,m]=(0,u.useState)(!1),[f,g]=(0,u.useState)(!1),[h,b]=(0,u.useState)(!1),{editLink:E}=r,y=Pr(t,E),_=(0,u.useCallback)((e=>{m(!0);const u=["publish","future","private"].includes(r.status),p="pending"===r.status,f=(0,P.getTimeTracker)("load_save_story");return Promise.resolve().then((()=>o({storyId:t,...fa({story:r,pages:n,metadata:i,flags:s}),...e}))).then((e=>{const{status:t,slug:n,link:r,previewLink:o,editLink:l,embedPostLink:i,featuredMedia:s}=e;a({properties:{status:t,slug:n,link:r,previewLink:o,editLink:l,embedPostLink:i,featuredMedia:s}}),y();const c=["publish","future","private"].includes(e.status),d="pending"===e.status;g(!u&&c),b(!p&&d)})).catch((e=>{const t=e.message?(0,Or.stripHTML)(e.message):null;let n=(0,d.__)("Failed to save the story","web-stories");t&&(n=(0,We.default)(
/* translators: %s: error message */
(0,d.__)("Failed to save the story: %s","web-stories"),t)),Object.prototype.hasOwnProperty.call(ga,e?.data?.status)&&(n=t?(0,We.default)(
/* translators: 1: error message. 2: status code */
(0,d.__)("Failed to save the story: %1$s (%2$s)","web-stories"),t,ga[e?.data?.status]):(0,We.default)(
/* translators: %s: error message */
(0,d.__)("Failed to save the story: %s","web-stories"),ga[e?.data?.status])),console.log((0,d.__)("Failed to save the story","web-stories"),e),(0,P.trackError)("save_story",t),c({message:n,dismissible:!0})})).finally((()=>{m(!1),l(),f()}))}),[r,n,i,o,t,a,y,c,l,s]);return{saveStory:_,isSaving:p,isFreshlyPublished:f,isFreshlyPending:h}};function ba(e){return new URLSearchParams(e.startsWith("#")?e.substr(1):e)}const Ea=function(e,t){const[n,r]=(0,u.useState)((()=>{const n=ba(window.location.hash);let r=t;try{n.has(e)&&(r=JSON.parse(decodeURI(n.get(e))))}catch(e){}return r}));return(0,u.useEffect)((()=>{const t=ba(window.location.hash);n?t.set(e,encodeURI(JSON.stringify(n))):t.delete(e),(window.location.hash||t.toString())&&history.replaceState(history.state,"",`#${t.toString()}`)}),[e,n]),[n,r]};var ya=n(30738),_a=n.n(ya);const va=function(e){return t=>{Array.isArray(e)&&e.forEach((e=>{const n=e.split(".");if(!n.length)return;if(1===n.length)return void delete t[n[0]];const r=n.pop(),a=n.pop(),o=n.reduce(((e,t)=>e?.[t]||e),t);Object.prototype.hasOwnProperty.call(o,a)&&"object"==typeof o[a]&&o[a]&&delete o[a][r]}))}};const wa=function(e){return e.some((e=>e.elements.some((e=>(0,q.isBlobURL)(e?.resource?.src)||(0,q.isBlobURL)(e?.resource?.poster)))))},Ta=["resource.baseColor","resource.blurHash","resource.id","resource.isMuted","resource.posterId","resource.poster","resource.font.metrics","resource.font.weights","resource.font.variants","resource.font.fallbacks","resource.font.styles","resource.isOptimized","resource.length","resource.lengthFormatted","resource.trimData.original","resource.trimData.start","resource.trimData.end","resource.creationDate"];const Sa=function(e){let{story:t,current:n,pages:r,selection:a,capabilities:o}=e;const{state:{currentEntry:l},actions:{stateToHistory:i}}=Cr(),s=(0,u.useRef)();(0,u.useEffect)((()=>{l&&(s.current=_a()(l))}),[l]);const c=(0,u.useRef)(),d=(0,u.useRef)();(0,u.useEffect)((()=>{c.current=n,d.current=a}),[n,a]);const p=e=>_a()(e).map((e=>(e.elements.forEach(va(Ta)),e)));(0,u.useEffect)((()=>{let e=!1;if(Ta.length&&s.current&&r?.length){const n={story:t,capabilities:o};if(Object.keys(n).every((e=>JSON.stringify(n[e])===JSON.stringify(s.current[e])))){const t=p(r),n=p(s.current.pages);e=JSON.stringify(t)===JSON.stringify(n)}wa(r)&&(e=!0)}e||i({story:t,current:c.current,selection:d.current,pages:r,capabilities:o})}),[t,r,i,o])};const Ca=function(e){let{restore:t}=e;const{state:{requestedState:n}}=Cr();(0,u.useEffect)((()=>{if(!n)return;const{current:e,pages:r,selection:a,story:o,capabilities:l}=n;t({pages:r,current:e,story:o,selection:a,capabilities:l})}),[t,n])},Ia={addPage:e=>t=>{let{page:n}=t;return e({type:Ft,payload:{page:n,position:null}})},addPageAt:e=>t=>{let{page:n,position:r}=t;return e({type:Ft,payload:{page:n,position:r}})},copySelectedElement:e=>()=>e({type:Qt}),deletePage:e=>t=>{let{pageId:n}=t;return e({type:Ut,payload:{pageId:n}})},deleteCurrentPage:e=>()=>e({type:Ut,payload:{pageId:null}}),updatePageProperties:e=>t=>{let{pageId:n,properties:r}=t;return e({type:Ht,payload:{pageId:n,properties:r}})},updateCurrentPageProperties:e=>t=>{let{properties:n}=t;return e({type:Ht,payload:{pageId:null,properties:n}})},arrangePage:e=>t=>{let{pageId:n,position:r}=t;return e({type:jt,payload:{pageId:n,position:r}})},setCurrentPage:e=>t=>{let{pageId:n}=t;return e({type:en,payload:{pageId:n}})},addElements:e=>t=>{let{elements:n}=t;return e({type:Gt,payload:{elements:n}})},addElement:e=>t=>{let{element:n}=t;return e({type:Gt,payload:{elements:[n]}})},deleteElementsById:e=>t=>{let{elementIds:n}=t;return e({type:zt,payload:{elementIds:n}})},deleteElementById:e=>t=>{let{elementId:n}=t;return e({type:zt,payload:{elementIds:[n]}})},deleteSelectedElements:e=>()=>e({type:zt,payload:{elementIds:null}}),updateElementsById:e=>t=>{let{elementIds:n,properties:r}=t;return e({type:Yt,payload:{elementIds:n,properties:r}})},updateElementsByResourceId:e=>t=>{let{id:n,properties:r}=t;return e({type:Zt,payload:{id:n,properties:r}})},deleteElementsByResourceId:e=>t=>{let{id:n}=t;return e({type:Wt,payload:{id:n}})},updateElementById:e=>t=>{let{elementId:n,properties:r}=t;return e({type:Yt,payload:{elementIds:[n],properties:r}})},duplicateElementsById:e=>t=>{let{elementIds:n}=t;return e({type:Xt,payload:{elementIds:n}})},updateSelectedElements:e=>t=>{let{properties:n}=t;return e({type:Yt,payload:{elementIds:null,properties:n}})},combineElements:e=>t=>{let{firstElement:n,secondId:r,shouldRetainAnimations:a}=t;return e({type:Kt,payload:{firstElement:n,secondId:r,shouldRetainAnimations:a}})},setBackgroundElement:e=>t=>{let{elementId:n}=t;return e({type:Vt,payload:{elementId:n}})},clearBackgroundElement:e=>()=>e({type:Vt,payload:{elementId:null}}),arrangeElement:e=>t=>{let{elementId:n,position:r,groupId:a}=t;return e({type:$t,payload:{elementId:n,position:r,groupId:a}})},arrangeGroup:e=>t=>{let{groupId:n,position:r}=t;return e({type:qt,payload:{groupId:n,position:r}})},arrangeSelection:e=>t=>{let{position:n}=t;return e({type:$t,payload:{elementId:null,position:n}})},setSelectedElementsById:e=>t=>{let{elementIds:n,withLinked:r}=t;return e({type:tn,payload:{elementIds:n,withLinked:r}})},clearSelection:e=>()=>e({type:tn,payload:{elementIds:[]}}),addElementToSelection:e=>t=>{let{elementId:n}=t;return e({type:nn,payload:{elementId:n}})},removeElementFromSelection:e=>t=>{let{elementId:n}=t;return e({type:rn,payload:{elementId:n}})},toggleElementInSelection:e=>t=>{let{elementId:n,withLinked:r}=t;return e({type:an,payload:{elementId:n,withLinked:r}})},updateAnimationState:e=>t=>{let{animationState:n}=t;return e({type:sn,payload:{animationState:n}})},addAnimations:e=>t=>{let{animations:n}=t;return e({type:cn,payload:{animations:n}})},updateStory:e=>t=>{let{properties:n}=t;return e({type:ln,payload:{properties:n}})},toggleLayer:e=>t=>{let{metaKey:n,shiftKey:r,elementId:a,withLinked:o}=t;return e({type:on,payload:{metaKey:n,shiftKey:r,elementId:a,withLinked:o}})},updateElementsByFontFamily:e=>t=>{let{family:n,properties:r}=t;return e({type:Jt,payload:{family:n,properties:r}})},addGroup:e=>t=>{let{groupId:n,name:r}=t;return e({type:mn,payload:{groupId:n,name:r}})},updateGroupById:e=>t=>{let{groupId:n,properties:r}=t;return e({type:fn,payload:{groupId:n,properties:r}})},deleteGroupById:e=>t=>{let{groupId:n}=t;return e({type:gn,payload:{groupId:n}})},deleteGroupAndElementsById:e=>t=>{let{groupId:n}=t;return e({type:gn,payload:{groupId:n,includeElements:!0}})},duplicateGroupById:e=>t=>{let{groupId:n,name:r,oldGroupId:a,isLocked:o}=t;return e({type:hn,payload:{groupId:n,name:r,oldGroupId:a,isLocked:o}})}},xa={restore:e=>t=>{let{pages:n,selection:r,current:a,story:o,capabilities:l}=t;return e({type:dn,payload:{pages:n,selection:r,current:a,story:o,capabilities:l}})}};const Aa=function(e,t){let{type:n,payload:r}=t;switch(n){case Ft:return In(e,r);case Ut:return xn(e,r);case Ht:return An(e,r);case jt:return kn(e,r);case en:return Qn(e,r);case Gt:return Pn(e,r);case zt:return Nn(e,r);case Yt:return Mn(e,r);case Zt:return Ln(e,r);case Wt:return Dn(e,r);case Kt:return Vn(e,r);case Vt:return Bn(e,r);case $t:return Fn(e,r);case qt:return Hn(e,r);case tn:return Jn(e,r);case nn:return er(e,r);case rn:return tr(e,r);case an:return nr(e,r);case on:return rr(e,r);case Xt:return $n(e,r);case ln:return ir(e,r);case sn:return ar(e,r);case cn:return or(e,r);case Qt:return Kn(e,r);case dn:return lr(e,r);case Jt:return Xn(e,r);case mn:return sr(e,r);case fn:return cr(e,r);case gn:return dr(e,r);case hn:return ur(e,r);default:return e}},ka={pages:[],capabilities:{},current:null,selection:[],story:{},animationState:Rn.STORY_ANIMATION_STATE.RESET,copiedElementState:{}};function Oa(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){!Object.prototype.hasOwnProperty.call(e,t)||null===e[t]||"object"!=typeof e[t]&&"function"!=typeof e[t]||Object.isFrozen(e[t])||Oa(e[t])})),e}const Pa=function(e){const[t,n]=(0,u.useReducer)(Aa,{...ka,...e}),{internal:r,api:a}=(0,u.useMemo)((()=>{const e=e=>Object.keys(e).reduce(((t,r)=>({...t,[r]:e[r](n)})),{});return{internal:e(xa),api:e(Ia)}}),[n]);return{state:Oa(t),internal:r,api:a}};const Na=function(e){let{storyId:t,pages:n,story:r}=e;const{actions:{autoSaveById:a}}=W(),{metadata:o,flags:l}=U(),[i,s]=(0,u.useState)(!1);return{autoSave:(0,u.useCallback)((e=>(s(!0),a({storyId:t,...fa({story:r,pages:n,metadata:o,flags:l}),...e}).finally((()=>s(!1))))),[r,n,o,a,t,l]),isAutoSaving:i}};var Ra=n(45697),Ma=n.n(Ra);const La={onInitialElementAdded:"onInitialElementAdded",onSecondPageAdded:"onSecondPageAdded",onFifthPageAdded:"onFifthPageAdded",onReplaceBackgroundMedia:"onReplaceBackgroundMedia",onReplaceForegroundMedia:"onReplaceForegroundMedia"};function OnInitialElementAddedRegister(e){let{currentStory:t,dispatchStoryEvent:n}=e;const r=(0,u.useRef)(!1);return(0,u.useEffect)((()=>{var e;r.current||(0===(e=t)?.pages?.length||1===e?.pages?.length&&e?.pages[0]?.elements?.length<=1)||(n(La.onInitialElementAdded),r.current=!0)}),[n,t]),null}function OnPageAddedRegister(e){let{currentStory:t,dispatchStoryEvent:n}=e;const r=(0,u.useRef)({[La.onSecondPageAdded]:!1,[La.onFifthPageAdded]:!1});return(0,u.useEffect)((()=>{!r.current[La.onSecondPageAdded]&&t?.pages?.length>=2&&(n(La.onSecondPageAdded),r.current[La.onSecondPageAdded]=!0)}),[n,t?.pages]),(0,u.useEffect)((()=>{!r.current[La.onFifthPageAdded]&&t?.pages?.length>=5&&(n(La.onFifthPageAdded),r.current[La.onFifthPageAdded]=!0)}),[n,t?.pages]),null}OnInitialElementAddedRegister.propTypes={currentStory:Ma().shape({story:Ma().shape({pages:Ma().arrayOf(Ma().shape({elements:Ma().arrayOf(Ma().shape(On.StoryPropTypes.element))}))})}),prevStory:Ma().shape({story:Ma().shape({pages:Ma().arrayOf(Ma().shape({elements:Ma().arrayOf(Ma().shape(On.StoryPropTypes.element))}))})}),dispatchStoryEvent:Ma().func.isRequired},OnPageAddedRegister.propTypes={currentStory:Ma().shape({pages:Ma().array}),prevStory:Ma().shape({pages:Ma().array}),dispatchStoryEvent:Ma().func.isRequired};const Da=[OnInitialElementAddedRegister,OnPageAddedRegister],Ba=(0,u.createContext)({state:{},actions:{}});function Fa(){return Object.values(La).reduce(((e,t)=>({...e,[t]:new Map})),{})}function Ha(e,t){let[n]=e;return[t,n]}function StoryTriggersProvider(e){let{children:t,story:n}=e;const[[r,a],o]=(0,u.useReducer)(Ha,[n,null]),l=(0,u.useMemo)(Fa,[]);(0,u.useEffect)((()=>o(n)),[n]);const i=(0,u.useCallback)(((e,t)=>{const n=Symbol();return l[e].set(n,t),()=>l[e].delete(n)}),[l]),s=(0,u.useCallback)((e=>{l[e]?.forEach((e=>e(r)))}),[l,r]),d=(0,u.useMemo)((()=>[i,s]),[i,s]);return c.createElement(Ba.Provider,{value:d},c.createElement(c.Fragment,null,Da.map((e=>c.createElement(e,{key:e.name,currentStory:r,previousStory:a,dispatchStoryEvent:s}))),t))}function Ua(e){return e[0]}function ja(e){return e[1]}function za(e,t){const n=(0,u.useContextSelector)(Ba,Ua);(0,u.useEffect)((()=>n(e,t)),[e,t,n])}const Ga=function StoryProvider(e){let{storyId:t,initialEdits:n,children:r}=e;const[a,o]=Ea("page",null),{state:l,api:i,internal:{restore:s}}=Pa({current:a}),{pages:d,current:p,selection:m,story:f,animationState:g,capabilities:h,copiedElementState:b}=l;(0,u.useEffect)((()=>o(p)),[p,o]);let E=null,y=null,_=null,v=null;p&&(E=p,y=d.findIndex((e=>{let{id:t}=e;return t===p})),_=y+1,v=d[y]);const w=(0,u.useMemo)((()=>m.length>0?m:Ue),[m]),T=!v,S=v?.elements,C=(0,u.useMemo)((()=>{if(T)return Ue;const e=S.filter((e=>{let{id:t}=e;return m.includes(t)}));return e.length>0?e:Ue}),[T,S,m]),I=v?.animations,x=(0,u.useMemo)((()=>{if(T)return Ue;const e=(I||[]).reduce(((e,t)=>{let{targets:n,...r}=t;return n.some((e=>m.includes(e)))?[...e,{targets:n,...r}]:e}),[]);return e.length>0?e:Ue}),[T,m,I]),A=C.length>0,k=0===d.length;Ar({restore:s,shouldLoad:k,storyId:t,story:n?.story}),Sa({pages:d,current:p,selection:m,story:f,capabilities:h}),Ca({restore:s});const{updateStory:O}=i,{saveStory:P,isSaving:N,isFreshlyPublished:R,isFreshlyPending:M}=ha({storyId:t,pages:d,story:f,updateStory:O}),{autoSave:L,isAutoSaving:D}=Na({storyId:t,pages:d,story:f}),B=(0,u.useMemo)((()=>({pages:d,currentPage:v,currentPageId:E,currentPageIndex:y,currentPageNumber:_,selectedElementIds:w,selectedElements:C,selectedElementAnimations:x,hasSelection:A,story:f,animationState:g,capabilities:h,meta:{isSaving:N||D,isSavingStory:N,isAutoSavingStory:D,isFreshlyPublished:R,isFreshlyPending:M},copiedElementState:b})),[d,v,E,y,_,w,C,x,A,f,g,h,N,D,R,M,b]),F={state:B,actions:{...i,autoSave:L,saveStory:P},internal:{reducerState:l,restore:s}};return c.createElement(pr.Provider,{value:F},c.createElement(StoryTriggersProvider,{story:B},r))};const Ya=function(e){return(0,u.useContextSelector)(pr,e??u.identity)};const Za=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n}}=W(),{actions:{uploadFile:r}}=Mt(),{storyId:a}=U(),{updateElementsByResourceId:o}=Ya((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),l=(0,u.useCallback)((async(e,t,o)=>{if(!o)return{};o.name||(o.name=t);const l=await r(o,{mediaId:e,mediaSource:"poster-generation"}),{id:i,src:s,width:c,height:d}=l;e&&await n(e,{posterId:i,storyId:a});try{await(0,K.default)({src:s})}catch{}return{posterId:i,poster:s,posterWidth:c,posterHeight:d}}),[a,n,r]),i=(0,u.useCallback)((async(e,n)=>{const r=(0,P.getTimeTracker)("load_video_poster");try{const a=Dt(n),i=je(a),s=await Bt(n),{posterId:c,poster:d,posterWidth:u,posterHeight:p}=await l(e,i,s),m=u&&p&&{width:u,height:p}||null;o({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,posterId:c,poster:d,...m}}}}),t({id:e,data:{posterId:c,poster:d,...m}})}catch(e){(0,P.trackError)("video_poster_generation",e.message)}finally{r()}}),[l,o,t]);return{uploadVideoFrame:i,uploadVideoPoster:l}},Wa=(0,u.createContext)({state:{},actions:{}});const Va=function CurrentUserProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),{actions:{getCurrentUser:a,updateCurrentUser:o}}=W();(0,u.useEffect)((()=>{let e=!0;return a&&!Object.keys(n).length&&a().then((t=>{e&&r(t)})),()=>{e=!1}}),[n,a]);const l=(0,u.useCallback)((e=>o?o(e).then(r):null),[o]),i=(0,u.useCallback)((()=>l({mediaOptimization:!n.mediaOptimization})),[n,l]),s={state:{currentUser:n},actions:{toggleWebStoriesMediaOptimization:i,updateCurrentUser:l}};return c.createElement(Wa.Provider,{value:s},t)};const $a=function(e){return(0,u.useContextSelector)(Wa,e??u.identity)},qa=["video/3gpp","video/3gpp2","video/MP2T","video/mp4","video/mpeg","video/ogg","video/quicktime","video/webm","video/x-flv","video/x-h261","video/x-h263","video/x-m4v","video/x-matroska","video/x-mjpeg","video/x-ms-asf","video/x-msvideo","video/x-nut"],Ka=e=>{let{size:t}=e;return t>=fe},Xa={CODEC:["-vcodec","libx264"],SCALE:["-vf",`scale='min(${_e},iw)':'min(${ye},ih)':'force_original_aspect_ratio=decrease',pad='width=ceil(iw/2)*2:height=ceil(ih/2)*2'`],FPS:["-r","24"],FASTSTART:["-movflags","+faststart"],COLOR_PROFILE:["-pix_fmt","yuv420p"],PRESET:["-preset","fast"],SEEK_TO_START:["-ss","00:00:01.000"],SINGLE_FRAME:["-frames:v","1"]},Qa=[...Xa.CODEC,...Xa.SCALE,...Xa.FPS,...Xa.FASTSTART,...Xa.COLOR_PROFILE,...Xa.PRESET];const Ja=function(){const{ffmpegCoreUrl:e,capabilities:{hasUploadMediaAction:t}}=U(),{currentUser:r}=$a((e=>{let{state:t}=e;return{currentUser:t.currentUser}})),a=Boolean(window?.crossOriginIsolated),o=(0,u.useCallback)((async t=>{const{createFFmpeg:r,fetchFile:a}=await n.e(7098).then(n.t.bind(n,15045,23)),o=r({corePath:e,log:false});return await o.load(),o.FS("writeFile",t.name,await a(t)),o}),[e]),l=(0,u.useCallback)((async e=>{const t=(0,P.getTimeTracker)("load_video_poster_ffmpeg");let n;try{n=await o(e);const r=(0,pe.default)()+"."+ge,a=V(e),l=je(a);await n.run(...Xa.SEEK_TO_START,"-i",e.name,...Xa.SINGLE_FRAME,...Xa.SCALE,...Xa.COLOR_PROFILE,...Xa.PRESET,r);const i=n.FS("readFile",r);return ce(new Blob([i.buffer],{type:he}),l,he)}catch(e){throw console.error(e),(0,P.trackError)("video_poster_generation_ffmpeg",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),i=(0,u.useCallback)((async e=>{const t=(0,P.getTimeTracker)("load_video_transcoding");let n;try{n=await o(e);const r=(0,pe.default)()+"."+Ee,a=V(e)+"."+Ee;await n.run("-i",e.name,...Qa,r);const l=n.FS("readFile",r);return ce(new Blob([l.buffer],{type:be}),a,be)}catch(e){throw console.error(e),(0,P.trackError)("video_transcoding",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),s=(0,u.useCallback)((async(e,t,n)=>{const r=(0,P.getTimeTracker)("load_trim_video_transcoding");let a;try{a=await o(e);const l=e?.type||be,i=Ot(l),s=(0,pe.default)()+"."+i,c=V(e)+"-trimmed."+i;await a.run("-i",e.name,"-ss",t,"-to",n,s);const d=a.FS("readFile",s);return ce(new Blob([d.buffer],{type:l}),c,l)}catch(e){throw console.log(e),(0,P.trackError)("trim_video_transcoding",e.message),e}finally{try{a.exit()}catch{}r()}}),[o]),c=(0,u.useCallback)((async e=>{const t=(0,P.getTimeTracker)("load_mute_video_transcoding");let n;try{n=await o(e);const r=e?.type||be,a=Ot(r),l=(0,pe.default)()+"."+a,i=V(e)+"-muted."+a;await n.run("-i",e.name,"-vcodec","copy","-an",l);const s=n.FS("readFile",l);return ce(new Blob([s.buffer],{type:r}),i,r)}catch(e){throw console.log(e),(0,P.trackError)("mute_video_transcoding",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),d=(0,u.useCallback)((async e=>{const t=(0,P.getTimeTracker)("load_gif_conversion");let n;try{n=await o(e);const r=(0,pe.default)()+"."+Ee,a=V(e)+"."+Ee;await n.run("-i",e.name,...Qa,r);const l=n.FS("readFile",r);return new ce(new Blob([l.buffer],{type:be}),a,be)}catch(e){throw console.error(e),(0,P.trackError)("gif_conversion",e.message),e}finally{try{n.exit()}catch(e){}t()}}),[o]),p=(0,u.useCallback)((e=>qa.includes(e.type)),[]),m=Boolean(r?.mediaOptimization),f=t&&m&&a;return(0,u.useMemo)((()=>({isTranscodingEnabled:f,canTranscodeFile:p,isFileTooLarge:Ka,transcodeVideo:i,stripAudioFromVideo:c,getFirstFrameOfVideo:l,convertGifToVideo:d,trimVideo:s})),[f,p,i,c,l,d,s])},eo={PENDING:"PENDING",CANCELLED:"CANCELLED",UPLOADED:"UPLOADED",UPLOADING:"UPLOADING",TRANSCODED:"TRANSCODED",TRANSCODING:"TRANSCODING",MUTING:"MUTING",MUTED:"MUTED",TRIMMING:"TRIMMING",TRIMMED:"TRIMMED",FINISHED:"FINISHED"};function to(e,t){let{payload:{file:n,resource:r,onUploadStart:a,onUploadProgress:o,onUploadError:l,onUploadSuccess:i,additionalData:s,posterFile:c,muteVideo:d,trimData:u,originalResourceId:p,elementId:m}}=t;const f=(0,pe.default)();r.id||(r.id=(0,pe.default)());const g={id:f,file:n,state:eo.PENDING,resource:r,onUploadStart:a,onUploadProgress:o,onUploadError:l,onUploadSuccess:i,additionalData:s,posterFile:c,muteVideo:d,trimData:u,originalResourceId:p,elementId:m};return{...e,queue:[...e.queue,g]}}function no(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:eo.UPLOADING}:e))}}function ro(e,t){let{payload:{id:n,resource:r}}=t;const a=e.queue.find((e=>e.id===n));return a?(a.resource.src&&a.resource.src!==r.src&&(0,q.revokeBlob)(a.resource.src),r.poster&&a.resource.poster&&a.resource.poster!==r.poster&&(0,q.revokeBlob)(a.resource.poster),{...e,queue:e.queue.map((e=>e.id===n?{...e,resource:{...r,poster:r.poster||e.resource.poster},previousResourceId:e.resource.id,posterFile:null,originalResourceId:null,state:eo.UPLOADED}:e))}):e}function ao(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:eo.CANCELLED}:e))}}function oo(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:eo.TRANSCODING}:e))}}function lo(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:eo.TRANSCODED,resource:{...e.resource,isOptimized:!0},additionalData:{...e.additionalData,...a}}:e))}}function io(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:eo.MUTING}:e))}}function so(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:eo.MUTED,resource:{...e.resource,isMuted:!0},additionalData:{...e.additionalData,...a}}:e))}}function co(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:eo.TRIMMING}:e))}}function uo(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:eo.TRIMMED,additionalData:{...e.additionalData,...a}}:e))}}function po(e,t){let{payload:{id:n,resource:r,posterFile:a}}=t;const o=e.queue.find((e=>e.id===n));return o&&o.resource.isPlaceholder?(o.resource.src!==r.src&&((0,q.revokeBlob)(o.resource.src),(0,q.revokeBlob)(o.resource.poster)),{...e,queue:e.queue.map((e=>e.id===n?{...e,resource:{...r,id:e.resource.id,isPlaceholder:!1},posterFile:a}:e))}):e}function mo(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:eo.FINISHED}:e))}}function fo(e,t){let{payload:{id:n}}=t;const r=e.queue.filter((e=>e.id!==n));return{...e,queue:r}}const go={queue:[]};const ho=function(){const{actions:{uploadFile:e}}=Mt(),{isTranscodingEnabled:t,canTranscodeFile:n,transcodeVideo:a,stripAudioFromVideo:o,getFirstFrameOfVideo:l,convertGifToVideo:i,trimVideo:s}=Ja(),[c,d]=(0,u.useReduction)(go,r),{uploadVideoPoster:p}=Za({updateMediaElement:Lt}),m=(0,u.useRef)(!1),f=(0,u.useRef)(null),g=(0,u.useRef)(null),{startUploading:h,finishUploading:b,cancelUploading:E,startTranscoding:y,startMuting:_,startTrimming:v,finishTranscoding:w,finishMuting:T,finishTrimming:S,replacePlaceholderResource:C}=d;(0,u.useEffect)((()=>{(async()=>{await Promise.all(c.queue.map((async e=>{const{id:t,file:n,state:r,resource:a}=e;if([eo.TRIMMED,eo.MUTED,eo.TRANSCODED].includes(r)&&a.isPlaceholder&&!a.poster)try{const{resource:e,posterFile:r}=await Ge(n);if(!m.current)return;C({id:t,resource:e,posterFile:r})}catch{}})))})()}),[c.queue,C]),(0,u.useEffect)((()=>{(async()=>{await Promise.all(c.queue.map((async e=>{const{id:r,file:a,state:o,resource:i}=e;if(eo.PENDING!==o||!i.isPlaceholder)return;if(!t||!n(a))return;if(!(null!==g.current)){g.current=r;try{const e=await l(a),t=(0,q.createBlob)(e),{width:n,height:o}=await X(t),s={...i,poster:t,width:n,height:o};if(!m.current)return;C({id:r,resource:s,posterFile:e})}catch{}finally{g.current=null}}})))})()}),[c.queue,t,n,l,C]);const I=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;y({id:t});try{const e=await i(n);if(!m.current)return;r.mediaSource="gif-conversion",r.isMuted=!0,w({id:t,file:e,additionalData:r})}catch(e){E({id:t,error:e}),(0,P.trackError)("upload_media",e?.message)}finally{f.current=null}}),[y,w,i,E]),x=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={},trimData:a}=e;v({id:t});try{const e=await s(n,a.start,a.end);if(!m.current)return;r.meta={...r.meta,trimData:a},S({id:t,file:e,additionalData:r})}catch(e){E({id:t,error:e}),(0,P.trackError)("upload_media",e?.message)}finally{f.current=null}}),[v,S,s,E]),A=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;_({id:t});try{const e=await o(n);if(!m.current)return;r.isMuted=!0,T({id:t,file:e,additionalData:r})}catch(e){E({id:t,error:e}),(0,P.trackError)("upload_media",e?.message)}finally{f.current=null}}),[_,T,o,E]),k=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;y({id:t});try{const e=await a(n);if(!m.current)return;r.mediaSource="video-optimization",w({id:t,file:e,additionalData:r})}catch(e){E({id:t,error:e}),(0,P.trackError)("upload_media",e?.message)}finally{f.current=null}}),[y,w,a,E]),O=(0,u.useCallback)((async t=>{const{id:n,file:r,resource:a,additionalData:o={}}=t;let{posterFile:i}=t,s=await e(r,o);if(m.current){if(!a.poster&&!i)try{i=await l(r)}catch{}try{const e=V(i),{poster:t,posterId:n}=await p(s.id,e,i);if(!m.current)return;s={...s,poster:t||s.poster||a.poster,posterId:n}}catch{}b({id:n,resource:s})}}),[b,l,e,p]),N=(0,u.useCallback)((async t=>{const{id:n,file:r,additionalData:a={}}=t,o=await e(r,a);m.current&&b({id:n,resource:o})}),[b,e]),R=(0,u.useCallback)((async e=>{const{id:t,file:n,resource:r}=e;h({id:t}),(0,P.trackEvent)("upload_media",{file_size:n?.size,file_type:n?.type});const a=(0,P.getTimeTracker)("load_upload_media");try{["video","gif"].includes(r.type)?await O(e):await N(e)}catch(e){E({id:t,error:e}),(0,P.trackError)("upload_media",e?.message)}finally{a()}}),[h,E,N,O]);return(0,u.useEffect)((()=>{(async()=>{await Promise.all(c.queue.map((async e=>{const{id:r,file:a,state:o,resource:l,additionalData:i={},muteVideo:s,trimData:c}=e;if(eo.PENDING!==o)return;"video"===l.type&&null!==l.isMuted&&void 0===i?.isMuted&&(i.isMuted=l.isMuted),l?.baseColor&&(i.meta={...i.meta,baseColor:l.baseColor}),l?.blurHash&&!l?.trimData&&(i.meta={...i.meta,blurHash:l.blurHash});const d="image/gif"===l.mimeType&&It(await a.arrayBuffer()),u=t&&(d||n(a)),p=null!==f.current;if(!u||!p){if(t){if(d)return f.current=r,void I(e);if(n(a))return f.current=r,c?void x(e):s?void A(e):void k(e)}R(e)}})))})()}),[c.queue,t,n,I,x,A,k,R]),(0,u.useEffect)((()=>{c.queue.map((e=>{const{state:t}=e;[eo.TRANSCODED,eo.MUTED,eo.TRIMMED].includes(t)&&R(e)}))}),[c.queue,R]),(0,u.useEffect)((()=>(m.current=!0,()=>{m.current=!1})),[]),(0,u.useMemo)((()=>{const e=c.queue.filter((e=>![eo.PENDING,eo.CANCELLED,eo.UPLOADED,eo.FINISHED].includes(e.state))),t=c.queue.filter((e=>e.state===eo.PENDING)),n=c.queue.filter((e=>e.state===eo.UPLOADED)),r=c.queue.filter((e=>e.state===eo.FINISHED)),a=c.queue.filter((e=>e.state===eo.CANCELLED)),o=c.queue.some((e=>![eo.FINISHED,eo.CANCELLED,eo.PENDING].includes(e.state))),l=c.queue.some((e=>e.state===eo.TRANSCODING)),i=c.queue.some((e=>e.state===eo.MUTING)),s=c.queue.some((e=>e.state===eo.TRIMMING));return{state:{progress:e,pending:t,uploaded:n,failures:a,finished:r,isUploading:o,isTranscoding:l,isMuting:i,isTrimming:s,isCurrentResourceMuting:e=>c.queue.some((t=>t.state===eo.MUTING&&t.resource.id===e)),isCurrentResourceProcessing:e=>c.queue.some((t=>[eo.TRANSCODING,eo.TRIMMING,eo.MUTING].includes(t.state)&&t.resource.id===e)),isCurrentResourceUploading:e=>c.queue.some((t=>[eo.PENDING,eo.UPLOADING,eo.UPLOADED,eo.FINISHED].includes(t.state)&&(t.resource.id===e||t.previousResourceId===e))),isCurrentResourceTranscoding:e=>c.queue.some((t=>t.state===eo.TRANSCODING&&t.resource.id===e)),isCurrentResourceTrimming:e=>c.queue.some((t=>t.state===eo.TRIMMING&&t.resource.id===e)),isNewResourceMuting:e=>c.queue.some((t=>t.state===eo.MUTING&&t.originalResourceId===e)),isNewResourceProcessing:e=>c.queue.some((t=>[eo.TRANSCODING,eo.TRIMMING,eo.MUTING].includes(t.state)&&t.originalResourceId===e)),isNewResourceTranscoding:e=>c.queue.some((t=>t.state===eo.TRANSCODING&&t.originalResourceId===e)),isElementTrimming:e=>c.queue.some((t=>t.state===eo.TRIMMING&&t.elementId===e)),canTranscodeResource:e=>{const{isExternal:t,id:n,src:r}=e||{};return!t&&r&&!c.queue.some((e=>e.resource.id===n||e.previousResourceId===n||e.originalResourceId===n))}},actions:{addItem:d.addItem,removeItem:d.removeItem,finishItem:d.finishItem}}}),[c,d])},bo="/v1/media",Eo="/v1/categories",yo="/v1/media:registerUsage",_o={RELEVANCE:"relevance",LATEST:"latest"},vo={TRENDING:"trending"};function wo(e,t){if(!(null==t||Object.values(e).indexOf(t.toLowerCase())>-1))throw new Error("Invalid order_by: "+t)}function To(e){if(!(null==e||e>0))throw new Error("Invalid page_size: "+e)}const So=new class ApiFetcher{async listMedia(){let{languageCode:e=null,filter:t=null,orderBy:n=null,pageSize:r=null,pageToken:a=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await function(e){wo(_o,e)}(n),await To(r);const o=new URLSearchParams([["language_code",e],["filter",t],["order_by",n],["page_size",r],["page_token",a]].filter((e=>Boolean(e[1]))));return this.fetchPath({params:o,path:bo})}async listCategories(){let{filter:e=null,orderBy:t=null,pageSize:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await function(e){wo(vo,e)}(t),await To(n);const r=new URLSearchParams([["filter",e],["order_by",t],["page_size",n]].filter((e=>Boolean(e[1]))));return this.fetchPath({params:r,path:Eo})}async registerUsage(e){let{registerUsageUrl:t}=e;await function(e){if(!e||!e.includes(yo))throw new Error("Invalid url: "+e)}(t),await this.fetchUrl({url:new URL(t),method:"POST"})}fetchPath(e){let{path:t,params:n,method:r}=e;const a=new URL("https://media3p.googleapis.com"+t);return n.forEach(((e,t)=>{a.searchParams.append(t,e)})),this.fetchUrl({url:a,method:r})}async fetchUrl(e){let{url:t,method:n}=e;t.searchParams.append("key","AIzaSyDqgPsZ0VnxAuakmX7bjnzmNQsE7Drlvk0");const r=await window.fetch(t.href,{method:n??"GET"});if(!r.ok)throw new Error("Obtained an error from the "+t.pathname+" call, statusCode: "+r.status+", statusText: "+r.statusText);return r.json()}},Co=(0,u.createContext)({actions:{}});const Io=function Media3pApiProvider(e){let{children:t}=e;function n(e){let{provider:t,contentType:n,searchTerm:r,categoryId:a}=e;if(!Object.keys(Et).includes(t))throw new Error(`Unsupported provider: ${t}`);if(a&&r)throw new Error("searchTerm and categoryId are mutually exclusive.");return[`provider:${t}`,n&&`type:${n}`,a&&`category:${a}`,r].filter(Boolean).join(" ")}const r={actions:{listMedia:async function(e){let{provider:t,filter:r,orderBy:a,pageToken:o}=e;const{contentType:l,searchTerm:i,categoryId:s}=r??{},c=await So.listMedia({filter:n({provider:t,contentType:l,searchTerm:i,categoryId:s}),orderBy:a,pageSize:20,pageToken:o});return{media:(c.media||[]).map(Ct),nextPageToken:c.nextPageToken}},listCategories:async function(e){let{provider:t,orderBy:r}=e;const a=n({provider:t});return{categories:(await So.listCategories({filter:a,orderBy:r})).categories.map((e=>({id:e.name,label:e.displayName})))}},registerUsage:async function(e){let{registerUsageUrl:t}=e;await So.registerUsage({registerUsageUrl:t})}}};return c.createElement(Co.Provider,{value:r},t)};const xo=function(){return(0,u.useContextSelector)(Co,u.identity)},Ao=(0,u.createContext)({state:{},actions:{}});function ko(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?[e].map((e=>e.replace(/[\s./_]/g,"-"))).map((e=>t?e:e.replace(/^-+|-+$/g,""))).map((e=>t?e:e.replace(/--+/g,"-"))).map((e=>e.normalize("NFD"))).map((e=>e.replace(/[\u0300-\u036f]/g,""))).map((e=>t?e:e.replace(/[^a-zA-Z0-9-_]/g,""))).map((e=>e.toLowerCase())).pop():""}const Oo=function(){const e=(0,u.useCallback)((async e=>{const{family:t,service:n,variants:r,url:a}=e,o=`web-stories-${ko(t)}-font-css`;if(!document.getElementById(o))switch(n){case"fonts.google.com":await(0,Or.loadStylesheet)(Fr([{family:t,variants:r}],"auto"),o);break;case"custom":await(0,Or.loadInlineStylesheet)(o,Br(t,a));break;default:return}}),[]),t=(0,u.useCallback)((t=>Promise.allSettled(t.map((async t=>{let{font:n,fontWeight:r,fontStyle:a,content:o}=t;const{family:l,service:i}=n;if(!l||"system"===i)return null;const s=`\n              ${a||""} ${r||""} 0 '${l}'\n            `.trim();return await e(n),(0,Or.ensureFontLoaded)(s,o)})))),[e]);return{maybeEnqueueFontStyle:t,maybeLoadFont:e}};const Po=function FontProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)([]),[a,o]=(0,u.useState)([]),[l,i]=(0,u.useState)([]),[s,d]=(0,u.useState)(null),{actions:{getFonts:p}}=W(),m=n.length>0?n:a,f=(0,u.useCallback)((async()=>{if(s||!p)return;const e=await p({service:"custom"});if(!e.length)return;const t=e.map((e=>({...e,id:e.family,name:e.family,value:e.family})));d(t)}),[p,s]),g=(0,u.useCallback)((async()=>{if(a.length||!p)return;const e=await p({include:Dr.join(",")});if(!e.length)return;const t=e.map((e=>({id:e.family,name:e.family,value:e.family,...e})));o(t)}),[p,a]),{maybeEnqueueFontStyle:h,maybeLoadFont:b}=Oo(),E=(0,u.useCallback)((e=>{const t=m.find((t=>t.family===e));return t||{}}),[m]),y=(0,u.useCallback)((async e=>{if(e.length<2)return r([]),[];const t=(await p({search:e})).map((e=>({...e,id:e.family,name:e.family,value:e.family})));return r(t),t}),[p]),_=(0,u.useCallback)((e=>{const t=[{name:me[400],value:400}],n=E(e);let r=t;if(n){const{weights:e}=n;e&&(r=e.map((e=>({name:me[e],value:e}))))}return r}),[E]),v=(0,u.useCallback)((e=>{const t=E(e);return t?.fallbacks?t.fallbacks:[]}),[E]),w=(0,u.useCallback)((e=>{const t=[e];l.forEach((n=>{e.family!==n.family&&t.push(n)})),i(t.slice(0,5))}),[l]),T=(0,u.useRef)([]),S=(0,u.useCallback)((e=>{const t=e.filter((e=>!T.current.includes(e)));if(!t?.length)return;T.current=T.current.concat(t);const n=`https://fonts.googleapis.com/css?family=${encodeURIComponent(t.join("|"))}&subset=menu&display=swap`;(0,Or.loadStylesheet)(n,"web-stories-google-fonts-menu-css").catch((()=>{T.current=T.current.filter((e=>!t.includes(e)))}))}),[]),C=(0,u.useCallback)((e=>{for(const t of e){const e=s.find((e=>{let{family:n}=e;return n===t}));e&&b(e)}}),[s,b]),I={state:{fonts:n.length>0?n:a,curatedFonts:a,customFonts:s,recentFonts:l},actions:{getFontsBySearch:y,getFontByName:E,maybeEnqueueFontStyle:h,getFontWeight:_,getFontFallback:v,ensureMenuFontsLoaded:S,ensureCustomFontsLoaded:C,addRecentFont:w,getCustomFonts:f,getCuratedFonts:g}};return c.createElement(Ao.Provider,{value:I},t)};const No=function(e){return(0,u.useContextSelector)(Ao,e??u.identity)};var Ro=n(52935);const Mo=async function(e){const t=await fetch(e);if(!t.ok)throw new Error(`An error has occured: ${t.status}`);return await t.blob()};const Lo=async function(e,t){const n=await Mo(e),r=function(e){const t=Dt(e),n=t.split(/[#?]/)[0].split(".").pop().trim();return t.replace(`.${n}`,`-optimized.${n}`)}(e);return ce(n,r,t)};const Do=function(e){let{uploadMedia:t,postProcessingResource:n,updateMedia:r,deleteMediaElement:a}=e;const{actions:{getOptimizedMediaById:o,getMutedMediaById:l}}=W(),{updateElementsByResourceId:i,updateElementById:s}=Ya((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId,updateElementById:e.actions.updateElementById}))),c=(0,u.useCallback)((e=>{let{oldResource:t,resource:n}=e;const{id:r,alt:a}=t;i({id:r,properties:()=>({type:n.type,resource:{...n,alt:a}})})}),[i]),d=(0,u.useCallback)((e=>{let{elementId:t,oldResource:n,resource:r}=e;const{alt:a}=n;s({elementId:t,properties:()=>({type:r.type,resource:{...r,alt:a}})})}),[s]),p=(0,u.useCallback)(((e,t)=>{s({elementId:e,properties:e=>({resource:{...e.resource,...t}})})}),[s]),m=(0,u.useCallback)(((e,t)=>{i({id:e,properties:e=>({resource:{...e.resource,...t}})})}),[i]),f=(0,u.useCallback)(((e,t,n)=>{r(e,{mediaSource:n,optimizedId:t})}),[r]),g=(0,u.useCallback)(((e,t)=>{r(e,{mutedId:t})}),[r]),h=(0,u.useCallback)((e=>{let{resource:r}=e;const{id:l,src:i,mimeType:s}=r,d=()=>m(l,{isOptimized:!1}),u=e=>{let{resource:t}=e;c({oldResource:r,resource:t}),f(l,t.id,"source-video"),a({id:l}),n(t)},p=e=>{let{resource:t}=e;const n={...t,id:r.id};m(l,{...n})};(async()=>{const e=await o(l);if(e)return void m(l,e);let n=!1;try{n=await Lo(i,s)}catch(e){return}await t([n],{onUploadSuccess:u,onUploadError:d,onUploadProgress:p,additionalData:{originalId:r.id,isMuted:r.isMuted},originalResourceId:r.id})})()}),[m,c,f,a,n,o,t]),b=(0,u.useCallback)((e=>{let{resource:r,canvasResourceId:a,elementId:o,start:l,end:i}=e;const{id:s,...c}=r,{src:u,mimeType:m,poster:f,isMuted:g,isOptimized:h}=r,b={original:s,start:l,end:i},E=()=>p(o,{trimData:b}),y=()=>p(o,{trimData:r.trimData||{}}),_=e=>{let{resource:t}=e;const l={alt:r.alt,id:a};d({elementId:o,oldResource:l,resource:t}),n(t)},v=e=>{let{resource:t}=e;const n={...t,id:a};p(o,{...n})};return(async()=>{let e=!1,n=!1;try{e=await Lo(u,m)}catch(e){return}if(f)try{n=await Mo(f)}catch(e){}await t([e],{onUploadSuccess:_,onUploadStart:E,onUploadError:y,onUploadProgress:v,additionalData:{originalId:s,isMuted:g,mediaSource:h?"video-optimization":"editor"},elementId:o,trimData:b,resource:{...c,trimData:b},originalResourceId:a,posterFile:n})})()}),[p,d,n,t]),E=(0,u.useCallback)((e=>{let{resource:r}=e;const{id:a,...o}=r,{src:i,mimeType:s,poster:d,isOptimized:u}=r,p=()=>{m(a,{isMuted:!1})},f=e=>{let{resource:t}=e;c({oldResource:r,resource:t}),g(r.id,t.id),n(t)},h=e=>{let{resource:t}=e;const n={...t,id:r.id};m(a,{...n})};(async()=>{const e=await l(a);if(e)return void m(a,e);let n=!1,r=!1;try{n=await Lo(i,s)}catch(e){return}if(d)try{r=await Mo(d)}catch(e){}await t([n],{onUploadSuccess:f,onUploadError:p,onUploadProgress:h,additionalData:{originalId:a,mediaSource:u?"video-optimization":"editor"},muteVideo:!0,resource:{...o,isMuted:!0},originalResourceId:a,posterFile:r})})()}),[m,c,g,n,l,t]);return{optimizeVideo:h,optimizeGif:(0,u.useCallback)((e=>{let{resource:r}=e;const{id:o,src:l,mimeType:i}=r,s=e=>{let{resource:t}=e;c({oldResource:r,resource:t}),f(r.id,t.id,"source-image"),a({id:r.id}),n(t)},d=e=>{let{resource:t}=e;const n={...t,id:r.id};m(o,{...n})};return(async()=>{let e=!1;try{e=await Lo(l,i)}catch(e){return}const n=await e.arrayBuffer();It(n)&&await t([e],{onUploadSuccess:s,onUploadProgress:d,additionalData:{original_id:o},originalResourceId:o})})()}),[c,f,a,n,m,t]),muteExistingVideo:E,trimExistingVideo:b}},Bo={PANEL:"web_stories_ui_panel_settings",TEXT_SET_SETTINGS:"web_stores_text_set_settings",TERMS_MEDIA3P:"web_stories_media3p_terms_agreement",VIDEO_OPTIMIZATION_DIALOG_DISMISSED:"web_stories_video_optimization_dialog_dismissed",HELP_CENTER:"web_stories_help_center",DELETE_COLOR_PRESET_DIALOG_DISMISSED:"web_stories_delete_color_preset_dialog_dismissed",DELETE_STYLE_PRESET_DIALOG_DISMISSED:"web_stories_delete_style_preset_dialog_dismissed",DEFAULT_VIEW_PAGE_TEMPLATE_LAYOUT:"web_stories_default_template_view",BACKGROUND_IS_SET_DIALOG_DISMISSED:"web_stories_background_is_set_dialog_dismissed",CORS_CHECK_DIALOG_DISMISSED:"web_stories_cors_check_dialog_dismissed",MEDIA_RECORDING_AUDIO_INPUT:"web_stories_media_recording_audio_input",MEDIA_RECORDING_VIDEO_INPUT:"web_stories_media_recording_video_input"};const Fo={getItemByKey:function(e){let t=null;try{const n=localStorage.getItem(e);t=JSON.parse(n)}catch(e){(0,P.trackError)("local_storage_read",e.message)}return t},setItemByKey:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){(0,P.trackError)("local_storage_write",e.message)}}},Ho=Bo.VIDEO_OPTIMIZATION_DIALOG_DISMISSED;const Uo=function(e){let{media:t,prependMedia:n,updateMediaElement:r,deleteMediaElement:a}=e;const{actions:{validateFileForUpload:o}}=Mt(),{showSnackbar:l}=(0,kr.useSnackbar)(),i=hr(),{state:{isUploading:s,isTranscoding:c,pending:p,progress:m,uploaded:f,failures:g,finished:h,isNewResourceProcessing:b,isCurrentResourceProcessing:E,isNewResourceTranscoding:y,isNewResourceMuting:_,isElementTrimming:v,isCurrentResourceUploading:w,isCurrentResourceTranscoding:T,isCurrentResourceMuting:S,isCurrentResourceTrimming:C,canTranscodeResource:I},actions:{addItem:x,removeItem:A,finishItem:k}}=ho(),{isTranscodingEnabled:O,canTranscodeFile:P,isFileTooLarge:N}=Ja(),R=(0,u.useRef)();R.current=t,(0,u.useEffect)((()=>{i("upload",s)}),[s,i]),(0,u.useEffect)((()=>{const e=Boolean(Fo.getItemByKey(Ho));c&&e&&l({message:(0,d.__)("Video optimization in progress","web-stories"),dismissible:!0})}),[c,l]),(0,u.useEffect)((()=>{const e=p.filter((e=>{let{resource:{id:t}}=e;return!R.current.find((e=>{let{id:n}=e;return n===t}))}));if(!e.length)return;for(const{onUploadStart:t,resource:n}of e)t&&t({resource:n});const t=e.map((e=>{let{resource:t}=e;return t}));n({media:t})}),[p,n]),(0,u.useEffect)((()=>{for(const{onUploadProgress:e,resource:t}of m){const{id:n}=t;t&&(r({id:n,data:t}),e&&e({id:n,resource:t}))}}),[m,r]),(0,u.useEffect)((()=>{for(const{id:e,resource:t,onUploadSuccess:n,previousResourceId:a}of f){const{id:o}=t;t&&(r({id:o,data:t}),a&&r({id:a,data:t}),n&&(n({id:o,resource:t}),a&&n({id:a,resource:t})),k({id:e}))}}),[f,r,k]),(0,u.useEffect)((()=>{for(const{id:e}of h)A({id:e})}),[h,A]),(0,u.useEffect)((()=>{for(const{id:e,onUploadError:t,error:n,resource:r}of g){const{id:o}=r;t&&t({id:o}),a({id:o}),A({id:e});const i=r&&["video","gif"].includes(r.type)?r.poster:r.src;l({message:n?.message||(0,d.__)("File could not be uploaded. Please try a different file.","web-stories"),thumbnail:i&&{src:i,alt:r?.alt},dismissible:!0})}}),[g,a,A,l]);const M=(0,u.useCallback)((async function(e){let{onUploadStart:t,onUploadProgress:n,onUploadError:r,onUploadSuccess:a,additionalData:i,muteVideo:s,trimData:c,resource:d,posterFile:u,originalResourceId:p,elementId:m}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e?.length&&await Promise.all(e.reverse().map((async e=>{const f=O&&P(e),g=f&&N(e);try{o(e,f,g)}catch(e){return void l({message:e.message,dismissible:!0})}if(!d||!u){const{resource:t,posterFile:n}=await Ge(e);u=n,d=t}x({file:e,resource:d,onUploadStart:t,onUploadProgress:n,onUploadError:r,onUploadSuccess:a,additionalData:i,posterFile:u,muteVideo:s,trimData:c,originalResourceId:p,elementId:m})})))}),[l,o,x,P,O,N]);return{uploadMedia:M,isUploading:s,isTranscoding:c,isNewResourceProcessing:b,isCurrentResourceProcessing:E,isNewResourceTranscoding:y,isNewResourceMuting:_,isElementTrimming:v,isCurrentResourceUploading:w,isCurrentResourceTranscoding:T,isCurrentResourceMuting:S,isCurrentResourceTrimming:C,canTranscodeResource:I}};const jo=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n}}=W(),{updateElementsByResourceId:r}=Ya((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:a}}=U(),o=(0,u.useCallback)((async(e,o)=>{if(a)try{const a=await re(o);await ie(a);const l=se(a);r({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,isMuted:!l}}}}),t({id:e,data:{isMuted:!l}}),await n(e,{isMuted:!l})}catch(e){}}),[a,r,t,n]);return{updateVideoIsMuted:o}};const zo=function(e){return`#${e.map((e=>e.toString(16))).map((e=>e.padStart(2,"0"))).join("")}`};async function Go(e){const{default:t}=await n.e(7498).then(n.bind(n,80269));return new Promise(((n,r)=>{try{const r=(new t).getColor(e);n(zo(r))}catch(e){(0,P.trackError)("image_base_color",e.message),r(e)}}))}const Yo=async function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";if(!e)throw new Error("No source to image");const o=(0,P.getTimeTracker)("load_get_base_color");try{n=await(0,K.default)({src:e,width:r,height:a}),t=await Go(n)}catch(e){if("TypeError"!==e?.name)throw e;t="#ffffff"}finally{n?.remove(),o()}return t};const Zo=function(){const{actions:{getProxyUrl:e}}=W(),t=(0,u.useCallback)((async e=>{let t=!1;if(!e)return t;try{await fetch(e,{method:"HEAD"})}catch(e){t=!0}return t}),[]),n=(0,u.useCallback)(((t,n)=>{const{needsProxy:r}=t;return r&&n?e(n):n}),[e]);return{getProxiedUrl:n,checkResourceAccess:t}};const Wo=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n,getPosterMediaById:r}}=W(),{updateElementsByResourceId:a}=Ya((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:o}}=U(),{getProxiedUrl:l}=Zo(),i=(0,u.useCallback)((async(e,r)=>{let{id:l,isExternal:i}=e;try{a({id:l,properties:e=>{let{resource:t}=e;return{resource:{...t,baseColor:r}}}}),i||(t({id:l,data:{baseColor:r}}),o&&await n(l,{baseColor:r}))}catch(e){}}),[a,t,o,n]),s=(0,u.useCallback)((async e=>{const{type:t,poster:n,id:a,isExternal:o}=e;let s=n;if("image"===t)s=(0,Ro.default)(0,e);else if(!o)try{const e=r?await r(a):null;e&&(s=(0,Ro.default)(0,e))}catch(e){}if(!s)return;const c=l(e,s);try{const t=await Yo(c);await i(e,t)}catch(e){}}),[l,r,i]);return{updateBaseColor:s}};var Vo=n(20477),$o=n.n(Vo);function Worker_fn(){return $o()('(()=>{"use strict";const t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],a=(a,o)=>{var r="";for(let e=1;e<=o;e++){let h=Math.floor(a)/Math.pow(83,o-e)%83;r+=t[Math.floor(h)]}return r},o=t=>{let a=t/255;return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)},r=t=>{let a=Math.max(0,Math.min(1,t));return a<=.0031308?Math.round(12.92*a*255+.5):Math.round(255*(1.055*Math.pow(a,1/2.4)-.055)+.5)},e=(t,a)=>(t<0?-1:1)*Math.pow(Math.abs(t),a);class ValidationError extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}}const h=(t,a,r,e)=>{let h=0,n=0,s=0;const l=4*a;for(let M=0;M<a;M++)for(let a=0;a<r;a++){const r=e(M,a);h+=r*o(t[4*M+0+a*l]),n+=r*o(t[4*M+1+a*l]),s+=r*o(t[4*M+2+a*l])}let M=1/(a*r);return[h*M,n*M,s*M]},n=(t,o,n,s,l)=>{if(s<1||s>9||l<1||l>9)throw new ValidationError("BlurHash must have between 1 and 9 components");if(o*n*4!==t.length)throw new ValidationError("Width and height must match the pixels array");let M=[];for(let a=0;a<l;a++)for(let r=0;r<s;r++){const e=0==r&&0==a?1:2,s=h(t,o,n,((t,h)=>e*Math.cos(Math.PI*r*t/o)*Math.cos(Math.PI*a*h/n)));M.push(s)}const i=M[0],c=M.slice(1);let m,f="";if(f+=a(s-1+9*(l-1),1),c.length>0){let t=Math.max(...c.map((t=>Math.max(...t)))),o=Math.floor(Math.max(0,Math.min(82,Math.floor(166*t-.5))));m=(o+1)/166,f+=a(o,1)}else m=1,f+=a(0,1);var u;return f+=a((r((u=i)[0])<<16)+(r(u[1])<<8)+r(u[2]),4),c.forEach((t=>{f+=a(((t,a)=>19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[0]/a,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[1]/a,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[2]/a,.5)+9.5)))))(t,m),2)})),f},s=function(t){const{image:a,width:o,height:r,componentX:e,componentY:h}=t.data;try{const t=n(a,o,r,e,h);postMessage({type:"success",blurHash:t})}catch(t){postMessage({type:"error",error:t})}};self.onmessage=s})();',"Worker",void 0,n.p+"generateBlurhash.worker.worker.js")}const qo=async e=>{let t;try{t=await(0,K.default)({src:e})}catch{return Promise.reject(new Error("Failed to get blurhash from image"))}const n=(e=>{const{width:t,height:n}=e,r=document.createElement("canvas");r.width=t,r.height=n;const a=r.getContext("2d");return a.drawImage(e,0,0),a.getImageData(0,0,t,n)})(t),{data:r,width:a,height:o}=n,l=(0,P.getTimeTracker)("load_get_blurhash");return new Promise(((e,t)=>{const n=new Worker_fn;n.postMessage({image:r,width:a,height:o,componentX:4,componentY:4}),n.addEventListener("message",(function(r){n.terminate(),l(),"success"===r.data.type?e(r.data.blurHash):((0,P.trackError)("blurhash_generation",r.data.error?.message),t(r.data.error))})),n.addEventListener("error",(e=>{n.terminate(),l(),(0,P.trackError)("blurhash_generation",e?.message),t(e)}))}))};const Ko=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n,getPosterMediaById:r}}=W(),{updateElementsByResourceId:a}=Ya((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:o}}=U(),{getProxiedUrl:l}=Zo(),i=(0,u.useCallback)((async(e,r)=>{try{a({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,blurHash:r}}}}),t({id:e,data:{blurHash:r}}),o&&await n(e,{blurHash:r})}catch(e){}}),[a,t,o,n]);return{updateBlurHash:(0,u.useCallback)((async e=>{let{resource:t}=e;const{type:n,poster:a,id:o,isExternal:s}=t;let c=a;if("image"===n)c=(0,Ro.default)(300,t);else if(!s)try{const e=r?await r(o):null;e&&(c=(0,Ro.default)(300,e))}catch(e){}if(!c)return;const d=l(t,c);try{const e=await qo(d);await i(t.id,e)}catch(e){(0,P.trackError)("blurhash_generation",e?.message)}}),[l,r,i])}},Xo="LOCAL_MEDIA_RESET_FILTERS",Qo="LOCAL_MEDIA_SET_SEARCH_TERM",Jo="LOCAL_MEDIA_SET_MEDIA_TYPE",el="LOCAL_MEDIA_SET_MEDIA",tl="LOCAL_MEDIA_PREPEND_MEDIA",nl="LOCAL_MEDIA_REMOVE_AUDIO_PROCESSING",rl="LOCAL_MEDIA_ADD_AUDIO_PROCESSING",al="LOCAL_MEDIA_REMOVE_BASE_COLOR_PROCESSING",ol="LOCAL_MEDIA_ADD_BASE_COLOR_PROCESSING",ll="LOCAL_MEDIA_REMOVE_BLURHASH_PROCESSING",il="LOCAL_MEDIA_ADD_BLURHASH_PROCESSING",sl="LOCAL_MEDIA_REMOVE_POSTER_PROCESSING",cl="LOCAL_MEDIA_ADD_POSTER_PROCESSING",dl="LOCAL_MEDIA_TYPE_ALL";function ul(e,t,n){const{selectedProvider:r,searchTerm:a}=t,{pageToken:o,isMediaLoading:l,isMediaLoaded:i,categories:{categories:s,selectedCategoryId:c}}=t[e],{fetchMediaStart:d,fetchMediaSuccess:p,fetchMediaError:m,fetchCategoriesStart:f,fetchCategoriesSuccess:g,fetchCategoriesError:h}=n;return function(e){let{provider:t,selectedProvider:n,searchTerm:r,selectedCategoryId:a,pageToken:o,isMediaLoading:l,isMediaLoaded:i,fetchMediaStart:s,fetchMediaSuccess:c,fetchMediaError:d}=e;const{actions:{listMedia:p}}=xo(),{showSnackbar:m}=(0,kr.useSnackbar)(),f=(0,u.useRef)();(0,u.useEffect)((()=>{const e=f.current;f.current={pageToken:o,searchTerm:r,selectedCategoryId:a,isMediaLoading:l,isMediaLoaded:i};const u=e&&(o!==e.pageToken||r!==e.searchTerm||a!==e.selectedCategoryId),g=!e||!e.isMediaLoading&&!e.isMediaLoaded||u;t===n&&g&&async function(){s({provider:t,pageToken:o});try{const{media:e,nextPageToken:n}=await p({provider:t,filter:{contentType:Et[t].contentTypeFilter,searchTerm:a?null:r,categoryId:a},pageToken:o});c({provider:t,media:e,pageToken:o,nextPageToken:n})}catch(e){d({provider:t,pageToken:o}),m({message:Et[t].fetchMediaErrorMessage,dismissible:!0})}}()}),[n,o,r,a,t,p,d,s,c,m,f])}({provider:e,selectedProvider:r,pageToken:o,isMediaLoading:l,isMediaLoaded:i,searchTerm:a,selectedCategoryId:c,fetchMediaStart:d,fetchMediaSuccess:p,fetchMediaError:m}),function(e){let{provider:t,selectedProvider:n,categories:r,fetchCategoriesStart:a,fetchCategoriesSuccess:o,fetchCategoriesError:l}=e;const{actions:{listCategories:i}}=xo(),{showSnackbar:s}=(0,kr.useSnackbar)();(0,u.useEffect)((()=>{t===n&&Et[t].supportsCategories&&!r?.length&&async function(){a({provider:t});try{const{categories:e}=await i({provider:t});o({provider:t,categories:e})}catch(e){l({provider:t}),s({message:Et[t].fetchCategoriesErrorMessage,dismissible:!0})}}()}),[s,n,r,t,i,a,o,l])}({provider:e,selectedProvider:r,categories:s,fetchCategoriesStart:f,fetchCategoriesSuccess:g,fetchCategoriesError:h}),{state:t[e],actions:{setNextPage:(0,u.useCallback)((()=>n.setNextPage({provider:e})),[n,e]),selectCategory:(0,u.useCallback)((t=>n.selectCategory({provider:e,categoryId:t})),[n,e]),deselectCategory:(0,u.useCallback)((()=>n.deselectCategory({provider:e})),[n,e])}}}function pl(e,t){const n={};for(const r of Object.keys(Et))n[r]=ul(r,e,t);return n}const ml="FETCH_MEDIA_START",fl="FETCH_MEDIA_SUCCESS",gl="FETCH_MEDIA_ERROR",hl="SET_NEXT_PAGE",bl="UPDATE_MEDIA_ELEMENT",El="DELETE_MEDIA_ELEMENT",yl={media:[],pageToken:void 0,nextPageToken:void 0,hasMore:!0,totalPages:1,isMediaLoading:!1,isMediaLoaded:!1,totalItems:0},_l={...yl,audioProcessing:[],audioProcessed:[],blurHashProcessed:[],blurHashProcessing:[],baseColorProcessed:[],baseColorProcessing:[],posterProcessing:[],posterProcessed:[],mediaType:"",searchTerm:""};const vl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yl,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case ml:return{...e,isMediaLoaded:!1,isMediaLoading:!0};case fl:{const{media:t,pageToken:r,nextPageToken:a,totalPages:o,totalItems:l}=n;return{...e,media:r?[...e.media,...t]:t,nextPageToken:a,totalPages:o,hasMore:Boolean(a),isMediaLoaded:!0,isMediaLoading:!1,totalItems:l}}case gl:return{...e,isMediaLoaded:!0,isMediaLoading:!1};case hl:return e.nextPageToken?{...e,pageToken:e.nextPageToken}:e;case bl:{const{id:t,provider:r,data:a}=n,o=e.media.findIndex((e=>e.id===t));if(-1===o)return e;const l={...e.media[o],provider:r,...a},i=[...e.media.slice(0,o),l,...e.media.slice(o+1)];return{...e,media:i}}case El:{const{id:t}=n;return{...e,media:e.media.filter((e=>e.id!==t))}}default:return e}};const wl=function(e,t){let{type:n,payload:r}=t;return"local"==r?.provider?vl(e,{type:n,payload:r}):e};const Tl=function(e,t){let{type:n,payload:r}=t;const{provider:a,mediaType:o,searchTerm:l}=r;return"local"===a&&o===e.mediaType&&l===e.searchTerm?vl(e,{type:n,payload:r}):e};const Sl=function(e,t){let{mediaType:n}=t;return n===e.mediaType?e:{..._l,media:e.media.filter((e=>{let{local:t}=e;return t})),audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed],searchTerm:e.searchTerm,mediaType:n}};const Cl=function(e,t){let{searchTerm:n}=t;return n===e.searchTerm?e:{..._l,audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed],mediaType:e.mediaType,searchTerm:n}};const Il=function(e){return{..._l,audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed]}};const xl=function(e,t){let{media:n}=t;return{...e,media:n}};const Al=function(e,t){let{media:n}=t;return{...e,media:[...n,...e.media]}};const kl=function(e,t){let{id:n}=t;return!n||e.baseColorProcessing.includes(n)?e:{...e,baseColorProcessing:[...e.baseColorProcessing,n]}};const Ol=function(e,t){let{id:n}=t;if(!n||!e.baseColorProcessing.includes(n))return e;const r=[...e.baseColorProcessing].filter((e=>e!==n));return{...e,baseColorProcessing:r,baseColorProcessed:[...e.baseColorProcessed,n]}};const Pl=function(e,t){let{id:n}=t;return!n||e.posterProcessing.includes(n)?e:{...e,posterProcessing:[...e.posterProcessing,n]}};const Nl=function(e,t){let{id:n}=t;if(!n||!e.posterProcessing.includes(n))return e;const r=[...e.posterProcessing].filter((e=>e!==n));return{...e,posterProcessing:r,posterProcessed:[...e.posterProcessed,n]}};const Rl=function(e,t){let{id:n}=t;return!n||e.audioProcessing.includes(n)?e:{...e,audioProcessing:[...e.audioProcessing,n]}};const Ml=function(e,t){let{id:n}=t;if(!n||!e.audioProcessing.includes(n))return e;const r=[...e.audioProcessing].filter((e=>e!==n));return{...e,audioProcessing:r,audioProcessed:[...e.audioProcessed,n]}};const Ll=function(e,t){let{id:n}=t;return!n||e.blurHashProcessing.includes(n)?e:{...e,blurHashProcessing:[...e.blurHashProcessing,n]}};const Dl=function(e,t){let{id:n}=t;if(!n||!e.blurHashProcessing.includes(n))return e;const r=[...e.blurHashProcessing].filter((e=>e!==n));return{...e,blurHashProcessing:r,blurHashProcessed:[...e.blurHashProcessed,n]}};const Bl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_l,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case fl:return Tl(e,{type:t,payload:n});case Xo:return Il(e);case Qo:return Cl(e,n);case Jo:return Sl(e,n);case el:return xl(e,n);case tl:return Al(e,n);case cl:return Pl(e,n);case sl:return Nl(e,n);case ol:return kl(e,n);case al:return Ol(e,n);case il:return Ll(e,n);case ll:return Dl(e,n);case rl:return Rl(e,n);case nl:return Ml(e,n);default:return wl(e,{type:t,payload:n})}},Fl="INITIAL_STATE",Hl="MEDIA3P_SET_SELECTED_PROVIDER",Ul="MEDIA3P_SET_SEARCH_TERM",jl="FETCH_MEDIA_CATEGORIES_START",zl="FETCH_MEDIA_CATEGORIES_SUCCESS",Gl="FETCH_MEDIA_CATEGORIES_ERROR",Yl="SELECT_CATEGORY",Zl="DESELECT_CATEGORY",Wl={isLoading:!0,isLoaded:!1,categories:[],selectedCategoryId:void 0};const Vl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wl,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case jl:return{...e,isLoading:!0,isLoaded:!1};case zl:{const{categories:t}=n;return{...e,categories:t,isLoading:!1,isLoaded:!0}}case Gl:return{...e,isLoading:!1,isLoaded:!0};case Yl:{const{categoryId:t}=n;return{...e,selectedCategoryId:t}}case Zl:case Ul:return{...e,selectedCategoryId:void 0};default:return e}},$l={...yl,categories:Wl};const ql=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$l,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(e={...vl(e,{type:t,payload:n}),categories:Vl(e.categories,{type:t,payload:n})},t){case Ul:return{...e,isMediaLoaded:!1,pageToken:void 0,nextPageToken:void 0};case Yl:case Zl:return{...e,pageToken:void 0,nextPageToken:void 0};default:return e}},Kl={selectedProvider:void 0,searchTerm:""};function Xl(e,t){let{type:n,payload:r}=t;const a={...e};for(const t of Object.keys(Et))n!=Fl&&r?.provider&&t!=r?.provider||(a[t]=ql(e[t],{type:n,payload:r}));return(0,u.shallowEqual)(a,e)?e:a}const Ql=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kl,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(e=Xl(e,{type:t,payload:n}),t){case Hl:return{...e,selectedProvider:n.provider};case Ul:return{...e,searchTerm:n.searchTerm};default:return e}},Jl=e=>t=>{let{provider:n,pageToken:r}=t;e({type:ml,payload:{provider:n,pageToken:r}})},ei=e=>t=>{let{provider:n,media:r,nextPageToken:a,totalPages:o,...l}=t;e({type:fl,payload:{provider:n,media:r,nextPageToken:a,totalPages:o,...l}})},ti=e=>t=>{let{provider:n}=t;e({type:gl,payload:{provider:n}})},ni=e=>t=>{let{provider:n}=t;e({type:hl,payload:{provider:n}})},ri=e=>t=>{let{provider:n,id:r,data:a}=t;e({type:bl,payload:{provider:n,id:r,data:a}})},ai=e=>t=>{let{provider:n,id:r}=t;e({type:El,payload:{provider:n,id:r}})},oi=e=>t=>Jl(e)({...t,provider:"local"}),li=e=>t=>ei(e)({...t,provider:"local"}),ii=e=>t=>ti(e)({...t,provider:"local"}),si=e=>t=>ni(e)({...t,provider:"local"}),ci=e=>t=>{let{id:n,data:r}=t;return ri(e)({provider:"local",id:n,data:r})},di=e=>t=>ai(e)({...t,provider:"local"}),ui=e=>()=>{e({type:Xo})},pi=e=>t=>{let{searchTerm:n}=t;e({type:Qo,payload:{searchTerm:n}})},mi=e=>t=>{let{mediaType:n}=t;e({type:Jo,payload:{mediaType:n}})},fi=e=>t=>{let{id:n}=t;e({type:rl,payload:{id:n}})},gi=e=>t=>{let{id:n}=t;e({type:nl,payload:{id:n}})},hi=e=>t=>{let{id:n}=t;e({type:ol,payload:{id:n}})},bi=e=>t=>{let{id:n}=t;e({type:al,payload:{id:n}})},Ei=e=>t=>{let{id:n}=t;e({type:il,payload:{id:n}})},yi=e=>t=>{let{id:n}=t;e({type:ll,payload:{id:n}})},_i=e=>t=>{let{id:n}=t;e({type:cl,payload:{id:n}})},vi=e=>t=>{let{id:n}=t;e({type:sl,payload:{id:n}})},wi=e=>t=>{let{media:n}=t;e({type:el,payload:{media:n}})},Ti=e=>t=>{let{media:n}=t;e({type:tl,payload:{media:n}})},Si=e=>t=>{let{provider:n}=t;e({type:jl,payload:{provider:n}})},Ci=e=>t=>{let{provider:n,categories:r}=t;e({type:zl,payload:{provider:n,categories:r}})},Ii=e=>t=>{let{provider:n}=t;e({type:Gl,payload:{provider:n}})},xi=e=>t=>{let{provider:n,categoryId:r}=t;e({type:Yl,payload:{provider:n,categoryId:r}})},Ai=e=>t=>{let{provider:n}=t;e({type:Zl,payload:{provider:n}})},ki=e=>t=>{let{provider:n}=t;e({type:Hl,payload:{provider:n}})},Oi=e=>t=>{let{searchTerm:n}=t;e({type:Ul,payload:{searchTerm:n}})};function Pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;return{local:Bl(e.local,{type:t,payload:n}),media3p:Ql(e.media3p,{type:t,payload:n})}}const Ni=(e,t)=>{if(e instanceof Function)return e(t);const n=e;return Object.keys(n).reduce(((e,r)=>({...e,[r]:Ni(n[r],t)})),{})};const Ri=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi,t=arguments.length>1?arguments[1]:void 0;const n=(0,u.useMemo)((()=>({local:a,media3p:o})),[]);t=t??n;const r=(0,u.useMemo)((()=>e(void 0,{type:Fl})),[e]),[l,i]=(0,u.useReducer)(e,r),s=(0,u.useMemo)((()=>Ni(t,i)),[t]);return{state:l,actions:s}},Mi=(0,u.createContext)({local:{state:{},actions:{}},media3p:{state:{},actions:{}}});const Li=function MediaProvider(e){let{children:t}=e;const{state:n,actions:r}=Ri(),a=function(e,t){const{media:n,pageToken:r,mediaType:a,searchTerm:o}=e,{fetchMediaStart:l,fetchMediaSuccess:i,fetchMediaError:s,resetFilters:c,prependMedia:d,setMediaType:p,setSearchTerm:m,setNextPage:f,setAudioProcessing:g,removeAudioProcessing:h,setPosterProcessing:b,removePosterProcessing:E,setBaseColorProcessing:y,removeBaseColorProcessing:_,setBlurhashProcessing:v,removeBlurhashProcessing:w,updateMediaElement:T,deleteMediaElement:S}=t,{actions:{getMedia:C,updateMedia:I}}=W(),x=(0,u.useRef)(!1);(0,u.useEffect)((()=>(x.current=!0,()=>{x.current=!1})),[]);const A=(0,u.useCallback)((function(){let{searchTerm:e="",pageToken:t=1,mediaType:n,cacheBust:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(!C)return null;l({pageToken:t});const o=(0,P.getTimeTracker)("load_media");return C({mediaType:n===dl?"":n,searchTerm:e,pagingNum:t,cacheBust:r}).then((r=>{let{data:o,headers:l}=r;if(!x.current)return;const i=parseInt(l.totalPages),s=parseInt(l.totalItems);a({media:o,mediaType:n,searchTerm:e,pageToken:t,nextPageToken:t<i?t+1:void 0,totalPages:i,totalItems:s})})).catch(s).finally((()=>{o()}))}),[s,l,C]),{uploadMedia:k,isUploading:O,isTranscoding:N,isNewResourceProcessing:R,isCurrentResourceProcessing:M,isNewResourceTranscoding:L,isNewResourceMuting:D,isElementTrimming:B,isCurrentResourceUploading:F,isCurrentResourceTranscoding:H,isCurrentResourceMuting:j,isCurrentResourceTrimming:z,canTranscodeResource:G}=Uo({media:n,prependMedia:d,updateMediaElement:T,deleteMediaElement:S}),{uploadVideoFrame:Y}=Za({updateMediaElement:T}),{updateVideoIsMuted:Z}=jo({updateMediaElement:T}),{updateBaseColor:V}=Wo({updateMediaElement:T}),{updateBlurHash:$}=Ko({updateMediaElement:T}),{allowedMimeTypes:{video:q},capabilities:{hasUploadMediaAction:K}}=U(),X=(0,u.useRef)();X.current=e;const Q=(0,u.useCallback)((()=>{const{mediaType:e}=X.current;c();const t=!X.current.pageToken;e||X.current.searchTerm||!t||A({mediaType:e,cacheBust:!0},i)}),[A,i,c]);(0,u.useEffect)((()=>{A({searchTerm:o,pageToken:r,mediaType:a},i)}),[A,i,a,r,o]);const J=(0,u.useCallback)(((e,t)=>{const{posterProcessed:n,posterProcessing:r}=X.current;(async()=>{n.includes(e)||r.includes(e)||(b({id:e}),await Y(e,t),E({id:e}))})()}),[b,Y,E]),ee=(0,u.useCallback)(((e,t)=>{const{audioProcessed:n,audioProcessing:r}=X.current;(async()=>{n.includes(e)||r.includes(e)||(g({id:e}),await Z(e,t),h({id:e}))})()}),[g,Z,h]),te=(0,u.useCallback)((e=>{const{baseColorProcessed:t,baseColorProcessing:n}=X.current,{id:r}=e;(async()=>{t.includes(r)||n.includes(r)||(y({id:r}),await V(e),_({id:r}))})()}),[y,V,_]),ne=(0,u.useCallback)((e=>{const{blurHashProcessed:t,blurHashProcessing:n}=X.current,{id:r}=e;(async()=>{t.includes(r)||n.includes(r)||(v({id:r}),await $({resource:e}),w({id:r}))})()}),[X,v,$,w]),re=(0,u.useCallback)((e=>{if(!e)return;const{type:t,isMuted:n,baseColor:r,src:a,id:o,posterId:l,mimeType:i,poster:s,blurHash:c}=e;if(!G(e))return;K&&(!q.includes(i)&&"gif"!==t||l||J(o,a),q.includes(i)&&null===n&&ee(o,a));const d="image"===t?(0,Ro.default)(0,e):s;d&&!r&&te(e),d&&!c&&ne(e)}),[G,q,te,ne,ee,J,K]),{optimizeVideo:ae,optimizeGif:oe,muteExistingVideo:le,trimExistingVideo:ie}=Do({postProcessingResource:re,uploadMedia:k,updateMedia:I,deleteMediaElement:S});(0,u.useEffect)((()=>{n?.forEach((e=>re(e)))}),[n,a,o,re]);const se=Boolean(X.current?.posterProcessing?.length);return{state:{...e,isUploading:O||se,isTranscoding:N,isNewResourceProcessing:R,isCurrentResourceProcessing:M,isNewResourceTranscoding:L,isNewResourceMuting:D,isElementTrimming:B,isCurrentResourceUploading:F,isCurrentResourceTranscoding:H,isCurrentResourceMuting:j,isCurrentResourceTrimming:z,canTranscodeResource:G},actions:{setNextPage:f,setMediaType:p,setSearchTerm:m,resetFilters:c,uploadMedia:k,resetWithFetch:Q,uploadVideoPoster:J,postProcessingResource:re,deleteMediaElement:S,updateMediaElement:T,optimizeVideo:ae,optimizeGif:oe,muteExistingVideo:le,trimExistingVideo:ie}}}(n.local,r.local);var o,l;const i={local:a,media3p:(o=n.media3p,l=r.media3p,{state:{selectedProvider:o.selectedProvider,searchTerm:o.searchTerm},actions:{setSelectedProvider:l.setSelectedProvider,setSearchTerm:l.setSearchTerm},...pl(o,l)})};return c.createElement(Mi.Provider,{value:i},t)};const Di=function(e){return(0,u.useContextSelector)(Mi,e??u.identity)};const Bi=function(e){return Di((t=>{let{local:n}=t;return(e??u.identity)(n)}))},Fi=(0,u.createContext)({state:{},actions:{}});function Hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(((e,t)=>{let[n,r]=t;return e[n]=r,e}),{})}function Ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return e[n]={...r,...e[n]},e}),{...t})}function ji(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce(((e,n)=>(e[n[t]]=n,e)),{})}function zi(){return zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zi.apply(this,arguments)}const Gi=function TaxonomyProvider(e){const[t,n]=(0,u.useState)([]),[r,a]=(0,u.useState)({}),[o,l]=(0,u.useState)(!0),{actions:{clearHistory:i}}=Cr(),{updateStory:s,isStoryLoaded:d,terms:p,hasTaxonomies:m}=Ya((e=>{let{state:{pages:t,story:n},actions:{updateStory:r}}=e;return{updateStory:r,isStoryLoaded:t.length>0,terms:n.terms,hasTaxonomies:n?.taxonomies?.length>0}})),{getTaxonomyTerm:f,createTaxonomyTerm:g,getTaxonomies:h}=W((e=>{let{actions:t}=e;return t}));(0,u.useEffect)((()=>{m&&async function(){try{const e=await h();n(e)}catch(e){console.error(e.message)}}()}),[m,h]);const b=(0,u.useRef)(!1);(0,u.useEffect)((()=>{if(t.length>0&&d&&!b.current){const e=ji(t,"slug"),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return Hi(Object.entries(e).map((e=>{let[n,r]=e;return[t(n),r]})))}(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>((t||[]).forEach((t=>{e[t.taxonomy]=e[t.taxonomy]||{},e[t.taxonomy][t.slug]=t})),e)),{})}(p),(t=>e[t]?.restBase)),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return Hi(Object.entries(e).map((e=>{let[n,r]=e;return[n,t(r)]})))}(n,(e=>Object.values(e).map((e=>e.id))));a(n),i(),s({properties:{terms:r}}),b.current=!0}}),[p,d,t,a,i,s]);const E=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];s({properties:n=>{const r="function"==typeof t?t(n.terms[e.restBase]):t;return{...n,terms:{...n.terms,[e.restBase]:r}}}})}),[s]),y=(0,u.useCallback)(((e,t)=>{E(e,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.includes(t.id)?e:[...e,t.id]}))}),[E]),_=(0,u.useCallback)((async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];const o=e?.restPath;if(!o)return[];try{r=await f(o,t)}catch(e){console.error(e.message)}if(r.length<1)return r;const l={[e.restBase]:ji(r,"slug")};if(a((e=>Ui(e,l))),n&&t.search){const n=ko(t.search),a=r.find((e=>e.slug===n));a&&y(e,a)}return r}),[f,y]),v=(0,u.useCallback)((async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const l={name:t};n?.id&&(l.parent=n.id,l.slug=`${n.slug}-${ko(l.name)}`);const i=l?.slug||ko(t),s=r[e.restBase]?.[i];if(s)return void(o&&y(e,s));const c=e?.restPath;if(c)try{const t=await g(c,l),n={[e.restBase]:{[t.slug]:t}};a((e=>Ui(e,n))),o&&y(e,t)}catch(n){"term_exists"===n.code&&_(e,{search:t},o)}}),[g,r,_,y]);(0,u.useEffect)((()=>{if(o&&t?.length){t.filter((e=>e.hierarchical)).forEach((e=>_(e,{per_page:-1}))),l(!1)}}),[_,o,t]);const w=(0,u.useMemo)((()=>({state:{taxonomies:t,termCache:r,terms:Array.isArray(p)?{}:p},actions:{createTerm:v,addSearchResultsToCache:_,setTerms:E,addTermToSelection:y}})),[r,p,t,v,_,E,y]);return c.createElement(Fi.Provider,zi({},e,{value:w}))};const Yi=function(e){return(0,u.useContextSelector)(Fi,e??u.identity)};var Zi=n(95123);const Wi=[1,0];function Vi(e){return"number"==typeof e}const $i=function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const{updateForResizeEvent:l,defaultAttributes:i}=(0,On.getDefinitionForType)(e);if(Vi(t)||(t=Vi(n)?n*a:o?Math.min(o.width*ee.DEFAULT_DPR,.8*ee.PAGE_WIDTH):ee.PAGE_WIDTH/2),!Vi(n)&&l&&(n=l({...i,...r},Wi,t).height),Vi(n)||(n=t/a),t>ee.PAGE_WIDTH||n>ee.PAGE_HEIGHT){const e=t/n;e<=ee.PAGE_WIDTH/ee.PAGE_HEIGHT?n=(t=Math.min(t,ee.PAGE_WIDTH))/e:t=(n=Math.min(n,ee.PAGE_HEIGHT))*e}return{width:t=(0,Vr.dataPixels)(t),height:n=(0,Vr.dataPixels)(n)}};function qi(e){return"number"==typeof e}const Ki=function(e,t){let{resource:n,x:r,y:a,width:o,height:l,mask:i,rotationAngle:s=0,scale:c=100,focalX:d=50,focalY:u=50,sticker:p,...m}=t;const{isMaskable:f}=(0,On.getDefinitionForType)(e),g={type:e,...m},h=p&&Zi.default?.[p?.type]?.aspectRatio,b=n&&qi(n.width)&&qi(n.height)?n.width/n.height:1,E=$i(e,o,l,g,h||b,n);return o=E.width,l=E.height,qi(r)||(r=48),qi(a)||(a=0),r=(0,Vr.dataPixels)(r),a=(0,Vr.dataPixels)(a),{...g,resource:n,x:r,y:a,width:o,height:l,rotationAngle:s,scale:c,focalX:d,focalY:u,...f?{mask:i||Un.DEFAULT_MASK}:{},...p?{sticker:p}:{}}},Xi=(0,u.createContext)({state:{},actions:{}}),Qi=On.MEDIA_ELEMENT_TYPES,Ji=On.MEDIA_ELEMENT_TYPES.concat(On.ELEMENT_TYPES.SHAPE),es=e=>Qi.includes(e),ts=e=>Ji.includes(e);const ns=function DropTargetsProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)(null),[a,o]=(0,u.useState)({}),[l,i]=(0,u.useState)(null),{actions:{pushTransform:s}}=(0,I.useTransform)(),{currentPage:d,combineElements:p}=Ya((e=>{let{state:{currentPage:t},actions:{combineElements:n}}=e;return{currentPage:t,combineElements:n}})),m=(0,u.useMemo)((()=>d?.elements||[]),[d?.elements]),f=(0,u.useMemo)((()=>m.filter((e=>{let{id:t}=e;return t in a})).map((e=>{let{id:t}=e;return t})).reverse()),[a,m]),g=(0,u.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=document.elementsFromPoint(e,t);return f.find((e=>r.includes(a[e])&&e!==n))||null}),[f,a]),h=(0,u.useCallback)(((e,t)=>{o((n=>({...n,[e]:t})))}),[]),b=(0,u.useCallback)((e=>{o((t=>{const{[e]:n,...r}=t;return r}))}),[]),E=(0,u.useCallback)((function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!es(e?.type))return;const a=Ki(e.type,{resource:e}),o=m.find((e=>{let{id:t}=e;return t===r})),c=o?.scale??a.scale,d=o?.focalX??a.focalX,u=o?.focalY??a.focalY,p=o?.flip??a.flip,f=g(t,n,r);f&&f!==l?(s(f,{dropTargets:{active:!0,replacement:{resource:e,scale:c,focalX:d,focalY:u,flip:p}}}),r&&s(r,{dropTargets:{hover:!0}})):f||r&&s(r,{dropTargets:{hover:!1}}),i(f),m.filter((e=>{let{id:t}=e;return t!==f})).forEach((e=>s(e.id,{dropTargets:{active:!1,replacement:null}})))}),[l,m,g,s]),y=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!es(e?.type))return;if(!l||l===t)return void Object.keys(a).filter((e=>e!==t)).map((e=>s(e,null)));const n={secondId:l},r=m.find((e=>{let{id:n}=e;return n===t}));n.firstElement=r||Ki(e.type,{resource:e}),p(n),m.filter((e=>{let{id:n}=e;return a[n]&&n!==t})).forEach((e=>{s(e.id,{dropTargets:{active:!1,replacement:null}}),s(e.id,null)})),i(null);const{onDropHandler:o}=(0,On.getDefinitionForType)(e.type);o&&e.src&&!e.isPlaceholder&&o(l)}),[l,p,m,a,s]),_=(0,fr.useGlobalIsKeyPressed)("mod"),v={state:{dropTargets:a,activeDropTargetId:l,draggingResource:n,isDropTargetingDisabled:_},actions:{registerDropTarget:_?Lt:h,unregisterDropTarget:b,isDropSource:_?()=>!1:es,isDropTarget:_?()=>!1:ts,handleDrag:_?Lt:E,handleDrop:_?Lt:y,setDraggingResource:_?Lt:r}};return c.createElement(Xi.Provider,{value:v},t)};const rs=function(e,t){return(0,u.useContextSelector)(Xi,e??u.identity,t)};var as=n(63594),os=n.n(as),ls=n(93991);const is=function UnitsProvider(e){let{pageSize:t,children:n}=e;const{width:r,height:a}=t,o=(0,u.useMemo)((()=>({state:{pageSize:{width:r,height:a}},actions:{dataToEditorX:e=>(0,Vr.dataToEditorX)(e,r),dataToEditorY:e=>(0,Vr.dataToEditorY)(e,a),editorToDataX:(e,t)=>(0,Vr.editorToDataX)(e,r,t),editorToDataY:(e,t)=>(0,Vr.editorToDataY)(e,a,t),getBox:e=>(0,Vr.getBox)(e,r,a)}})),[r,a]);return c.createElement(ls.default.Provider,{value:o},n)},ss=(0,u.createContext)({actions:{setZoomSetting:()=>{}},state:{}});const cs=function(e){return(0,u.useContextSelector)(ss,e??u.identity)},ds=72,us={zoomSetting:Se.FIT,zoomLevel:null,workspaceSize:{width:null,height:null,availableHeight:null},scrollOffset:{left:0,top:0}},ps={setZoomSetting:(e,t)=>{let{payload:n}=t;return{...e,zoomSetting:n,scrollOffset:{left:0,top:0}}},setZoomLevel:(e,t)=>{let{payload:n}=t;return{...e,zoomLevel:n,zoomSetting:Se.FIXED}},setScrollOffset:(e,t)=>{let{payload:n}=t;return{...e,scrollOffset:n}},setWorkspaceSize:(e,t)=>{let{payload:n}=t;return{...e,workspaceSize:n}}};const ms=function(){const[e,t]=(0,u.useReduction)(us,ps),{zoomSetting:n,zoomLevel:r,workspaceSize:a,scrollOffset:o}=e,l=(0,u.useMemo)((()=>function(e,t,n){let r;const a=e.width/e.availableHeight;switch(t){case Se.FILL:r=a>ee.FULLBLEED_RATIO?e.width-A.SCROLLBAR_WIDTH-ds:(e.availableHeight-A.SCROLLBAR_WIDTH)*ee.FULLBLEED_RATIO-ds;break;case Se.FIT:{const t=e.width-144;r=a>ee.FULLBLEED_RATIO?Math.min(t,(e.availableHeight-ds)*ee.FULLBLEED_RATIO):t;break}default:if(isNaN(n))break;r=n*ee.PAGE_WIDTH}r=Math.max(0,r);const o=xe*Math.floor(r/xe),l=o/ee.PAGE_RATIO,i=o/ee.FULLBLEED_RATIO,s=o>=e.width-ds-24,c=l>=e.availableHeight-ds-24,d=s||c,u=!d&&o<e.width-200,p=d?ds:12;return{pageWidth:o,pageHeight:l,hasHorizontalOverflow:s,hasVerticalOverflow:c,hasPageNavigation:u,pagePadding:p,viewportWidth:d?e.width:o+p,viewportHeight:d?e.availableHeight:i+p}}(a,n,r)),[a,n,r]),{pageWidth:i}=l,s=(0,u.useMemo)((()=>{const e=Math.ceil(i/xe*xe);switch(n){case Se.FILL:case Se.FIT:return e/ee.PAGE_WIDTH;default:return r}}),[r,i,n]);return{state:{...l,zoomSetting:n,zoomLevel:s,workspaceWidth:a.width,workspaceHeight:a.height,scrollLeft:o.left,scrollTop:o.top},actions:t}},fs=[Ce.OPENING,Ce.CLOSING],gs={openCarousel:e=>e===Ce.CLOSED?Ce.OPENING:e,closeCarousel:e=>e===Ce.OPEN?Ce.CLOSING:e,completeTransition:e=>({[Ce.OPENING]:Ce.OPEN,[Ce.CLOSING]:Ce.CLOSED}[e]||e)};const hs=function(){const[e,t]=(0,u.useReduction)(Ce.OPEN,gs),n=fs.includes(e),{openCarousel:r,closeCarousel:a,completeTransition:o}=t;return(0,u.useEffect)((()=>{if(!n)return;const e=setTimeout(o,Ie);return()=>clearTimeout(e)}),[n,o]),{state:{carouselState:e,isCarouselInTransition:n},actions:{openCarousel:r,closeCarousel:a}}};const bs=function LayoutProvider(e){let{children:t}=e;const n=ms(),r=hs(),a={state:{...n.state,...r.state},actions:{...n.actions,...r.actions}};return c.createElement(ss.Provider,{value:a},t)};const utils_nativeCopyPasteExpected=function(){const{activeElement:e}=document,{tagName:t,type:n,contentEditable:r}=e;if("true"===r||"textarea"===t.toLowerCase()||"input"===t.toLowerCase()&&["text","number","search","email","tel","url"].includes(n))return!0;const a=window.getSelection(),o=a.rangeCount?a.getRangeAt(0):null;return Boolean(o&&!o.collapsed)};const Es=function(e,t){(0,u.useEffect)((()=>{const n=t=>{const{clipboardData:n}=t;utils_nativeCopyPasteExpected()||n?.types?.length||e(t)},r=e=>{utils_nativeCopyPasteExpected()||t(e)};return document.addEventListener("copy",n),document.addEventListener("cut",n),document.addEventListener("paste",r),()=>{document.removeEventListener("copy",n),document.removeEventListener("cut",n),document.removeEventListener("paste",r)}}),[e,t])};const ys=function(e,t){if(!t){const t=function(e){const t=[0],n=(0,d.__)("Group","web-stories");for(const r in e){if(!Object.prototype.hasOwnProperty.call(e[r],"name"))continue;const a=e[r]?.name.split(" ");a[0]===n&&a[1]&&t.push(Number(a[1]))}return Math.max(...t)+1}(e);return(0,We.default)(
/* translators: %d: group number. */
(0,d.__)("Group %d","web-stories"),t)}return(0,We.default)(
/* translators: %s: name of layer. */
(0,d.__)("%s Copy","web-stories"),t)},_s="_DOUBLEDASH_";const vs=function(){const{updateElementsByResourceId:e}=Ya((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId})));return{updateElementDimensions:(0,u.useCallback)((t=>{let{id:n,resource:r}=t;e({id:n,properties:e=>e.resource.width!==r.width||e.resource.height!==r.height?{resource:r,type:r.type,width:r.width,height:r.height,x:ee.PAGE_WIDTH/2-r.width/2,y:ee.PAGE_HEIGHT/2-r.height/2}:{type:r.type,resource:r}})}),[e])}};const ws=function(){const e=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];setTimeout((()=>{const t=window.document;e&&t.activeElement&&t.activeElement!==t.body&&t.activeElement.blur();const n=new window.FocusEvent("focusout");t.dispatchEvent(n)}))}),[]);return e};const Ts=function(){const{addElement:e}=Ya((e=>{let{actions:t}=e;return{addElement:t.addElement}})),{setZoomSetting:t}=cs((e=>{let{actions:{setZoomSetting:t}}=e;return{setZoomSetting:t}})),n=ws();return(0,u.useCallback)(((r,a)=>{t(Se.FIT);const o=function(e,t){return(0,On.createNewElement)(e,Ki(e,t))}(r,a),{id:l,resource:i}=o;return e({element:o}),"video"===r&&i?.src&&!i.isPlaceholder&&setTimeout((()=>{const e=document.getElementById(`video-${l}`);e&&e.play().catch((()=>{}))})),n(),o}),[e,n,t])};const Ss=function(){const{uploadMedia:e,postProcessingResource:t}=Bi((e=>{let{actions:{uploadMedia:t,postProcessingResource:n}}=e;return{uploadMedia:t,postProcessingResource:n}})),n=Ts(),{updateElementDimensions:r}=vs(),{deleteElementsByResourceId:a}=Ya((e=>({deleteElementsByResourceId:e.actions.deleteElementsByResourceId}))),o=(0,u.useCallback)((e=>{let{resource:t}=e;n(t.type,{resource:t})}),[n]),l=(0,u.useCallback)((e=>{let{id:t,resource:n}=e;r({id:t,resource:n})}),[r]),i=(0,u.useCallback)((e=>{let{id:n,resource:a}=e;r({id:n,resource:a}),t(a)}),[r,t]),s=(0,u.useCallback)((e=>{let{id:t}=e;a({id:t})}),[a]);return(0,u.useCallback)((t=>{e(t,{onUploadStart:o,onUploadProgress:l,onUploadError:s,onUploadSuccess:i})}),[e,o,l,s,i])},Cs=186,Is=145,xs=120,As=200,ks=70,Os=56,Ps=40,Ns={locked:!0,topLeft:2,topRight:2,bottomRight:2,bottomLeft:2},Rs={locked:!0,hasHiddenPadding:!1,horizontal:0,vertical:0},Ms="left",Ls={content:(0,d._x)("Fill in some text","text preset content","web-stories"),fontSize:(0,Vr.dataFontEm)(1.33),lineHeight:1.2,x:Ps,y:(ee.PAGE_HEIGHT-(0,Vr.dataFontEm)(1.33))/2,font:On.TEXT_ELEMENT_DEFAULT_FONT,width:As,borderRadius:Ns,backgroundTextMode:On.BACKGROUND_TEXT_MODE.NONE,padding:Rs,textAlign:Ms},Ds=[{title:(0,d._x)("Title 1","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Me}">${(0,d._x)("Title 1","text preset content","web-stories")}</span>`,fontSize:(0,Vr.dataFontEm)(2.667),lineHeight:1.19,x:Ps,y:(ee.PAGE_HEIGHT-(0,Vr.dataFontEm)(2.667))/2,font:On.TEXT_ELEMENT_DEFAULT_FONT,width:Cs,borderRadius:Ns,backgroundTextMode:On.BACKGROUND_TEXT_MODE.NONE,padding:Rs,textAlign:Ms}},{title:(0,d._x)("Title 2","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Me}">${(0,d._x)("Title 2","text preset content","web-stories")}</span>`,fontSize:(0,Vr.dataFontEm)(2),lineHeight:1.2,x:Ps,y:(ee.PAGE_HEIGHT-(0,Vr.dataFontEm)(2))/2,font:On.TEXT_ELEMENT_DEFAULT_FONT,width:Is,borderRadius:Ns,backgroundTextMode:On.BACKGROUND_TEXT_MODE.NONE,padding:Rs,textAlign:Ms}},{title:(0,d._x)("Title 3","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Me}">${(0,d._x)("Title 3","text preset content","web-stories")}</span>`,fontSize:(0,Vr.dataFontEm)(1.6),lineHeight:1.2,x:Ps,y:(ee.PAGE_HEIGHT-(0,Vr.dataFontEm)(1.6))/2,font:On.TEXT_ELEMENT_DEFAULT_FONT,width:xs,borderRadius:Ns,backgroundTextMode:On.BACKGROUND_TEXT_MODE.NONE,padding:Rs,textAlign:Ms}},{title:(0,d._x)("Paragraph","text preset title","web-stories"),element:Ls},{title:(0,d._x)("Caption","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Re}">${(0,d._x)("Caption","text preset content","web-stories")}</span>`,fontSize:(0,Vr.dataFontEm)(1),lineHeight:1.2,x:Ps,y:(ee.PAGE_HEIGHT-(0,Vr.dataFontEm)(1))/2,font:On.TEXT_ELEMENT_DEFAULT_FONT,width:ks,borderRadius:Ns,backgroundTextMode:On.BACKGROUND_TEXT_MODE.NONE,padding:Rs,textAlign:Ms}},{title:(0,d._x)("Label","text preset title","web-stories").toUpperCase(),element:{content:(0,d._x)("Label","text preset content","web-stories").toUpperCase(),fontSize:(0,Vr.dataFontEm)(.888),lineHeight:1.2,x:Ps,y:(ee.PAGE_HEIGHT-(0,Vr.dataFontEm)(.888))/2,font:On.TEXT_ELEMENT_DEFAULT_FONT,width:Os,borderRadius:Ns,backgroundTextMode:On.BACKGROUND_TEXT_MODE.NONE,padding:Rs,textAlign:Ms}}];const Bs=function(){const{currentPage:e,addElements:t,addGroup:n,updateCurrentPageProperties:r,deleteElementById:a,combineElements:o,addAnimations:l}=Ya((e=>{let{state:{currentPage:t},actions:{addElements:n,addGroup:r,deleteSelectedElements:a,updateCurrentPageProperties:o,deleteElementById:l,combineElements:i,addAnimations:s}}=e;return{currentPage:t,addElements:n,addGroup:r,deleteSelectedElements:a,updateCurrentPageProperties:o,deleteElementById:l,combineElements:i,addAnimations:s}})),i=(0,u.useBatchingCallback)((function(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===i.length)return!1;const d=i.find((e=>{let{isBackground:t}=e;return t}));let u=s;if(d){const t=e.elements[0];d.isDefaultBackground?(t.isDefaultBackground||a({elementId:t.id}),r({properties:{backgroundColor:d.backgroundColor}})):(u=s.map((e=>e.targets.includes(d.id)?{...e,targets:[t.id]}:e)),o({firstElement:d,secondId:t.id,shouldRetainAnimations:!1}))}const p=i.filter((e=>{let{isBackground:t}=e;return!t})),m=Object.entries(c),f=m.map((e=>{let[t,n]=e;return[[t,(0,pe.default)()],n]})),g=p.map((e=>{if(!e.groupId)return e;const t=f.find((t=>{let[[n]]=t;return n===e.groupId})),[[,n]]=t;return{...e,groupId:n}}));if(g.length&&t({elements:g}),f.length)for(const e of f){const[[,t],r]=e;n({groupId:t,name:r.name})}return l({animations:u}),!0}),[t,n,e,r,o,a,l]);return i};const Fs=function(){const e=Bs(),{currentPage:t,selectedElements:n,deleteSelectedElements:r,selectedElementAnimations:a,selectedElementsGroups:o,currentPageProductIds:l}=Ya((e=>{let{state:{currentPage:t,selectedElements:n,selectedElementAnimations:r},actions:{deleteSelectedElements:a}}=e;const o=n.map((e=>e.groupId)).filter(Boolean),l=Object.entries(t?.groups||{}).filter((e=>{let[t]=e;return o.includes(t)}));return{currentPage:t,selectedElements:n,deleteSelectedElements:a,selectedElementAnimations:r,selectedElementsGroups:Object.fromEntries(l),currentPageProductIds:t?.elements?.filter((e=>{let{type:t}=e;return t===On.ELEMENT_TYPES.PRODUCT})).map((e=>{let{product:t}=e;return t?.productId}))}})),i=(0,kr.useSnackbar)((e=>{let{showSnackbar:t}=e;return t})),s=Ss(),p=Ts(),m=(0,Hr.usePasteTextContent)(p,Ls),f=(0,u.useCallback)((e=>{const{type:l}=e;0!==n.length&&(!function(e,t,n,r,a){if(!t.length||!a)return;const{clipboardData:o}=a,l={sentinel:"story-elements",items:t.map((t=>({...t,...t.isDefaultBackground?{backgroundColor:e.backgroundColor}:null,basedOn:t.id,id:void 0}))),animations:n,groups:r},i=JSON.stringify(l).replace(/--/g,_s),s=t.map((e=>{const{type:t}=e,{TextContent:n}=(0,On.getDefinitionForType)(t);return n?n(e):t})).join("\n"),d=t.map((e=>{const{type:t,x:n,y:r,rotationAngle:a}=e,{Output:o}=(0,On.getDefinitionForType)(t);return(0,u.renderToStaticMarkup)(c.createElement(o,{element:e,box:{width:100,height:100,x:n,y:r,rotationAngle:a}}))})).join("\n");o.setData("text/plain",s),o.setData("text/html",`\x3c!-- ${i} --\x3e${d}`)}(t,n,a,o,e),"cut"===l&&r(),e.preventDefault())}),[t,r,n,a,o]),g=(0,u.useBatchingCallback)((n=>{const{elements:r,animations:a,groups:o}=function(e,t){let n={animations:[],elements:[]};for(let r=e.firstChild;r;r=r.nextSibling){if(8!==r.nodeType||-1!==r.nodeValue?.indexOf("Fragment"))continue;const e=JSON.parse(r.nodeValue.replace(new RegExp(_s,"g"),"--"));if("story-elements"!==e.sentinel)continue;const a=e.items.reduce(((n,r)=>{let{elements:a,animations:o}=n;const{element:l,elementAnimations:i}=(0,On.duplicateElement)({element:{...r,id:r.basedOn},animations:e.animations,existingElements:t.elements});return{elements:[...a,l],animations:[...o,...i]}}),{animations:[],elements:[]}),o={...e.groups};for(const e of Object.keys(o))o[e].name=ys(o,o[e].name);return n={animations:[...n.animations,...a.animations],elements:[...n.elements,...a.elements],groups:o},n}return n}(n,t),s=r.filter((e=>{let{type:t,product:n}=e;return t===On.ELEMENT_TYPES.PRODUCT&&n?.productId})).map((e=>{let{product:t}=e;return t}));return l.length>=6||s.length+l.length>6?i({message:(0,We.default)(
/* translators: %d: max number of products. */
(0,d._n)("Only %d item can be added per page.","Only %d items can be added per page.",6,"web-stories"),6)}):s.forEach((e=>{let{productId:t,productTitle:n,productImages:r}=e;l.includes(t)&&i({message:(0,We.default)(
/* translators: %s: product title. */
(0,d.__)('Product "%s" already exists on the page.',"web-stories"),n),thumbnail:r?.[0]?.url&&{src:r[0].url,alt:r[0].alt}})})),e(r,a,o)}),[e,t,i,l]),h=(0,u.useCallback)((e=>{const{clipboardData:t}=e;try{const n=!t.files?.length&&(t.getData("text/html")||t.getData("text/plain"));if(n){const t=document.createElement("template");t.innerHTML=n.replace(/<meta[^>]+>/g,"").replace(/<\/?html>/g,"").replace(/<\/?body>/g,"");let r=g(t.content);r||(r=m(t.innerHTML)),r&&e.preventDefault()}const{items:r}=t,a=[];for(let e=0;e<r.length;e++){const t=r[e].getAsFile();t&&a.push(t)}a.length>0&&s(a)}catch(e){}}),[g,m,s]);Es(f,h)};function Hs(e,t){let{editingElement:n,editingElementState:r={}}=t;return{...e,editingElement:n,editingElementState:r}}const Us=function(){const[e,t]=(0,u.useReducer)(Hs,{editingElement:null,editingElementState:{}}),[n,r]=(0,u.useState)({}),a=(0,u.useCallback)((()=>{t({editingElement:null})}),[]),o=(0,u.useCallback)((e=>{t({editingElement:e})}),[]),l=(0,u.useCallback)(((e,n)=>{t({editingElement:e,editingElementState:n})}),[]),i=(0,u.useCallback)(((e,t)=>r((n=>({...n,[e]:t})))),[r]),s=(0,u.useRef)(null);s.current=n;const c=(0,u.useCallback)((e=>s.current[e]),[]),{editingElement:d,editingElementState:p}=e;return(0,u.useMemo)((()=>({nodesById:n,editingElement:d,editingElementState:p,setEditingElementWithState:l,setEditingElementWithoutState:o,clearEditing:a,getNodeForElement:c,setNodeForElement:i})),[n,d,p,l,o,a,c,i])};var js=n(70333);function zs(e,t,n,r,a){const{topLeftPoint:o,topRightPoint:l,bottomRightPoint:i,bottomLeftPoint:s}=(0,js.getCorners)(e,t,n,r,a);return new(os().Polygon)(new(os().Vector),[new(os().Vector)(o.x,o.y),new(os().Vector)(s.x,s.y),new(os().Vector)(i.x,i.y),new(os().Vector)(l.x,l.y)])}const Gs=(0,u.createContext)({actions:{},state:{}}),Ys="canvasContainer",Zs="pageContainer";const Ws=function CanvasProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),[a,o]=(0,u.useState)(null),l=(0,u.useRef)(null),[i,s]=(0,u.useState)(null),[d,p]=(0,u.useState)(null),[m,f]=(0,u.useState)(null),[g,h]=(0,u.useState)(null),[b,E]=(0,u.useState)(null),[y,_]=(0,u.useState)(!1),[v,w]=(0,u.useState)(null),[T,S]=(0,u.useState)(null),[C,I]=(0,u.useState)(null),[x,A]=(0,u.useState)(null),[k,O]=(0,u.useState)(null),P=(0,u.useMemo)((()=>new window.IntersectionObserver((e=>{for(const t of e){if(!t.target.dataset.rectObservationKey)return;r((e=>({...e,[t.target.dataset.rectObservationKey]:t.boundingClientRect})))}}))),[]);(0,u.useEffect)((()=>()=>P.disconnect()),[P]);const N=cs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),{nodesById:R,editingElement:M,editingElementState:L,setEditingElementWithState:D,setEditingElementWithoutState:B,clearEditing:F,getNodeForElement:H,setNodeForElement:U}=Us(),{elements:j,backgroundElementId:z,selectedElementIds:G,toggleElementInSelection:Y,setSelectedElementsById:Z}=Ya((e=>{let{state:{currentPage:t,selectedElementIds:n},actions:{toggleElementInSelection:r,setSelectedElementsById:a}}=e;const o=t?.elements||[];return{elements:o,backgroundElementId:o[0]?.id,selectedElementIds:n,toggleElementInSelection:r,setSelectedElementsById:a}})),W=(0,u.useCallback)(((e,t)=>{M&&M!==e&&F(),l.current===e&&"focus"===t.type||(l.current=e,t.shiftKey?Y({elementId:e,withLinked:!t.altKey}):Z({elementIds:[e],withLinked:!t.altKey}),t.currentTarget.focus({preventScroll:!0}),z!==e&&t.stopPropagation(),"mousedown"===t.type&&(o(t),t.target.ownerDocument.addEventListener("mouseup",(()=>window.setTimeout(o,0,null)),{once:!0,capture:!0})))}),[M,z,F,Y,Z]),V=(0,u.useCallback)((e=>{let{x:t,y:n,width:r,height:a}=e;const o=zs(0,t,n,r,a),l=j.filter((e=>{let{isBackground:t,isLocked:n}=e;return!t&&!n})).map((e=>{let{id:t,rotationAngle:n,x:r,y:a,width:l,height:i}=e;const s=zs(n,r,a,l,i);return os().testPolygonPolygon(o,s)?t:null})).filter((e=>e));Z({elementIds:l,withLinked:!0})}),[j,Z]);(0,u.useEffect)((()=>{!M||1===G.length&&G[0]===M||F(),l.current&&!G.includes(l.current)&&(l.current=null)}),[M,G,F]),Fs();const[$,q]=(0,u.useState)(null),K=(0,u.useMemo)((()=>({state:{pageContainer:d,canvasContainer:i,fullbleedContainer:m,nodesById:R,editingElement:M,editingElementState:L,isEditing:Boolean(M),lastSelectionEvent:a,displayLinkGuidelines:y,pageAttachmentContainer:b,designSpaceGuideline:g,isEyedropperActive:C,eyedropperCallback:x,eyedropperImg:v,eyedropperPixelData:T,boundingBoxes:n,clientRectObserver:P,onMoveableMount:$,renamableLayer:k},actions:{setPageContainer:p,setFullbleedContainer:f,getNodeForElement:H,setNodeForElement:U,setEditingElement:B,setEditingElementWithState:D,clearEditing:F,handleSelectElement:W,selectIntersection:V,setDisplayLinkGuidelines:_,setPageAttachmentContainer:E,setCanvasContainer:s,setDesignSpaceGuideline:h,setIsEyedropperActive:I,setEyedropperCallback:A,setEyedropperImg:w,setEyedropperPixelData:S,setMoveableMount:q,setRenamableLayer:O}})),[d,i,m,R,M,L,a,y,b,g,C,x,v,T,n,P,k,H,U,B,D,F,W,V,$,q,O]);return c.createElement(Gs.Provider,{value:K},c.createElement(is,{pageSize:N},t))};const Vs=function(e){return(0,u.useContextSelector)(Gs,e??u.identity)};function $s(e){const t=(0,u.useContextSelector)(Gs,(e=>{let{state:t}=e;return t.clientRectObserver})),n=(0,u.useRef)(null);return(0,u.useCallback)((r=>{n.current&&t.unobserve?.(n.current),r&&(r.dataset.rectObservationKey=e,t.observe(r)),n.current=r}),[t,e])}function qs(e){return(0,u.useContextSelector)(Gs,(t=>{let{state:n}=t;return n.boundingBoxes?.[e]}))}var Ks=n(80475),Xs=n(40981);const Qs="addBackgroundMedia",Js="cropSelectedElements",ec="cropElementsWithShapes",tc="safeZone",nc="previewStory",rc="addLinks",ac="enableSwipe",oc="done",lc={[Qs]:{title:(0,d.__)("Add background media","web-stories"),figureSrc:"images/help-center/add_bg_module_1",description:[(0,d.__)("Double click any image or video to enter edit mode. To scale, use the slider. To change the focal point, drag the image or video.","web-stories")]},[Js]:{title:(0,d.__)("Crop selected element","web-stories"),figureSrc:"images/help-center/media_edit_mode_module_2",description:[(0,d.__)("Double click any image or video element to enter edit mode. Then, use the slider to scale the element or move its focal point by dragging it.","web-stories")]},[ec]:{title:(0,d.__)("Crop elements using shapes","web-stories"),figureSrc:"images/help-center/media_bg_shape_module_3",description:[(0,d.__)("Select a shape from the Shape menu to create a frame.","web-stories")]},[tc]:{title:(0,d.__)("Stay within the safe zone","web-stories"),figureSrc:"images/help-center/safe_zone_module_4",description:[(0,d.__)("Elements work best when you keep them within the safe zone. Outside of the safe zone, elements like links and buttons may get cropped out or not function properly.","web-stories")]},[nc]:{title:(0,d.__)("Preview your Web Story","web-stories"),figureSrc:"images/help-center/preview_module_5",description:[(0,d.__)("Use Preview Mode to view your Story before publishing.","web-stories"),(0,d.__)("Make sure buttons, links, logos, and text aren’t too close to the edge of your screen and that no Story element overlaps with the navigation bar.","web-stories")]},[rc]:{title:(0,d.__)("Add links to story elements","web-stories"),figureSrc:"images/help-center/add_link_module_6",description:[(0,d.__)('Go to the Design tab. Scroll down to <strong>Link</strong> and enter a URL. To remove a link, select the "X" <screenreader> (clear)</screenreader> button next to the URL box.',"web-stories")]},[ac]:{title:(0,d.__)("Enable swipe-up option","web-stories"),figureSrc:"images/help-center/page_attachment_module_7",description:[(0,d.__)("Go to the Design tab. Navigate to <strong>Page Attachment</strong> and enter a web address and a call to action to describe the link.","web-stories")]}},ic=[oc,{title:(0,d.__)("Done!","web-stories"),description:[(0,d.__)("You’re caught up with quick tips. We’ll notify you when we add new tips, but feel free to come back whenever you need help.","web-stories")]}],sc=500,cc=1,dc=2,uc="help_center_companion",pc=Xs.FOCUSABLE_SELECTORS.map((e=>`#${uc} ${e}`)).join(", "),mc=(0,u.createContext)({state:{},actions:{}}),fc=(e,t)=>t.navigationIndex<0;const gc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(t,n)=>e.reduce(((e,r)=>({...n,...e,...r(t,e)})),n)},hc=gc([(e,t)=>{const n=!e.isOpen&&t.isOpen,r=!e.isOpeningToTip&&t.isOpeningToTip;return{navigationIndex:n&&!r?-1:t.navigationIndex}},(e,t)=>{if(!((e,t)=>e.navigationIndex<0&&t.navigationIndex>=0)(e,t))return{};const n=t.tipKeys.slice(0,t.navigationIndex).filter((e=>!t.readTips[e]));return{navigationFlow:[...t.tipKeys,...n,ic[0]]}},(e,t)=>({hasBottomNavigation:!fc(0,t)}),(e,t)=>({isLeftToRightTransition:!fc(0,t)&&t.navigationIndex-e.navigationIndex>0}),(e,t)=>({isPrevDisabled:t.navigationIndex<=0,isNextDisabled:t.navigationIndex>=t.navigationFlow?.length-1}),(e,t)=>{const n=!fc(0,t)&&((e,t)=>(t.navigationFlow||[]).filter((e=>t.tipKeys.includes(e))))(0,t)?.[t.navigationIndex];return{readTips:n?{...t.readTips,[n]:!0}:t.readTips}},function(e,t){return{unreadTipsCount:t.tipKeys.filter((e=>!t.readTips[e]))?.length||0}},function(e,t){if(((e,t)=>!e.isHydrated&&t.isHydrated)(e,t)){return e.unreadTipsCount<t.unreadTipsCount?{isOpen:!0}:{}}return{}},function(e,t){return{isOpeningToTip:t.isOpeningToTip&&!e.isOpeningToTip}}]),bc=(e,t)=>{let{state:n,actions:r}=e;const a={...n,...t(n)};return{state:hc(n,a),actions:r}},Ec=gc([function(e){return Boolean(e?.unreadTipsCount)&&void 0!==e?.isOpen?{isOpen:e?.isOpen}:{}},function(e){return e?.unreadTipsCount?{unreadTipsCount:e?.unreadTipsCount}:{}}]),yc=Fo.getItemByKey(Bo.HELP_CENTER),_c=e=>({isOpen:!1,isOpeningToTip:!1,navigationIndex:-1,navigationFlow:Object.keys({...lc,...e.additionalTips}),isLeftToRightTransition:!0,hasBottomNavigation:!1,isPrevDisabled:!0,isNextDisabled:!1,readTips:{},readError:!1,unreadTipsCount:yc?.unreadTipsCount??0,isHydrated:!1,tips:{...lc,...e.additionalTips},tipKeys:Object.keys({...lc,...e.additionalTips})});const vc=function HelpCenterProvider(e){let{children:t}=e;const{additionalTips:n={}}=U(),{actions:{updateCurrentUser:r}}=W(),a=Boolean(r),[o,l]=(0,u.useReducer)(bc,{state:Ec(yc,_c({additionalTips:n})),actions:{goToNext:()=>e=>{let{navigationIndex:t,navigationFlow:n}=e;return{navigationIndex:(0,Ks.clamp)(t+1,{MIN:0,MAX:n.length-1})}},goToPrev:()=>e=>{let{navigationIndex:t,navigationFlow:n}=e;return{navigationIndex:(0,Ks.clamp)(t-1,{MIN:0,MAX:n.length-1})}},goToMenu:()=>()=>({navigationIndex:-1}),goToTip:e=>t=>{let{navigationFlow:n}=t;return{navigationIndex:n.findIndex((t=>t===e))}},openToUnreadTip:e=>t=>{let{navigationFlow:n,readTips:r}=t;return r[e]?{}:{isOpen:!0,isOpeningToTip:!0,navigationIndex:n.findIndex((t=>t===e))}},toggle:()=>e=>{let{isOpen:t}=e;return(0,P.trackEvent)("help_center_toggled",{status:t?"closed":"open"}),{isOpen:!t}},close:()=>e=>{let{isOpen:t}=e;return t&&(0,P.trackEvent)("help_center_toggled",{status:"closed"}),{isOpen:!1}},hydrateReadTipsSuccess:e=>t=>({readTips:{...e?.readTips??{},...t.readTips},isHydrated:!0}),persistingReadTipsError:()=>()=>({readError:!0})}}),{currentUser:i,updateCurrentUser:s}=$a((e=>{let{state:t,actions:n}=e;return{currentUser:t.currentUser,updateCurrentUser:n.updateCurrentUser}})),d=(0,u.useMemo)((()=>Object.entries(o.actions).reduce(((e,t)=>{let[n,r]=t;return e[n]=function(){return l(r(...arguments))},e}),{})),[o.actions]),{isHydrated:p,unreadTipsCount:m}=o.state;(0,u.useEffect)((()=>{if(p){const e=Fo.getItemByKey(Bo.HELP_CENTER);Fo.setItemByKey(Bo.HELP_CENTER,{...e,unreadTipsCount:m})}}),[p,m]);const{isOpen:f}=o.state;(0,u.useEffect)((()=>{const e=Fo.getItemByKey(Bo.HELP_CENTER);Fo.setItemByKey(Bo.HELP_CENTER,{...e,isOpen:f})}),[f]),(0,u.useEffect)((()=>{!p&&i?.onboarding&&d.hydrateReadTipsSuccess({readTips:i.onboarding})}),[d,i,p]);const g=(h=o.state.readTips,Object.keys(h||{}).join(" "));var h;const b=(0,u.useRef)(!1);(0,u.useEffect)((()=>{var e;(g||p)&&a&&(b.current?s({onboarding:(e=g,e.split(" ").sort(((e,t)=>e.localeCompare(t))).reduce(((e,t)=>({...e,[t]:!0})),{}))}).catch(d.persistingReadTipsError):b.current=!0)}),[d,s,a,g,p]);const[E,y]=(0,u.useState)(o.state);(0,u.useEffect)((()=>y(o.state)),[o.state]);const _=!E.isOpen&&o.state.isOpen?o.state.navigationIndex:E.navigationIndex;(0,u.useEffect)((()=>{if(_>-1&&o.state.navigationFlow.length>=_){const e=o.state.navigationFlow[_];(0,P.trackEvent)("help_center_read_tip",{name:e,unread_count:o.state.unreadTipsCount}),o.state.unreadTipsCount===o.state.navigationFlow.length&&(0,P.trackEvent)("tutorial_begin"),"done"===e&&(0,P.trackEvent)("tutorial_complete")}}),[_]);const v=(0,u.useMemo)((()=>({state:{...o.state,navigationIndex:_},actions:d})),[d,o.state,_]);return c.createElement(mc.Provider,{value:v},t)};function wc(e){return(0,u.useContextSelector)(mc,e??u.identity)}const Tc={SAFE_ZONE:"safeZone"};const Sc=(0,u.createContext)({});const Cc=function(e){return(0,u.useContextSelector)(Sc,e??u.identity)};const Ic=function(){const e=Ya((e=>{let{state:{pages:t=[]}}=e;return t.reduce(((e,t)=>(e.push(...t.elements.filter((e=>{let{type:t,isExternal:n}=e;return["image","video","gif"].includes(t)&&!n})).map((e=>{let{resource:t}=e;return t.id}))),e)),[])})),{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}=Bi((e=>{let{state:{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}}=e;return{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}}));return(0,u.useMemo)((()=>Boolean(e?.some((e=>t(e)||n(e))))),[e,t,n])};const xc=function AutoSaveHandler(){const{autoSaveInterval:e}=U(),{state:{hasNewChanges:t}}=Cr(),{status:n,saveStory:r}=Ya((e=>{let{state:{story:{status:t}},actions:{saveStory:n}}=e;return{status:t,saveStory:n}})),a=Ic(),o="draft"===n||!n,l=(0,u.useRef)(r);return(0,u.useEffect)((()=>{l.current=r}),[r]),(0,u.useEffect)((()=>{if(!o||!t||!e||a)return;const n=setTimeout((()=>l.current()),1e3*e);return()=>clearTimeout(n)}),[e,o,t,a]),null},Ac=(0,u.createContext)({actions:{},state:{}});const kc=function(e){return(0,u.useContextSelector)(Ac,e??u.identity)},Oc=window.requestIdleCallback||function(e,t){const n=(t=t||{}).timeout||1,r=performance.now();return setTimeout((function(){e({get didTimeout(){return!t.timeout&&performance.now()-r-1>n},timeRemaining:function(){return Math.max(0,performance.now()-r+1)}})}),1)},Pc=window.cancelIdleCallback||function(e){clearTimeout(e)};const Nc=function(){const e=(0,u.useRef)([]),t=(0,u.useRef)(!1),n=(0,u.useRef)([null,null]),r=(0,u.useCallback)((()=>{if(t.current=!0,!e.current.length)return void(t.current=!1);const[a,o]=e.current.shift(),l=Oc((async()=>{await o(),n.current=[null,null],r()}));n.current=[a,l]}),[]),a=(0,u.useCallback)((t=>{e.current=e.current.filter((e=>{let[n]=e;return n!==t}));const[a,o]=n.current;t===a&&(Pc(o),n.current=[null,null],r())}),[r]);return(0,u.useCallback)((n=>{let[o,l]=n;return a(o),e.current.push([o,l]),t.current||r(),()=>{a(o)}}),[r,a])};var Rc=n(6114);const Mc=Ma().shape({width:Ma().number,height:Ma().number,containerHeight:Ma().number});On.StoryPropTypes.story=Ma().shape({storyId:Ma().number,title:Ma().string.isRequired,status:Ma().string.isRequired,author:Ma().shape({id:Ma().oneOfType([Ma().number,Ma().string]),name:Ma().string.isRequired}),slug:Ma().string.isRequired,date:Ma().string.isRequired,modified:Ma().string.isRequired,excerpt:Ma().string.isRequired,featuredMedia:Ma().shape({id:Ma().number.isRequired,url:Ma().string.isRequired,width:Ma().number.isRequired,height:Ma().number.isRequired}),password:Ma().string.isRequired,currentStoryStyles:Ma().object,autoAdvance:Ma().bool,defaultPageDuration:Ma().number,backgroundAudio:Ma().shape({resource:On.BackgroundAudioPropType})}),On.StoryPropTypes.size=Ma().exact({width:Ma().number.isRequired,height:Ma().number.isRequired});Ma().shape(Rn.AnimationProps);function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lc.apply(this,arguments)}const Dc=p.default.div.attrs((e=>{let{previewMode:t,x:n,y:r,width:a,height:o,rotationAngle:l}=e;return t?{style:{position:"absolute",zIndex:1,left:`${n}px`,top:`${r}px`,width:`${a}px`,height:`${o}px`,transform:`rotate(${l}deg)`}}:{}})).withConfig({displayName:"displayElement__Wrapper",componentId:"sc-1uos4dq-0"})([""," "," "," contain:layout;transition:opacity 0.15s cubic-bezier(0,0,0.54,1);",""],(e=>{let{previewMode:t}=e;return!t&&jn.elementWithPosition}),(e=>{let{previewMode:t}=e;return!t&&jn.elementWithSize}),(e=>{let{previewMode:t}=e;return!t&&jn.elementWithRotation}),(e=>{let{isBackground:t,theme:n}=e;return t&&(0,p.css)(["border-radius:",";overflow:hidden;"],n.borders.radius.small)})),Bc=p.default.div.withConfig({displayName:"displayElement__BackgroundOverlay",componentId:"sc-1uos4dq-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;"]),Fc=p.default.div.withConfig({displayName:"displayElement__ReplacementContainer",componentId:"sc-1uos4dq-2"})(["transition:opacity 0.25s cubic-bezier(0,0,0.54,1);pointer-events:none;opacity:",";height:100%;"],(e=>{let{hasReplacement:t}=e;return t?1:0}));function AnimationWrapper(e){let{children:t,id:n,isAnimatable:r}=e;return r?c.createElement(Rn.StoryAnimation.WAAPIWrapper,{target:n},t):t}const Hc=(0,u.memo)((function DisplayElement(e){let{element:t,previewMode:n,isAnimatable:r=!1,siblingCount:a=0}=e;const{getBox:o,dataToEditorX:l}=(0,Rc.default)((e=>({getBox:e.actions.getBox,dataToEditorX:e.actions.dataToEditorX}))),{getProxiedUrl:i}=Zo(),{actions:{maybeEnqueueFontStyle:s}}=No(),[d,p]=(0,u.useState)(null),m=Boolean(d),{id:f,opacity:g,type:h,isBackground:b,overlay:E,border:y={},flip:_}=t,{isCurrentResourceProcessing:v,isCurrentResourceUploading:w}=Bi((e=>{let{state:t}=e;return On.ELEMENT_TYPES.IMAGE===h?{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}:{}})),T=m?{...t,type:d.resource.type,resource:d.resource,scale:d.scale,focalX:d.focalX,focalY:d.focalY,flip:b?d.flip:_,overlay:b?d.overlay:E}:null,{Display:S}=(0,On.getDefinitionForType)(h),{Display:C}=(0,On.getDefinitionForType)(d?.resource.type)||{},x=(0,u.useRef)(null),A=o(t);(0,I.useTransformHandler)(f,(e=>{const t=x.current;if(null===e)t.style.transform="",t.style.width="",t.style.height="";else{const{translate:n,rotate:r,resize:a,dropTargets:o}=e;t.style.transform=`translate(${n?.[0]}px, ${n?.[1]}px) rotate(${r}deg)`,a&&0!==a[0]&&0!==a[1]&&(t.style.width=`${a[0]}px`,t.style.height=`${a[1]}px`),void 0!==o?.hover&&(t.style.opacity=o.hover?0:1),void 0!==o?.replacement&&p(o.replacement||null)}}));const k=(0,u.useRef)(null);(0,jn.useColorTransformHandler)({id:f,targetRef:k,resetOnNullTransform:!1});const O=(0,Un.getResponsiveBorder)(y,n,l);return c.createElement(Dc,Lc({ref:x,"data-element-id":f,isBackground:t.isBackground,previewMode:n},A),c.createElement(AnimationWrapper,{id:f,isAnimatable:r},c.createElement(Un.DisplayWithMask,{element:t,fill:!0,style:{opacity:void 0!==g?g/100:null,...(0,Un.shouldDisplayBorder)(t)?(0,Un.getBorderPositionCSS)({...O,width:`${A.width}px`,height:`${A.height}px`}):null},previewMode:n,responsiveBorder:O},c.createElement(S,{element:t,previewMode:n,box:A,getProxiedUrl:i,isCurrentResourceProcessing:v,isCurrentResourceUploading:w,maybeEnqueueFontStyle:s,siblingCount:a})),!n&&c.createElement(Fc,{hasReplacement:m},T&&c.createElement(Un.DisplayWithMask,{element:T,fill:!0,style:{opacity:g?g/100:null},previewMode:n},c.createElement(C,{element:T,box:A,getProxiedUrl:i,isCurrentResourceProcessing:v,isCurrentResourceUploading:w,maybeEnqueueFontStyle:s}))),b&&E&&!m&&c.createElement(Bc,{ref:k,style:(0,Yr.default)(E)})))})),Uc=p.default.div.withConfig({displayName:"storyPageToNode__Page",componentId:"sc-rgshjs-0"})(["display:block;position:relative;padding:0;border:0;background-color:transparent;height:","px;width:","px;flex:none;outline:0;"],(e=>{let{height:t}=e;return t}),(e=>{let{width:t}=e;return t})),jc=p.default.div.withConfig({displayName:"storyPageToNode__PreviewWrapper",componentId:"sc-rgshjs-1"})(["height:100%;position:relative;overflow:hidden;background-color:",";border-radius:4px;",""],(e=>{let{theme:t}=e;return t.colors.fg.white}),(e=>{let{background:t}=e;return(0,Yr.default)(t)})),zc=p.default.div.withConfig({displayName:"storyPageToNode__FullHeight",componentId:"sc-rgshjs-2"})(["position:absolute;top:","px;bottom:","px;right:0;left:0;"],(e=>{let{yOffset:t}=e;return t}),(e=>{let{yOffset:t}=e;return t})),Gc=(0,u.forwardRef)((function PageWithDependencies(e,t){let{page:n,width:r,height:a,renderFullHeightThumb:o=!1,containerHeight:l}=e;return c.createElement(p.ThemeProvider,{theme:g.theme},c.createElement(Po,null,c.createElement(I.TransformProvider,null,c.createElement(is,{pageSize:{width:r,height:a}},c.createElement(Uc,{ref:t,height:o?l:a,width:r},c.createElement(jc,{background:n.backgroundColor},c.createElement(zc,{yOffset:o?(l-a)/2:0},n.elements.map((e=>c.createElement(Hc,{key:e.id,previewMode:!0,element:e}))))))))))}));const Yc=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{renderFullHeightThumb:r=!1}=n,a=t*(1/ee.PAGE_RATIO),o=t*(1/ee.FULLBLEED_RATIO),l=document.createElement("div");l.style.cssText=`\n     contain: strict;\n     position: absolute;\n     top: 0;\n     left: 0;\n     width: ${t}px;\n     height: ${o}px;\n     opacity: 0;\n     transform: translate(-100%, -100%);\n     pointer-events: none;\n   `;const i=await new Promise((n=>{(0,u.render)(c.createElement(Gc,{ref:e=>{e&&n(e)},page:e,width:t,height:a,containerHeight:o,renderFullHeightThumb:r}),l)}));document.body.appendChild(l);const s=()=>{(0,u.unmountComponentAtNode)(l),document.body.removeChild(l)};return[i,s]};const Zc=async function(e,t){let{width:r=400,...a}=t;const o=await n.e(3182).then(n.bind(n,87559)),[l,i]=await Yc(e,r),s=await o.toJpeg(l,{...a,width:r,height:r*(1/ee.PAGE_RATIO),canvasHeight:r*(1/ee.PAGE_RATIO),canvasWidth:r});return i(),s};const Wc=function PageDataUrlProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),a=Nc(),o=(0,u.useCallback)((e=>{const t=e.id,n=a([t,async()=>{const t=await Zc(e,{});r((n=>({...n,[e.id]:t})))}]);return()=>{n()}}),[a]),l=(0,u.useMemo)((()=>({state:{dataUrls:n},actions:{queuePageImageGeneration:o}})),[o,n]);return c.createElement(Ac.Provider,{value:l},t)};const Vc=async function(e,t){let{width:r=400,...a}=t;const o=await n.e(3182).then(n.bind(n,87559)),[l,i]=await Yc(e,r,{renderFullHeightThumb:!0}),s=await o.toCanvas(l,{...a,fontEmbedCss:""});return i(),s};var $c=n(88862);function qc(e){const{r:t,g:n,b:r,a=1}=e;return $c.relativeLuminance({r:t/255,g:n/255,b:r/255,a})}function Kc(e){const t=$c.str2rgba(e);return $c.relativeLuminance(t)}function Xc(e,t,n){const r=$c.contrast(e,t);return{ratio:r,WCAG_AA:$c.aa(r,n)}}function Qc(e,t,n){return Xc(qc({r:e[0],g:e[1],b:e[2]}),qc({r:t[0],g:t[1],b:t[2]}),n)}const Jc=(0,u.createContext)({actions:{},state:{}});const ed=function(e,t){const n=e.getContext("2d"),r=(e.width/ee.FULLBLEED_RATIO-e.width/ee.PAGE_RATIO)/2,a=(0,Vr.getBox)({...t,height:t.height?t.height:(0,zn.calculateTextHeight)(t,t.width)},e.width,e.height-2*r),{x:o,y:l,width:i,height:s}=a,c=l+r;return n.getImageData(o,c,i,s).data},td={},nd={setPageCanvas:(e,t)=>{const{pageId:n,canvas:r}=t.payload;return{...e,[n]:r}},clearPageCanvas:(e,t)=>{const{pageId:n}=t.payload;return bn(e,[n])}};const rd=function(){return(0,u.useReduction)(td,nd)};const ad=function(){const[e,t]=(0,u.useState)(null),n=(0,u.useRef)(e);n.current=e;const r=(0,u.useCallback)((e=>e.backgroundColor===n.current?.backgroundColor&&(0,u.shallowEqual)(e.elements,n.current?.elements)?n.current.canvas:null),[]),a=(0,u.useCallback)((e=>{let{page:n,canvas:r}=e;t({elements:n.elements,backgroundColor:n.backgroundColor,canvas:r})}),[]);return{setSnapshot:a,getSnapshotCanvas:r}};function PageCanvasCacheValidator(e){let{pageId:t,clearPageCanvasCache:n}=e;const r=Ya((e=>{let{state:n}=e;return bn(n.pages.find((e=>{let{id:n}=e;return n===t})),["animations"])}));return(0,u.useEffect)((()=>{n({pageId:r.id})}),[r,n]),(0,u.useEffect)((()=>()=>n({pageId:t})),[n,t]),null}PageCanvasCacheValidator.propTypes={pageId:Ma().oneOfType([Ma().string,Ma().number]),clearPageCanvasCache:Ma().func};const od=(0,u.memo)(PageCanvasCacheValidator);const ld=function(e,t){return{...e,elements:e.elements.filter((e=>{let{id:n}=e;return!t.includes(n)}))}};const id=function PageCanvasProvider(e){let{children:t}=e;const n=Nc(),[r,a]=rd(),{getSnapshotCanvas:o,setSnapshot:l}=ad(),i=Ya((e=>{let{state:t}=e;return t.pages.map((e=>{let{id:t}=e;return t}))})),{currentPage:s,singleElementSelection:d}=Ya((e=>{let{state:t}=e;return{singleElementSelection:1===t.selectedElementIds?.length?t.selectedElementIds:Ue,currentPage:t.currentPage}})),p={currentPageValue:s,pageCanvasMapValue:r,singleElementSelectionValue:d},m=(0,u.useRef)(p);m.current=p;const f=(0,u.useCallback)((e=>{let[t,r]=e;const o=n([t,async()=>{const e=await Vc(r,{});a.setPageCanvas({pageId:r.id,canvas:e})}]);return o}),[n,a]),g=(0,u.useCallback)((()=>{const{currentPageValue:e,pageCanvasMapValue:t}=m.current;t[e.id]||f([e.id,e])}),[f]),h=(0,u.useCallback)((async(e,t)=>{const n=ld(e,t);let r=o(n);return r||(r=await Vc(n,{}),l({page:n,canvas:r})),r}),[l,o]),b=(0,u.useCallback)((async e=>{const{pageCanvasMapValue:t}=m.current;let n=t[e.id];return n||(n=await Vc(e,{}),a.setPageCanvas({pageId:e.id,canvas:n})),n}),[a]),E=(0,u.useCallback)((async e=>{const{currentPageValue:t,singleElementSelectionValue:n}=m.current;let r;r=n.includes(e.id)?await h(t,n):await b(t);const{fontSize:a}=e,o=function(e,t){const n=[255,255,255,255],r=[0,0,0,255],a=[],o={r:255,g:255,b:255,a:1},l={r:0,g:0,b:0,a:1};for(let t=0;t<e.length;t+=4)a.push([e[t],e[t+1],e[t+2],e[t+3]]);const i=a.map((e=>Qc(r,e,t)));if(!i.some((e=>{let{WCAG_AA:t}=e;return!t})))return{color:l};const s=a.map((e=>Qc(n,e,t)));if(!s.some((e=>{let{WCAG_AA:t}=e;return!t})))return{color:o};const c=i.reduce(((e,t)=>e+t.ratio),0)<s.reduce(((e,t)=>e+t.ratio),0);return c?{color:l,backgroundColor:{...o,a:.7}}:{color:o,backgroundColor:{...l,a:.7}}}(ed(r,e),a);return o}),[h,b]);return c.createElement(Jc.Provider,{value:{state:{pageCanvasMap:r},actions:{calculateAccessibleTextColors:E,generateDeferredPageCanvas:f,generateDeferredCurrentPageCanvas:g}}},i.map((e=>c.createElement(od,{key:e,pageId:e,clearPageCanvasCache:a.clearPageCanvas}))),t)};const sd=function(){return(0,u.useContextSelector)(Jc,(e=>{let{actions:t}=e;return t.calculateAccessibleTextColors}))};const cd=function(e){return(0,u.useContextSelector)(Jc,e??u.identity)},dd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAGElEQVQYV2NkYGD4////fwZGEMnIyMgAAEvqB/6wfXLSAAAAAElFTkSuQmCC",ud=p.default.div.withConfig({displayName:"devTools__Container",componentId:"sc-1mo3vwv-0"})(["position:fixed;z-index:2147483646;bottom:0;left:0;display:flex;flex-direction:column;width:35%;height:50%;border:6px solid ",";background:",";color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),pd=p.default.textarea.withConfig({displayName:"devTools__Textarea",componentId:"sc-1mo3vwv-1"})(["flex:1;border:0;background:",";color:",";white-space:nowrap;overflow:auto;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),md=p.default.div.withConfig({displayName:"devTools__Options",componentId:"sc-1mo3vwv-2"})(["display:flex;justify-content:space-between;padding:6px;"]),fd=p.default.label.withConfig({displayName:"devTools__Label",componentId:"sc-1mo3vwv-3"})(["margin-right:6px;"]),gd=p.default.button.withConfig({displayName:"devTools__Button",componentId:"sc-1mo3vwv-4"})(["margin-left:6px;"]),hd=e=>{const t=[];return[{...e,pages:e.pages.map((e=>({...e,elements:e.elements.map((e=>{const n={...e};return"resource"in e&&(n.resource={...e.resource},"video"===e.type&&(n.resource.mimeType="video/mp4",n.resource.src="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAPEbW9vdgAAAGxtdmhkAAAAANrF/AXaxfwFAAAD6AAAB9AAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAABhpb2RzAAAAABCAgIAHAE///////wAAAzh0cmFrAAAAXHRraGQAAAAB2sX8BdrF/AUAAAABAAAAAAAAB9AAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAABQAAAAUAAAAAAKwbWRpYQAAACBtZGhkAAAAANrF/AXaxfwFAAAD6AAAB9BVxAAAAAAAIWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAAAAAAACZ21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAq3N0c2QAAAAAAAAAAQAAAJthdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAABQAFABIAAAASAAAAAAAAAABDkpWVC9BVkMgQ29kaW5nAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAM2F2Y0MBTUAK/+EAG2dNQArsxLzzzUBAQZAAAAMAEAAAAwFI8SJZoAEABWjpeyyAAAAAEmNvbHJuY2xjAAEAAQAGAAAAGHN0dHMAAAAAAAAAAQAAABQAAABkAAAAZHN0c3oAAAAAAAAAAAAAABQAAAC1AAAADAAAAAwAAAAMAAAADAAAAGcAAAAOAAAADQAAAAwAAADEAAAADwAAAA4AAAAMAAAAmgAAAA8AAAAMAAAADAAAABEAAAAOAAAADAAAABxzdHNjAAAAAAAAAAEAAAABAAAACgAAAAEAAAAgY282NAAAAAAAAAACAAAAAAAAA/QAAAAAAAAGKwAAAKhjdHRzAAAAAAAAABMAAAABAAAAyAAAAAEAAAH0AAAAAQAAAMgAAAABAAAAAAAAAAEAAABkAAAAAQAAAfQAAAABAAAAyAAAAAEAAAAAAAAAAQAAAGQAAAABAAAB9AAAAAEAAADIAAAAAQAAAAAAAAABAAAAZAAAAAEAAAH0AAAAAQAAAMgAAAABAAAAAAAAAAEAAABkAAAAAQAAAZAAAAACAAAAZAAAABRzdHNzAAAAAAAAAAEAAAABAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAAH0AAAAMgAAQAAAAAAAW1kYXQAAAAAAAADXAAAALFliIQAIf8tERhKDUPN//6tPIlfMgqs2j4bf1chdW+++2VwQdh75gd9Y8UGeNAnhlaisT01Zs49a/0nV0aO/GLhqiGwvWR/s1K9W3zBx2od2cS1bT/kb2rz7FeHrWTqTLX6Gx65Y6i33pdJ/uLJd1nt76ybxnGFuPrIHacdB39MBmZsd4t/m7wPBzhrJIjUCiCUcSaxJPxvEH+6DID5TqxsXtv0RS9+hTuYECGa+YWdx4EAAAAIQZokbEMfi4AAAAAIQZ5COIc/0YEAAAAIAZ5hNEEH1YAAAAAIAZ5jakEH1YEAAABjQZpoSahBaJlMCM/eVhjnGE9A+AdJ7SwN5vlKUC/otPa/5jefanvcx5sQZ4c8/3tiMqvDgQF8rydFoFe3gcpkTP4xG9DP5oXTv1DTSsVi1O/u9fkq6BMYR61X6/n148wbBk3hAAAACkGehi5RMJfxO6sAAAAJAZ6lKRDn87czAAAACAGep25Cn8WAAAAAwEGarDUILakymAT/lvijvmpe6mLGpu6rJNoev4/97f/3/AViMdt7WMTLeGSxGKwsecwmz+Z5NTf4Lgky4aLbYBjw9pUtNg4bov9E4yT+OadpewkQxiWZZozDDf98P4PN72xr+rkQJcODW8z2LOkQVijjHcWSmTAvF7/ANFm8TO5l9vC/tz7FvEis+ba+dTueI87l9hdLXQfWqKN+J9j1fj5cguj08byzEmWnKbLlqG1uTZmu0LDedc3Ugo76bySHIAAAAAtBnspklERc3+sNqQAAAAoBnukpEZ/3fsMPAAAACAGe625N/6+AAAAAlkGa8DUILakymARfBGYe5snAbMic1iEEu9W/yugK09WdqQ1/7ftt/lUz4i6orQg+4cIz2nHYVKTXCJJbyOrz/tGL+TWtNtUBVK2kbTsfCYF8ddhk+qL5Jr82IUEUALXNsKpx1hhGIJnvqqlGTOyyOpmwbHhNUa2TaBkzzVzuaVnuHnaL3sjfLR0XEc/T6ntUXHacPLf94QAAAAtBnw5klERd//FEowAAAAgBny1pFf+ngQAAAAgBny9uf+yhJAAAAA1BmzM1CC2pMpgE/xwwAAAACkGfUWSURFz/kYEAAAAIAZ9ybkv/mIA=",n.resource.poster=dd,t.push(n.id)),"image"===e.type&&(n.resource.mimeType="image/png",n.resource.src=dd)),n}))})))},t]},bd=e=>{if(!e.length)return e;const t=e.match(/\/([^/?#]+)[^/]*$/);return t.length>1?`__WEB_STORIES_TEMPLATE_BASE_URL__/images/templates/%%templateName%%/${t[1]}`:e};const Ed=function DevTools(){const[e,t]=(0,u.useState)(!1),[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(!1),[l,i]=(0,u.useState)(!1),{showSnackbar:s}=(0,kr.useSnackbar)(),d=(0,u.useRef)(),{reducerState:p,restore:m}=Ya((e=>{let{internal:t}=e;return{reducerState:t.reducerState,restore:t.restore}})),{pages:f,current:g,selection:h,story:{globalStoryStyles:b}}=p,E={current:g,selection:h,story:{globalStoryStyles:b},version:mr.DATA_VERSION,pages:f},y=a?hd(E)[0]:l?(_=E,{..._,current:null,selection:[],story:{},pages:_.pages.map((e=>({...e,elements:e.elements.map((e=>{const t={...e};return"resource"in e&&(t.resource={...e.resource},"video"===e.type&&(t.resource.id=0,t.resource.posterId=0,t.resource.src=bd(t.resource.src),t.resource.poster=bd(t.resource.poster)),"image"===e.type&&(t.resource.id=0,t.resource.sizes=[],t.resource.src=bd(t.resource.src))),t})),pageTemplateType:e?.pageTemplateType??""})))}):E;var _;const v=()=>t((e=>!e));(0,fr.useGlobalKeyDownEffect)({key:"mod+shift+alt+j",editable:!0},v);const w=JSON.stringify(y,null,2),T=n?window.btoa(w):w,[S,C]=(0,u.useState)(T);return(0,u.useEffect)((()=>C(T)),[T]),e?c.createElement(ud,null,c.createElement(md,null,c.createElement("div",null,c.createElement(fd,{title:"For easier sharing thru various channels"},c.createElement("input",{type:"checkbox",checked:n,onChange:()=>r((e=>!e))}),"Base64"),c.createElement(fd,{title:"Replace resources with dummy resources"},c.createElement("input",{type:"checkbox",checked:a,onChange:()=>o((e=>!e))}),"Dummy resources"),c.createElement(fd,{title:"Export as Template"},c.createElement("input",{type:"checkbox",checked:l,onChange:()=>i((e=>!e))}),"Template")),c.createElement("div",null,c.createElement(gd,{"aria-label":"Load data from input",onClick:()=>{let e=S;try{e=window.atob(e)}catch(e){}const t=JSON.parse(e),n={...t,story:{...p.story,...t.story},capabilities:p.capabilities},[r,o]=a?hd(n):[n,[]];m(r),o.length>0&&o.forEach((e=>{const t=document.getElementById(`video-${e}`);t&&t.load()})),s({message:"Story restored from input",timeout:1200})}},"Load"),c.createElement(gd,{"aria-label":"Copy data to clipboard",onClick:()=>{d.current.select(),document.execCommand("copy"),d.current.setSelectionRange(0,0),s({message:"Copied to clipboard",timeout:1200})}},"Copy"),c.createElement(gd,{"aria-label":"Close DevTools",onClick:v},"X"))),c.createElement(pd,{ref:d,className:"mousetrap",value:S,onChange:e=>C(e.target.value)})):null},yd=(0,p.createGlobalStyle)([".react-calendar__tile--now.react-calendar__month-view__days__day:focus{background-color:#eeeec1;}"]),_d="useskeyboard",vd=(0,p.createGlobalStyle)(["body:not(",") *:focus{outline:none !important;}"],".useskeyboard"),wd=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Digit1","Digit2","Digit3"];const Td=()=>{const[e,t]=(0,u.useState)(!1),n=n=>{!e&&wd.includes(n.code)&&t(!0)},r=()=>{e&&t(!1)};return(0,u.useEffect)((()=>(document.addEventListener("keydown",n,!0),document.addEventListener("mousedown",r,!0),function(){document.removeEventListener("keydown",n,!0),document.removeEventListener("mousedown",r,!0)}))),(0,u.useEffect)((()=>{document.body.classList.toggle(_d,e)}),[e]),c.createElement(vd,null)},Sd=()=>({locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},allowedMimeTypes:{audio:["audio/mpeg","audio/aac","audio/wav","audio/ogg"],image:["image/png","image/jpeg","image/jpg","image/gif","image/webp"],caption:["text/vtt"],vector:["image/svg+xml"],video:["video/mp4","video/webm"]},isRTL:!1,storyId:1,cdnURL:"https://wp.stories.google/static/main/",maxUpload:314572800,capabilities:{hasUploadMediaAction:!1,canManageSettings:!1},metadata:{publisher:""},canViewDefaultTemplates:!0,showMedia3p:!0,encodeMarkup:!0,ffmpegCoreUrl:"https://wp.stories.google/static/main/js/@ffmpeg/core@0.10.0/dist/ffmpeg-core.js",apiCallbacks:{},MediaUpload:()=>null,styleConstants:{topOffset:0,leftOffset:0}});Object.defineProperty(_.default,"name",{value:"stylisRTLPlugin"});const Cd=function StoryEditor(e){let{config:t,initialEdits:n,children:r}=e;const a=(0,v.default)(Sd(),t),{storyId:o,isRTL:l,flags:i,styleConstants:{leftOffset:s,topOffset:d}={}}=a;return c.createElement(C.FlagsProvider,{features:i},c.createElement(p.StyleSheetManager,{stylisPlugins:l?[_.default]:[]},c.createElement(p.ThemeProvider,{theme:O},c.createElement(B,null,c.createElement(H,{config:a},c.createElement(Z,null,c.createElement(Io,null,c.createElement(Sr,{size:50},c.createElement(w.default,null,c.createElement(Ga,{storyId:o,initialEdits:n},c.createElement(Gi,null,c.createElement(Va,null,c.createElement(Po,null,c.createElement(Li,null,c.createElement(xc,null),c.createElement(I.TransformProvider,null,c.createElement(ns,null,c.createElement(vc,null,c.createElement(id,null,c.createElement(Wc,null,c.createElement(T.default,{value:{isRTL:l,leftOffset:s,topOffset:d}},c.createElement(k,null),c.createElement(Ed,null),c.createElement(x.DefaultMoveableGlobalStyle,null),c.createElement(x.CropMoveableGlobalStyle,null),c.createElement(S.ModalGlobalStyle,null),c.createElement(yd,null),c.createElement(Td,null),r))))))))))))))))))))};const Id=(0,u.memo)((function PreviewPageElements(e){let{page:t}=e;return t.elements.map((e=>c.createElement(Hc,{previewMode:!0,key:e.id,page:t,element:e,isAnimatable:!0})))})),xd=p.default.div.withConfig({displayName:"previewPage__FullBleedPreviewWrapper",componentId:"sc-1r5t7dq-0"})(["height:",";width:100%;overflow:hidden;position:relative;display:flex;align-items:center;background-color:white;",";"],(e=>{let{pageSize:t}=e;return`${t.containerHeight}px`}),(e=>{let{background:t}=e;return(0,Yr.default)(t)})),Ad=p.default.div.withConfig({displayName:"previewPage__PreviewSafeZone",componentId:"sc-1r5t7dq-1"})(["width:100%;height:",";overflow:visible;position:absolute;margin:0;"],(e=>{let{pageSize:t}=e;return`${t.height}px`}));function PreviewPageAnimationController(e){let{animationState:t}=e;const n=(0,Rn.useStoryAnimationContext)((e=>{let{actions:t}=e;return t.WAAPIAnimationMethods}));return(0,u.useEffect)((()=>{switch(t){case Rn.STORY_ANIMATION_STATE.PLAYING:return n.play(),()=>{};case Rn.STORY_ANIMATION_STATE.RESET:return n.reset(),()=>{};case Rn.STORY_ANIMATION_STATE.SCRUBBING:case Rn.STORY_ANIMATION_STATE.PAUSED:return n.pause(),()=>{};default:return()=>{}}}),[t,n]),(0,u.useEffect)((()=>()=>n.reset()),[n]),null}const kd=(0,u.memo)((0,u.forwardRef)((function PreviewPageDisplay(e,t){let{page:n,pageSize:r}=e;return c.createElement(xd,{ref:t,pageSize:r,background:n.backgroundColor},c.createElement(Ad,{pageSize:r},c.createElement(Id,{page:n})))})));(0,u.forwardRef)((function PreviewPage(e,t){let{page:n,pageSize:r,animationState:a=Rn.STORY_ANIMATION_STATE.RESET,onAnimationComplete:o}=e;return c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(Rn.StoryAnimation.Provider,{animations:n.animations,elements:n.elements,onWAAPIFinish:o},c.createElement(kd,{ref:t,page:n,pageSize:r}),c.createElement(PreviewPageAnimationController,{animationState:a})))}));PreviewPageAnimationController.propTypes={animationState:Ma().oneOf(Object.values(Rn.STORY_ANIMATION_STATE))};var Od;function Pd(){return Pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pd.apply(this,arguments)}const SvgArrowDownLeftCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Pd({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Od||(Od=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.001 19.467V12.5a.5.5 0 0 1 1 0v5.041C10.149 14.209 13.641 12 17.465 12c2.815 0 5.384 1.183 7.384 3.13a.5.5 0 0 1-.698.716C22.314 14.057 19.988 13 17.465 13c-3.756 0-7.244 2.39-9.162 6h6.37a.5.5 0 0 1 0 1H7.511a.498.498 0 0 1-.51-.533Z",fill:"currentColor"})))},Nd=(0,c.memo)(SvgArrowDownLeftCurved);var Rd;function Md(){return Md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Md.apply(this,arguments)}const SvgArrowDownRightCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Md({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Rd||(Rd=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.849 15.846C9.686 14.057 12.012 13 14.534 13c3.757 0 7.245 2.39 9.163 6h-6.37a.5.5 0 1 0 0 1h7.162a.498.498 0 0 0 .51-.523V12.5a.5.5 0 0 0-1 0v5.042C21.853 14.209 18.36 12 14.536 12c-2.815 0-5.384 1.183-7.384 3.13a.5.5 0 1 0 .698.716Z",fill:"currentColor"})))},Ld=(0,c.memo)(SvgArrowDownRightCurved);var Dd,Bd=n(27856),Fd=n(73715);function Hd(){return Hd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hd.apply(this,arguments)}function Tooltip(e){let{hasTail:t=!0,placement:n=Bd.PLACEMENT.BOTTOM,...r}=e;return c.createElement(Fd.BaseTooltip,Hd({placement:n,hasTail:t},r))}function Ud(){return Ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ud.apply(this,arguments)}function HistoryButton(e){let{title:t,shortcut:n,children:r,...a}=e;return c.createElement(Tooltip,{title:t,shortcut:n,hasTail:!0},c.createElement(m.Button,Ud({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL},a),r))}function Redo(){const{state:{canRedo:e},actions:{redo:t}}=Cr(),{isRTL:n}=U(),r=(0,u.useCallback)((()=>t()),[t]);return c.createElement(HistoryButton,{title:(0,d.__)("Redo","web-stories"),shortcut:"shift+mod+z",disabled:!e,onClick:r,"aria-label":(0,d.__)("Redo Changes","web-stories")},n?c.createElement(Nd,null):c.createElement(Ld,null))}function Undo(){const{state:{canUndo:e},actions:{undo:t}}=Cr(),{isRTL:n}=U(),r=(0,u.useCallback)((()=>t()),[t]);return c.createElement(HistoryButton,{title:(0,d.__)("Undo","web-stories"),shortcut:"mod+z",disabled:!e,onClick:r,"aria-label":(0,d.__)("Undo Changes","web-stories")},n?c.createElement(Ld,null):c.createElement(Nd,null))}function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jd.apply(this,arguments)}const SvgEye=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",jd({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Dd||(Dd=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.023 16.229C9.948 12.71 12.996 11 16 11c3.004 0 6.052 1.711 7.977 5.229a.23.23 0 0 1-.007.214C21.878 19.503 18.923 21 16 21s-5.877-1.497-7.97-4.557l-.412.283.412-.283a.23.23 0 0 1-.007-.215Zm16.831-.48C22.774 11.947 19.41 10 16 10c-3.41 0-6.775 1.948-8.854 5.748l.439.24-.439-.24c-.213.39-.193.892.059 1.26C9.465 20.314 12.717 22 16 22c3.283 0 6.535-1.686 8.795-4.992.252-.368.272-.87.059-1.26ZM14 16a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm2-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z",fill:"currentColor"})))},zd=(0,c.memo)(SvgEye);const Gd=function PreviewErrorDialog(e){let{isOpen:t,onClose:n,onRetry:r}=e;return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Open preview","web-stories"),secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:r,primaryText:(0,d.__)("Try again","web-stories")},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("The preview window failed to open.","web-stories")))},Yd="story-preview";const Zd=function PreviewButton(e){let{forceIsSaving:t=!1}=e;const{isSaving:n,previewLink:r,status:a,autoSave:o,saveStory:l}=Ya((e=>{let{state:{meta:{isSaving:t},story:{status:n,previewLink:r}},actions:{autoSave:a,saveStory:o}}=e;return{isSaving:t,status:n,previewLink:r,autoSave:a,saveStory:o}})),i=Ic(),[s,p]=(0,u.useState)(null),g="draft"===a||!a,h=e=>{const t=new URL(e);return t.hash="#development=1",t.toString()},b=(0,u.useCallback)((()=>{let e;(0,P.trackEvent)("preview_story");try{if(e=window.open("about:blank",Yd),e){e.document.write("<!DOCTYPE html><html><head>"),e.document.write("<title>"),e.document.write((0,Or.escapeHTML)((0,d.__)("Generating the preview…","web-stories"))),e.document.write("</title>"),e.document.write("</head><body>"),e.document.write((0,Or.escapeHTML)((0,d.__)("Please wait. Generating the preview…","web-stories")));const t=h(r);e.document.write(`<script>\n            setTimeout(function() {\n              location.replace(${JSON.stringify(t)});\n            }, 5000);\n          <\/script>`)}}catch(e){}(g?l:o)().then((t=>{if(e&&!e.closed&&e.location.href){const n=h(t?.previewLink??r);e.location.replace(n)}})).catch((()=>p(r)))}),[o,g,r,l]),E=(0,u.useCallback)((e=>{p(null);const t=h(s);window.open(t,Yd+Math.random()),e.preventDefault()}),[s]),y=(0,u.useCallback)((()=>p(null)),[]),_=(0,d.__)("Preview","web-stories");return c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:_,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:b,disabled:n||t||i,"aria-label":_},c.createElement(zd,null))),c.createElement(Gd,{isOpen:Boolean(s),onClose:y,onRetry:E}))};var Wd=n(29042),Vd=n(49599),$d=n(42699),qd=n(70722),Kd=n(68057),Xd=n(60427),Qd=n(96764),Jd=n(63415);const eu=function(e){const t=(0,Kd.getSettings)(),{timeFormat:n}=t;return(0,Xd.default)(e,n)};const tu=function(){const e=(0,Kd.getSettings)(),{timeFormat:t}=e;return!t||/a(?!\\)/.test(t.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""))},nu=(0,u.createContext)({state:{},actions:{}}),ru=e=>{let{children:t}=e;const[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(!1),[l,i]=(0,u.useState)(),[s,d]=(0,u.useState)(!1),p=(0,u.useCallback)((e=>{i(e)}),[i]),m=(0,u.useCallback)((()=>{(0,P.trackEvent)("checklist_toggled",{status:n?"closed":"open"}),r((e=>!e))}),[n]),f=(0,u.useCallback)((()=>{(0,P.trackEvent)("checklist_toggled",{status:"closed"}),r(!1)}),[]),g=(0,u.useCallback)((()=>{(0,P.trackEvent)("checklist_toggled",{status:"open"}),r(!0),o(!0)}),[]),h=(0,u.useCallback)((()=>o(!1)),[]),b=(0,u.useMemo)((()=>({state:{checklistFocused:a,isOpen:n,isChecklistMounted:s,openPanel:l},actions:{toggle:m,close:f,open:g,resetChecklistFocused:h,setIsChecklistMounted:d,setOpenPanel:p}})),[a,f,l,n,g,h,m,p,d,s]);return c.createElement(nu.Provider,{value:b},t)};function au(e){return(0,u.useContextSelector)(nu,e??u.identity)}var ou=n(36798),lu=n(86376);const iu=70,su=Math.floor(1),cu=640,du=853,uu=96,pu="checklist_companion",mu=(0,d.__)("Checklist","web-stories"),fu={ACCESSIBILITY:"accessibility",DESIGN:"design",PRIORITY:"priority"},gu={[fu.ACCESSIBILITY]:(0,d.__)("Accessibility","web-stories"),[fu.DESIGN]:(0,d.__)("Design","web-stories"),[fu.PRIORITY]:(0,d.__)("Priority","web-stories")},hu={fontSizeTooSmall:{title:(0,We.default)(
/* translators: %d: minimum font size. */
(0,d.__)("Increase font size to %s or above","web-stories"),12),footer:(0,We.default)(
/* translators: %d: minimum font size. */
(0,d.__)("Ensure legibility by selecting text size %d or greater","web-stories"),12)},imagesMissingAltText:{title:(0,d.__)("Add assistive text to images","web-stories"),footer:(0,d.__)("Optimize accessibility and indexability with meaningful text to better assist users.","web-stories")},linkTappableRegionTooBig:{title:(0,d.__)("Reduce link size","web-stories"),footer:(0,d.__)("Elements with links must not cover most of the page. Decrease the size of elements with links.","web-stories")},linkTappableRegionTooSmall:{title:(0,We.default)(
/* translators: %s: minimum tappable region size width x minimum tappable region size height. */
(0,d.__)("Increase tap area size to at least %s","web-stories"),"48x48px"),footer:(0,d.__)("Optimize accessibility and indexability with meaningful text to better assist users","web-stories")},lowContrast:{title:(0,d.__)("Increase contrast between text and background color","web-stories"),footer:(0,d.__)("Ensure legibility of text and ease of reading by increasing color contrast","web-stories"),textPanel:(0,d.__)("This color or font size combination may be hard for some people to read.","web-stories"),backgroundPanel:(0,d.__)("This background color may make some text hard to read.","web-stories"),warningIcon:(0,d.__)("Low Warning","web-stories")},videoMissingCaptions:{title:(0,d.__)("Add video captions","web-stories"),footer:(0,d.__)("Keep the audience engaged even when they can't listen to the audio","web-stories")},videoMissingTitle:{title:(0,d.__)("Add video description","web-stories"),footer:(0,d.__)("Improves indexability and accessibility (for videos without captions)","web-stories")}},bu={storyTooShort:{title:(0,We.default)(
/* translators: %d: maximum number of pages. */
(0,d._n)("Make Web Story at least %d page","Make Web Story at least %d pages",4,"web-stories"),4),footer:(0,We.default)(
/* translators: 1: minimum number of pages. 2: maximum number of pages. */
(0,d.__)("It is recommended to have between %1$d and %2$d pages in your story","web-stories"),4,30)},storyTooLong:{title:(0,We.default)(
/* translators: %d: minimum number of pages. */
(0,d._n)("Make Web Story fewer than %d page","Make Web Story fewer than %d pages",30,"web-stories"),30),footer:(0,We.default)(
/* translators: 1: minimum number of pages. 2: maximum number of pages. */
(0,d.__)("It is recommended to have between %1$d and %2$d pages in your story","web-stories"),4,30)},tooLittlePageText:{title:(0,d.__)("Add more text to page","web-stories"),footer:(0,We.default)(
/* translators: %d: minimum number of story characters. */
(0,d._n)("Include at least %d character","Include at least %d characters",100,"web-stories"),100)},tooMuchPageText:{title:(0,d.__)("Reduce text amount on page","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,We.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Include no more than %d character","Include no more than %d characters",200,"web-stories"),200)),c.createElement("li",null,(0,d.__)("Use a page attachment breaking up the text into multiple screens; or","web-stories")),c.createElement("li",null,(0,We.default)(
/* translators: %s: maximum percentage of characters, depending on number of pages. */
(0,d.__)("Keep the total number of text-heavy pages under %s of total number of story pages","web-stories"),"10%")))},tooManyLinksOnPage:{title:(0,We.default)(
/* translators: %s: maximum number of links per page. */
(0,d.__)("Avoid including more than %s links per page","web-stories"),3),footer:(0,We.default)(
/* translators: %s: maximum number of links per page. */
(0,d.__)("Avoid having more than %s links on one page","web-stories"),3)},imageResolutionTooLow:{title:(0,d.__)("Increase image resolution","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,d.__)("Use larger resolution (2x or 3x) images for best appearance on screens with high pixel density","web-stories")),c.createElement("li",null,(0,We.default)(
/* translators: %s: minimum image size width x minimum image size height. */
(0,d.__)("For full-screen images, use a resolution of at least %s","web-stories"),"828x1792px")))},videoFrameRateTooLow:{title:(0,We.default)(
/* translators: %d: minimum number of frames per second for video. */
(0,d.__)("Increase video frame rate to at least %d fps","web-stories"),24),footer:(0,We.default)(
/* translators: %d: minimum number of frames per second for video. */
(0,d._n)("Ensure your video has a minimum of %d frame per second","Ensure your video has a minimum of %d frames per second",24,"web-stories"),24)},videoResolutionTooLow:{title:(0,d.__)("Increase video resolution","web-stories"),footer:(0,We.default)(
/* translators: 1: minimum video resolution. 2: minimum video width x minimum video height in pixels. */
(0,d.__)("Consider using a minimum resolution of %1$s (%2$s) to represent portrait videos","web-stories"),"480p","852x480px")},videoTooLong:{title:(0,We.default)(
/* translators: %d: maximum video length in minutes. */
(0,d._n)("Split videos into segments of %d minute or less","Split videos into segments of %d minutes or less",su,"web-stories"),su),footer:(0,d.__)("Shorter videos help readers navigate stories","web-stories")},firstPageAnimation:{title:(0,d.__)("First Page Animations","web-stories"),footer:(0,d.__)("Animations on the first page of a story are not supported for user experience and performance reasons.","web-stories"),animationPanel:(0,d.__)("Animations on the first page of a story are not supported for user experience and performance reasons.","web-stories")}},Eu={storyMissingDescription:{title:(0,d.__)("Add Web Story description","web-stories"),footer:(0,d.__)("Incorporate a brief description for better user experience","web-stories")},storyMissingTitle:{title:(0,d.__)("Add Web Story title","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,We.default)(
/* translators: %d: maximum story title length in words. */
(0,d._n)("Keep under %d word","Keep under %d words",10,"web-stories"),10)),c.createElement("li",null,(0,We.default)(
/* translators: %d: maximum story title length in characters. */
(0,d._n)("Don't exceed %d character","Don't exceed %d characters",iu,"web-stories"),iu)))},storyMissingPoster:{title:(0,d.__)("Add poster image","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,d.__)("Use as a representation of the story","web-stories")),c.createElement("li",null,(0,d.__)("Avoid images with embedded text","web-stories")),c.createElement("li",null,(0,We.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Use an image that's at least %s","web-stories"),"640x853px")),c.createElement("li",null,(0,We.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"3:4")))},videoMissingPoster:{title:(0,d.__)("Add poster image to every video","web-stories"),footer:(0,d.__)("Ensure a better experience by displaying a poster while users wait for the video to load","web-stories")},storyTitleTooLong:{title:(0,We.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Shorten title to fewer than %d character","Shorten title to fewer than %d characters",iu,"web-stories"),iu),footer:(0,We.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Limit story title to %d character or less","Limit story title to %d characters or less",iu,"web-stories"),iu)},logoTooSmall:{title:(0,We.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Increase size of publisher logo to at least %s","web-stories"),"96x96px"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,We.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Use an image that's at least %s","web-stories"),"96x96px")),c.createElement("li",null,(0,We.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"1x1px")))},noPublisherLogo:{title:(0,d.__)("Add a publisher logo to your story","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,We.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Use an image that's at least %s","web-stories"),"96x96px")),c.createElement("li",null,(0,We.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"1x1px")))},storyPosterSize:{title:(0,We.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Correct poster image aspect ratio to %s","web-stories"),"640x853px"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,We.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Use an image that's at least %s","web-stories"),"640x853px")),c.createElement("li",null,(0,We.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"3:4")))},videoNotOptimized:{title:(0,d.__)("Optimize videos","web-stories"),footer:(0,We.default)(
/* translators: %s: video resolution (720p) */
(0,d.__)("Videos larger than %s can cause slower loading and higher bandwidth costs.","web-stories"),"720p")},storyMissingPublisherName:{title:(0,d.__)("Add Site Title","web-stories")},ampValidation:{title:(0,d.__)("Compatibility","web-stories"),footer:c.createElement(ou.default,{mapping:{a:c.createElement(lu.Link,{href:"https://wp.stories.google/docs/faq/",rel:"noreferrer",target:"_blank",onClick:e=>(0,P.trackClick)(e,"click_checklist_amp_test"),size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL})}},(0,d.__)("Your story contains errors that can affect eligibility to appear on Google. Please see <a>our FAQ</a> for more information.","web-stories"))}},yu="unavailable",_u="recommended",vu="all",wu={[yu]:[],[_u]:[fu.ACCESSIBILITY,fu.DESIGN],[vu]:Object.values(fu)},Tu={[yu]:null,[_u]:fu.DESIGN,[vu]:fu.PRIORITY},Su="story is no longer empty",Cu="publish button is pressed",Iu="story 'recommended' section enabled",xu="story 'high priority' section enabled",Au="story is published, regardless of recommendations",ku={[yu]:{[Su]:_u,[Cu]:vu,[Au]:vu,[Iu]:_u},[_u]:{[xu]:vu,[Cu]:vu,[Au]:vu},[vu]:{}},Ou=(e,t)=>ku[e][t]||e,Pu=(0,u.createContext)({state:{},actions:{}});function ChecklistCheckpointProvider(e){let{children:t}=e;const[n,r]=(0,u.useReducer)(Ou,yu),[a,o]=(0,u.useState)(),[l,i]=(0,u.useState)(),s=a>0,d=Ya((e=>{let{state:{story:t}}=e;return t.status}));(0,u.useEffect)((()=>{"publish"===d&&r(Au)}),[d]),za(La.onSecondPageAdded,(0,u.useCallback)((()=>{r(Iu)}),[])),za(La.onFifthPageAdded,(0,u.useCallback)((()=>{r(xu)}),[])),za(La.onInitialElementAdded,(0,u.useCallback)((()=>{r(Su)}),[]));const p=(0,u.useCallback)((e=>{o(e)}),[]),m=(0,u.useCallback)((()=>r(Cu)),[]),f=(0,u.useCallback)((()=>{i(!0)}),[]),g=(0,u.useCallback)((()=>{i(!1)}),[]),h=(0,u.useMemo)((()=>({state:{checkpoint:n,hasHighPriorityIssues:s,reviewChecklistRequested:l},actions:{updateHighPriorityCount:p,handleResetReviewChecklist:g,handleReviewChecklist:f,showPriorityIssues:m}})),[n,f,m,g,l,s,p]);return c.createElement(Pu.Provider,{value:h},t)}function Nu(e){return(0,u.useContextSelector)(Pu,e??u.identity)}const Ru=(0,u.createContext)(null),Mu=(0,u.createContext)(null),Lu={[fu.PRIORITY]:{},[fu.DESIGN]:{},[fu.ACCESSIBILITY]:{}};function ChecklistCountProvider(e){let{hasChecklist:t,children:n}=e;const r=(0,u.useState)({...Lu,hasChecklist:t});return c.createElement(Ru.Provider,{value:r},n)}function ChecklistCategoryProvider(e){let{children:t,category:n}=e;const r=(0,u.useContext)(Ru)?.[1];if(!r)throw new Error("Cannot use `ChecklistCategoryProvider` outside of `ChecklistCountProvider`");const a=(0,u.useCallback)((e=>r((t=>({...t,[n]:{...t[n],...e}})))),[n,r]);return c.createElement(Mu.Provider,{value:a},t)}function Du(e,t){const n=(0,u.useContext)(Mu);if(!n)throw new Error("Cannot use `useRegisterCheck` outside of `ChecklistCategoryProvider`");(0,u.useEffect)((()=>n({[e]:t})),[e,n,t])}function Bu(e){const t=(0,u.useContext)(Ru)?.[0];if(!t)throw new Error("Cannot use `useCategoryCount` outside of `ChecklistCountProvider`");return Object.values(t[e]||{}).filter((e=>e)).length}Object.defineProperty(_.default,"name",{value:"stylisRTLPlugin"});const Fu=[_.default],Hu=[];const Uu=function DirectionAware(e){let{children:t}=e;const{isRTL:n}=U();return c.createElement(p.StyleSheetManager,{stylisPlugins:n?Fu:Hu},t)};var ju=n(12666);function zu(){return zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zu.apply(this,arguments)}const Gu="entering",Yu="entered",Zu="exiting",Wu="default",Vu={default:{entering:Gu},entering:{entered:Yu},entered:{exiting:Zu},exiting:{exited:"exited"},exited:{entering:Gu}},$u=(e,t)=>Vu[e]?.[t]||e,qu=(0,u.forwardRef)(((e,t)=>{let{state:n,children:r}=e;const[a,o]=(0,u.useReducer)($u,n===Yu?n:Wu),[l,i]=(0,u.useState)(n);(0,u.useEffect)((()=>{const e=requestAnimationFrame((()=>i(n)));return()=>cancelAnimationFrame(e)}),[n]),(0,u.useEffect)((()=>{o(l)}),[l]);const s=[Gu,Yu].includes(a)&&"exiting"===n,c=[Zu].includes(a)&&[Gu,Yu].includes(n)||s;return(0,u.cloneElement)(r(c?n:a),{ref:t})}));function ScheduledTransition(e){let{children:t,...n}=e;const r=(0,u.useRef)();return c.createElement(ju.default,zu({nodeRef:r},n),(e=>c.createElement(qu,{ref:r,state:e},(e=>t(e)))))}const Ku=p.default.div.withConfig({displayName:"navigationWrapper__NavigationWrapper",componentId:"sc-1qotgfl-0"})(["position:absolute;",";bottom:0;max-height:calc(100vh - ","px);width:","px;color:",";background-color:",";border:1px solid ",";border-radius:",";overflow:hidden;",""],(e=>{let{alignRight:t=!1}=e;return t?"right: 0":"left: 0"}),161,310,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{isOpen:t}=e;return!t&&(0,p.css)(["&,*{height:0;visibility:hidden;}"])}));Ku.propTypes={alignRight:Ma().bool,isOpen:Ma().bool};const Xu=Ku;var Qu=n(19901),Ju=n(18969);var ep=n(35199),tp=n(33625);const np=(0,p.css)(["",";"],(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),rp=(0,p.css)([":focus-within{",";}"],(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),ap=p.default.div.withConfig({displayName:"components__NavBar",componentId:"sc-1m7fu09-0"})(["display:flex;justify-content:space-between;align-items:center;width:100%;height:","px;background-color:",";",""],48,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),ep.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]}))),op=(0,p.default)(m.Button).withConfig({displayName:"components__NavButton",componentId:"sc-1m7fu09-1"})([""," ",";svg{width:32px;}* + *{margin-left:12px;}"],ep.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),np),lp=p.default.div.withConfig({displayName:"topNavigation__TopNavButtons",componentId:"sc-rirhnw-0"})(["padding-right:15px;"]),ip=(0,p.default)(Qu.Headline).attrs({as:"h2",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}).withConfig({displayName:"topNavigation__Label",componentId:"sc-rirhnw-1"})(["padding-left:24px;font-weight:",";"],(e=>{let{theme:t}=e;return t.typography.weight.regular})),sp=(0,u.forwardRef)((function TopNavigation(e,t){let{onClose:n,label:r,popupId:a}=e;return c.createElement(ap,null,c.createElement(ip,null,r),c.createElement(lp,null,c.createElement(op,{ref:t,"aria-label":(0,d.__)("Close","web-stories"),onClick:()=>{!function(e){document.querySelector(`[aria-owns=${e}]`)?.focus()}(a),n()},type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.CIRCLE},c.createElement(Ju.default,null))))})),cp=(0,p.css)(["opacity:1;transform:none;"]),dp=e=>(0,p.css)(["opacity:0;transform:translateX(","px);"],"left"===e?-20:20),up={entering:cp,entered:cp,exiting:dp,exited:dp},pp=p.default.div.withConfig({displayName:"secondaryPopup__Controller",componentId:"sc-b3cg46-0"})(["position:absolute;top:-12px;",":0px;opacity:0;transform:translateX(-20px);transition:opacity ","ms ",",transform ","ms ",";",""],(e=>{let{placement:t}=e;return t}),300,qe.BEZIER.default,300,qe.BEZIER.default,(e=>{let{state:t}=e;return up[t]}));const mp=function Popup(e){let{isOpen:t,popupId:n,children:r,ariaLabel:a,shouldKeepMounted:o,placement:l="left",onEnter:i=Lt,onExited:s=Lt}=e;return c.createElement(ScheduledTransition,{in:t,timeout:300,mountOnEnter:!o,unmountOnExit:!o,onEnter:i,onExited:s},(e=>c.createElement(pp,{id:n,role:"dialog","aria-label":a,state:e,placement:l},r)))};var fp=n(76517);const gp={NORMAL:"normal",DANGER:"danger"};var hp=n(19722);const bp=p.default.div.attrs({role:"tablist"}).withConfig({displayName:"styles__Tablist",componentId:"sc-oyok4o-0"})(["background:",";*{user-select:text;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));bp.propTypes={"aria-label":Ma().string.isRequired};const Ep=(0,p.default)(Qu.Headline).attrs({as:"h3",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"styles__PanelText",componentId:"sc-oyok4o-1"})(["transition:background-color 300ms ease-in;"]),yp=p.default.div.withConfig({displayName:"styles__TabButtonWrapper",componentId:"sc-oyok4o-2"})(["position:relative;height:60px;width:100%;padding:5px 4px;&,:hover,:focus-within,.","{background-color:",";}"],hp.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.bg.secondary})),_p=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.PLAIN}).withConfig({displayName:"styles__TabButton",componentId:"sc-oyok4o-3"})(["position:absolute;display:flex;justify-content:space-between;width:calc(100% - 8px);height:calc(100% - 10px);padding:16px;border-radius:0;&,:hover,:focus,.","{background-color:",";}",";","{opacity:0.8;}",";"],hp.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)}),Ep,(e=>{let{status:t}=e;return t===gp.DANGER&&(0,p.css)(["&,","{color:",";}","{background-color:",";}"],Ep,(e=>{let{theme:t}=e;return t.colors.fg.negative}),Sp,(e=>{let{theme:t}=e;return t.colors.fg.negative}))})),vp=p.default.div.withConfig({displayName:"styles__PanelWrapper",componentId:"sc-oyok4o-4"})(["width:100%;background:",";&:not(:first-child) > ","{box-shadow:0px -1px 0 0 ",";margin-top:1px;}",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),_p,(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{isExpanded:t,theme:n}=e;return t&&(0,p.css)(["& ",",& ","{:not(:last-child){box-shadow:none;}",";","{opacity:1;}&,:hover,:focus{background-color:",";}svg{transform:rotate(0);}}","{height:560px;","{visibility:visible;}}"],_p,yp,tp.focusableOutlineCSS,Ep,n.colors.bg.primary,Cp,Ip)})),wp=p.default.div.withConfig({displayName:"styles__ButtonText",componentId:"sc-oyok4o-5"})(["display:flex;align-items:center;justify-content:center;margin-left:-12px;"]),Tp=p.default.div.withConfig({displayName:"styles__IconContainer",componentId:"sc-oyok4o-6"})(["height:32px;width:32px;color:",";svg{transform:rotate(-90deg);transition:transform 300ms ease-in-out;}"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),Sp=p.default.div.withConfig({displayName:"styles__Badge",componentId:"sc-oyok4o-7"})(["display:flex;align-items:center;justify-content:center;height:20px;width:20px;border-radius:",";background-color:",";","{color:",";line-height:20px;}"],(e=>{let{theme:t}=e;return t.borders.radius.round}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),Ep,(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary})),Cp=p.default.div.withConfig({displayName:"styles__ScrollableContent",componentId:"sc-oyok4o-8"})(["height:0;max-height:",";overflow-y:",";transition:height 300ms ease-in;"],(e=>{let{maxHeight:t}=e;return t?`calc(${t})`:"none"}),(e=>{let{maxHeight:t}=e;return t?"scroll":"hidden"})),Ip=p.default.div.withConfig({displayName:"styles__TabPanel",componentId:"sc-oyok4o-9"})(["padding:0;visibility:hidden;overflow:hidden;background:",";transition:all 300ms ease-in;margin:0 0 16px 16px;",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),A.scrollbarCSS),xp=e=>{let{badgeCount:t=0,children:n,className:r,id:a,isExpanded:o,onClick:l,maxHeight:i,status:s=gp.NORMAL,title:p}=e;const m=(0,u.useMemo)(pe.default,[]),f=a||m;return c.createElement(vp,{className:r,isExpanded:o},c.createElement(yp,null,c.createElement(_p,{"aria-controls":f,"aria-selected":o,onClick:l,role:"tab",status:s},c.createElement(wp,null,c.createElement(Tp,null,c.createElement(fp.default,null)),c.createElement(Ep,{id:`${p}-${f}`,"aria-label":(0,We.default)(
/* translators: 1: number of issues. 2: type of issue, for example "High Priority". */
(0,d._n)("%1$d %2$s issue","%1$d %2$s issues",t,"web-stories"),t,p)},p)),c.createElement(Sp,null,c.createElement(Ep,{"aria-hidden":!0},t)))),c.createElement(Cp,{"aria-hidden":!o,maxHeight:i},c.createElement(Ip,{id:f,"aria-labelledby":`${p}-${f}`,role:"tabpanel"},n)))};var Ap,kp;function Op(){return Op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Op.apply(this,arguments)}const SvgCheckbox=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Op({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ap||(Ap=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.897 18.146a.5.5 0 0 1 .707.708l-4.493 4.493-.007.007a.498.498 0 0 1-.708 0l-.006-.007-2.494-2.493a.5.5 0 0 1 .708-.708l2.146 2.147 4.147-4.147z",fill:"currentColor"})),kp||(kp=c.createElement("path",{d:"M20.333 15.5v-5.083C20.333 9.634 19.7 9 18.917 9h-6.5C11.634 9 11 9.634 11 10.417v11.166c0 .783.634 1.417 1.417 1.417H14.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Pp=(0,c.memo)(SvgCheckbox);function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Np.apply(this,arguments)}const Rp=(0,p.default)(m.Button).withConfig({displayName:"toggleButton__Button",componentId:"sc-1de7s10-0"})(["height:36px;width:","px;display:inline-block;border:1px solid ",";padding:2px 0;color:",";"," ",""],(e=>{let{isSquare:t}=e;return t?36:58}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{isOpen:t,theme:n}=e;return t&&(0,p.css)(["border-color:",";background-color:",";"],n.colors.bg.secondary,n.colors.bg.secondary)}),(e=>{let{hasText:t,theme:n}=e;return t&&(0,p.css)(["padding:2px 0 2px 8px;width:auto;",";span{padding-left:6px;}"],ep.expandPresetStyles({preset:{...n.typography.presets.paragraph[qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:n}))}));Rp.propTypes={hasText:Ma().bool,isOpen:Ma().bool};const Mp=p.default.div.withConfig({displayName:"toggleButton__Wrapper",componentId:"sc-1de7s10-1"})(["width:100%;height:100%;display:flex;justify-content:space-around;align-items:center;"]),Lp=(0,p.default)($e.Text).attrs({as:"span"}).withConfig({displayName:"toggleButton__NotificationCount",componentId:"sc-1de7s10-2"})(["margin:-2px 0 -2px;padding-right:6px;line-height:20px;color:",";"],(e=>{let{theme:t}=e;return t.colors.violet[20]})),Dp=(0,u.forwardRef)(((e,t)=>{let{copy:n,isOpen:r=!1,notificationCount:a=0,MainIcon:o,label:l,shortcut:i,popupZIndexOverride:s,...d}=e;const u=a>0;return c.createElement(Tooltip,{hasTail:!0,title:l,placement:Bd.PLACEMENT.TOP,shortcut:i,popupZIndexOverride:s},c.createElement(Rp,Np({ref:t,"aria-haspopup":!0,"aria-pressed":r,"aria-expanded":r,hasText:Boolean(n),isOpen:r,isSquare:!u,type:f.BUTTON_TYPES.TERTIARY,variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.MEDIUM},d),c.createElement(Mp,null,o&&c.createElement(o,null),n,u&&c.createElement(Lp,null,a))))}));Dp.displayName="ToggleButton";const Bp=(0,p.default)(Pp).withConfig({displayName:"toggle__MainIcon",componentId:"sc-1kcse2p-0"})(["height:32px;width:auto;display:block;"]),Fp=(0,p.default)(Dp).withConfig({displayName:"toggle__StyledToggleButton",componentId:"sc-1kcse2p-1"})(["display:block;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));function Toggle(e){let{isOpen:t=!1,popupId:n="",onClick:r=Lt}=e;const a=Bu(fu.PRIORITY),{checkpoint:o}=Nu((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}})),l=(0,u.useMemo)((()=>o===vu?a:0),[o,a]);return c.createElement(Fp,{"aria-owns":n,onClick:r,isOpen:t,MainIcon:Bp,label:(0,d.__)("Checklist","web-stories"),"aria-label":l>0?(0,We.default)(
/* translators: %s:  number of unaddressed issues. */
(0,d._n)("Checklist: %s unaddressed issue","Checklist: %s unaddressed issues",l,"web-stories"),l):(0,d.__)("Checklist","web-stories"),notificationCount:l})}const Hp=(0,p.default)(xp).withConfig({displayName:"styles__StyledTablistPanel",componentId:"sc-1rujego-0"})(["height:",";visibility:",";button{display:",";}"],(e=>{let{badgeCount:t}=e;return 0===t?0:"auto"}),(e=>{let{badgeCount:t}=e;return 0===t?"hidden":"visible"}),(e=>{let{badgeCount:t}=e;return 0===t?"none":"auto"})),Up=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"styles__PanelText",componentId:"sc-1rujego-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));function jp(){return au((e=>{let{state:t}=e;return t.isChecklistMounted}))}function DesignPanel(e){let{badgeCount:t=0,isOpen:n,maxHeight:r,onClick:a,title:o,children:l}=e;return jp()?c.createElement(Hp,{badgeCount:t,isExpanded:Boolean(t)&&n,onClick:a,maxHeight:r,title:o},c.createElement(Up,null,(0,d.__)("Follow best practices for Web Stories.","web-stories")),l):l}function DesignChecks(e){return c.createElement(ChecklistCategoryProvider,{category:fu.DESIGN},c.createElement(DesignPanel,e,e.children))}function AccessibilityPanel(e){let{children:t,badgeCount:n,isOpen:r,onClick:a,maxHeight:o,title:l}=e;return jp()?c.createElement(Hp,{badgeCount:n,isExpanded:Boolean(n)&&r,onClick:a,maxHeight:o,title:l},c.createElement(Up,null,(0,d.__)("Make your Web Story accessible.","web-stories")),t):t}function AccessibilityChecks(e){return c.createElement(ChecklistCategoryProvider,{category:fu.ACCESSIBILITY},c.createElement(AccessibilityPanel,e,e.children))}function PriorityPanel(e){let{children:t,badgeCount:n=0,isOpen:r,onClick:a,maxHeight:o,title:l}=e;return jp()?c.createElement(Hp,{badgeCount:n,isExpanded:Boolean(n)&&r,onClick:a,maxHeight:o,status:gp.DANGER,title:l},c.createElement(Up,null,(0,d.__)("Make this Web Story easier to discover.","web-stories")),t):t}function PriorityChecks(e){const t=Bu(fu.PRIORITY),{updateHighPriorityCount:n}=Nu((e=>{let{actions:{updateHighPriorityCount:t}}=e;return{updateHighPriorityCount:t}}));return(0,u.useEffect)((()=>{n(t)}),[n,t]),c.createElement(ChecklistCategoryProvider,{category:fu.PRIORITY},c.createElement(PriorityPanel,e,e.children))}var zp,Gp;function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yp.apply(this,arguments)}const SvgCheckmarkCircle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Yp({viewBox:"0 0 58 58",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,zp||(zp=c.createElement("path",{d:"M29 54.146c13.888 0 25.147-11.259 25.147-25.147C54.147 15.11 42.888 3.852 29 3.852c-13.888 0-25.147 11.258-25.147 25.147 0 13.888 11.259 25.147 25.147 25.147z",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})),Gp||(Gp=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M43.198 18.64a1.5 1.5 0 0 1 .037 2.12l-17.93 18.563a1.5 1.5 0 0 1-2.157 0l-7.383-7.643a1.5 1.5 0 1 1 2.158-2.084l6.304 6.526 16.85-17.445a1.5 1.5 0 0 1 2.121-.037z",fill:"currentColor"})))},Zp=(0,c.memo)(SvgCheckmarkCircle),Wp=p.default.div.withConfig({displayName:"emptyContent__Wrapper",componentId:"sc-83zuqv-0"})(["display:grid;grid-template-rows:113px 64px;width:308px;margin:0 auto 32px;& > *{display:flex;align-self:center;justify-self:center;color:",";}p{width:226px;text-align:center;}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Vp=p.default.div.withConfig({displayName:"emptyContent__IconContainer",componentId:"sc-83zuqv-1"})(["height:50px;width:50px;"]),EmptyContent=()=>c.createElement(Wp,null,c.createElement(Vp,null,c.createElement(Zp,null)),c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("You are all set for now. Return to this checklist as you build your Web Story for tips on how to improve it.","web-stories"))),$p=()=>{const e=Bu(fu.ACCESSIBILITY),t=Bu(fu.DESIGN),n=Bu(fu.PRIORITY),{checkpoint:r}=Nu((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}}));return e+t+n===0||r===yu?c.createElement(EmptyContent,null):null},qp=p.default.div.withConfig({displayName:"checklist__Wrapper",componentId:"sc-ai4sw8-0"})(["z-index:",";"],3),Kp=(0,p.default)(Xu).withConfig({displayName:"checklist__StyledNavigationWrapper",componentId:"sc-ai4sw8-1"})([""]),Xp=(0,u.forwardRef)((function ThroughputPopup(e,t){let{isOpen:n,children:r,close:a}=e;const o=(0,u.useRef)(),{checklistFocused:l,isChecklistMounted:i,resetChecklistFocused:s,setIsChecklistMounted:p}=au((e=>{let{state:{isChecklistMounted:t,checklistFocused:n},actions:{setIsChecklistMounted:r,resetChecklistFocused:a}}=e;return{checklistFocused:n,isChecklistMounted:t,resetChecklistFocused:a,setIsChecklistMounted:r}}));return(0,u.useEffect)((()=>{l&&o.current&&o.current.focus(),s()}),[l,s]),c.createElement(mp,{popupId:pu,isOpen:n,ariaLabel:mu,shouldKeepMounted:!0,onEnter:()=>p(!0),onExited:()=>p(!1)},i?c.createElement(Kp,{ref:t,isOpen:n},c.createElement(sp,{ref:o,onClose:a,label:mu,popupId:pu}),c.createElement(bp,{id:"pre-publish-checklist","data-isexpanded":n,"aria-label":(0,d.__)("Potential Story issues by category","web-stories")},r),c.createElement($p,null)):r)}));function Checklist(e){let{items:t={}}=e;const{close:n,openPanel:r,toggle:a,isOpen:o,isChecklistMounted:l,setOpenPanel:i}=au((e=>{let{actions:{close:t,toggle:n,setOpenPanel:r},state:{isOpen:a,isChecklistMounted:o,openPanel:l}}=e;return{close:t,toggle:n,isOpen:a,isChecklistMounted:o,openPanel:l,setOpenPanel:r}})),s=Bu(fu.PRIORITY),d=Bu(fu.DESIGN),p=Bu(fu.ACCESSIBILITY),{checkpoint:m}=Nu((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}})),f=(0,u.useRef)(),g=(0,u.useCallback)((e=>()=>i((t=>t===e?null:e))),[i]);(0,u.useEffect)((()=>{if(l){const e=f.current?.querySelector(Xs.FOCUSABLE_SELECTORS.join(", "));e?.focus()}}),[l]),(0,u.useEffect)((()=>{m&&i(Tu[m])}),[m,i]);const h=wu[m],b=h.includes(fu.PRIORITY)?s:0,E=h.includes(fu.DESIGN)?d:0,y=h.includes(fu.ACCESSIBILITY)?p:0,_=(e=>{if(e)return`100vh - ${48+60*e+92+69}px`})([b,E,y].filter((e=>Boolean(e))).length),{Priority:v,Design:w,Accessibility:T}=t;return c.createElement(Uu,null,c.createElement(qp,{role:"region","aria-label":mu},c.createElement(Xp,{ref:f,close:n,isOpen:o},v&&c.createElement(PriorityChecks,{badgeCount:b,isOpen:o&&r===fu.PRIORITY,onClick:g(fu.PRIORITY),maxHeight:_,title:gu[fu.PRIORITY]},c.createElement(v,null)),w&&c.createElement(DesignChecks,{badgeCount:E,isOpen:o&&r===fu.DESIGN,onClick:g(fu.DESIGN),maxHeight:_,title:gu[fu.DESIGN]},c.createElement(w,null)),T&&c.createElement(AccessibilityChecks,{badgeCount:y,isOpen:o&&r===fu.ACCESSIBILITY,onClick:g(fu.ACCESSIBILITY),maxHeight:_,title:gu[fu.ACCESSIBILITY]},c.createElement(T,null))),c.createElement(Toggle,{isOpen:o,onClick:a,popupId:pu})))}const Qp=(0,p.keyframes)(["50%{background-color:",";}"],(0,Ve.rgba)(g.theme.colors.standard.white,.3)),Jp=(0,p.css)(["background-color:",";animation:"," 0.3s ease-in-out 2;"],(0,Ve.rgba)(g.theme.colors.standard.white,0),Qp),em=(0,p.css)(["",";"],tp.focusCSS),tm=(0,u.createContext)({});const nm=function(e){return(0,u.useContextSelector)(tm,e??u.identity)};var rm=n(60811);const am="selection",om="link",lm="animation",{LINK:im,ANIMATION:sm,...cm}=rm.default,dm={[am]:Object.values(cm),[om]:[im],[lm]:[sm]},um="insert",pm="design",mm="document";function fm(e,t){return!!e?.dataTransfer?.types&&(Array.isArray(e.dataTransfer.types)?e.dataTransfer.types.includes(t):e.dataTransfer.types.contains(t))}const gm=(0,u.createContext)({}),hm=p.default.div.withConfig({displayName:"dropTarget__DropTargetComponent",componentId:"sc-12rok6t-0"})(["position:relative;width:100%;height:100%;"]),bm=p.default.div.withConfig({displayName:"dropTarget__Content",componentId:"sc-12rok6t-1"})(["position:relative;width:100%;height:100%;"]),Em=p.default.div.withConfig({displayName:"dropTarget__Glasspane",componentId:"sc-12rok6t-2"})(["position:absolute;z-index:1000;top:0;left:0;width:100%;height:100%;"]);function ym(e){e.preventDefault(),e.stopPropagation()}function UploadDropTarget(e){let{disabled:t,label:n,labelledBy:r,onDrop:a,children:o}=e;const[l,i]=(0,u.useState)(!1),s=(0,u.useCallback)((e=>{const{dataTransfer:n}=e;(function(e){return fm(e,"Files")})(e)&&(ym(e),t?n.effectAllowed="none":(n.effectAllowed="copy",i(!0)))}),[t]),d=(0,u.useCallback)((e=>{ym(e),i(!1)}),[]),p=(0,u.useCallback)((e=>{ym(e),i(!1),!t&&a&&a([...e.dataTransfer.files])}),[t,a]);return c.createElement(hm,{onDragEnter:s,onDrop:p,onDragOver:ym},l&&c.createElement(Em,{onDragEnter:s,onDragLeave:d,onDragOver:ym,onDrop:p,"aria-label":n,"aria-labelledby":r}),c.createElement(gm.Provider,{value:{isDragging:l}},c.createElement(bm,null,o)))}UploadDropTarget.defaultProps={disabled:!1,label:null,labelledBy:null,onDrop:null};const _m=UploadDropTarget;var vm;function wm(){return wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wm.apply(this,arguments)}const SvgArrowCloud=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",wm({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,vm||(vm=c.createElement("path",{d:"m13.5 16 3-3m0 0 3 3m-3-3v7m-6-7-.59.131A4.994 4.994 0 0 0 6 18.006v0A4.994 4.994 0 0 0 10.994 23h12.048A3.958 3.958 0 0 0 27 19.042v0a3.958 3.958 0 0 0-3.52-3.933L22.5 15c0-1-1-6-6-6-3.5 0-5.5 2.5-6 4Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Tm=(0,c.memo)(SvgArrowCloud);const Sm=function(e){return(0,u.useContextSelector)(gm,e??u.identity)};function Cm(){return Cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cm.apply(this,arguments)}const Im=p.default.div.withConfig({displayName:"overlay__Overlay",componentId:"sc-u0s4sf-0"})(["position:absolute;z-index:999;top:0;left:0;width:100%;height:100%;background-color:",";"],(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.bg.primary,.6)}));const xm=(0,u.forwardRef)((function UploadDropTargetOverlayWithRef(e,t){const{isDragging:n}=Sm((e=>({isDragging:e.isDragging})));return n?c.createElement(Im,Cm({ref:t},e)):null})),Am=(0,p.default)(xm).withConfig({displayName:"message__Container",componentId:"sc-1cdb29v-0"})(["display:flex;align-items:center;justify-content:center;"]),km=p.default.div.withConfig({displayName:"message__Box",componentId:"sc-1cdb29v-1"})(["width:100%;max-width:240px;padding:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;"]),Om=(0,p.default)($e.Text).withConfig({displayName:"message__Text",componentId:"sc-1cdb29v-2"})(["color:",";margin-bottom:14px;margin-top:0px;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),Pm=(0,p.default)(Tm).withConfig({displayName:"message__Icon",componentId:"sc-1cdb29v-3"})(["height:52px;width:52px;color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white}));const Nm=(0,u.memo)((function UploadDropTargetMessage(e){let{message:t,...n}=e;const{allowedMimeTypes:{image:r,vector:a,video:o}}=U(),l=(0,u.useMemo)((()=>[...r,...a,...o]),[r,o,a]),i=(0,u.useMemo)((()=>l.map((e=>Pt(e))).flat()),[l]);let s=(0,d.__)("No file types are currently supported.","web-stories");return i.length&&(s=(0,We.default)(
/* translators: %s is a list of allowed file extensions. */
(0,d.__)("You can upload %s.","web-stories"),(0,xt.default)(i))),c.createElement(Am,n,c.createElement(km,null,c.createElement(Pm,null),c.createElement(Om,{isBold:!0,size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},t),c.createElement(Om,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},s)))})),Rm={},Mm=["click","pointerdown","pointerup"],Lm="event";let Dm;const Bm=function(e){let{node:t,eventData:n,eventType:r="click"}=e;const a="undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes(Lm);!Dm&&a&&(Dm=new PerformanceObserver((e=>{for(const t of e.getEntries())Mm.includes(t.name)&&Rm[t.startTime]?.category&&!Rm[t.startTime]?.isReported&&(Rm[t.startTime].isReported=!0,(0,P.trackTiming)(Rm[t.startTime].category,t.duration,Rm[t.startTime].label,t.name))})),Dm.observe({entryTypes:[Lm]}));const{label:o,category:l}=n;(0,u.useEffect)((()=>{if(!t||!a)return;const e=t,n=e=>{Rm[e.timeStamp]={category:l,time:e.timeStamp},o&&(Rm[e.timeStamp].label=o)};return e.addEventListener(r,n),()=>{e.removeEventListener(r,n)}}),[l,o,t,r,a])};function Fm(){return Fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fm.apply(this,arguments)}const Hm=p.default.ul.attrs({role:"tablist","aria-orientation":"horizontal"}).withConfig({displayName:"tabview__Tabs",componentId:"sc-10d408-0"})(["display:flex;flex-direction:row;align-items:stretch;width:100%;max-width:100%;justify-content:space-between;margin:0;padding:0;list-style:none;border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.secondary})),Um=p.default.li.attrs((e=>{let{isActive:t}=e;return{tabIndex:t?0:-1,role:"tab","aria-selected":t}})).withConfig({displayName:"tabview__TabElement",componentId:"sc-10d408-1"})(["cursor:pointer;border:none;background:none;padding:0 4px;margin:","px 12px 9px;height:","px;display:flex;align-items:center;justify-content:center;position:relative;transition:color 0.2s ease;color:",";border-radius:",";",";:hover{color:",";}"," svg{display:block;width:32px;height:32px;margin:0 -4px;transform-origin:center center;transition:transform 0.3s ease,color 0.2s ease;color:",";border-radius:",";pointer-events:none;}svg.alert{width:","px;margin-left:4px;color:",";}span,svg:not(.alert){",";}&:hover span,&:hover svg:not(.alert),&:active span,&:active svg:not(.alert){color:",";}&.",",&[data-focus-visible-added]{svg:not(.alert){background-color:",";}}"],10,32,(e=>{let{theme:t,isActive:n}=e;return n?t.colors.fg.primary:t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{isActive:t,theme:n}=e;return t&&(0,p.css)(["::after{content:'';position:absolute;background-color:",";height:2px;border-radius:1px;bottom:-10px;left:4px;right:4px;}"],n.colors.border.selection)}),(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),28,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{isActive:t,theme:n}=e;return t&&`color: ${n.colors.fg.primary}`}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),hp.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover})),jm=(0,p.default)(Qu.Headline).attrs({as:"p",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"tabview__TabText",componentId:"sc-10d408-2"})(["color:inherit;"]),tabview_noop=()=>{};const zm=(0,u.forwardRef)((function UnreffedTab(e,t){let{children:n,tooltip:r=null,placement:a,refId:o,tabRefs:l,...i}=e;const{id:s}=i,d=s.includes("library")?Te.LIBRARY_PANEL_CLICK:Te.DESIGN_PANEL_CLICK;Bm({node:l?.[o]?.current,eventData:{...d,label:`${o}_tab`}});const u=c.createElement(Um,Fm({ref:t},i),n);return null!==r?c.createElement(Tooltip,{title:r,placement:a,isDelayed:!0},u):u}));const Gm=function TabView(e){let{getTabId:t=(e=>e),getAriaControlsId:n,onTabChange:r=tabview_noop,onTabRefUpdated:a=tabview_noop,tabs:o=[],label:l="",shortcut:i="",tab:s,tabRefs:d,...p}=e;const{isRTL:m}=U(),f=(0,u.useRef)(),g=(0,u.useRef)(),h=(0,u.useRef)({}),b=(0,u.useCallback)((e=>{d?.[e]?.current?d[e].current?.focus():h?.current[e]&&h.current[e]?.focus(),g.current=e}),[d]),E=(0,u.useCallback)((e=>{b(e),r(e)}),[b,r]);(0,fr.useGlobalKeyDownEffect)({key:i,editable:!0},(()=>E(s)),[E,s]);const y=(0,u.useCallback)((e=>{const t=o[(e+o.length)%o.length];b(t.id)}),[o,b]),_=(0,u.useCallback)((e=>{const t=m?-e:e,n=o.findIndex((e=>{let{id:t}=e;return t===g.current}));y(n+t)}),[m,o,y]);return(0,fr.useKeyDownEffect)(f,"left",(()=>_(-1)),[_]),(0,fr.useKeyDownEffect)(f,"right",(()=>_(1)),[_]),(0,fr.useKeyDownEffect)(f,["up","down"],(()=>{}),[]),(0,fr.useKeyDownEffect)(f,"home",(()=>y(0)),[y]),(0,fr.useKeyDownEffect)(f,"end",(()=>y(-1)),[y]),(0,fr.useKeyDownEffect)(f,{key:["enter","space"],allowDefault:!0},(e=>{"tab"===e.target.getAttribute("role")&&(E(g.current),e.preventDefault())}),[E],{}),c.createElement(Hm,Fm({"aria-label":l,ref:f},p),o.map((e=>{let{id:r,title:o,icon:l,...i}=e;return c.createElement(zm,Fm({key:r,ref:e=>{d?.[r]?d[r].current=e:h.current[r]=e,a(e,r)},id:t(r),isActive:s===r,"aria-controls":n?n(r):null,"aria-selected":s===r,onClick:()=>E(r),onFocus:()=>{g.current=s},refId:r,tabRefs:d},i),Boolean(o)&&c.createElement(jm,null,o),Boolean(l)&&c.createElement(l,{isActive:r===s}))})))},Ym=(0,u.createContext)({state:{},actions:{},tabs:{},refs:{}});const Zm=function(e){return(0,u.useContextSelector)(Ym,e??u.identity)},Wm=e=>`sidebar-tab-${e}`,Vm=p.default.div.attrs({role:"tabpanel"}).withConfig({displayName:"sidebarContent__SidebarPane",componentId:"sc-1f2hu7i-0"})(["height:100%;overflow:overlay;"]),$m=p.default.section.withConfig({displayName:"sidebarContent__SidebarPanes",componentId:"sc-1f2hu7i-1"})(["height:100%;"]);const qm=function Sidebar(){const{tab:e,tabs:t}=Zm((e=>{let{state:{tab:t},data:{tabs:n}}=e;return{tab:t,tabs:n}}));return c.createElement($m,null,t.map((t=>{let{id:n,Pane:r}=t;return c.createElement(Vm,{"aria-labelledby":n,id:Wm(n),key:n,hidden:n!==e},n===e&&c.createElement(r,null))})))},Km=p.default.section.attrs({"aria-label":(0,d.__)("Sidebar","web-stories")}).withConfig({displayName:"sidebarLayout__Layout",componentId:"sc-hpe4no-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Xm=p.default.div.withConfig({displayName:"sidebarLayout__SidebarContainer",componentId:"sc-hpe4no-1"})(["height:100%;padding:0;overflow:auto;"]),Qm=(0,p.default)(Gm).withConfig({displayName:"sidebarLayout__UnjustifiedTabView",componentId:"sc-hpe4no-2"})(["justify-content:center;"]);const Jm=function SidebarLayout(){const{tab:e,tabRefs:t,setSidebarContentNode:n,setTab:r,sidebar:a,tabs:o}=Zm((e=>{let{state:{tab:t,tabRefs:n},actions:{setSidebarContentNode:r,setTab:a},refs:{sidebar:o},data:{tabs:l}}=e;return{tab:t,tabRefs:n,setSidebarContentNode:r,setTab:a,sidebar:o,tabs:l}})),{resetHighlight:l}=nm((e=>({resetHighlight:e.onFocusOut}))),i=(0,u.useCallback)((e=>{r(e),l(),(0,P.trackEvent)("inspector_tab_change",{name:e})}),[r,l]);return(0,fr.useEscapeToBlurEffect)(a),c.createElement(Km,{ref:a},c.createElement(Qm,{label:(0,d.__)("Sidebar Selection","web-stories"),tabs:o,tab:e,tabRefs:t,onTabChange:i,getAriaControlsId:Wm,shortcut:"mod+option+3"}),c.createElement(Xm,{ref:n},c.createElement(qm,null)))};const ef=function(){return c.createElement(_m,{disabled:!0},c.createElement(Jm,null))},tf="media",nf="media3p",rf="text",af="shapes",of="pageTemplates",lf="shopping",sf={STORY_TITLE:"STORY_TITLE",STYLE_PANE:"STYLE_PANE",ANIMATION:"ANIMATION",ASSISTIVE_TEXT:"ASSISTIVE_TEXT",CAPTIONS:"CAPTIONS",EXCERPT:"EXCERPT",LINK:"LINK",PAGE_BACKGROUND:"PAGE_BACKGROUND",POSTER:"POSTER",PUBLISHER_LOGO:"PUBLISHER_LOGO",VIDEO_A11Y_POSTER:"VIDEO_A11Y_POSTER",STYLE:"STYLE",FONT:"FONT",TEXT_COLOR:"TEXT_COLOR",MEDIA:"MEDIA",MEDIA3P:"MEDIA3P",TEXT_SET:"TEXT",PAGE_TEMPLATES:"PAGE_TEMPLATES"},cf={[sf.STORY_TITLE]:{focus:!0},[sf.STYLE_PANE]:{focus:!0,tab:pm,section:am},[sf.POSTER]:{focus:!0,tab:mm},[sf.PUBLISHER_LOGO]:{focus:!0,tab:mm},[sf.EXCERPT]:{focus:!0,tab:mm},[sf.CAPTIONS]:{focus:!0,tab:pm,section:am},[sf.ASSISTIVE_TEXT]:{focus:!0,tab:pm,section:am},[sf.PAGE_BACKGROUND]:{focus:!0,tab:pm,section:am},[sf.ANIMATION]:{focus:!0,tab:pm,section:lm},[sf.FONT]:{focus:!0,tab:pm,section:am},[sf.LINK]:{focus:!0,tab:pm,section:om},[sf.VIDEO_A11Y_POSTER]:{focus:!0,tab:pm,section:am},[sf.STYLE]:{focus:!0,tab:pm,section:am},[sf.TEXT_COLOR]:{focus:!0,tab:pm,section:am},[sf.MEDIA]:{focus:!0,tab:um,section:tf},[sf.MEDIA3P]:{focus:!0,tab:um,section:nf},[sf.TEXT_SET]:{focus:!0,tab:um,section:rf},[sf.PAGE_TEMPLATES]:{focus:!0,tab:um,section:of}},df=sf;const uf=function HighlightsProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),{setSelectedElementsById:a,setCurrentPage:o}=Ya((e=>{let{actions:t}=e;return{setSelectedElementsById:t.setSelectedElementsById,setCurrentPage:t.setCurrentPage}})),l=(0,u.useCallback)((e=>{let{elementId:t,elements:n,pageId:r}=e;r&&o({pageId:r}),Array.isArray(n)?a({elementIds:n.map((e=>{let{id:t}=e;return t}))}):t&&a({elementIds:[t]})}),[o,a]),i=(0,u.useCallback)((e=>{let{elements:t,elementId:n,pageId:a,highlight:o}=e;if((t||n||a)&&l({elements:t,elementId:n,pageId:a}),o){const{tab:e,section:t,...n}=cf[o];r({[o]:{...n,showEffect:!0},tab:e,section:t})}}),[l]),s=(0,u.useCallback)((()=>r({})),[r]),d=(0,u.useCallback)((e=>r((t=>({[e]:{...t[e],showEffect:!1}})))),[]),p=(0,u.useMemo)((()=>({setHighlights:i,onFocusOut:s,cancelEffect:d,...n})),[d,s,i,n]);return c.createElement(tm.Provider,{value:p},t)},pf={ADD_ANIMATION:{trackingEventName:"add_animation",text:(0,d.__)("Add animation","web-stories")},ADD_LINK:{trackingEventName:"add_link",text:(0,d.__)("Add link","web-stories")},ADD_CAPTIONS:{trackingEventName:"add_captions",text:(0,d.__)("Add captions","web-stories")},AUTO_STYLE_TEXT:{trackingEventName:"auto_style_text",text:(0,d.__)("Adaptive text colors","web-stories")},CHANGE_BACKGROUND_COLOR:{trackingEventName:"change_background_color",text:(0,d.__)("Change background color","web-stories")},CHANGE_TEXT_COLOR:{trackingEventName:"change_text_color",text:(0,d.__)("Change color","web-stories")},CHANGE_COLOR:{trackingEventName:"change_color",text:(0,d.__)("Change color","web-stories")},RESET_ELEMENT:{trackingEventName:"reset_element",text:(0,d.__)("Reset element","web-stories")},CHANGE_FONT:{trackingEventName:"change_font",text:(0,d.__)("Edit text","web-stories")},INSERT_BACKGROUND_MEDIA:{trackingEventName:"insert_background_media",text:(0,d.__)("Insert background media","web-stories")},INSERT_TEXT:{trackingEventName:"insert_text",text:(0,d.__)("Insert text","web-stories")},REPLACE_BACKGROUND_MEDIA:{trackingEventName:"replace_background_media",text:(0,d.__)("Replace background","web-stories")},REPLACE_MEDIA:{trackingEventName:"replace_media",text:(0,d.__)("Replace media","web-stories")},TRIM_VIDEO:{trackingEventName:"trim_video",text:(0,d.__)("Trim video","web-stories")}},mf="animation",ff="overlay",gf="styles",hf={locked:!0,topLeft:2,topRight:2,bottomLeft:2,bottomRight:2},bf=0;var Ef,yf;function _f(){return _f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_f.apply(this,arguments)}const SvgAlignBottom=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",_f({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ef||(Ef=c.createElement("path",{d:"M8.5 21h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),yf||(yf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 10.5A1.5 1.5 0 0 0 14 12v5a1.5 1.5 0 0 0 1.5 1.5h1A1.5 1.5 0 0 0 18 17v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},vf=(0,c.memo)(SvgAlignBottom);var wf,Tf;function Sf(){return Sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sf.apply(this,arguments)}const SvgAlignCenter=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Sf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,wf||(wf=c.createElement("path",{d:"M16 8.5v3M16 20.5v3",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Tf||(Tf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 14a1.5 1.5 0 0 0-1.5 1.5v1a1.5 1.5 0 0 0 1.5 1.5h5a1.5 1.5 0 0 0 1.5-1.5v-1a1.5 1.5 0 0 0-1.5-1.5h-5Z",fill:"currentColor"})))},Cf=(0,c.memo)(SvgAlignCenter);var If,xf;function Af(){return Af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Af.apply(this,arguments)}const SvgAlignLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Af({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,If||(If=c.createElement("path",{d:"M11 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),xf||(xf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 14a1.5 1.5 0 0 0-1.5 1.5v1A1.5 1.5 0 0 0 15 18h5a1.5 1.5 0 0 0 1.5-1.5v-1A1.5 1.5 0 0 0 20 14h-5Z",fill:"currentColor"})))},kf=(0,c.memo)(SvgAlignLeft);var Of,Pf;function Nf(){return Nf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nf.apply(this,arguments)}const SvgAlignMiddle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Nf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Of||(Of=c.createElement("path",{d:"M8.5 16h3M20.5 16h3",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Pf||(Pf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 12a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},Rf=(0,c.memo)(SvgAlignMiddle);var Mf,Lf;function Df(){return Df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Df.apply(this,arguments)}const SvgAlignRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Df({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Mf||(Mf=c.createElement("path",{d:"M21 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Lf||(Lf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 14a1.5 1.5 0 0 0-1.5 1.5v1A1.5 1.5 0 0 0 12 18h5a1.5 1.5 0 0 0 1.5-1.5v-1A1.5 1.5 0 0 0 17 14h-5Z",fill:"currentColor"})))},Bf=(0,c.memo)(SvgAlignRight);var Ff;function Hf(){return Hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hf.apply(this,arguments)}const SvgAlignTextCenter=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Hf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ff||(Ff=c.createElement("path",{d:"M9.5 11.5h15M13 16h8m-9 4.5h10",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Uf=(0,c.memo)(SvgAlignTextCenter);var jf;function zf(){return zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zf.apply(this,arguments)}const SvgAlignTextJustified=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,jf||(jf=c.createElement("path",{d:"M8.5 11.5h15M8.5 16h15m-15 4.5h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Gf=(0,c.memo)(SvgAlignTextJustified);var Yf;function Zf(){return Zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zf.apply(this,arguments)}const SvgAlignTextLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Zf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Yf||(Yf=c.createElement("path",{d:"M9.5 11.5h15M9.5 16h8m-8 4.5h10",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Wf=(0,c.memo)(SvgAlignTextLeft);var Vf;function $f(){return $f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$f.apply(this,arguments)}const SvgAlignTextRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",$f({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Vf||(Vf=c.createElement("path",{d:"M24.5 20.5h-10m10-4.5h-8m8-4.5h-15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},qf=(0,c.memo)(SvgAlignTextRight);var Kf,Xf;function Qf(){return Qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qf.apply(this,arguments)}const SvgAlignTop=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Qf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Kf||(Kf=c.createElement("path",{d:"M8.5 11h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Xf||(Xf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 13.5A1.5 1.5 0 0 0 14 15v5a1.5 1.5 0 0 0 1.5 1.5h1A1.5 1.5 0 0 0 18 20v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},Jf=(0,c.memo)(SvgAlignTop);var eg;function tg(){return tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tg.apply(this,arguments)}const SvgAngle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",tg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,eg||(eg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 10a.5.5 0 0 0-1 0v12a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 0-1h-4.8a6.801 6.801 0 0 0-6.7-6.698V10Zm0 5.802V21.5h5.7a5.8 5.8 0 0 0-5.7-5.698Z",fill:"currentColor"})))},ng=(0,c.memo)(SvgAngle);var rg,ag=n(65132);function og(){return og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},og.apply(this,arguments)}const SvgArrowLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",og({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,rg||(rg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.422 10.856a.5.5 0 0 0-.702-.712l-5.571 5.5a.5.5 0 0 0 0 .712l5.57 5.5a.5.5 0 0 0 .703-.711L10.718 16.5H22.5a.5.5 0 1 0 0-1H10.718l4.704-4.644Z",fill:"currentColor"})))},lg=(0,c.memo)(SvgArrowLeft);var ig;function sg(){return sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sg.apply(this,arguments)}const SvgArrowLeftCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",sg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ig||(ig=c.createElement("path",{d:"M15.07 22.5 9.5 17m0 0 5.57-5.5M9.5 17h7a6 6 0 0 0 6-6V9.5",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},cg=(0,c.memo)(SvgArrowLeftCurved);var dg,ug=n(2039);function pg(){return pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pg.apply(this,arguments)}const SvgArrowOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",pg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,dg||(dg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8A1.5 1.5 0 0 0 8 9.5v13A1.5 1.5 0 0 0 9.5 24h13a1.5 1.5 0 0 0 1.5-1.5v-13A1.5 1.5 0 0 0 22.5 8h-13ZM9 9.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-13Zm3.12 6.323a.5.5 0 0 1 .055-.705l3.499-3a.5.5 0 0 1 .651 0l3.5 3a.5.5 0 1 1-.651.76l-2.675-2.294V19.5a.5.5 0 1 1-1 0v-5.915l-2.674 2.292a.5.5 0 0 1-.704-.054Z",fill:"currentColor"})))},mg=(0,c.memo)(SvgArrowOutline);var fg;function gg(){return gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gg.apply(this,arguments)}const SvgArrowRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",gg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,fg||(fg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.28 10.144a.5.5 0 0 0-.702.712l4.704 4.644H9.5a.5.5 0 0 0 0 1h11.782l-4.704 4.645a.5.5 0 0 0 .702.711l5.571-5.5a.5.5 0 0 0 0-.712l-5.57-5.5Z",fill:"currentColor"})))},hg=(0,c.memo)(SvgArrowRight);var bg;function Eg(){return Eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eg.apply(this,arguments)}const SvgArrowRightCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Eg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,bg||(bg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.281 9.144a.5.5 0 0 0-.703.712l4.704 4.644H15.5A6.5 6.5 0 0 0 9 21v1.5a.5.5 0 1 0 1 0V21a5.5 5.5 0 0 1 5.5-5.5h5.783l-4.705 4.645a.5.5 0 0 0 .703.711l5.57-5.5a.5.5 0 0 0 0-.711l-5.57-5.5Z",fill:"currentColor"})))},yg=(0,c.memo)(SvgArrowRightCurved);var _g,vg=n(80908);function wg(){return wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wg.apply(this,arguments)}const SvgArrowUp=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",wg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,_g||(_g=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.145 15.422a.5.5 0 1 0 .712-.702l-5.5-5.571a.5.5 0 0 0-.712 0l-5.5 5.57a.5.5 0 0 0 .711.703l4.645-4.704V22.5a.5.5 0 1 0 1 0V10.718l4.644 4.704Z",fill:"currentColor"})))},Tg=(0,c.memo)(SvgArrowUp);var Sg;function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cg.apply(this,arguments)}const SvgArrowsLeftright=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Cg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Sg||(Sg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.354 8.854a.5.5 0 0 0-.708-.708l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L5.707 12.5H17.5a.5.5 0 1 0 0-1H5.707l2.647-2.646ZM23.646 16.854a.5.5 0 1 1 .707-.707l3.5 3.5a.5.5 0 0 1 0 .707l-3.5 3.5a.5.5 0 0 1-.707-.708l2.647-2.646H14.5a.5.5 0 1 1 0-1h11.793l-2.647-2.646Z",fill:"currentColor"})))},Ig=(0,c.memo)(SvgArrowsLeftright);var xg;function Ag(){return Ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ag.apply(this,arguments)}const SvgBorder=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ag({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,xg||(xg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 19.929a1.074 1.074 0 0 1-.299.742l-.04-.01.01.04a1.074 1.074 0 0 1-.742.299h-.94v-.536h.94a.538.538 0 0 0 .128-.015l.315-.077.077-.315a.538.538 0 0 0 .015-.128v-.94H21v.94Zm0-3.558h-.536v1.877H21v-1.877Zm0-2.62h-.536v1.878H21v-1.877ZM16.37 11v.536h1.878V11h-1.877Zm-1.62.536h.88V11H12.07a1.074 1.074 0 0 0-1.04.815c-.02.082-.031.168-.031.256v7.858a1.074 1.074 0 0 0 .815 1.04c.082.02.168.031.256.031h3.559v-.536h-.88v-8.928ZM18.248 21v-.536h-1.877V21h1.877Zm.742-10h.939a1.074 1.074 0 0 1 .742.299l-.01.04.04-.01a1.074 1.074 0 0 1 .299.742v.94h-.536v-.94a.538.538 0 0 0-.015-.128l-.077-.315-.315-.077a.538.538 0 0 0-.128-.015h-.94V11Z",fill:"currentColor"})))},kg=(0,c.memo)(SvgBorder);var Og;function Pg(){return Pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pg.apply(this,arguments)}const SvgBorderBox=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Pg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Og||(Og=c.createElement("path",{stroke:"currentColor",strokeWidth:3,d:"M10 10h12v12H10z"})))},Ng=(0,c.memo)(SvgBorderBox);var Rg;function Mg(){return Mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mg.apply(this,arguments)}const SvgBox1=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Mg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Rg||(Rg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 10.5A1.5 1.5 0 0 1 12.5 9h6.25a1.5 1.5 0 0 1 1.5 1.5v11a1.5 1.5 0 0 1-1.5 1.5H12.5a1.5 1.5 0 0 1-1.5-1.5v-11Zm1.5-.5a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h6.25a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5H12.5Z",fill:"currentColor"})))},Lg=(0,c.memo)(SvgBox1);var Dg,Bg=n(98477);function Fg(){return Fg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fg.apply(this,arguments)}const SvgBox4Alternate=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Fg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Dg||(Dg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8A1.5 1.5 0 0 0 8 9.5v6A1.5 1.5 0 0 0 9.5 17h4a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 13.5 8h-4ZM9 9.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-6Zm.5 9.5A1.5 1.5 0 0 0 8 20.5v2A1.5 1.5 0 0 0 9.5 24h4a1.5 1.5 0 0 0 1.5-1.5v-2a1.5 1.5 0 0 0-1.5-1.5h-4ZM9 20.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-2Zm8-11A1.5 1.5 0 0 1 18.5 8h4A1.5 1.5 0 0 1 24 9.5v3a1.5 1.5 0 0 1-1.5 1.5h-4a1.5 1.5 0 0 1-1.5-1.5v-3Zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-4Zm0 7a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h4a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-4Zm-.5 1.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-5Z",fill:"currentColor"})))},Hg=(0,c.memo)(SvgBox4Alternate);var Ug,jg;function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zg.apply(this,arguments)}const SvgBucket=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ug||(Ug=c.createElement("path",{d:"M23.922 19.627c.01.004.014.007.016.009.171.232.534.74.851 1.285.16.274.301.547.403.793.105.257.147.44.147.547 0 .708-.637 1.35-1.5 1.35-.864 0-1.5-.642-1.5-1.35 0-.107.042-.29.147-.547a6.68 6.68 0 0 1 .403-.793c.317-.545.68-1.053.85-1.285a.069.069 0 0 1 .017-.01.212.212 0 0 1 .083-.015c.035 0 .064.007.083.016ZM15.353 7.868l7.778 7.778-7.424 7.425a1.5 1.5 0 0 1-2.121 0l-5.657-5.657a1.5 1.5 0 0 1 0-2.121l7.424-7.425Z",stroke:"currentColor"})),jg||(jg=c.createElement("path",{d:"m15.337 21.286 3.53-3.53-9.878-1.403 4.934 4.933a1 1 0 0 0 1.414 0Z",fill:"currentColor"})))},Gg=(0,c.memo)(SvgBucket);var Yg,Zg;function Wg(){return Wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wg.apply(this,arguments)}const SvgCamera=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Wg({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Yg||(Yg=c.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),Zg||(Zg=c.createElement("path",{d:"M15 8v8H5V8h10m1-2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4V7c0-.55-.45-1-1-1z"})))},Vg=(0,c.memo)(SvgCamera);var $g,qg;function Kg(){return Kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kg.apply(this,arguments)}const SvgCaptions=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Kg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,$g||($g=c.createElement("path",{d:"M7 22V8a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-4.586a1 1 0 0 0-.707.293l-2 2a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 0-.707-.293H8a1 1 0 0 1-1-1Z",stroke:"currentColor"})),qg||(qg=c.createElement("path",{d:"M14.953 13.158a2.577 2.577 0 0 0-1.898-.843c-1.46 0-2.644 1.243-2.644 2.776 0 1.532 1.184 2.775 2.644 2.775.822 0 1.556-.394 2.041-1.012M21.445 13.158a2.577 2.577 0 0 0-1.898-.843c-1.46 0-2.643 1.243-2.643 2.776 0 1.532 1.183 2.775 2.643 2.775.823 0 1.557-.394 2.042-1.012",stroke:"currentColor",strokeLinecap:"round"})))},Xg=(0,c.memo)(SvgCaptions);var Qg;function Jg(){return Jg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jg.apply(this,arguments)}const SvgChecklist=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Jg({viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Qg||(Qg=c.createElement("path",{d:"M22.5 7h-9v2h9V7zm0 8h-9v2h9v-2zM6.04 11 2.5 7.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41L6.04 11zm0 8L2.5 15.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41L6.04 19z",fill:"currentColor"})))},eh=(0,c.memo)(SvgChecklist);var th,nh=n(30648),rh=n(61887),ah=n(34761);function oh(){return oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oh.apply(this,arguments)}const SvgChevronRightSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",oh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,th||(th=c.createElement("path",{d:"m14 12 3 4-3 4",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},lh=(0,c.memo)(SvgChevronRightSmall);var ih,sh=n(99832);function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ch.apply(this,arguments)}const SvgChevronUpSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ch({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ih||(ih=c.createElement("path",{d:"m12 17 4-3 4 3",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},dh=(0,c.memo)(SvgChevronUpSmall);var uh,ph;function mh(){return mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mh.apply(this,arguments)}const SvgCircleSpeed=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",mh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,uh||(uh=c.createElement("path",{d:"M21 20a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),ph||(ph=c.createElement("path",{stroke:"currentColor",strokeLinecap:"round",d:"M7.5 13.5h7M9.5 15.5h5M11.5 17.5h3"})))},fh=(0,c.memo)(SvgCircleSpeed);var gh,hh,bh;function Eh(){return Eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eh.apply(this,arguments)}const SvgColorBucket=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Eh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,gh||(gh=c.createElement("path",{d:"M23.922 19.627c.01.004.014.007.016.009.171.232.534.74.851 1.285.16.274.301.547.403.793.105.257.147.44.147.547 0 .708-.637 1.35-1.5 1.35-.864 0-1.5-.642-1.5-1.35 0-.107.042-.29.147-.547a6.68 6.68 0 0 1 .403-.793c.317-.545.68-1.053.85-1.285a.069.069 0 0 1 .017-.01.212.212 0 0 1 .083-.015c.035 0 .064.007.083.016Z",fill:"currentColor",stroke:"currentColor"})),hh||(hh=c.createElement("path",{d:"m15.353 7.868 7.778 7.778-7.424 7.425a1.5 1.5 0 0 1-2.121 0l-5.657-5.657a1.5 1.5 0 0 1 0-2.121l7.424-7.425Z",stroke:"currentColor"})),bh||(bh=c.createElement("path",{d:"M13.232 13.662a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795ZM15.616 11.08a.124.124 0 0 0-.232 0l-.332.899a.123.123 0 0 1-.073.073l-.898.332a.124.124 0 0 0 0 .232l.898.332c.034.013.06.04.073.073l.332.898c.04.108.192.108.232 0l.332-.898a.123.123 0 0 1 .073-.073l.898-.332a.124.124 0 0 0 0-.232l-.898-.332a.123.123 0 0 1-.073-.073l-.332-.898Z",fill:"currentColor"})))},yh=(0,c.memo)(SvgColorBucket);var _h;function vh(){return vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vh.apply(this,arguments)}const SvgColorDrop=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",vh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,_h||(_h=c.createElement("path",{d:"M20.245 12.706 16 8.316l-4.245 4.39A6.346 6.346 0 0 0 10 17.087c0 1.554.585 3.193 1.755 4.404A5.89 5.89 0 0 0 16 23.317a5.89 5.89 0 0 0 4.245-1.826C21.415 20.28 22 18.641 22 17.087c0-1.554-.585-3.17-1.755-4.381Zm-9.166 4.66c.007-1.553.56-2.999 1.415-3.877L16 9.831l3.64 3.784c.855.87 1.341 2.198 1.349 3.752h-9.91Z",fill:"currentColor"})))},wh=(0,c.memo)(SvgColorDrop);var Th;function Sh(){return Sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sh.apply(this,arguments)}const SvgCorner=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Sh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Th||(Th=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 10a.5.5 0 0 1 .5.5v6a5.5 5.5 0 0 0 5.5 5.5h6a.5.5 0 0 1 0 1h-6A6.5 6.5 0 0 1 9 16.5v-6a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},Ch=(0,c.memo)(SvgCorner);var Ih,xh,Ah=n(94320),kh=n(74698);function Oh(){return Oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oh.apply(this,arguments)}const SvgDistributeHorizontal=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Oh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ih||(Ih=c.createElement("path",{d:"M21 8.5v15M11 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),xh||(xh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 12a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},Ph=(0,c.memo)(SvgDistributeHorizontal);var Nh,Rh;function Mh(){return Mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mh.apply(this,arguments)}const SvgDistributeVertical=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Mh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Nh||(Nh=c.createElement("path",{d:"M8.5 11h15M8.5 21h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Rh||(Rh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 14a1.5 1.5 0 0 0-1.5 1.5v1a1.5 1.5 0 0 0 1.5 1.5h5a1.5 1.5 0 0 0 1.5-1.5v-1a1.5 1.5 0 0 0-1.5-1.5h-5Z",fill:"currentColor"})))},Lh=(0,c.memo)(SvgDistributeVertical);var Dh;function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bh.apply(this,arguments)}const SvgDots=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Bh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Dh||(Dh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm5 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"currentColor"})))},Fh=(0,c.memo)(SvgDots);var Hh;function Uh(){return Uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uh.apply(this,arguments)}const SvgDotsFillSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Uh({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Hh||(Hh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM4 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",fill:"currentColor"})))},jh=(0,c.memo)(SvgDotsFillSmall);var zh,Gh,Yh;function Zh(){return Zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zh.apply(this,arguments)}const SvgEraser=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Zh({viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,zh||(zh=c.createElement("path",{stroke:"currentColor",strokeWidth:2.471,strokeLinecap:"round",d:"M36.763 57.764H63.94"})),Gh||(Gh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.514 51.392 61.08 32.827c.173-.173.29-.392.338-.631l1.261-6.306a1.235 1.235 0 0 0-1.454-1.454l-6.305 1.261c-.24.048-.459.166-.631.338L35.723 44.6l6.791 6.792zm-8.269 6.521a3.706 3.706 0 0 0 5.242 0l23.34-23.34a3.706 3.706 0 0 0 1.013-1.893l1.26-6.306c.52-2.593-1.767-4.879-4.36-4.36l-6.306 1.26a3.706 3.706 0 0 0-1.894 1.014L29.2 47.628a3.706 3.706 0 0 0 0 5.241l5.045 5.044z",fill:"currentColor"})),Yh||(Yh=c.createElement("path",{d:"M23.747 34.363a.612.612 0 0 0-1.147 0L20.96 38.8a.612.612 0 0 1-.362.362l-4.436 1.641a.612.612 0 0 0 0 1.148l4.436 1.641c.168.062.3.194.362.361L22.6 48.39a.612.612 0 0 0 1.147 0l1.642-4.437a.612.612 0 0 1 .361-.36l4.437-1.642a.612.612 0 0 0 0-1.148l-4.437-1.641a.611.611 0 0 1-.361-.362l-1.641-4.436zm7.221-10.016a.408.408 0 0 0-.765 0l-1.094 2.958a.408.408 0 0 1-.24.24L25.91 28.64a.408.408 0 0 0 0 .765l2.957 1.094c.112.042.2.13.241.241l1.094 2.958a.408.408 0 0 0 .765 0l1.095-2.958c.041-.111.129-.2.24-.24l2.958-1.095a.408.408 0 0 0 0-.765l-2.957-1.094a.408.408 0 0 1-.241-.241l-1.095-2.958z",fill:"currentColor"})))},Wh=(0,c.memo)(SvgEraser);var Vh,$h=n(48068);function qh(){return qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qh.apply(this,arguments)}const SvgExclamationTriangle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",qh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Vh||(Vh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.968 8.032c.508-.863 1.795-.863 2.304 0l8.506 14.436c.528.895-.183 1.917-1.152 1.917H7.614c-.97 0-1.68-1.022-1.153-1.917l8.507-14.436Zm1.152.353a.328.328 0 0 0-.29.155L7.322 22.975a.24.24 0 0 0 .003.26c.051.083.15.15.288.15h17.012a.328.328 0 0 0 .288-.15.24.24 0 0 0 .003-.26L16.41 8.54a.327.327 0 0 0-.29-.155Zm-.117 4.333a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 1 .5-.5Zm0 8.502a1.218 1.218 0 1 0 0-2.435 1.218 1.218 0 0 0 0 2.435Z",fill:"currentColor"})))},Kh=(0,c.memo)(SvgExclamationTriangle);var Xh,Qh;function Jh(){return Jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jh.apply(this,arguments)}const SvgFloppyDisk=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Jh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Xh||(Xh=c.createElement("path",{d:"M12.76 20.8c-.359 0-.649-.358-.649-.8v-3.2c0-.442.29-.8.648-.8h6.482c.358 0 .648.358.648.8V20",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),Qh||(Qh=c.createElement("path",{d:"M21.6 24H10.4c-.371 0-.727-.169-.99-.469-.262-.3-.41-.707-.41-1.131V9.6c0-.424.148-.831.41-1.131.263-.3.619-.469.99-.469h8.646a1 1 0 0 1 .753.341l2.954 3.376a1 1 0 0 1 .247.659V22.4c0 .424-.148.831-.41 1.131-.263.3-.619.469-.99.469ZM18.333 11.2v1.6",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},eb=(0,c.memo)(SvgFloppyDisk);var tb,nb;function rb(){return rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rb.apply(this,arguments)}const SvgGearWithGauge=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",rb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,tb||(tb=c.createElement("rect",{width:32,height:32,rx:16,fill:"currentColor",fillOpacity:.64})),nb||(nb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.564 15.406a5.122 5.122 0 0 1 0 1.192c-.053.446.132.9.522 1.122l.408.231a1 1 0 0 1 .368 1.377l-.513.873a1 1 0 0 1-1.355.363l-.45-.254c-.382-.217-.858-.15-1.214.108-.336.244-.7.452-1.087.618-.412.177-.716.563-.716 1.012v.452a1 1 0 0 1-1 1h-1.054a1 1 0 0 1-1-1v-.453c0-.449-.304-.835-.717-1.012a5.601 5.601 0 0 1-1.085-.616c-.357-.26-.833-.327-1.216-.11l-.448.254a1 1 0 0 1-1.355-.363l-.514-.873a1 1 0 0 1 .369-1.377l.404-.23c.392-.222.576-.678.524-1.126a5.129 5.129 0 0 1 0-1.188c.052-.448-.132-.904-.524-1.127l-.404-.229a1 1 0 0 1-.369-1.376l.514-.874a1 1 0 0 1 1.355-.363l.447.254c.384.217.86.15 1.216-.11a5.62 5.62 0 0 1 1.086-.617c.413-.177.716-.562.716-1.011V9.5a1 1 0 0 1 1-1h1.054a1 1 0 0 1 1 1v.453c0 .449.304.835.717 1.012.387.166.75.373 1.085.616.357.26.833.327 1.217.11l.446-.254a1 1 0 0 1 1.356.363l.513.874a1 1 0 0 1-.368 1.376l-.404.23c-.393.222-.577.678-.524 1.126zM12.5 16a3.5 3.5 0 0 1 7 0 .5.5 0 0 0 1 0 4.5 4.5 0 1 0-9 0 .5.5 0 0 0 1 0zm5.601-1.46a.5.5 0 0 0-.707-.707l-1.188 1.188a1 1 0 1 0 .745.669l1.15-1.15z",fill:"currentColor"})))},ab=(0,c.memo)(SvgGearWithGauge);var ob;function lb(){return lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lb.apply(this,arguments)}const SvgGroup=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",lb({viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ob||(ob=c.createElement("rect",{x:.5,y:.5,width:20,height:20,rx:2.5,stroke:"currentColor",strokeDasharray:"2 2"})))},ib=(0,c.memo)(SvgGroup);var sb,cb,db,ub,pb,mb,fb,gb,hb,bb,Eb;function yb(){return yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yb.apply(this,arguments)}const SvgKeyboard=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",yb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,sb||(sb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 11.5A1.5 1.5 0 0 1 8.5 10h15a1.5 1.5 0 0 1 1.5 1.5v8.91a1.5 1.5 0 0 1-1.5 1.5h-15a1.5 1.5 0 0 1-1.5-1.5V11.5Zm1.5-.5a.5.5 0 0 0-.5.5v8.91a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5V11.5a.5.5 0 0 0-.5-.5h-15Z",fill:"currentColor"})),cb||(cb=c.createElement("rect",{x:12,y:18.5,width:7.3,height:1,rx:.5,fill:"currentColor"})),db||(db=c.createElement("circle",{cx:10.25,cy:13.75,r:.75,fill:"currentColor"})),ub||(ub=c.createElement("circle",{cx:12.75,cy:13.75,r:.75,fill:"currentColor"})),pb||(pb=c.createElement("circle",{cx:15.75,cy:13.75,r:.75,fill:"currentColor"})),mb||(mb=c.createElement("circle",{cx:18.75,cy:13.75,r:.75,fill:"currentColor"})),fb||(fb=c.createElement("circle",{cx:21.75,cy:13.75,r:.75,fill:"currentColor"})),gb||(gb=c.createElement("circle",{cx:11.75,cy:15.85,r:.75,fill:"currentColor"})),hb||(hb=c.createElement("circle",{cx:14.25,cy:15.85,r:.75,fill:"currentColor"})),bb||(bb=c.createElement("circle",{cx:17.25,cy:15.85,r:.75,fill:"currentColor"})),Eb||(Eb=c.createElement("circle",{cx:20.25,cy:15.85,r:.75,fill:"currentColor"})))},_b=(0,c.memo)(SvgKeyboard);var vb,wb=n(73035);function Tb(){return Tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tb.apply(this,arguments)}const SvgLetterAHeight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Tb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,vb||(vb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.5 9.5a.5.5 0 1 0 0-1h-15a.5.5 0 0 0 0 1h15Zm-8.205 2.993a.747.747 0 0 1 .7-.493c.312 0 .591.196.7.492l2.525 6.867a.475.475 0 0 1-.44.641.47.47 0 0 1-.441-.315l-.668-1.886H14.33l-.667 1.886a.47.47 0 0 1-.442.315.475.475 0 0 1-.44-.641l2.515-6.866Zm2.063 4.412-1.028-2.883-.306-.84a.03.03 0 0 0-.058 0l-.295.84-1.028 2.883h2.715ZM24 23a.5.5 0 0 1-.5.5h-15a.5.5 0 0 1 0-1h15a.5.5 0 0 1 .5.5Z",fill:"currentColor"})))},Sb=(0,c.memo)(SvgLetterAHeight);var Cb;function Ib(){return Ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ib.apply(this,arguments)}const SvgLetterAWidth=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ib({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Cb||(Cb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8.5a.5.5 0 0 0-1 0v15a.5.5 0 0 0 1 0v-15ZM23 8a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-1 0v-15A.5.5 0 0 1 23 8Zm-7.705 4.493a.747.747 0 0 1 .7-.493c.312 0 .591.196.7.492l2.525 6.867a.475.475 0 0 1-.44.641.47.47 0 0 1-.441-.315l-.668-1.886H14.33l-.667 1.886a.47.47 0 0 1-.442.315.475.475 0 0 1-.44-.641l2.515-6.866Zm2.063 4.412-1.028-2.883-.306-.84a.03.03 0 0 0-.029-.02.03.03 0 0 0-.029.02l-.295.84-1.028 2.883h2.715Z",fill:"currentColor"})))},xb=(0,c.memo)(SvgLetterAWidth);var Ab;function kb(){return kb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kb.apply(this,arguments)}const SvgLetterBBold=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",kb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ab||(Ab=c.createElement("path",{d:"M11 11a2 2 0 0 1 2-2h3.316c.751 0 1.443.163 2.075.489.646.326 1.16.775 1.542 1.349.382.574.573 1.206.573 1.897 0 .69-.178 1.29-.534 1.799a3.25 3.25 0 0 1-1.363 1.153v.118a3.58 3.58 0 0 1 1.72 1.231c.447.574.671 1.245.671 2.014 0 .77-.204 1.454-.613 2.053a4.042 4.042 0 0 1-1.62 1.408 5.004 5.004 0 0 1-2.214.489H13a2 2 0 0 1-2-2V11Zm5.217 3.866c.633 0 1.14-.196 1.522-.587.395-.39.593-.84.593-1.349 0-.508-.191-.951-.573-1.33-.369-.39-.857-.586-1.463-.586h-2.583a.5.5 0 0 0-.5.5v2.852a.5.5 0 0 0 .5.5h2.504Zm.336 6.1c.672 0 1.206-.208 1.601-.625.409-.417.613-.9.613-1.447 0-.56-.211-1.043-.633-1.447-.408-.417-.961-.626-1.66-.626h-2.76a.5.5 0 0 0-.5.5v3.145a.5.5 0 0 0 .5.5h2.84Z",fill:"currentColor"})))},Ob=(0,c.memo)(SvgLetterBBold);var Pb;function Nb(){return Nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nb.apply(this,arguments)}const SvgLetterIItalic=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Nb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Pb||(Pb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 9h-2.489a.5.5 0 0 0-.023 0H15.5a.5.5 0 0 0 0 1h1.823l-3.692 12H11.5a.5.5 0 0 0 0 1h5a.5.5 0 1 0 0-1h-1.823l3.692-12H20.5a.5.5 0 1 0 0-1Z",fill:"currentColor"})))},Rb=(0,c.memo)(SvgLetterIItalic);var Mb;function Lb(){return Lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lb.apply(this,arguments)}const SvgLetterIOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Lb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Mb||(Mb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 23a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 1a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm.5 2a.5.5 0 0 0-1 0v4a.5.5 0 0 0 1 0v-4Z",fill:"currentColor"})))},Db=(0,c.memo)(SvgLetterIOutline);var Bb,Fb;function Hb(){return Hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hb.apply(this,arguments)}const SvgLetterMOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Hb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Bb||(Bb=c.createElement("path",{d:"m19.526 12.955-.003.002a.73.73 0 0 0-.198.21L16 18.047l-3.325-4.88-.002-.002a.753.753 0 0 0-.209-.209.408.408 0 0 0-.221-.072.337.337 0 0 0-.266.128.427.427 0 0 0-.093.279v5.332a.95.95 0 0 0 .045.307v.001a.26.26 0 0 0 .123.144c.056.03.12.04.185.04.06 0 .12-.011.174-.042a.277.277 0 0 0 .115-.136.782.782 0 0 0 .059-.314v-4.414l3.049 4.393c.091.137.212.233.366.233.148 0 .268-.098.364-.23l.001-.002 3.05-4.394v4.414c0 .115.017.22.053.311l.002.007a.29.29 0 0 0 .12.132c.052.03.112.043.173.043.065 0 .129-.011.184-.041a.26.26 0 0 0 .123-.144v-.001a.95.95 0 0 0 .046-.307v-5.332c0-.105-.031-.2-.099-.279a.321.321 0 0 0-.26-.128.444.444 0 0 0-.231.071Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.231})),Fb||(Fb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 9.5A1.5 1.5 0 0 1 9.5 8h13A1.5 1.5 0 0 1 24 9.5v13a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 8 22.5v-13ZM9.5 9a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5h-13Z",fill:"currentColor"})))},Ub=(0,c.memo)(SvgLetterMOutline);var jb;function zb(){return zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zb.apply(this,arguments)}const SvgLetterSStrikethrough=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,jb||(jb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.503 10.826c.694-.547 1.622-.826 2.603-.826.968 0 1.87.237 2.563.769.704.54 1.142 1.35 1.228 2.39a.5.5 0 1 1-.996.082c-.065-.787-.382-1.327-.841-1.68-.47-.36-1.139-.561-1.954-.561-.801 0-1.499.229-1.985.611a1.95 1.95 0 0 0-.766 1.589c0 .6.265 1.006.613 1.3h-1.284a2.614 2.614 0 0 1-.329-1.3c0-1.003.444-1.82 1.148-2.374Zm5.075 6.674h1.183c.15.332.239.72.239 1.173 0 1.016-.402 1.87-1.138 2.46-.724.578-1.726.867-2.886.867-1.174 0-2.117-.322-2.8-.91-.682-.588-1.057-1.401-1.172-2.292a.5.5 0 0 1 .992-.128c.089.693.37 1.263.833 1.662.463.399 1.157.668 2.147.668 1.005 0 1.764-.251 2.261-.649.485-.387.763-.946.763-1.678 0-.523-.17-.894-.422-1.173Zm-9.078-2a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13Z",fill:"currentColor"})))},Gb=(0,c.memo)(SvgLetterSStrikethrough);var Yb,Zb=n(33291);function Wb(){return Wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wb.apply(this,arguments)}const SvgLetterTArrow=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Wb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Yb||(Yb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.854 10.146a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 .708.708L21 11.707v8.586l-2.146-2.147a.5.5 0 0 0-.708.708l3 3a.5.5 0 0 0 .351.146h.006a.498.498 0 0 0 .344-.14l.007-.007 3-3a.5.5 0 0 0-.708-.707L22 20.293v-8.586l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3ZM8 10a.5.5 0 0 0 0 1h3.5v10.5a.5.5 0 0 0 1 0V11H16a.5.5 0 0 0 0-1H8Z",fill:"currentColor"})))},Vb=(0,c.memo)(SvgLetterTArrow);var $b;function qb(){return qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qb.apply(this,arguments)}const SvgLetterTPlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",qb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,$b||($b=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 11.5a.5.5 0 0 0-.5.5v.711a.5.5 0 1 1-1 0V12A1.5 1.5 0 0 1 8 10.5h7a1.5 1.5 0 0 1 1.5 1.5v.711a.5.5 0 1 1-1 0V12a.5.5 0 0 0-.5-.5h-3v10h1.3a.5.5 0 0 1 0 1H9.7a.5.5 0 0 1 0-1H11v-10H8Zm9.5 4.5a.5.5 0 0 1 .5-.5h3v-3a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1-.5-.5Z",fill:"currentColor"})))},Kb=(0,c.memo)(SvgLetterTPlus);var Xb;function Qb(){return Qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qb.apply(this,arguments)}const SvgLetterTUppercase=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Qb({viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Xb||(Xb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.94 10a.5.5 0 0 1 .5-.5h5v13h-2.1a.5.5 0 0 0 0 1h5.2a.5.5 0 0 0 0-1h-2.1v-13h5a.5.5 0 0 1 .5.5v1.178a.5.5 0 1 0 1 0V10a1.5 1.5 0 0 0-1.5-1.5h-11a1.5 1.5 0 0 0-1.5 1.5v1.178a.5.5 0 0 0 1 0V10Zm15.12 0a.5.5 0 0 1 .5-.5h5v13h-2.1a.5.5 0 0 0 0 1h5.2a.5.5 0 0 0 0-1h-2.1v-13h5a.5.5 0 0 1 .5.5v1.178a.5.5 0 0 0 1 0V10a1.5 1.5 0 0 0-1.5-1.5h-11a1.5 1.5 0 0 0-1.5 1.5v1.178a.5.5 0 0 0 1 0V10Z",fill:"currentColor"})))},Jb=(0,c.memo)(SvgLetterTUppercase);var eE;function tE(){return tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tE.apply(this,arguments)}const SvgLetterTLargeLetterTSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",tE({viewBox:"0 0 79 79",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,eE||(eE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.677 24.838c0-.679.55-1.229 1.228-1.229H30.19v31.942h-5.16a1.229 1.229 0 1 0 0 2.457h12.777a1.228 1.228 0 1 0 0-2.457h-5.16V23.609h12.286c.678 0 1.228.55 1.228 1.229v2.894a1.229 1.229 0 0 0 2.457 0v-2.894a3.686 3.686 0 0 0-3.685-3.686H17.905a3.686 3.686 0 0 0-3.685 3.686v2.894a1.229 1.229 0 0 0 2.457 0v-2.894zm30.713 17.2c0-.68.55-1.23 1.228-1.23h4.914v14.743h-4.177a1.228 1.228 0 1 0 0 2.457h5.406v-1.229 1.229h5.405a1.228 1.228 0 1 0 0-2.457H55.99V40.809h4.914c.679 0 1.229.55 1.229 1.228v1.229a1.229 1.229 0 0 0 2.457 0v-1.229a3.686 3.686 0 0 0-3.686-3.685H48.618a3.686 3.686 0 0 0-3.685 3.685v1.229a1.228 1.228 0 1 0 2.457 0v-1.229z",fill:"currentColor"})))},nE=(0,c.memo)(SvgLetterTLargeLetterTSmall);var rE;function aE(){return aE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aE.apply(this,arguments)}const SvgLetterUUnderline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",aE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,rE||(rE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 9.5a.5.5 0 0 0-1 0V15a4 4 0 0 0 8 0V9.5a.5.5 0 0 0-1 0V15a3 3 0 1 1-6 0V9.5ZM9.5 23a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13Z",fill:"currentColor"})))},oE=(0,c.memo)(SvgLetterUUnderline);var lE;function iE(){return iE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iE.apply(this,arguments)}const SvgLink=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",iE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,lE||(lE=c.createElement("path",{d:"M12.364 15.343a.5.5 0 0 0-.707-.707l.707.707Zm3.535-.707a.5.5 0 0 0-.707.707l.707-.707Zm-.353 4.596-3.536 3.536.707.707 3.536-3.536-.707-.707Zm-7.071 0 1.768-1.767-.707-.708-1.768 1.768.707.707Zm1.768-1.767 2.121-2.122-.707-.707-2.121 2.121.707.707Zm6.01-2.475-.354-.354-.707.707.354.354.707-.707Zm-4.243 7.778a2.5 2.5 0 0 1-3.535 0l-.707.707a3.5 3.5 0 0 0 4.95 0l-.708-.707Zm4.243-2.829a3.5 3.5 0 0 0 0-4.95l-.707.708a2.5 2.5 0 0 1 0 3.535l.707.707Zm-7.778 2.829a2.5 2.5 0 0 1 0-3.536l-.707-.707a3.5 3.5 0 0 0 0 4.95l.707-.707ZM18.02 16.757a.5.5 0 1 0 .708.707l-.707-.707Zm-3.535.707a.5.5 0 1 0 .707-.707l-.707.707Zm.354-4.596 3.535-3.535-.707-.707-3.535 3.535.707.707Zm7.07 0-1.767 1.768.707.707 1.768-1.768-.707-.707Zm-1.767 1.768-2.121 2.121.707.707 2.121-2.12-.707-.708Zm-6.01 2.475.353.354.707-.708-.353-.353-.707.707Zm4.242-7.778a2.5 2.5 0 0 1 3.536 0l.707-.707a3.5 3.5 0 0 0-4.95 0l.707.707Zm-4.242 2.828a3.5 3.5 0 0 0 0 4.95l.707-.707a2.5 2.5 0 0 1 0-3.536l-.707-.707Zm7.778-2.828a2.5 2.5 0 0 1 0 3.535l.707.707a3.5 3.5 0 0 0 0-4.95l-.707.708Z",fill:"currentColor"})))},sE=(0,c.memo)(SvgLink);var cE,dE=n(37233);function uE(){return uE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uE.apply(this,arguments)}const SvgLockFilledClosed=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",uE({viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,cE||(cE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 11a3 3 0 1 1 6 0v3h1.5a1.5 1.5 0 0 1 1.5 1.5v7a1.5 1.5 0 0 1-1.5 1.5h-9a1.5 1.5 0 0 1-1.5-1.5v-7a1.5 1.5 0 0 1 1.5-1.5H13v-3Zm5 0v3h-4v-3a2 2 0 1 1 4 0m-2 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",fill:"currentColor"})))},pE=(0,c.memo)(SvgLockFilledClosed);var mE;function fE(){return fE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fE.apply(this,arguments)}const SvgLockOpen=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",fE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,mE||(mE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.816 8.415a3.023 3.023 0 0 0-4.161 1.129l-.255.447a.5.5 0 1 0 .87.494l.254-.447a2.023 2.023 0 0 1 2.786-.76 2.101 2.101 0 0 1 .75 2.844L16.964 14H11.5a1.5 1.5 0 0 0-1.5 1.5v7a1.5 1.5 0 0 0 1.5 1.5h9a1.5 1.5 0 0 0 1.5-1.5v-7a1.5 1.5 0 0 0-1.5-1.5h-2.379l.805-1.376.002-.005c.836-1.47.343-3.351-1.112-4.204ZM11.5 15a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-9Zm4.5 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",fill:"currentColor"})))},gE=(0,c.memo)(SvgLockOpen);var hE,bE,EE=n(42914);function yE(){return yE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yE.apply(this,arguments)}const SvgMedia=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",yE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,hE||(hE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 13.451H13.004v10.441h.264l2.048-3.327a1.5 1.5 0 0 1 2.287-.323l.242.22a.5.5 0 0 0 .758-.1l1.598-2.5a1.5 1.5 0 0 1 2.623.176L25 22.712v-9.26zm0 11.441c.066 0 .13-.006.191-.018h.031a.5.5 0 0 0 .398-.197.998.998 0 0 0 .38-.785v-10.44a1 1 0 0 0-1-1H13.004a1 1 0 0 0-1 1v10.44a1 1 0 0 0 1 1H25zm-3.082-6.432a.5.5 0 0 0-.875-.059l-1.598 2.5a1.5 1.5 0 0 1-2.273.3l-.242-.22a.5.5 0 0 0-.762.108l-1.714 2.785h9.984l-2.52-5.414zm-7.081-2.121a1.055 1.055 0 1 1 2.11 0 1.055 1.055 0 0 1-2.11 0zm1.055-2.055a2.055 2.055 0 1 0 0 4.11 2.055 2.055 0 0 0 0-4.11z",fill:"currentColor"})),bE||(bE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.004 6.11a1 1 0 0 0-1 1v9.038a1 1 0 0 0 1 1h3v-5.697a1 1 0 0 1 1-1h9V7.11a1 1 0 0 0-1-1h-12zm1.524 1.785H7.047v1.48h1.48v-1.48zm8.886 0h1.48v1.48h-1.48v-1.48zm-8.886 2.96H7.047v1.481h1.48v-1.48zm0 2.961H7.047v1.481h1.48v-1.48z",fill:"currentColor"})))},_E=(0,c.memo)(SvgMedia);var vE,wE,TE;function SE(){return SE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SE.apply(this,arguments)}const SvgMirrorLeftright=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",SE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,vE||(vE=c.createElement("path",{d:"M16 8.5v15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"0.01 4"})),wE||(wE=c.createElement("path",{d:"m12.5 16-4-3.5v7l4-3.5Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),TE||(TE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.17 12.124a.5.5 0 0 1 .83.376v7a.5.5 0 0 1-.83.376l-4-3.5a.5.5 0 0 1 0-.752l4-3.5Z",fill:"currentColor"})))},CE=(0,c.memo)(SvgMirrorLeftright);var IE,xE,AE;function kE(){return kE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kE.apply(this,arguments)}const SvgMirrorUpdown=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",kE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,IE||(IE=c.createElement("path",{d:"M23.75 15.75h-15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"0.01 4"})),xE||(xE=c.createElement("path",{d:"m16.25 12.25 3.5-4h-7l3.5 4Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),AE||(AE=c.createElement("path",{d:"M20.126 22.92a.5.5 0 0 1-.376.83h-7a.5.5 0 0 1-.376-.83l3.5-4a.5.5 0 0 1 .752 0l3.5 4Z",fill:"currentColor"})))},OE=(0,c.memo)(SvgMirrorUpdown);var PE,NE,RE,ME,LE;function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DE.apply(this,arguments)}const SvgMuted=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",DE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,PE||(PE=c.createElement("mask",{id:"a",fill:"currentColor"},c.createElement("path",{fillRule:"evenodd",d:"M6 8.6c.2-.3.5-.3.7-.1L26.1 23c.2.2.3.5.1.7-.1.2-.5.3-.7.1L6.1 9.3a.5.5 0 0 1 0-.7Z",clipRule:"evenodd"}),c.createElement("path",{d:"m11.7 12.2-.5.5H6.6c-.4 0-.8.3-.8.8v5.1c0 .5.4.8.8.8h4.6l4.4 4.5c.5.5 1.3.1 1.3-.6v-7.2l-1-.7v7.4l-4-4.1a.8.8 0 0 0-.7-.3H6.8v-4.7h4.4c.3 0 .5-.1.6-.3l.7-.6-.8-.6Zm4.3 1.9V9.3L13.1 12l-.8-.6 3.2-3.2a.8.8 0 0 1 1.3.6v6l-1-.7Zm4.6 4.7-.7.5c-.2 0-.3.2-.3.5s.3.6.7.4c.4-.2.8-.4 1-.7l-.7-.7Zm1.4-.1-.7-.6a3.7 3.7 0 0 0-1.4-5.4.6.6 0 0 1-.3-.5c0-.4.3-.6.7-.5a4.7 4.7 0 0 1 1.8 7Zm1.4 2.3c-.5.6-1.2 1-1.9 1.4-.1.1-.3.3-.3.5 0 .4.4.6.8.4.8-.4 1.6-1 2.2-1.7l-.8-.6Z"}),c.createElement("path",{d:"m24.8 20.8-.8-.6a7.3 7.3 0 0 0-2.5-10.5.5.5 0 0 1-.3-.5c0-.4.4-.6.8-.4a8.3 8.3 0 0 1 2.8 12Z"}))),NE||(NE=c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 8.6c.2-.3.5-.3.7-.1L26.1 23c.2.2.3.5.1.7-.1.2-.5.3-.7.1L6.1 9.3a.5.5 0 0 1 0-.7Z",clipRule:"evenodd"})),RE||(RE=c.createElement("path",{fill:"currentColor",d:"m11.7 12.2-.5.5H6.6c-.4 0-.8.3-.8.8v5.1c0 .5.4.8.8.8h4.6l4.4 4.5c.5.5 1.3.1 1.3-.6v-7.2l-1-.7v7.4l-4-4.1a.8.8 0 0 0-.7-.3H6.8v-4.7h4.4c.3 0 .5-.1.6-.3l.7-.6-.8-.6Zm4.3 1.9V9.3L13.1 12l-.8-.6 3.2-3.2a.8.8 0 0 1 1.3.6v6l-1-.7Zm4.6 4.7-.7.5c-.2 0-.3.2-.3.5s.3.6.7.4c.4-.2.8-.4 1-.7l-.7-.7Zm1.4-.1-.7-.6a3.7 3.7 0 0 0-1.4-5.4.6.6 0 0 1-.3-.5c0-.4.3-.6.7-.5a4.7 4.7 0 0 1 1.8 7Zm1.4 2.3c-.5.6-1.2 1-1.9 1.4-.1.1-.3.3-.3.5 0 .4.4.6.8.4.8-.4 1.6-1 2.2-1.7l-.8-.6Z"})),ME||(ME=c.createElement("path",{fill:"currentColor",d:"m24.8 20.8-.8-.6a7.3 7.3 0 0 0-2.5-10.5.5.5 0 0 1-.3-.5c0-.4.4-.6.8-.4a8.3 8.3 0 0 1 2.8 12Z"})),LE||(LE=c.createElement("path",{fill:"currentColor",d:"m6.7 8.5-.6.8.6-.8ZM26.1 23l-.6.8.6-.8Zm-.6.8.6-.8-.6.8ZM6.1 9.3l-.6.8.6-.8Zm5.6 2.9.6-.8-.7-.6-.6.6.7.8Zm-.5.5v1h.4l.3-.3-.7-.7Zm0 6.7.7-.7-.3-.3h-.4v1Zm4.4 4.5-.7.7.7-.7Zm1.3-7.8h1v-.5l-.4-.3-.6.8Zm-1-.7.6-.8-1.6-1.2v2h1Zm0 7.4-.7.7 1.7 1.7v-2.4h-1Zm-4-4.1-.8.7.7-.7Zm-5.1-.3h-1v1h1v-1Zm0-4.7v-1h-1v1h1Zm5.7-1 .7.8.8-.8-1-.7-.5.8Zm3.4-3.4h1V6.9l-1.7 1.7.7.7Zm0 4.8h-1v.5l.4.3.6-.8Zm-2.7-2-.6.7.7.6.6-.6-.7-.8Zm-.8-.7-.7-.7-.8.9.9.6.6-.8Zm3.2-3.2-.7-.7.7.7Zm1.3 6.7-.6.8 1.6 1.2v-2h-1Zm3.7 4 .6-.9-.6-.4-.7.5.7.7Zm-.7.4.5.8-.5-.8Zm.4 1 .4.8-.4-.9Zm1-.8.8.7.9-.8-1-.7-.6.8Zm0-1.4-.8-.6-.6.8.8.6.6-.8Zm.8.6-.6.8.8.6.6-.8-.8-.6Zm-2.2-6-.4.9.4-1Zm.4-1 .4-.9-.4 1Zm1.2 10.7-.5-.8.5.8Zm1.9-1.4.6-.8-.7-.6-.6.7.7.7ZM22 23.3l.4 1-.4-1Zm2.2-1.7.8.6.7-.8-.9-.6-.6.8Zm-.2-1.4-.8-.6-.5.8.7.6.6-.8Zm.8.6-.6.8.9.6.5-.9-.8-.5ZM21.5 9.7l.5-1-.5 1Zm.5-1-.5 1 .5-1Zm-14.7-1c-.6-.5-1.6-.4-2 .3l1.5 1.2c-.1.2-.4.2-.7 0l1.2-1.5Zm19.4 14.5L7.3 7.7 6.1 9.3l19.4 14.5 1.2-1.6Zm.3 2c.5-.6.4-1.5-.3-2l-1.2 1.6a.5.5 0 0 1 0-.7l1.5 1.2Zm-2 .4c.6.5 1.5.3 2-.3L25.4 23c.2-.2.5-.3.7-.1L25 24.6ZM5.4 10.1 25 24.6l1.2-1.6L6.7 8.5 5.5 10ZM5.2 8c-.4.6-.3 1.6.3 2l1.2-1.5c.3.1.3.5.1.7L5.2 8Zm5.8 3.4-.5.5 1.4 1.5.5-.5-1.4-1.5Zm.2.3H6.6v2h4.6v-2Zm-4.6 0c-1 0-1.8.8-1.8 1.8h2s0 .2-.2.2v-2Zm-1.8 1.8v5.1h2v-5.1h-2Zm0 5.1c0 1 .8 1.8 1.8 1.8v-2l.2.2h-2Zm1.8 1.8h4.6v-2H6.6v2Zm3.9-.2 4.4 4.4 1.4-1.4-4.4-4.5-1.4 1.5Zm4.4 4.4c1.1 1.1 3 .3 3-1.3h-2a.2.2 0 0 1 .2-.2h.2l-1.4 1.5Zm3-1.3v-7.2h-2v7.2h2Zm-.4-8-1-.7-1.2 1.6 1 .7 1.2-1.6Zm-2.6 0v7.5h2v-7.4h-2Zm1.8 6.8L12.5 18l-1.4 1.4 4.1 4.1 1.5-1.4ZM12.5 18c-.3-.4-.8-.6-1.3-.6v2l1.3-1.4Zm-1.3-.6H6.8v2h4.4v-2Zm-3.4 1v-4.7h-2v4.7h2Zm-1-3.7h4.4v-2H6.8v2Zm4.4 0c.5 0 1-.2 1.3-.6l-1.4-1.4h.1v2Zm1.3-.6.7-.6-1.4-1.4-.7.6 1.4 1.4Zm.6-2.1-.8-.6L11 13l.8.6L13 12Zm1.8-2.7V14h2V9.3h-2Zm-1 3.5 2.8-2.8-1.5-1.4-2.7 2.7 1.4 1.5Zm-2.1-.6.8.6 1.2-1.6-.8-.6-1.2 1.6Zm3-4.7-3.1 3.2 1.4 1.4L16.3 9l-1.4-1.4ZM18 8.8c0-1.6-1.9-2.4-3-1.3L16.3 9a.2.2 0 0 1-.2 0H16v-.1h2Zm0 6v-6h-2v6h2Zm-2.6.1 1 .8 1.2-1.6-1-.8-1.2 1.6Zm4.6 3.2-.4.3.9 1.7.8-.5-1.3-1.5Zm-.4.3c-.5.2-.9.7-.9 1.4h2c0 .2-.1.3-.2.3l-1-1.7Zm-.9 1.4c0 1 1 1.8 2 1.3l-.8-1.8h.6l.2.5h-2Zm2 1.3c.6-.2 1-.5 1.5-.9l-1.4-1.5-.9.6.9 1.8Zm1.4-2.4-.8-.7-1.2 1.6.8.7 1.2-1.6Zm-1.3.2.8.6 1.2-1.6-.8-.6-1.2 1.6Zm.3-3c0 .6-.2 1.2-.5 1.6l1.6 1.2c.5-.8.9-1.7.9-2.7h-2Zm-1.5-2.3c.9.4 1.5 1.3 1.5 2.4h2c0-1.9-1-3.4-2.6-4.2l-1 1.8Zm-.9-1.4c0 .6.4 1.1.9 1.4l.9-1.8.2.4h-2Zm2-1.4c-1-.5-2 .4-2 1.4h2c0 .1 0 .3-.2.4h-.6l.9-1.8ZM24 16c0-2.3-1.4-4.3-3.3-5.2l-.9 1.8c1.3.6 2.2 1.9 2.2 3.4h2Zm-1.1 3.3c.7-1 1-2 1-3.3h-2c0 .8-.2 1.5-.6 2.1l1.6 1.2Zm-.9 4c.8-.4 1.5-1 2.1-1.7l-1.4-1.3c-.5.5-1 1-1.7 1.3l1 1.7Zm.2-.4c0 .2 0 .3-.2.4l-1-1.7c-.4.2-.8.7-.8 1.3h2Zm-.7-.4h.5c.2 0 .2.2.2.4h-2c0 1 1.2 1.9 2.2 1.3l-1-1.7Zm2-1.6a10 10 0 0 1-2 1.6l1 1.7c.9-.5 1.7-1.2 2.5-2L23.5 21Zm1.3-.1-.8-.6-1.2 1.6.8.6 1.2-1.6Zm-1.4.2.8.6 1.2-1.6-.8-.6-1.2 1.6Zm1.4-.3c1-1.3 1.5-3 1.5-4.6h-2a6 6 0 0 1-1.1 3.5l1.6 1.1Zm1.5-4.6c0-3.2-1.7-5.9-4.3-7.3l-1 1.7c2 1.1 3.3 3.2 3.3 5.6h2ZM22 8.8l.2.4h-2c0 .6.4 1 .8 1.3l1-1.7Zm.2.4c0 .2 0 .3-.2.4h-.5l1-1.7c-1.1-.6-2.3.2-2.3 1.3h2Zm-.7.4a7.3 7.3 0 0 1 3.8 6.5h2c0-3.6-2-6.7-4.9-8.2l-1 1.7Zm3.8 6.5c0 1.5-.5 3-1.3 4.1l1.6 1.1c1-1.5 1.7-3.3 1.7-5.2h-2Z",mask:"url(#a)"})))},BE=(0,c.memo)(SvgMuted);var FE;function HE(){return HE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HE.apply(this,arguments)}const SvgPageMargin=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",HE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,FE||(FE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 9h8a1 1 0 0 1 1 1v1.5H11V10a1 1 0 0 1 1-1Zm-1 3.5v7h10v-7H11Zm10 8H11V22a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1.5ZM10 10a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V10Z",fill:"currentColor"})))},UE=(0,c.memo)(SvgPageMargin);var jE;function zE(){return zE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zE.apply(this,arguments)}const SvgPagePlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,jE||(jE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 7.5a.5.5 0 0 0 0 1h7a1.5 1.5 0 0 1 1.5 1.5v9a.5.5 0 0 0 1 0v-9A2.5 2.5 0 0 0 21 7.5h-7Zm-4 3A1.5 1.5 0 0 0 8.5 12v11a1.5 1.5 0 0 0 1.5 1.5h9a1.5 1.5 0 0 0 1.5-1.5V12a1.5 1.5 0 0 0-1.5-1.5h-9ZM9.5 12a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V12Zm2.5 5a.5.5 0 0 0 0 1h2v2a.5.5 0 0 0 1 0v-2h2a.5.5 0 0 0 0-1h-2v-2a.5.5 0 0 0-1 0v2h-2Z",fill:"currentColor"})))},GE=(0,c.memo)(SvgPagePlus);var YE,ZE,WE,VE;function $E(){return $E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$E.apply(this,arguments)}const SvgPageSwap=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",$E({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,YE||(YE=c.createElement("rect",{x:12,y:14,width:8,height:12,rx:1,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),ZE||(ZE=c.createElement("path",{d:"M15 11V8a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),WE||(WE=c.createElement("path",{d:"M14 23h4M14 21h2",stroke:"currentColor",strokeLinecap:"round"})),VE||(VE=c.createElement("path",{d:"M20.571 6 18 8.539m0 0 2.571 2.538M18 8.54h3.23A2.77 2.77 0 0 1 24 11.308V12",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},qE=(0,c.memo)(SvgPageSwap);var KE,XE,QE;function JE(){return JE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JE.apply(this,arguments)}const SvgPatternLinear=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",JE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,KE||(KE=c.createElement("circle",{cx:16,cy:16,r:12,fill:"url(#a)"})),XE||(XE=c.createElement("circle",{cx:16,cy:16,r:11.5,stroke:"currentColor",strokeOpacity:.16})),QE||(QE=c.createElement("defs",null,c.createElement("linearGradient",{id:"a",x1:16,y1:4,x2:16,y2:35.8,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"currentColor",stopOpacity:.52}),c.createElement("stop",{offset:.802,stopColor:"currentColor",stopOpacity:0})))))},ey=(0,c.memo)(SvgPatternLinear);var ty,ny,ry;function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ay.apply(this,arguments)}const SvgPatternRadial=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ay({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ty||(ty=c.createElement("circle",{cx:16,cy:16,r:12,fill:"url(#a)"})),ny||(ny=c.createElement("circle",{cx:16,cy:16,r:11.5,stroke:"currentColor",strokeOpacity:.16})),ry||(ry=c.createElement("defs",null,c.createElement("radialGradient",{id:"a",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(90 0 16) scale(23.4)"},c.createElement("stop",{stopColor:"currentColor",stopOpacity:.64}),c.createElement("stop",{offset:.573,stopColor:"currentColor",stopOpacity:0})))))},oy=(0,c.memo)(SvgPatternRadial);var ly;function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iy.apply(this,arguments)}const SvgPatternSolid=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",iy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ly||(ly=c.createElement("circle",{cx:16,cy:16,r:11.5,fill:"currentColor",stroke:"currentColor"})))},sy=(0,c.memo)(SvgPatternSolid);var cy,dy=n(25252);function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uy.apply(this,arguments)}const SvgPercent=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",uy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,cy||(cy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.785 9.089a.5.5 0 0 1 .126.696l-9 13a.5.5 0 1 1-.822-.57l9-13a.5.5 0 0 1 .696-.126ZM12 14.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm10 4a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z",fill:"currentColor"})))},py=(0,c.memo)(SvgPercent);var my;function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fy.apply(this,arguments)}const SvgPicture=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",fy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,my||(my=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 9H8v14h.72l2.843-4.617a1.5 1.5 0 0 1 2.286-.323l.818.743a.5.5 0 0 0 .757-.1l2.519-3.939a1.5 1.5 0 0 1 2.623.175L24 22.315V9Zm-.784 14H9.895l2.52-4.093a.5.5 0 0 1 .762-.108l.817.744a1.5 1.5 0 0 0 2.273-.302l2.518-3.938a.5.5 0 0 1 .875.058L23.216 23ZM8 24h16a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1Zm2.5-11a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm1.5-2.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5Z",fill:"currentColor"})))},gy=(0,c.memo)(SvgPicture);var hy,by,Ey;function yy(){return yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yy.apply(this,arguments)}const SvgPictureSwap=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",yy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,hy||(hy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.996 15H14v10.441h.264l2.048-3.327a1.5 1.5 0 0 1 2.287-.323l.242.22a.5.5 0 0 0 .758-.1l1.598-2.5a1.5 1.5 0 0 1 2.623.175l2.176 4.674V15Zm0 11.441c.066 0 .13-.006.192-.018h.03a.5.5 0 0 0 .399-.197.998.998 0 0 0 .38-.785V15a1 1 0 0 0-1-1H14a1 1 0 0 0-1 1v10.441a1 1 0 0 0 1 1h11.996Zm-3.082-6.432a.5.5 0 0 0-.875-.059l-1.598 2.5a1.5 1.5 0 0 1-2.273.3l-.242-.22a.5.5 0 0 0-.762.108l-1.714 2.785h9.984l-2.52-5.414Zm-7.081-2.121a1.055 1.055 0 1 1 2.11 0 1.055 1.055 0 0 1-2.11 0Zm1.055-2.055a2.055 2.055 0 1 0 0 4.11 2.055 2.055 0 0 0 0-4.11Z",fill:"currentColor"})),by||(by=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 9h10v1.727h1V9a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h1.77v-1H7V9Z",fill:"currentColor"})),Ey||(Ey=c.createElement("path",{d:"M22.571 6 20 8.539m0 0 2.571 2.538M20 8.54h3.23A2.77 2.77 0 0 1 26 11.308V12M8.429 26 11 23.462m0 0-2.571-2.54M11 23.463H7.77A2.77 2.77 0 0 1 5 20.692V20",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},_y=(0,c.memo)(SvgPictureSwap);var vy;function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wy.apply(this,arguments)}const SvgPipette=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",wy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,vy||(vy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.247 8.753a2.571 2.571 0 0 0-3.636 0l-2.075 2.075-1.682-1.682a.5.5 0 1 0-.707.708l7 7a.5.5 0 0 0 .707-.708l-1.682-1.682 2.075-2.075a2.571 2.571 0 0 0 0-3.636Zm-2.783 5.004 2.076-2.075a1.571 1.571 0 1 0-2.222-2.222l-2.075 2.076 2.221 2.221Zm-5.05-.61a.5.5 0 0 1 0 .707L9.566 19.7a1.932 1.932 0 1 0 2.733 2.733l5.848-5.848a.5.5 0 1 1 .707.707l-5.848 5.848a2.932 2.932 0 1 1-4.147-4.147l5.848-5.848a.5.5 0 0 1 .707 0Z",fill:"currentColor"})))},Ty=(0,c.memo)(SvgPipette);var Sy;function Cy(){return Cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cy.apply(this,arguments)}const SvgPlay=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Cy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Sy||(Sy=c.createElement("path",{d:"M23.426 15.032a1.103 1.103 0 0 1 0 1.936l-11.826 6.4c-.724.392-1.6-.138-1.6-.967V9.599c0-.83.876-1.36 1.6-.967l11.826 6.4Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Iy=(0,c.memo)(SvgPlay);var xy,Ay=n(39980);function ky(){return ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ky.apply(this,arguments)}const SvgPlusFilledSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ky({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,xy||(xy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4Z",fill:"currentColor"})))},Oy=(0,c.memo)(SvgPlusFilledSmall);var Py;function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ny.apply(this,arguments)}const SvgPlayOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ny({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Py||(Py=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 16a7 7 0 1 1 14 0 7 7 0 0 1-14 0Zm7-8a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm-1.215 11.38 4.276-2.575c.585-.353.585-1.257 0-1.61l-4.276-2.575c-.575-.346-1.285.098-1.285.804v5.152c0 .706.71 1.15 1.285.804Z",fill:"currentColor"})))},Ry=(0,c.memo)(SvgPlayOutline);var My;function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ly.apply(this,arguments)}const SvgPlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ly({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,My||(My=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.5 9a.5.5 0 0 0-1 0v6.498h-7a.5.5 0 0 0 0 1h7v7.498a.5.5 0 1 0 1 0v-7.498h6.996a.5.5 0 1 0 0-1H16.5V9Z",fill:"currentColor"})))},Dy=(0,c.memo)(SvgPlus);var By;function Fy(){return Fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fy.apply(this,arguments)}const SvgPlusFilled=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Fy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,By||(By=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 24a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-12a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},Hy=(0,c.memo)(SvgPlusFilled);var Uy;function jy(){return jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jy.apply(this,arguments)}const SvgPlusOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",jy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Uy||(Uy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm-8 7a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm4 0a.5.5 0 0 1 .5-.5h3v-3a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1-.5-.5Z",fill:"currentColor"})))},zy=(0,c.memo)(SvgPlusOutline);var Gy,Yy;function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zy.apply(this,arguments)}const SvgQuestionMarkOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Zy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Gy||(Gy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm-8 7a8 8 0 1 1 16 0 8 8 0 0 1-16 0Z",fill:"currentColor"})),Yy||(Yy=c.createElement("path",{d:"M15.438 17.268c0-.406.079-.744.235-1.012.156-.268.436-.59.84-.963.329-.293.563-.541.703-.744.148-.212.222-.464.222-.756 0-.39-.127-.704-.382-.94-.256-.243-.61-.365-1.062-.365-.412 0-.74.118-.988.354-.239.227-.42.512-.543.853l-.963-.402c.173-.472.465-.886.877-1.244.42-.366.958-.549 1.617-.549.494 0 .93.102 1.308.305.38.195.671.467.877.817.214.35.321.74.321 1.17 0 .448-.115.83-.346 1.147-.222.309-.51.622-.864.939-.271.244-.469.476-.592.695-.124.22-.186.476-.186.768v.513h-1.074v-.586Zm.543 3.232a.801.801 0 0 1-.567-.22.78.78 0 0 1-.223-.56c0-.212.074-.39.223-.537a.779.779 0 0 1 .568-.232c.213 0 .395.078.543.232a.707.707 0 0 1 .234.537.76.76 0 0 1-.234.56.744.744 0 0 1-.543.22Z",fill:"currentColor"})))},Wy=(0,c.memo)(SvgQuestionMarkOutline);var Vy,$y,qy,Ky;function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(this,arguments)}const SvgRotate=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Xy({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Vy||(Vy=c.createElement("path",{d:"M22.02 21.785a.5.5 0 0 0-.687-.727l.687.727Zm-5.68 1.244c-3.262 0-6.01-2.124-6.891-5.023l-.957.29c1.01 3.321 4.146 5.733 7.849 5.733v-1Zm4.993-1.971a7.248 7.248 0 0 1-4.992 1.971v1a8.249 8.249 0 0 0 5.679-2.244l-.687-.727Z",fill:"currentColor"})),$y||($y=c.createElement("path",{d:"M8.5 24v-5.647h5.647",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),qy||(qy=c.createElement("path",{d:"M10.51 10.215a.5.5 0 0 0 .686.728l-.686-.728Zm5.679-1.244c3.262 0 6.01 2.124 6.891 5.023l.957-.29c-1.01-3.321-4.145-5.733-7.848-5.733v1Zm-4.993 1.972A7.248 7.248 0 0 1 16.19 8.97v-1a8.249 8.249 0 0 0-5.68 2.244l.687.728Z",fill:"currentColor"})),Ky||(Ky=c.createElement("path",{d:"M24.03 8v5.647h-5.648",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},Qy=(0,c.memo)(SvgRotate);var Jy,e_,t_,n_,r_,a_;function o_(){return o_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o_.apply(this,arguments)}const SvgScissors=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",o_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Jy||(Jy=c.createElement("circle",{cx:11.536,cy:11.535,r:2.5,transform:"rotate(-45 11.536 11.535)",stroke:"currentColor"})),e_||(e_=c.createElement("circle",{r:2.5,transform:"scale(1 -1) rotate(-45 -19.02 -24.192)",stroke:"currentColor"})),t_||(t_=c.createElement("path",{d:"m18.646 18.424-.353-.354.707-.707.354.354-.708.707Zm4.708 3.293a.5.5 0 0 1-.708.707l.708-.707Zm-4-4 4 4-.708.707-4-4 .708-.707Z",fill:"currentColor"})),n_||(n_=c.createElement("path",{d:"m14 13.07 1 1",stroke:"currentColor",strokeLinecap:"square"})),r_||(r_=c.createElement("path",{d:"m14.352 19.354-.355.352-.704-.71.355-.352.704.71Zm8.296-9.639a.5.5 0 1 1 .704.71l-.704-.71Zm-9 8.93 9-8.93.704.71-9 8.929-.704-.71Z",fill:"currentColor"})),a_||(a_=c.createElement("path",{d:"m14.352 19.354-.355.352-.704-.71.355-.352.704.71Zm8.296-9.639a.5.5 0 1 1 .704.71l-.704-.71Zm-9 8.93 9-8.93.704.71-9 8.929-.704-.71Z",fill:"currentColor"})))},l_=(0,c.memo)(SvgScissors);var i_;function s_(){return s_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s_.apply(this,arguments)}const SvgShapes=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",s_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,i_||(i_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 11.5a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0ZM16 8a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm3.867 9.134a1.329 1.329 0 0 1 2.265 0l2.665 4.313c.548.886-.076 2.053-1.132 2.053h-5.33c-1.056 0-1.68-1.167-1.132-2.053l2.665-4.313Zm1.415.525a.329.329 0 0 0-.564 0l-2.665 4.313a.344.344 0 0 0 .282.528h5.33c.253 0 .428-.29.282-.528l-2.665-4.313Zm-10.846-.617 3.408 1.968c.149.086.2.276.114.426l-1.968 3.408a.312.312 0 0 1-.426.114L8.156 20.99a.312.312 0 0 1-.114-.426l1.968-3.408c.086-.149.277-.2.426-.114Zm-1.292-.386a1.312 1.312 0 0 1 1.792-.48l3.408 1.968c.627.362.842 1.164.48 1.792l-1.968 3.408a1.312 1.312 0 0 1-1.792.48l-3.408-1.968a1.312 1.312 0 0 1-.48-1.792l1.968-3.408Z",fill:"currentColor"})))},c_=(0,c.memo)(SvgShapes);var d_,u_=n(8753);function p_(){return p_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p_.apply(this,arguments)}const SvgSort=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",p_({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,d_||(d_=c.createElement("path",{d:"M6 36v-3h12v3Zm0-21v-3h36v3Zm0 10.5v-3h24v3Z",fill:"currentColor"})))},m_=(0,c.memo)(SvgSort);var f_,g_;function h_(){return h_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h_.apply(this,arguments)}const SvgSparkles=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",h_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,f_||(f_=c.createElement("path",{d:"m19 10.44 1.342 3.627a1 1 0 0 0 .59.591L24.56 16l-3.626 1.342a1 1 0 0 0-.591.59L19 21.56l-1.342-3.626a1 1 0 0 0-.59-.591L13.44 16l3.626-1.342a1 1 0 0 0 .591-.59L19 10.44Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"bevel"})),g_||(g_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m11 9.96-.432 1.169a.743.743 0 0 1-.439.439L8.961 12l1.168.432a.743.743 0 0 1 .439.439L11 14.039l.432-1.168a.743.743 0 0 1 .439-.439L13.039 12l-1.168-.432a.743.743 0 0 1-.439-.439L11 9.961Zm.232-.798a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795ZM10 17.96l-.432 1.169a.743.743 0 0 1-.439.439L7.961 20l1.168.432a.743.743 0 0 1 .439.439L10 22.039l.432-1.168a.743.743 0 0 1 .439-.439L12.039 20l-1.168-.432a.743.743 0 0 1-.439-.439L10 17.961Zm.232-.798a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795Z",fill:"currentColor"})))},b_=(0,c.memo)(SvgSparkles);var E_,y_=n(69682);function __(){return __=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},__.apply(this,arguments)}const SvgStopOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",__({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,E_||(E_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 16a7 7 0 1 1 14 0 7 7 0 0 1-14 0Zm7-8a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm-2 5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",fill:"currentColor"})))},v_=(0,c.memo)(SvgStopOutline);var w_,T_=n(2779);function S_(){return S_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S_.apply(this,arguments)}const SvgTailedRectangle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",S_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,w_||(w_=c.createElement("path",{d:"M6.5 7.095c0-.854.743-1.595 1.722-1.595h15.556c.98 0 1.722.741 1.722 1.595v15.81c0 .854-.743 1.595-1.722 1.595H19.8c-.92 0-1.856.356-2.367 1.211l-.894 1.499c-.23.387-.847.387-1.078 0l-.895-1.499c-.488-.819-1.397-1.311-2.366-1.311H8.222c-.98 0-1.722-.742-1.722-1.595V7.095Z",stroke:"currentColor"})))},C_=(0,c.memo)(SvgTailedRectangle);var I_;function x_(){return x_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x_.apply(this,arguments)}const SvgTimeline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",x_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,I_||(I_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 10.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm3.95-.5a2.5 2.5 0 1 0 0 1H15a.5.5 0 0 1 .5.5v2.05a2.5 2.5 0 0 0 0 4.9v2.05A1.5 1.5 0 0 0 17 22h2.05a2.5 2.5 0 1 0 0-1H17a.5.5 0 0 1-.5-.5v-2.05a2.5 2.5 0 0 0 0-4.9V11.5A1.5 1.5 0 0 0 15 10h-2.05ZM20 21.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0ZM17.5 16a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z",fill:"currentColor"})))},A_=(0,c.memo)(SvgTimeline);var k_,O_=n(96921);function P_(){return P_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P_.apply(this,arguments)}const SvgTrashFilledSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",P_({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,k_||(k_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM7.501 4a.5.5 0 0 0-.5.5v.3h2.001v-.3a.5.5 0 0 0-.5-.5h-1Zm-1 1.8H3.5a.5.5 0 0 1 0-1h2.501v-.3a1.5 1.5 0 0 1 1.5-1.5h1.001a1.5 1.5 0 0 1 1.5 1.5v.3h2.502a.5.5 0 0 1 0 1H6.5Zm-1.3 1.301a.5.5 0 1 0-1 0v4.202c0 .94.76 1.7 1.7 1.7h4.202a1.7 1.7 0 0 0 1.7-1.7V7.101a.5.5 0 1 0-1 0v4.202a.7.7 0 0 1-.7.7H5.9a.7.7 0 0 1-.7-.7V7.101Zm2.1.3a.5.5 0 1 0-1 0v3.002a.5.5 0 1 0 1 0V7.402Zm1.901-.5a.5.5 0 0 1 .5.5v3.002a.5.5 0 1 1-1 0V7.402a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},N_=(0,c.memo)(SvgTrashFilledSmall);var R_;function M_(){return M_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M_.apply(this,arguments)}const SvgTurningLine=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",M_({viewBox:"0 0 23 10",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,R_||(R_=c.createElement("path",{d:"M.5 9h21a1 1 0 0 0 1-1V1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},L_=(0,c.memo)(SvgTurningLine);var D_;function B_(){return B_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B_.apply(this,arguments)}const SvgUnion=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",B_({viewBox:"0 0 29 19",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,D_||(D_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.921 0h5.08a.5.5 0 0 1 0 1h-5.08a1.5 1.5 0 0 0-1.139.523l-5.401 6.303-1 1.165 4.159 4.677 2.514 2.829a1.5 1.5 0 0 0 1.121.503H28.5a.5.5 0 0 1 0 1h-5.325a2.5 2.5 0 0 1-1.868-.839l-2.515-2.829-4.067-4.575-4.345 5.069-2.401 2.801a2.5 2.5 0 0 1-1.898.873H1a.5.5 0 1 1 0-1h5.08a1.5 1.5 0 0 0 1.14-.524l2.401-2.801 4.434-5.172-1.48-1.664-5.624-5.876A1.5 1.5 0 0 0 5.867 1H.5a.5.5 0 1 1 0-1h5.367a2.5 2.5 0 0 1 1.806.771l5.632 5.883a.621.621 0 0 1 .012.014l1.394 1.569.91-1.062L21.023.872A2.5 2.5 0 0 1 22.921 0Z",fill:"currentColor"})))},F_=(0,c.memo)(SvgUnion);var H_,U_,j_,z_=n(11923);function G_(){return G_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G_.apply(this,arguments)}const SvgRemoveMask=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",G_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,H_||(H_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 20v5.441a1 1 0 0 0 1 1h11.996c.066 0 .13-.006.192-.018h.03a.5.5 0 0 0 .399-.197.998.998 0 0 0 .38-.785V15a1 1 0 0 0-1-1H20v1h5.996v9.26l-2.175-4.674a1.5 1.5 0 0 0-2.624-.175l-1.598 2.5a.5.5 0 0 1-.758.1l-.242-.22a1.5 1.5 0 0 0-2.287.323l-2.048 3.327H14V20h-1Zm9.914.009a.5.5 0 0 0-.875-.059l-1.598 2.5a1.5 1.5 0 0 1-2.273.3l-.242-.22a.5.5 0 0 0-.762.108l-1.714 2.785h9.984l-2.52-5.414Z",fill:"currentColor"})),U_||(U_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 9H9v8h8V9ZM9 8a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1H9Z",fill:"currentColor"})),j_||(j_=c.createElement("path",{d:"m15 11-2 2m0 0 2 2m-2-2-2-2m2 2-2 2",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},Y_=(0,c.memo)(SvgRemoveMask);var Z_=n(33485);const W_=function(e,t,n){const r="function"==typeof t?t(e):t;if(!r)return{};let a=Object.keys(r);return a=a.filter((e=>r[e]!==ve)),n&&(a=a.filter((e=>""!==r[e]))),0===a.length?{}:Object.fromEntries(a.map((e=>[e,r[e]])))};function V_(e){return e?.padding?.hasHiddenPadding?e.padding:{...e.padding??{},hasHiddenPadding:!0,...["vertical","horizontal"].reduce(((t,n)=>(t[n]=(e?.padding?.[n]||0)+Le[n],t)),{})}}function $_(e){return e?.padding?.hasHiddenPadding?{...e.padding??{},hasHiddenPadding:!1,...["vertical","horizontal"].reduce(((t,n)=>(t[n]=(e?.padding?.[n]||0)-Le[n],t)),{})}:e.padding}function q_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";return e?.padding?.hasHiddenPadding?Le[t]:0}const K_=function(e,t){const n=(0,Hr.getHTMLFormatters)(),{setColor:r}=n,a=sd();return async()=>{const n=await a(e),{color:o,backgroundColor:l}=n;if(l||o){const n=l?{backgroundColor:{color:l},backgroundTextMode:On.BACKGROUND_TEXT_MODE.HIGHLIGHT,padding:V_(e)}:null,a=o?r(e.content,{color:o}):e.content;t({...n,content:a})}}};function X_(e){return e?.type===On.ELEMENT_TYPES.TEXT&&e?.borderRadius?e.borderRadius.locked&&e.borderRadius.topLeft===hf.topLeft:!e?.borderRadius||e.borderRadius===bf}const Q_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];const n=[];return e?.overlay&&n.push(ff),t?.length&&n.push(mf),(e?.opacity<100||!X_(e)||e?.border)&&n.push(gf),n};function J_(){return J_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J_.apply(this,arguments)}const ev=(0,We.default)(
/* translators: %s: Ctrl/Cmd + Z keyboard shortcut */
(0,d.__)("Press %s to undo the last change","web-stories"),(0,fr.prettifyShortcut)("mod+z")),{Bucket:tv,ColorBucket:nv,CircleSpeed:rv,Eraser:av,LetterTPlus:ov,Link:lv,Media:iv,PictureSwap:sv,Captions:cv}=l,MediaPicker=e=>{let{render:t,...n}=e;const{allowedMimeTypes:{image:r,vector:a,video:o},MediaUpload:l}=U(),{selectedElements:i,updateElementsById:s}=Ya((e=>{let{state:{selectedElements:t},actions:{updateElementsById:n}}=e;return{selectedElements:t,updateElementsById:n}})),{resetWithFetch:p,postProcessingResource:m,optimizeVideo:f,optimizeGif:g,canTranscodeResource:h}=Bi((e=>{let{state:{canTranscodeResource:t},actions:{resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}}=e;return{canTranscodeResource:t,resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}})),{isTranscodingEnabled:b}=Ja(),{showSnackbar:E}=(0,kr.useSnackbar)();let y=(0,u.useMemo)((()=>[...r,...a,...o]),[r,a,o]);const _=(0,u.useMemo)((()=>y.map((e=>Pt(e))).flat()),[y]);b&&(y=y.concat(qa));const v=qa.filter((e=>!o.includes(e)));let w=(0,d.__)("No file types are currently supported.","web-stories");_.length&&(w=(0,We.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,xt.default)(_)));const T=(0,u.useCallback)(((e,t)=>{Z_.default.set(e.id,{url:t,type:"cached"}),s({elementIds:[i?.[0]?.id],properties:{type:e.type,resource:e}})}),[i,s]),S=(0,u.useCallback)((e=>{try{b&&h(e)&&(v.includes(e.mimeType)&&f({resource:e}),"image/gif"===e.mimeType&&g({resource:e})),T(e,e.sizes?.medium?.sourceUrl||e.src),m(e)}catch(e){E({message:e.message,dismissable:!0})}}),[b,h,T,m,v,f,g,E]);return c.createElement(l,J_({title:(0,d.__)("Replace media","web-stories"),buttonInsertText:(0,d.__)("Replace media","web-stories"),onSelect:S,onClose:p,type:y,onSelectErrorMessage:w,render:e=>t({onClick:e})},n))},dv=()=>{const{capabilities:{hasUploadMediaAction:e}}=U(),t=(0,u.useContextSelector)(Ba,ja),{backgroundElement:n,selectedElementAnimations:r,selectedElements:a,updateElementsById:o}=Ya((e=>{let{state:{currentPage:t,selectedElementAnimations:n,selectedElements:r},actions:{updateElementsById:a}}=e;return{backgroundElement:t?.elements.find((e=>e.isBackground)),selectedElementAnimations:n,selectedElements:r,updateElementsById:a}})),{undo:l}=Cr((e=>{let{actions:{undo:t}}=e;return{undo:t}})),i=(0,kr.useSnackbar)((e=>{let{showSnackbar:t}=e;return t})),{setHighlights:s}=nm((e=>{let{setHighlights:t}=e;return{setHighlights:t}})),c=(0,u.useRef)(l);c.current=l;const p=a?.[0],m=(0,u.useCallback)((e=>{e.stopPropagation()}),[]),f=(0,u.useCallback)(((e,t,n)=>{const a={};n.includes(ff)&&(a.overlay=null),n.includes(mf)&&o({elementIds:[t],properties:e=>W_(e,{animation:{...r?.[0],delete:!0}},!0)}),n.includes(gf)&&(a.opacity=100,a.border=null,a.borderRadius=null),e===On.ELEMENT_TYPES.TEXT&&(a.borderRadius=hf),o({elementIds:[t],properties:e=>W_(e,a,!0)})}),[r,o]),g=(0,u.useCallback)((e=>{let{elementId:t,resetProperties:n,elementType:r}=e;f(r,t,n),i({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Element properties have been reset","web-stories"),onAction:()=>{c.current(),(0,P.trackEvent)("quick_action",{name:`undo_${pf.RESET_ELEMENT.trackingEventName}`,element:r,isBackground:!0})},actionHelpText:ev})}),[f,i]),h=(0,u.useCallback)((e=>t=>n=>{n.preventDefault(),s({elementId:t||p?.id,highlight:e})}),[s,p]),b=(0,u.useMemo)((()=>{const e=(a?.[0]?.resource?.id?.toString()||"").startsWith("media/");return h(e?df.MEDIA3P:df.MEDIA)}),[h,a]),{handleFocusAnimationPanel:E,handleFocusLinkPanel:y,handleFocusPageBackground:_,handleFocusTextSetsPanel:v,handleFocusCaptionsPanel:w}=(0,u.useMemo)((()=>({handleFocusAnimationPanel:h(df.ANIMATION),handleFocusLinkPanel:h(df.LINK),handleFocusPageBackground:h(df.PAGE_BACKGROUND),handleFocusTextSetsPanel:h(df.TEXT_SET),handleFocusCaptionsPanel:h(df.CAPTIONS)})),[h]),T=Ts(),S=(0,u.useMemo)((()=>({tooltipPlacement:Bd.PLACEMENT.RIGHT,onMouseDown:m})),[m]),C=(0,u.useMemo)((()=>[{Icon:tv,label:pf.CHANGE_BACKGROUND_COLOR.text,onClick:e=>{_(n?.id)(e),(0,P.trackEvent)("quick_action",{name:pf.CHANGE_BACKGROUND_COLOR.trackingEventName,element:"none"})},...S},{Icon:iv,label:pf.INSERT_BACKGROUND_MEDIA.text,onClick:e=>{b()(e),(0,P.trackEvent)("quick_action",{name:pf.INSERT_BACKGROUND_MEDIA.trackingEventName,element:"none"})},separator:"top",...S},{Icon:ov,label:pf.INSERT_TEXT.text,onClick:e=>{v()(e),T("text",Ls),(0,P.trackEvent)("quick_action",{name:pf.INSERT_TEXT.trackingEventName,element:"none"})},...S}]),[S,n,b,_,v,T]),I=(0,u.useMemo)((()=>Q_(p,r)),[p,r]),x=I.length>0,A=(0,u.useMemo)((()=>{const e=[{Icon:rv,label:pf.ADD_ANIMATION.text,onClick:e=>{E()(e),(0,P.trackEvent)("quick_action",{name:pf.ADD_ANIMATION.trackingEventName,element:p?.type})},...S},{Icon:lv,label:pf.ADD_LINK.text,onClick:e=>{y()(e),(0,P.trackEvent)("quick_action",{name:pf.ADD_LINK.trackingEventName,element:p?.type})},...S}],t={Icon:av,label:pf.RESET_ELEMENT.text,onClick:()=>{g({elementId:p?.id,resetProperties:I,elementType:p?.type}),(0,P.trackEvent)("quick_action",{name:pf.RESET_ELEMENT.trackingEventName,element:p?.type})},separator:"top",...S};return x?[...e,t]:e}),[E,p?.id,p?.type,S,y,x,g,I]),k=(0,u.useMemo)((()=>{const n=[];return e&&n.push({Icon:sv,label:pf.REPLACE_MEDIA.text,onClick:()=>{t(La.onReplaceForegroundMedia),(0,P.trackEvent)("quick_action",{name:pf.REPLACE_MEDIA.trackingEventName,element:p?.type})},wrapWithMediaPicker:!0,...S}),[...n,...A]}),[S,A,e,t,p?.type]),O=A,N=K_(p,(e=>o({elementIds:[p?.id],properties:e}))),R=(0,u.useMemo)((()=>[{Icon:nv,label:pf.AUTO_STYLE_TEXT.text,onClick:()=>{N(),(0,P.trackEvent)("quick_action",{name:pf.AUTO_STYLE_TEXT.trackingEventName,element:p?.type})},...S},...A]),[N,A,S,p?.type]),M=(0,u.useMemo)((()=>{const[e,t]=x?[k.slice(0,k.length-1),k.slice(-1)]:[k,[]];return[...e,{Icon:cv,label:pf.ADD_CAPTIONS.text,onClick:e=>{w()(e),(0,P.trackEvent)("quick_action",{name:pf.ADD_CAPTIONS.trackingEventName,element:p?.type})},...S},...t]}),[S,k,w,p?.type,x]),L=(0,u.useMemo)((()=>{const n=[{Icon:rv,label:pf.ADD_ANIMATION.text,onClick:e=>{E()(e),(0,P.trackEvent)("quick_action",{name:pf.ADD_ANIMATION.trackingEventName,element:p?.type,isBackground:!0})},...S}];e&&n.unshift({Icon:sv,label:pf.REPLACE_BACKGROUND_MEDIA.text,onClick:()=>{t(La.onReplaceBackgroundMedia),(0,P.trackEvent)("quick_action",{name:pf.REPLACE_BACKGROUND_MEDIA.trackingEventName,element:p?.type,isBackground:!0})},wrapWithMediaPicker:!0,...S});const r={Icon:av,label:pf.RESET_ELEMENT.text,onClick:()=>{g({elementId:p?.id,resetProperties:I,elementType:On.ELEMENT_TYPES.IMAGE}),(0,P.trackEvent)("quick_action",{name:pf.RESET_ELEMENT.trackingEventName,element:p?.type,isBackground:!0})},separator:"top",...S};return x?[...n,r]:n}),[S,t,g,E,e,I,p,x]);if(a.length>1)return[];const D=Boolean(n&&n?.resource),B=0===a.length,F=a?.[0]?.isBackground;if(B||F&&!D)return C;if(F&&D){return"video"===p.type?[...L]:L}switch(a?.[0]?.type){case On.ELEMENT_TYPES.IMAGE:case On.ELEMENT_TYPES.GIF:return k;case On.ELEMENT_TYPES.SHAPE:return O;case On.ELEMENT_TYPES.TEXT:return R;case On.ELEMENT_TYPES.VIDEO:return M;case On.ELEMENT_TYPES.STICKER:return A;default:return[]}},uv={OUTLINE:em,FLASH:Jp};var pv=n(86954);const mv=52,fv=78,gv=32,hv=36,bv="VIDEO",Ev="IMAGE",yv="TEXT",_v="SHAPE",vv="PAGE",wv="thumbnail-scrim",Tv="thumbnail-show-hover-focus",Sv=(0,d.__)("Loading","web-stories");var Cv=n(37723),Iv=n(22437);function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xv.apply(this,arguments)}const Av="loading-indicator",kv=p.default.span.withConfig({displayName:"loadingBar__AriaOnlyAlert",componentId:"sc-x990cz-0"})(Iv.visuallyHidden),Ov=(0,p.keyframes)(["0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}"]),Pv=p.default.div.withConfig({displayName:"loadingBar__UploadingIndicator",componentId:"sc-x990cz-1"})(["height:4px;background:",";background-size:400% 400%;position:absolute;bottom:0px;border-radius:",";animation:"," 4s ease infinite;&.","{&.appear{width:0;}&.appear-done{width:100%;transition:1s ease-out;transition-property:width;}}"],(e=>{let{theme:t}=e;return t.colors.gradient.loading}),(e=>{let{theme:t}=e;return`0px 0px ${t.borders.radius.small} ${t.borders.radius.small}`}),Ov,Av),LoadingBar=e=>{let{loadingMessage:t,...n}=e;const r=(0,u.useRef)();return c.createElement(c.Fragment,null,t&&c.createElement(kv,{role:"status"},t),c.createElement(Cv.default,{nodeRef:r,in:!0,appear:!0,timeout:0,className:Av},c.createElement(Pv,xv({ref:r},n))))},Nv=p.default.button.withConfig({displayName:"styles__Container",componentId:"sc-jiqsnn-0"})((e=>{let{theme:t,$isError:n,$isOverflow:r}=e;return(0,p.css)(["position:relative;display:flex;align-items:center;justify-content:center;width:","px;height:","px;padding:0;outline:none;border:none;border-radius:",";background-color:",";cursor:pointer;.","{display:none;}&:hover{.","{display:flex;}}"," &:focus,&:focus-within{.","{display:flex;}.","{background-color:",";border:1px solid ",";}}"],mv,fv,t.borders.radius.small,r?t.colors.interactiveBg.secondaryNormal:"transparent",Tv,Tv,n&&(0,p.css)([".","{border:1px solid ",";background-color:",";}&:hover .","{background-color:",";}"],wv,t.colors.border.negativeNormal,t.colors.opacity.black24,wv,t.colors.opacity.black24),Tv,wv,t.colors.opacity.black64,t.colors.border[n?"negativeNormal":"focus"])}));Nv.propTypes={$isError:Ma().bool};const Rv=p.default.div.withConfig({displayName:"styles__Background",componentId:"sc-jiqsnn-1"})((e=>{let{theme:t,$isShape:n,$isPage:r}=e;return(0,p.css)(["width:100%;height:100%;display:flex;border-radius:",";& > img,& > video{width:100%;height:100%;object-fit:cover;border-radius:",";}& > div{display:flex;height:100%;margin:0 auto;align-items:center;justify-content:center;align-self:center;color:",";}"," ",""],t.borders.radius.small,t.borders.radius.small,t.colors.fg.primary,n&&(0,p.css)(["& > div{width:","px;height:","px;& > div{width:100%;height:100%;}}"],hv,hv),r&&(0,p.css)([".pagePreviewOverrides{border-color:none;&::after{content:none;border:none;}}& > div > div{width:100%;}"]))}));Rv.propTypes={$isPage:Ma().bool,$isShape:Ma().bool};const Mv=p.default.div.withConfig({displayName:"styles__NestedIconContainer",componentId:"sc-jiqsnn-2"})((e=>{let{theme:t,$isError:n}=e;return(0,p.css)(["display:flex;position:absolute;top:0;width:100%;height:100%;align-items:center;justify-content:center;z-index:5;& > div{margin:auto;width:","px;}svg{width:100%;height:auto;","}"],gv,n&&(0,p.css)(["color:",";"],t.colors.fg.negative))}));Mv.propTypes={$isError:Ma().bool};const Lv=p.default.div.withConfig({displayName:"styles__Scrim",componentId:"sc-jiqsnn-3"})((e=>{let{theme:t,$showDefaultBackground:n}=e;return(0,p.css)(["position:absolute;box-sizing:border-box;top:0;width:100%;height:100%;border:1px solid transparent;border-radius:",";z-index:2;",";&:hover{background-color:",";}"],t.borders.radius.small,n&&(0,p.css)(["background-color:",";"],t.colors.opacity.black24),t.colors.opacity.black64)}));function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dv.apply(this,arguments)}Lv.propTypes={$showDefaultBackground:Ma().bool};const Bv=[_v,yv],Fv=e=>{let{displayBackground:t,isError:n,onClick:r,type:a,isLoading:o,loadingMessage:l=Sv,children:i,...s}=e;return c.createElement(Nv,Dv({as:r?"button":"div",onClick:r,$isError:n},s),o&&c.createElement(LoadingBar,{loadingMessage:l}),!n&&!o&&i&&c.createElement(Mv,{className:Tv},i),n&&c.createElement(Mv,{$isError:n},c.createElement($h.default,null)),c.createElement(Lv,{$showDefaultBackground:Bv.indexOf(a)>-1,className:wv}),c.createElement(Rv,{$isShape:a===_v,$isPage:a===vv},t))};function Hv(){return Hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hv.apply(this,arguments)}const Uv=e=>{let{overflowCount:t,...n}=e;return c.createElement(Nv,Hv({$isOverflow:!0,as:"div"},n),c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},(0,We.default)(
/* translators: %s: number of thumbnails in overflow */
(0,d.__)("+ %s","web-stories"),t)))},LayerThumbnail=e=>{let{page:t}=e;const{LayerIcon:n}=(0,On.getDefinitionForType)(t?.type),{getProxiedUrl:r}=Zo(),{isDefaultBackground:a}=t,o={element:t,getProxiedUrl:r,currentPageBackgroundColor:Ya((e=>{let{state:t}=e;return!a||t.currentPage?.backgroundColor}))};return"video"===t?.type&&(o.showVideoPreviewAsBackup=!0),c.createElement(n,o)},jv={SINGLE_ISSUE:"single_issue",MULTIPLE_ISSUE:"multiple_issue"},zv={SINGLE_WITH_THUMBNAIL:"single_with_thumbnail",SINGLE:"single",DEFAULT:"single",MULTIPLE_WITH_THUMBNAIL:"multiple_with_thumbnail",MULTIPLE_WITH_THUMBNAIL_WITH_CTA:"multiple_with_thumbnail_with_cta",MULTIPLE_WITH_THUMBNAIL_OVERFLOW:" multiple_with_thumbnail_overflow"},Gv={[zv.SINGLE]:"'title title title title' 'cta cta cta thumbnail' 'footer footer footer footer'",[zv.SINGLE_WITH_THUMBNAIL]:"'title title title thumbnail' 'cta cta cta thumbnail' 'footer footer footer footer'",[zv.MULTIPLE_WITH_THUMBNAIL]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'footer footer footer footer'",[zv.MULTIPLE_WITH_THUMBNAIL_WITH_CTA]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'cta cta cta cta' 'footer footer footer footer'",[zv.MULTIPLE_WITH_THUMBNAIL_WITH_CTA_OVERFLOW]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'cta cta cta cta' 'footer footer footer footer'",[zv.MULTIPLE_WITH_THUMBNAIL_OVERFLOW]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'footer footer footer footer'"},{focusableOutlineCSS:Yv}=pv,Zv=p.default.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-1nhlyv8-0"})(["width:","px;display:flex;border-radius:4px;background:",";margin:8px 0;"],272,(e=>{let{theme:t}=e;return t.colors.bg.secondary})),Wv=p.default.div.withConfig({displayName:"styles__Container",componentId:"sc-1nhlyv8-1"})(["width:240px;display:grid;margin:16px;grid-gap:8px;grid-template-columns:52px 52px 52px 52px;",""],(e=>{let{gridVariant:t}=e;return(0,p.css)(["grid-template-areas:",";"],Gv[t])}));Wv.propTypes={gridVariant:Ma().oneOf(Object.values(zv))};const Vv=p.default.div.withConfig({displayName:"styles__Title",componentId:"sc-1nhlyv8-2"})(["grid-area:title;&:is(button){display:flex;outline:none;margin:0;padding:0;background-color:transparent;border:none;text-align:left;cursor:pointer;border-radius:",";",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return Yv(t.colors.border.focus,t.colors.bg.secondary)})),$v=p.default.div.withConfig({displayName:"styles__Cta",componentId:"sc-1nhlyv8-3"})(["grid-area:cta;margin:0;"]),qv=((0,p.default)($e.Text).attrs({forwardedAs:"label",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"styles__CheckboxCtaLabel",componentId:"sc-1nhlyv8-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.linkNormal})),p.default.div.withConfig({displayName:"styles__CheckboxCtaContainer",componentId:"sc-1nhlyv8-5"})(["display:flex;align-items:center;margin:14px 0 6px;label{margin:0 8px;}"]),(0,p.default)(Uv).withConfig({displayName:"styles__StyledOverflowThumbnail",componentId:"sc-1nhlyv8-6"})(["width:52px;cursor:pointer;"])),Kv=p.default.div.withConfig({displayName:"styles__Footer",componentId:"sc-1nhlyv8-7"})(["grid-area:footer;padding-top:8px;border-top:1px solid ",";& > *{color:",";}"],(e=>{let{theme:t}=e;return t.colors.divider.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Xv=p.default.div.withConfig({displayName:"styles__CardListWrapper",componentId:"sc-1nhlyv8-8"})(["margin-left:16px;li{color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Qv=(0,p.default)(ab).withConfig({displayName:"styles__StyledVideoOptimizationIcon",componentId:"sc-1nhlyv8-9"})(["rect{color:",";}path{color:",";}"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{theme:t}=e;return t.colors.fg.primary}));function Jv(e){return""===(e.featuredMedia?.url?.trim()||"")}function ew(e){let t=0;return e.elements.forEach((e=>{"text"===e.type&&(t+=(0,Or.stripHTML)(e.content).length)})),t}function tw(e,t){return(e||[]).filter(t)}function nw(e,t){return(e||[]).flatMap((e=>(e?.elements||[]).map((t=>({...t,pageId:e.id}))))).filter(t)}let rw;function aw(){return aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aw.apply(this,arguments)}const ow=p.default.button.withConfig({displayName:"pagepreview__Page",componentId:"sc-f0c590-0"})(["display:block;position:relative;cursor:",";padding:0;border:0;background-color:transparent;height:","px;width:","px;flex:none;outline:0;&::after{content:'';display:block;position:absolute;left:-4px;right:-4px;top:-4px;bottom:-4px;pointer-events:none;border-style:solid;border-width:1px;border-radius:8px;border-color:",";}",""],(e=>{let{isInteractive:t}=e;return t?"pointer":"default"}),(e=>{let{height:t}=e;return t}),(e=>{let{width:t}=e;return t}),(e=>{let{isActive:t,isInteractive:n,theme:r}=e;return n&&t?r.colors.border.defaultActive:"transparent"}),(e=>{let{isInteractive:t,isActive:n,theme:r}=e;return t&&(0,p.css)(["&:focus::after{border-color:",";}"],(0,Ve.rgba)(r.colors.border.selection,n?1:.7))})),lw=p.default.div.withConfig({displayName:"pagepreview__PreviewWrapper",componentId:"sc-f0c590-1"})(["height:100%;position:relative;overflow:hidden;background-color:white;border-radius:4px;",""],(e=>{let{background:t}=e;return(0,Yr.default)(t)})),iw=p.default.img.withConfig({displayName:"pagepreview__Image",componentId:"sc-f0c590-2"})(["position:absolute;width:100%;left:0;top:50%;transform:translateY(-50%);"]);const sw=function PagePreview(e){let{page:t,label:n,...r}=e;const{backgroundColor:a}=t,{width:o,height:l,isActive:i}=r,{pageCanvas:s,generateDeferredPageCanvas:d}=cd((e=>{let{state:n,actions:r}=e;return{pageCanvas:n.pageCanvasMap[t.id],generateDeferredPageCanvas:r.generateDeferredPageCanvas}})),[p,m]=(0,u.useState)(),f=(0,u.useCallback)((e=>e&&m(e)),[]);(0,u.useEffect)((()=>{i||s||d([t.id,t])}),[t,s,i,d]);const g=(0,u.useMemo)((()=>s?s.toDataURL("image/png"):null),[s]);return Bm({node:p,eventData:Te.PAGE_PREVIEW_CLICK}),c.createElement(is,{pageSize:{width:o,height:l}},c.createElement(I.TransformProvider,null,c.createElement(ow,aw({ref:f,"aria-label":n},r),c.createElement(lw,{background:a},g?c.createElement(iw,{src:g,alt:n,decoding:"async"}):t.elements.map((e=>c.createElement(Hc,{key:e.id,previewMode:!0,element:e})))))))},ThumbnailPagePreview=e=>{let{page:t}=e;return c.createElement(sw,{page:t,width:mv,height:fv,as:"div",help:"checklist",isActive:!0,className:"pagePreviewOverrides"})};function cw(){return cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cw.apply(this,arguments)}const dw=p.default.div.withConfig({displayName:"thumbnailWrapper__Wrapper",componentId:"sc-3oy0ss-0"})(["grid-area:thumbnail;transition:height ease-in-out 300ms;",""],(e=>{let{$isMultiple:t}=e;return t&&(0,p.css)(["display:grid;grid-gap:8px;grid-template-columns:repeat(4,52px);grid-template-rows:auto;"])})),uw=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.TERTIARY}).withConfig({displayName:"thumbnailWrapper__StyledButton",componentId:"sc-3oy0ss-1"})(["grid-column:span 4;justify-content:center;height:32px;width:100%;margin:4px 0;",";"],(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.tertiary)})),pw=p.default.div.withConfig({displayName:"thumbnailWrapper__IconContainer",componentId:"sc-3oy0ss-2"})(["height:18px;width:20px;svg{transform:",";transition:transform ease-in-out 300ms;}"],(e=>{let{$isExpanded:t}=e;return t&&"rotate(-180deg)"})),mw=e=>{let{children:t,isExpanded:n,...r}=e;return c.createElement(uw,cw({"aria-pressed":n},r),t||n?(0,d.__)("Collapse","web-stories"):(0,d.__)("Expand","web-stories"),c.createElement(pw,{$isExpanded:n},c.createElement(ah.default,null)))},fw=e=>{let{children:t,...n}=e;const[r,a]=(0,u.useState)(!1),o=Array.isArray(t)?t.length:1,l=o>0&&o>4,i=r||o<=1?t:(s=t).length>4?s.slice(0,3):s;var s;const d=()=>a((e=>!e));return c.createElement(dw,cw({$isMultiple:o>1},n),i,l&&c.createElement(c.Fragment,null,!r&&c.createElement(qv,{overflowCount:o-3,onClick:d}),c.createElement(mw,{isExpanded:r,onClick:d})))};function gw(){return gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gw.apply(this,arguments)}const hw=e=>{let{cardType:t=jv.SINGLE_ISSUE,className:n,title:r,titleProps:a,footer:o,cta:l,thumbnails:i}=e,s=0;i&&(s=Array.isArray(i)?i.length:1);const d=(e=>{let{cardType:t,thumbnailCount:n,hasCta:r}=e;return t===jv.SINGLE_ISSUE?n>0?zv.SINGLE_WITH_THUMBNAIL:zv.SINGLE:t===jv.MULTIPLE_ISSUE&&n?r?n<=4?zv.MULTIPLE_WITH_THUMBNAIL_WITH_CTA:zv.MULTIPLE_WITH_THUMBNAIL_WITH_CTA_OVERFLOW:n<=4?zv.MULTIPLE_WITH_THUMBNAIL:zv.MULTIPLE_WITH_THUMBNAIL_OVERFLOW:zv.DEFAULT})({cardType:t,thumbnailCount:s,hasCta:Boolean(l)});return c.createElement(Zv,{className:n},c.createElement(Wv,{gridVariant:d},c.createElement(Vv,gw({as:a?.onClick?"button":"div"},a),c.createElement(Qu.Headline,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL,as:"h2"},r)),c.createElement(fw,null,i),c.createElement($v,null,l),c.createElement(Kv,null,o)))};function bw(){return bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bw.apply(this,arguments)}const DefaultCtaButton=e=>{let{children:t,...n}=e;return c.createElement(m.Button,bw({size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.SECONDARY},n),t)};function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ew.apply(this,arguments)}const DefaultFooterText=e=>{let{children:t,...n}=e;return c.createElement($e.Text,Ew({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},n),t)};const yw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=cs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),r=(0,u.useMemo)((()=>n.height>0&&nw(t,(e=>function(e,t){return!(!["text","image","shape","gif","video"].includes(e.type)||!e.link?.url?.length)&&e.width*e.height/(t.width*t.height)*100>80}(e,n)))),[t,n]),a=nm((e=>{let{setHighlights:t}=e;return t})),o=(0,u.useCallback)(((e,t)=>a({elementId:e,pageId:t})),[a]),l=r.length>0;Du("ElementLinkTappableRegionTooBig",l);const{title:i,footer:s}=hu.linkTappableRegionTooBig,p=(r||[]).map((e=>c.createElement(Fv,{key:e.id,onClick:()=>o(e.id,e.pageId),type:yv,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending link","web-stories")})));return l&&e&&c.createElement(hw,{title:i,cardType:r.length>1?jv.MULTIPLE_ISSUE:jv.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,s),thumbnails:p})};function _w(e){return!(!["text","image","shape","gif","video"].includes(e.type)||!e.link?.url?.length)&&(e.width<48||e.height<48)}const vw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>nw(t,_w)),[t]),r=nm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),o=n.map((e=>c.createElement(Fv,{key:e.id,onClick:()=>a(e.id,e.pageId),type:yv,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending link","web-stories")}))),l=n.length>0;Du("ElementLinkTappableRegionTooSmall",l);const{title:i,footer:s}=hu.linkTappableRegionTooSmall;return l&&e&&c.createElement(hw,{title:i,cardType:n.length>1?jv.MULTIPLE_ISSUE:jv.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,s),thumbnails:o})};const ww=()=>{const e=jp(),{updatePageProperties:t,pageId:n,pageAnimations:r}=Ya((e=>{let{actions:{updatePageProperties:t},state:{pages:n}}=e;const r=n?.at(0);return{updatePageProperties:t,pageId:r?.id,pageAnimations:r?.animations}})),a=(0,u.useCallback)((()=>{t({pageId:n,properties:{animations:[]}})}),[t,n]),o=Boolean(r?.length);const l=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_checklist_cover_animations")}),[]),{title:i,footer:s}=bu.firstPageAnimation;return Du("FirstPageAnimation",o),o&&e?c.createElement(hw,{title:i,cta:c.createElement(DefaultCtaButton,{"aria-label":(0,d.__)("Remove Animations","web-stories"),onClick:a},(0,d.__)("Remove Animations","web-stories")),footer:c.createElement(c.Fragment,null,c.createElement(DefaultFooterText,null,s),c.createElement(DefaultFooterText,{as:"span"},c.createElement(lu.Link,{target:"_blank",rel:"noreferrer",onClick:l,href:"https://wp.stories.google/docs/how-to/animations/",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Learn more","web-stories"))))}):null};function Tw(e){return["gif","image"].includes(e.type)&&!e.alt?.length&&!e.resource?.alt?.length}const Sw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>nw(t,Tw)),[t]),r=nm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:df.ASSISTIVE_TEXT})),[r]),{footer:o,title:l}=hu.imagesMissingAltText,i=n.length>0;Du("ImageElementMissingAlt",i);const s=n.map((e=>c.createElement(Fv,{key:e.id,onClick:()=>a(e.id,e.pageId),type:Ev,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories")})));return i&&e&&c.createElement(hw,{title:l,cardType:n.length>1?jv.MULTIPLE_ISSUE:jv.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};var Cw=n(3605);const Iw=p.default.ul.withConfig({displayName:"list__List",componentId:"sc-15nukup-0"})((e=>{let{size:t=qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,theme:n}=e;return(0,p.css)(["list-style-type:disc;list-style-position:outside;margin:0;padding:0;li{",";",";padding:0;margin:0;}"],Cw.defaultTypographyStyle,ep.expandPresetStyles({preset:n.typography.presets.paragraph[t],theme:n}))}));function xw(e){if(!["image","gif"].includes(e.type))return!1;const t=(e.scale||100)/100;return e.resource?.height<e.height*t*2||e.resource?.width<e.width*t*2}Iw.propTypes={size:Ma().oneOf(qe.THEME_CONSTANTS.TYPOGRAPHY.TEXT_SIZES)};const Aw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>nw(t,xw)),[t]),r=nm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e})),[r]),{footer:o,title:l}=bu.imageResolutionTooLow,i=n.length>0;Du("ImageElementResolution",i);const s=n.map((e=>c.createElement(Fv,{key:e.id,onClick:()=>a(e.id,e.pageId),type:Ev,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending image","web-stories")})));return i&&e&&c.createElement(hw,{title:l,cardType:n.length>1?jv.MULTIPLE_ISSUE:jv.SINGLE_ISSUE,footer:c.createElement(Xv,null,c.createElement(Iw,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o)),thumbnails:s})};var kw=n(7868),Ow=n(4251);function Pw(e,t){return e>=.3333333333333333*t}function Nw(e,t,n){const{pageSize:r}=n,a=(0,Vr.getBox)(e,r?.width,r?.height),o=(0,js.default)([a]),l=o.width*o.height,i=[...t].map(((e,t)=>{const a=(0,Vr.getBox)(e,r?.width,r?.height),l=(0,js.default)([a]),i=function(e,t){const n=Math.min(e.endX,t.endX)-Math.max(e.startX,t.startX),r=Math.min(e.endY,t.endY)-Math.max(e.startY,t.startY);return n>=0&&r>=0?n*r:0}(o,l);return{element:e.isBackground||e.isDefaultBackground?{...e,backgroundColor:n?.backgroundColor}:e,area:i,index:t}})).reverse();let s=l;const c=[];for(const e of i){if(!Pw(s,l))break;Pw(e.area,l)&&c.push(e.element),s-=e.area}return c}function Rw(e){let{background:t,text:n,page:r}=e;const{pageSize:a}=r,o=(a?.width/ee.FULLBLEED_RATIO-a?.width/ee.PAGE_RATIO)/2,l=(0,Vr.getBox)(n,a?.width,a?.height),i=(0,js.default)([l]),{resource:s,scale:c,focalX:d,focalY:u}=t,p=(0,Vr.getBox)(t,a?.width,a?.height),{width:m,height:f}=p,g=(0,kw.default)(s,m,f,c,d,u);return async function(e){let{bgImage:t,bgBox:n,overlapBox:r}=e;function a(e){return new Promise(((a,o)=>{try{const o=document.createElement("canvas");o.width=t.width,o.height=t.height;const l=o.getContext("2d");if(t.rotationAngle){const e=t.offsetX+n.width/2,r=t.offsetY+n.height/2;l.translate(e,r),l.rotate(t.rotationAngle*Mw),l.translate(-e,-r)}let i=0,s=0;const{flip:c}=t;(c.vertical||c.horizontal)&&(i=c.horizontal?-1*t.width:0,s=c.vertical?-1*t.height:0,l.scale(c.horizontal?-1:1,c.vertical?-1:1)),l.drawImage(e,i,s,t.width,t.height);a(l.getImageData(r.x,r.y,r.width,r.height))}catch(e){o(e)}}))}const o=await(0,K.default)({src:t.src,width:t.width,height:t.height}),l=await a(o),i=document.createElement("canvas");i.width=r.width,i.height=r.height;i.getContext("2d").putImageData(l,0,0);const s=await Yo(i.toDataURL(),i.width,i.height),{color:{r:c,g:d,b:u}}=(0,Ow.default)(s);return{r:c,g:d,b:u}}({bgImage:{offsetX:g.offsetX,offsetY:g.offsetY,src:t.resource.src,width:g.width,height:g.height,rotationAngle:t.isBackground?void 0:t.rotationAngle,flip:t.flip},bgBox:p,overlapBox:{x:t.isBackground?g.offsetX+Math.abs(i.startX):g.offsetX+Math.abs(i.startX)-p.x,y:t.isBackground?g.offsetY+Math.abs(i.startY+o):g.offsetY+Math.abs(i.startY+o)-(p.y+o),width:i.width,height:i.height}}).catch((()=>{}))}const Mw=Math.PI/180;function Lw(e){const t=function(e){return rw||(rw=document.createElement("div")),rw.innerHTML=e,Array.prototype.slice.call(rw.getElementsByTagName("span"))}(e.content),n=t.map((e=>e.style?.color)).filter(Boolean),r=0===n.length&&0!==t.length,a=0!==e.content.length&&0===t.length;return(r||a)&&n.push("rgb(0, 0, 0)"),n}function Dw(e){let{background:t}=e;return t?.backgroundColor?.color}function Bw(e){switch(e.type){case"image":return Rw;case"shape":return Dw;default:return()=>{}}}async function Fw(e,t){const n=[];(e||[]).forEach((e=>{const r=async function(e){const t=[];e.elements.forEach(((n,r)=>{if("text"===n.type&&"NONE"===n.backgroundTextMode){const a=Lw(n),o=e.elements.slice(0,r),l=Nw(n,o,e);for(const r of l){const o=Bw(r)({background:r,text:n,page:e}),l=e=>e&&{backgroundColor:e,textStyleColors:a,fontSize:n.fontSize,id:n.id,isBackgroundElement:r.isBackground},i=o instanceof Promise?o.then(l):l(o);t.push(i)}}}));const n=await Promise.all(t);return n.map((e=>function(){let{backgroundColor:e,textStyleColors:t,fontSize:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!t||!e)&&t.some((t=>!!t&&!Xc(Kc(t),qc(e),n).WCAG_AA))}(e)&&{id:e.id,isBackground:e.isBackgroundElement})).filter((e=>{let{id:t}=e;return t}))}({...e,pageSize:t});r instanceof Promise?n.push(r.then((t=>({result:t,page:e})))):n.push(r)}));return(await Promise.all(n)).filter((e=>e.result.some((e=>{let{id:t}=e;return t})))).map((e=>e))}const Hw=()=>{const e=jp(),[t,n]=(0,u.useState)([]),r=Ya((e=>{let{state:t}=e;return t?.pages})),a=cs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}}));(0,u.useEffect)((()=>{let e=!1;return Fw(r,a).then((t=>{if(e)return;const r=t.map((e=>{let{page:t}=e;return t}));n(r)})).catch((()=>{})),()=>{e=!0}}),[r,a]);const o=nm((e=>{let{setHighlights:t}=e;return t})),l=(0,u.useCallback)((e=>o({pageId:e})),[o]),i=t.length>0;Du("PageBackgroundTextLowContrast",i);const{title:s,footer:p}=hu.lowContrast;return i&&e?c.createElement(hw,{title:s,cardType:t.length>1?jv.MULTIPLE_ISSUE:jv.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,p),thumbnails:t.map((e=>c.createElement(Fv,{key:e.id,onClick:()=>l(e.id),type:vv,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})))}):null};function Uw(e){return ew(e)<100}const jw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>tw(t,Uw)),[t]),r=nm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>r({pageId:e})),[r]),{footer:o,title:l}=bu.tooLittlePageText,i=n.length>0;Du("PageTooLittleText",i);const s=n.map((e=>c.createElement(Fv,{key:e.id,onClick:()=>a(e.id),type:vv,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return i&&e?c.createElement(hw,{title:l,cardType:n.length>1?jv.MULTIPLE_ISSUE:jv.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s}):null};function zw(e){return e.elements.filter((e=>Boolean(e.link?.url?.length))).length>3}const Gw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>tw(t,zw)),[t]),r=nm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>r({pageId:e})),[r]),{footer:o,title:l}=bu.tooManyLinksOnPage,i=n.length>0;Du("PageTooManyLinks",i);const s=n.map((e=>c.createElement(Fv,{key:e.id,onClick:()=>a(e.id),type:vv,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return i&&e&&c.createElement(hw,{title:l,cardType:n.length>1?jv.MULTIPLE_ISSUE:jv.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};function Yw(e){return ew(e)>200}const Zw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>tw(t,Yw)),[t]),r=nm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>{let{pageId:t,elements:n}=e;return r({pageId:t,elements:n})}),[r]),{footer:o,title:l}=bu.tooMuchPageText,i=n.length>0;Du("PageTooMuchText",i);const s=n.map((e=>c.createElement(Fv,{key:e.id,onClick:()=>a({pageId:e.id,elements:e.elements.filter((e=>{let{type:t}=e;return"text"===t}))}),type:vv,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return i&&e&&c.createElement(hw,{title:l,cardType:n.length>1?jv.MULTIPLE_ISSUE:jv.SINGLE_ISSUE,footer:c.createElement(Xv,null,c.createElement(Iw,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o)),thumbnails:s})};const Ww=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.story?.publisherLogo})),n=nm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:df.PUBLISHER_LOGO})),[n]),a=function(e){return!e?.id}(t);Du("PublisherLogoMissing",a);const{footer:o,title:l}=Eu.noPublisherLogo;return a&&e&&c.createElement(hw,{title:l,titleProps:{onClick:r},footer:c.createElement(Xv,null,c.createElement(Iw,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))})};const Vw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.story?.publisherLogo})),n=nm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:df.PUBLISHER_LOGO})),[n]),a=function(e){return Boolean(e?.id)&&(e?.height<uu||e?.width<uu)}(t);Du("PublisherLogoSize",a);const{footer:o,title:l}=Eu.logoTooSmall;return a&&e&&c.createElement(hw,{title:l,titleProps:{onClick:r},footer:c.createElement(Xv,null,c.createElement(Iw,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))})};const $w=()=>{const e=(0,u.useRef)(),{isSaving:t,link:n,status:r}=Ya((e=>{let{state:t}=e;return{isSaving:t.meta.isSaving,link:t.story.link,status:t.story.status}})),[a,o]=(0,u.useState)(!1);(0,u.useEffect)((()=>{let a=!0;return t||async function(e){let{link:t,status:n}=e;if(!t||!["publish","future"].includes(n))return!1;try{const e=await fetch(t),n=await e.text();await window.amp.validator.init();const r=window.amp.validator.validateString(n),{status:a,errors:o}=r;return"FAIL"===a&&o.filter((e=>{let{severity:t}=e;return"ERROR"===t})).filter((e=>{let{code:t,params:n}=e;return!("MISSING_URL"===t&&n?.[0].startsWith("poster")||"MISSING_URL"===t&&n?.[0].startsWith("publisher-logo")||"INVALID_URL_PROTOCOL"===t&&n?.[0].startsWith("src"))})).length>0}catch{return!1}}({link:n,status:r}).then((t=>{a&&(o(t),t&&!e?.current&&(e.current=!0))})),()=>{a=!1}}),[n,r,t]),(0,u.useEffect)((()=>{a&&e?.current&&(0,P.trackEvent)("amp_validation_errors_found")}),[a]),Du("StoryHasAmpErrors",a);const{footer:l,title:i}=Eu.ampValidation;return a&&c.createElement(hw,{title:i,footer:c.createElement(DefaultFooterText,null,l)})};const qw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.story?.excerpt})),n=nm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:df.EXCERPT})),[n]),{title:a,footer:o}=Eu.storyMissingDescription,l=function(e){return!e?.length}(t);return Du("StoryMissingExcerpt",l),l&&e?c.createElement(hw,{title:a,titleProps:{onClick:r},footer:c.createElement(DefaultFooterText,null,o)}):null};const Kw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.story?.title})),n=nm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:df.STORY_TITLE})),[n]),a=function(e){return"string"!=typeof e||""===e?.trim()}(t);Du("StoryMissingTitle",a);const{footer:o,title:l}=Eu.storyMissingTitle;return a&&e?c.createElement(hw,{title:l,titleProps:{onClick:r},footer:c.createElement(Xv,null,c.createElement(Iw,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))}):null};const Xw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages?.length})),{hasTooFewPages:n,hasTooManyPages:r}=(0,u.useMemo)((()=>function(e){return{hasTooFewPages:e<4,hasTooManyPages:e>30}}(t)),[t]),{storyTooShort:a,storyTooLong:o}=bu,l=n&&a||r&&o||{},i=n||r;return Du("StoryPagesCount",i),i&&e&&c.createElement(hw,{title:l.title,footer:c.createElement(DefaultFooterText,null,l.title)})};function StoryPosterAttached(){const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.story?.featuredMedia})),n=nm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:df.POSTER})),[n]),a=(0,u.useMemo)((()=>function(e){return"string"!=typeof e?.url||Jv({featuredMedia:e})}(t)),[t]);Du("StoryPosterAttached",a);const{title:o,footer:l}=Eu.storyMissingPoster;return a&&e?c.createElement(hw,{title:o,titleProps:{onClick:r},footer:c.createElement(Xv,null,c.createElement(Iw,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},l))}):null}const Qw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.story?.featuredMedia})),n=nm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:df.POSTER})),[n]),{footer:a,title:o}=Eu.storyPosterSize,l=(0,u.useMemo)((()=>function(e){return!Jv({featuredMedia:e})&&(e?.height<du||e?.width<cu||!(Math.abs(e.width/e.height-3/4)<=.001))}(t)),[t]);return Du("StoryPosterSize",l),l&&e&&c.createElement(hw,{title:o,titleProps:{onClick:r},footer:c.createElement(Xv,null,c.createElement(Iw,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},a))})};const Jw=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.story?.title})),n=nm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:df.STORY_TITLE})),[n]),a=function(e){return e?.length>iu}(t);Du("StoryTitleLength",a);const{title:o,footer:l}=Eu.storyTitleTooLong;return a&&e&&c.createElement(hw,{title:o,footer:c.createElement(DefaultFooterText,null,l),titleProps:{onClick:r}})};function eT(e){return"text"===e.type&&e.fontSize&&e.fontSize<12}const tT=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>nw(t,eT)),[t]),r=nm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),{footer:o,title:l}=hu.fontSizeTooSmall,i=n.length>0;Du("TextElementFontSizeTooSmall",i);const s=n.map((e=>c.createElement(Fv,{key:e.id,onClick:()=>a(e.id,e.pageId),type:yv,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending text element","web-stories")})));return i&&e&&c.createElement(hw,{title:l,cardType:n.length>1?jv.MULTIPLE_ISSUE:jv.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};function nT(){return nT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nT.apply(this,arguments)}const rT=function(e){let{elements:t,footer:n,onThumbnailClick:r,...a}=e;return c.createElement(hw,nT({},a,{cardType:t.length>1?jv.MULTIPLE_ISSUE:jv.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,n),thumbnails:t.map((e=>c.createElement(Fv,{key:e.id,onClick:()=>r(e.id,e.pageId),type:bv,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories")})))}))};function aT(e){return"video"===e.type&&!e?.resource?.isMuted&&!e.tracks?.length}const oT=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>nw(t,aT)),[t]),r=nm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:df.CAPTIONS})),[r]),{footer:o,title:l}=hu.videoMissingCaptions,i=n.length>0;return Du("VideoElementMissingCaptions",i),i&&e&&c.createElement(rT,{title:l,elements:n,footer:o,onThumbnailClick:a})};function lT(e){return"video"===e.type&&!e.alt?.length&&!e.resource?.alt?.length}const iT=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>nw(t,lT)),[t]),r=nm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:df.ASSISTIVE_TEXT})),[r]),{footer:o,title:l}=hu.videoMissingTitle,i=n.length>0;return Du("VideoElementMissingDescription",i),i&&e&&c.createElement(rT,{title:l,elements:n,footer:o,onThumbnailClick:a})};function sT(e){return"video"===e.type&&!e.resource?.poster&&!e.poster}const cT=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>nw(t,sT)),[t]),r=nm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:df.VIDEO_A11Y_POSTER})),[r]),{footer:o,title:l}=Eu.videoMissingPoster,i=n.length>0;return Du("VideoElementMissingPoster",i),i&&e&&c.createElement(rT,{title:l,elements:n,footer:o,onThumbnailClick:a})};function dT(e){if("video"!==e.type)return!1;return e.resource?.height<=480&&e.resource?.width<=852}const uT=()=>{const e=jp(),t=Ya((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>nw(t,dT)),[t]),r=nm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),{footer:o,title:l}=bu.videoResolutionTooLow,i=n.length>0;return Du("VideoElementResolution",i),i&&e&&c.createElement(rT,{title:l,elements:n,footer:o,onThumbnailClick:a})},pT=(0,p.default)(m.Button).withConfig({displayName:"videoOptimization__OptimizeButton",componentId:"sc-1dz2s9g-0"})(["margin-top:4px;"]);function mT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{resource:t}=e;if(!t)return!1;const{isOptimized:n,height:r=0,width:a=0}=t;if("video"!==e.type||n)return!1;const o=r*a,l=o>_e*ye;return l}const fT={},gT="cancelled",hT="uploaded",bT="uploading";function ET(e,t){switch(t.type){case gT:return{...e,[t.element.resource.id]:gT};case hT:return{...e,[t.element.resource.id]:hT};case bT:return{...e,[t.element.resource.id]:bT};default:throw new Error}}const BulkVideoOptimization=()=>{const e=jp(),[t,n]=(0,u.useReducer)(ET,fT),r=Ya((e=>{let{state:t}=e;return t?.pages})),{optimizeVideo:a,isNewResourceTranscoding:o,isCurrentResourceTranscoding:l,canTranscodeResource:i}=Bi((e=>{let{actions:{optimizeVideo:t},state:{isNewResourceTranscoding:n,canTranscodeResource:r,isCurrentResourceTranscoding:a}}=e;return{optimizeVideo:t,isNewResourceTranscoding:n,canTranscodeResource:r,isCurrentResourceTranscoding:a}})),s=(0,u.useMemo)((()=>nw(r,mT)),[r]).filter(((e,t,n)=>n.findIndex((t=>t.resource.id===e.resource.id))===t)),p=nm((e=>{let{setHighlights:t}=e;return t})),m=(0,u.useCallback)((async e=>{if(i(e.resource)&&t[e.resource.id]!==bT){n({type:bT,element:e});try{await a({resource:e.resource})}catch(t){return void n({type:gT,element:e})}n({type:hT,element:e})}}),[i,a,t]),g=(0,u.useCallback)((()=>{const e=s.filter((e=>{let{resource:t}=e;return!o(t?.id)&&!l(t?.id)}));return new Promise((t=>{e.map((e=>async()=>{await m(e)})).reduce(((e,t)=>e.then(t)),Promise.resolve()).then(t)}))}),[o,l,m,s]),h=(0,u.useCallback)((async()=>{await g()}),[g]),b=(0,u.useCallback)((e=>async()=>{p({pageId:e.pageId,elementId:e.id}),await m(e)}),[m,p]),{footer:E,title:y}=Eu.videoNotOptimized,_=(0,u.useMemo)((()=>Object.values(t).filter((e=>e===bT))),[t]),v=(0,u.useMemo)((()=>_.length>0||s.some((e=>o(e.resource.id)||l(e.resource.id)))),[_,s,o,l]),w=s.length>0;Du("VideoOptimization",w);let T=1===s.length?(0,d.__)("Optimize video","web-stories"):(0,d.__)("Optimize all videos","web-stories");if(v){const e=_.length+s.filter((e=>o(e.resource.id)||l(e.resource.id))).length;T=(0,We.default)(
/* translators: 1: number of videos currently transcoding. 2: total number of videos in list. */
(0,d._n)("Optimizing %1$d of %2$d","Optimizing %1$d of %2$d",e,"web-stories"),e,s.length)}return w&&e&&c.createElement(hw,{cta:c.createElement(pT,{type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:h,disabled:v},T),title:y,cardType:s.length>1?jv.MULTIPLE_ISSUE:jv.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,E),thumbnails:s.map((e=>c.createElement(Fv,{key:e.resource.id,onClick:b(e),isLoading:o(e.resource.id)||l(e.resource.id),type:bv,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories"),isError:t[e.resource.id]===gT},c.createElement(Tooltip,{title:t[e.resource.id]===bT||o(e.resource.id)||l(e.resource.id)?(0,d.__)("Video optimization in progress","web-stories"):(0,d.__)("Optimize","web-stories")},c.createElement(Qv,null)))))})},yT=()=>{const{isTranscodingEnabled:e}=Ja();return e?c.createElement(BulkVideoOptimization,null):null},_T=e=>{let{checkpoint:t,...n}=e;return t===vu?c.createElement($h.default,n):null},vT="excerpt",wT="title",TT="44px";function ST(){return ST=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ST.apply(this,arguments)}const CT=(0,p.default)(m.Button).withConfig({displayName:"buttonWithChecklistWarning__Button",componentId:"sc-jm08jq-0"})(["padding:4px 6px;height:32px;svg{width:24px;height:auto;}"]),IT=(0,u.forwardRef)((function InnerButton(e,t){let{text:n,checkpoint:r,hasHighPriorityIssues:a=!1,onClick:o,...l}=e;return c.createElement(CT,ST({ref:t,variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:e=>{e.currentTarget.blur(),o?.(e)}},l),n,a&&c.createElement(_T,{checkpoint:r}))})),xT=(0,u.forwardRef)((function ButtonWithChecklistWarning(e,t){let{disabled:n,hasFutureDate:r,...a}=e;const o=Ic(),{isSaving:l,canPublish:i,status:s}=Ya((e=>{let{state:t}=e;return{isSaving:t.meta?.isSaving,status:t.story.status,canPublish:Boolean(t?.capabilities?.publish)}})),{checkpoint:p,hasHighPriorityIssues:m}=Nu((e=>{let{state:{checkpoint:t,hasHighPriorityIssues:n}}=e;return{checkpoint:t,hasHighPriorityIssues:n}})),f={[vu]:m?(0,d.__)("Make updates before publishing to improve discoverability and performance on search engines","web-stories"):"",[_u]:(0,d.__)("Review checklist to improve performance before publishing","web-stories"),[yu]:""},g=(0,d.__)("Saving is disabled due to media currently being uploaded.","web-stories"),h=(0,d.__)("Submit your work for review, and an Editor will be able to approve it for you.","web-stories");let b=o?g:f[p];i||(b=h);const E=(0,u.useMemo)((()=>r&&"private"!==s?(0,d.__)("Schedule","web-stories"):(0,d.__)("Publish","web-stories")),[r,s]),y=i?E:(0,d.__)("Submit for review","web-stories");return c.createElement(Tooltip,{title:b,popupZIndexOverride:10,hasTail:!0,placement:Bd.PLACEMENT.BOTTOM_END},c.createElement(IT,ST({ref:t,text:y,disabled:n||l||o,checkpoint:p,hasHighPriorityIssues:m},a)))})),AT=p.default.header.withConfig({displayName:"header___Header",componentId:"sc-yxsju1-0"})(["width:100%;height:",";display:flex;align-items:center;margin-bottom:",";background-color:",";border-top-left-radius:",";border-top-right-radius:",";"],TT,"1px",(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.borders.radius.medium})),kT=(0,p.default)(m.Button).withConfig({displayName:"header__CloseButton",componentId:"sc-yxsju1-1"})(["margin:6px auto 5px 6px;"]),OT=p.default.div.withConfig({displayName:"header__PublishButtonWrapper",componentId:"sc-yxsju1-2"})(["margin:6px 6px 5px auto;"]),PT=e=>{let{onClose:t,onPublish:n,publishButtonDisabled:r,hasFutureDate:a}=e;return c.createElement(AT,null,c.createElement(kT,{variant:f.BUTTON_VARIANTS.SQUARE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.TERTIARY,onClick:t,"aria-label":(0,d.__)("Close","web-stories")},c.createElement(Ju.default,null)),c.createElement(Qu.Headline,{as:"h2",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Story Details","web-stories")),c.createElement(OT,null,c.createElement(xT,{onClick:n,disabled:r,hasFutureDate:a})))};function NT(){return NT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NT.apply(this,arguments)}const RT=p.default.div.withConfig({displayName:"textArea__Container",componentId:"sc-sryd46-0"})(["position:relative;width:100%;min-width:100px;"]),MT=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,forwardedAs:"span"}).withConfig({displayName:"textArea__CounterText",componentId:"sc-sryd46-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),LT=(0,p.default)($e.Text).withConfig({displayName:"textArea__Label",componentId:"sc-sryd46-2"})(["margin-bottom:12px;"]),DT=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"textArea__Hint",componentId:"sc-sryd46-3"})(["margin-top:12px;color:",";"],(e=>{let{hasError:t,theme:n}=e;return n.colors.fg[t?"negative":"tertiary"]})),BT=p.default.div.withConfig({displayName:"textArea__InputContainer",componentId:"sc-sryd46-4"})((e=>{let{focused:t,hasError:n,theme:r,styleOverride:a}=e;return(0,p.css)(["box-sizing:border-box;display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";:focus-within{",";}",";"],r.colors.border[n?"negativeNormal":"defaultNormal"],r.borders.radius.small,t&&!n&&(0,p.css)(["border-color:",";"],r.colors.border.defaultActive),(0,tp.focusCSS)(r.colors.border.focus),a)})),FT=p.default.textarea.withConfig({displayName:"textArea__StyledTextArea",componentId:"sc-sryd46-5"})((e=>{let{theme:t}=e;return(0,p.css)(["height:100%;width:100%;padding:0;background-color:inherit;border:none;outline:none;color:",";resize:none;box-shadow:none;",";",";:focus{box-shadow:none;}:disabled{color:",";border-color:",";}:active{color:",";}::placeholder{color:",";}"],t.colors.fg.primary,A.scrollbarCSS,ep.expandPresetStyles({preset:t.typography.presets.paragraph[qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL],theme:t}),t.colors.fg.disable,t.colors.border.disable,t.colors.fg.primary,t.colors.fg.tertiary)})),HT=p.default.div.withConfig({displayName:"textArea__Counter",componentId:"sc-sryd46-6"})(["text-align:right;align-self:flex-end;span{color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),UT=(0,u.forwardRef)(((e,t)=>{let{className:n,disabled:r,hasError:a,hint:o,id:l,label:i,onBlur:s,onFocus:d,value:p,showCount:m=!1,maxLength:f,isIndeterminate:g=!1,containerStyleOverride:h="",...b}=e;const E=(0,u.useMemo)((()=>l||(0,pe.default)()),[l]),y=m&&f>0,[_,v]=(0,u.useState)(!1),[w,T]=(0,u.useState)(!1);let S=p;return g&&(S=""),c.createElement(RT,{className:n},i&&c.createElement(LT,{htmlFor:E,forwardedAs:"label",disabled:r},i),c.createElement(BT,{focused:_,hasError:a,styleOverride:h},c.createElement(FT,NT({id:E,disabled:r,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&_&&!w&&(e.select(),T(!0))},onFocus:e=>{d?.(e),v(!0),T(!1)},onBlur:e=>{s?.(e),v(!1)},value:S,maxLength:f},b)),y&&c.createElement(HT,null,c.createElement(MT,null,`${p.length}/${f}`))),o&&c.createElement(DT,{hasError:a},o))}));UT.displayName="TextArea";const jT=e=>{let{currentSlug:t,currentTitle:n,updateStory:r}=e;if(!t){r({properties:{slug:encodeURIComponent(ko(n))}})}};const zT=function(e){if(!e)return null;switch(e.type){case"radial":return(0,d.__)("Radial","web-stories");case"linear":return(0,d.__)("Linear","web-stories");default:{const{color:{r:t,g:n,b:r}}=e;return function(e,t,n){const r=e=>e.toString(16).padStart(2,"0");return`${r(e)}${r(t)}${r(n)}`.toUpperCase()}(t,n,r)}}},GT=e=>{let{onChange:t}=e;const{fullbleedContainer:r,eyedropperPixelData:a,setEyedropperCallback:o,setIsEyedropperActive:l,setEyedropperImg:i,setEyedropperPixelData:s}=Vs((e=>{let{state:{fullbleedContainer:t,eyedropperPixelData:n},actions:{setEyedropperCallback:r,setIsEyedropperActive:a,setEyedropperImg:o,setEyedropperPixelData:l}}=e;return{fullbleedContainer:t,setEyedropperCallback:r,eyedropperPixelData:n,setIsEyedropperActive:a,setEyedropperImg:o,setEyedropperPixelData:l}})),{zoomSetting:c,setZoomSetting:d}=cs((e=>{let{state:{zoomSetting:t},actions:{setZoomSetting:n}}=e;return{zoomSetting:t,setZoomSetting:n}})),p=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return async()=>{if(!e&&c!==Se.FIT)return;e&&l(!0);a&&e||(e&&d(Se.FIT),await new Promise((e=>{setTimeout((()=>{n.e(3182).then(n.bind(n,87559)).then((t=>{t.toCanvas(r,{preferredFontFormat:"woff2",pixelRatio:1}).then((t=>{const n=t.getContext("2d").getImageData(0,0,t.width,t.height).data;s(n),i(t.toDataURL()),e()})).catch((()=>{e()}))}))}))}))),o((()=>e=>{t(e),l(!1),i(null),s(null)}))}}),[r,t,a,c,l,o,i,s,d]);return{initEyedropper:p}};const YT=function(e,t){if(!e)return null;const{type:n}=e;if(!n||"solid"===n){const{color:{r:n,g:r,b:a}}=e;return{color:{r:n,g:r,b:a,a:t}}}return{...e,alpha:t}};const ZT=function(e){if(!e.type||"solid"===e.type){const{color:t}=e;return{color:{...t,a:1}}}return t=e,n=["alpha"],Object.keys(t).filter((e=>!n.includes(e))).reduce(((e,n)=>({...e,[n]:t[n]})),{});var t,n};const WT=function(e){const t=(e||"").toUpperCase().trim().replace(/^#/,"");return/[^0-9a-f]/i.test(t)?null:6===t.length?t:1===t.length?t.repeat(6):2===t.length?t.repeat(3):3===t.length?t.replace(/./g,"$&$&"):4===t.length?`${t.substring(0,2).repeat(2)}${t.substring(2)}`:null};var VT=n(6215);function $T(){return $T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$T.apply(this,arguments)}const qT=p.default.div.withConfig({displayName:"input__Container",componentId:"sc-1dusq6m-0"})(["position:relative;display:inline-block;width:100%;min-width:40px;"]),KT=(0,p.default)($e.Text).withConfig({displayName:"input__Label",componentId:"sc-1dusq6m-1"})(["margin-bottom:12px;display:inline-block;"]),XT=(0,p.default)($e.Text).withConfig({displayName:"input__Hint",componentId:"sc-1dusq6m-2"})(["display:inline-block;margin-top:12px;color:",";"],(e=>{let{hasError:t,theme:n}=e;return n.colors.fg[t?"negative":"tertiary"]})),QT=(0,p.default)($e.Text).withConfig({displayName:"input__Suffix",componentId:"sc-1dusq6m-3"})(["background:transparent;color:",";white-space:nowrap;svg{width:32px;height:32px;margin:2px -10px;display:block;}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),JT=p.default.div.withConfig({displayName:"input__InputContainer",componentId:"sc-1dusq6m-4"})((e=>{let{focused:t,hasError:n,theme:r,styleOverride:a}=e;return(0,p.css)(["display:flex;align-items:center;justify-content:space-between;height:36px;padding:4px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";",";:focus-within{",";}",";"],r.colors.border[n?"negativeNormal":"defaultNormal"],r.borders.radius.small,t&&!n&&(0,p.css)(["border-color:",";"],r.colors.border.defaultActive),t&&(0,p.css)(["","{color:",";}"],QT,r.colors.fg.primary),(0,tp.focusCSS)(r.colors.border.focus),a)})),eS=p.default.input.withConfig({displayName:"input__BaseInput",componentId:"sc-1dusq6m-5"})((e=>{let{hasSuffix:t,theme:n}=e;return(0,p.css)(["height:100%;width:100%;padding:0;"," background-color:inherit;border:none;outline:none;box-shadow:none;color:",";",";::placeholder{color:",";}:disabled{color:",";border-color:",";& ~ ","{color:",";}}:focus{box-shadow:none;}:active:enabled{color:",";}"],t&&(0,p.css)(["padding-right:8px;"]),n.colors.fg.primary,ep.expandPresetStyles({preset:{...n.typography.presets.paragraph[qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:n}),n.colors.fg.tertiary,n.colors.fg.disable,n.colors.border.disable,QT,n.colors.fg.disable,n.colors.fg.primary)})),tS=(0,u.forwardRef)(((e,t)=>{let{inputClassName:n,className:r,disabled:a,hasError:o,hint:l,id:i,label:s,onBlur:d,onFocus:p,hasFocus:m=!1,suffix:f,unit:g="",value:h="",isIndeterminate:b=!1,containerStyleOverride:E="",...y}=e;const _=(0,u.useMemo)((()=>i||(0,pe.default)()),[i]),[v,w]=(0,u.useState)(m),[T,S]=(0,u.useState)(!1);let C=h;g&&h.length&&(C=`${h}${v?"":`${g}`}`),b&&(C="");const I=Boolean(f);return c.createElement(qT,{className:r},s&&c.createElement(KT,{htmlFor:_,forwardedAs:"label",disabled:a},s),c.createElement(JT,{focused:v,hasError:o,styleOverride:E},c.createElement(eS,$T({id:_,disabled:a,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&v&&!T&&(e.select(),S(!0))},onFocus:e=>{p?.(e),w(!0),S(!1)},onBlur:e=>{d?.(e),w(!1)},value:C,hasSuffix:I,className:n},y)),I&&c.createElement(QT,{hasLabel:Boolean(s),forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:()=>w(!0)},f)),l&&c.createElement(XT,{hasError:o},l))}));VT.default,Ma().string,Ma().bool,Ma().bool,Ma().string,Ma().string,VT.default,Ma().func,Ma().func.isRequired,Ma().func,Ma().node,Ma().string,Ma().string,Ma().bool,Ma().oneOfType([Ma().object,Ma().array]);function nS(){return nS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nS.apply(this,arguments)}tS.displayName="Input";const rS=(0,u.forwardRef)((function Hex(e,t){let{value:n,placeholder:r,onChange:a,...o}=e;const[l,i]=(0,u.useState)(""),s=(0,u.useRef)(null),d=(0,u.useRef)(!1),p=zT(n);(0,u.useEffect)((()=>i(p)),[p]);const m=(0,u.useCallback)((e=>{const t=e.target.value.trim().replace(/^#/,"");i(t)}),[]),f=(0,u.useCallback)((()=>{const e=WT(l)??p;if(i(e),e!==p){const{red:t,green:r,blue:o}=(0,Ve.parseToRgb)(`#${e}`),l=n.color.a;a({color:{r:t,g:r,b:o,a:l}})}}),[l,p,a,n]),g=(0,u.useCallback)((()=>{f()}),[f]),h=(0,u.useCallback)((()=>{d.current||f(),d.current=!1}),[f]),b=(0,u.useCallback)((()=>{i(p),d.current=!0;(t?.current?t:s).current.blur()}),[p,t]);return(0,fr.useKeyDownEffect)(s,{key:["escape"],editable:!0},b,[b]),(0,fr.useKeyDownEffect)(s,{key:["enter"],editable:!0},g,[g]),c.createElement(tS,nS({ref:t||s,value:l||"",onChange:m,onBlur:h,placeholder:r},o))}));function aS(e){return void 0!==e.a&&e.a<1}const oS=function(e){const{color:t,alpha:n,stops:r}=e;if(t)return Boolean(aS(t));if("number"==typeof n&&n<1)return!0;for(const e of r||[])if(aS(e.color))return!0;return!1};const lS=function(e){return Boolean(e?.type)&&"solid"!==e.type};var iS=n(19362);function sS(){return sS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sS.apply(this,arguments)}const cS=24,dS=p.default.div.withConfig({displayName:"swatch__Transparent",componentId:"sc-180wh7-0"})(["width:100%;height:100%;position:absolute;border-radius:100%;",""],iS.transparentBg),uS=p.default.button.withConfig({displayName:"swatch__SwatchButton",componentId:"sc-180wh7-1"})(["cursor:pointer;background-color:transparent;border-color:transparent;padding:0;border-width:0;display:block;width:","px;height:","px;border-radius:100%;overflow:hidden;position:relative;"," ",";::after{content:'';position:absolute;pointer-events:none;left:0;top:0;width:100%;height:100%;border-radius:50%;border:1px solid ",";}"],cS,cS,(e=>{let{disabled:t}=e;return t&&(0,p.css)(["opacity:0.4;cursor:default;pointer-events:none;"])}),(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus)}),(e=>{let{theme:t}=e;return t.colors.divider.primary})),pS=(0,p.default)(uS).attrs({as:"div",type:""}).withConfig({displayName:"swatch__SwatchPreview",componentId:"sc-180wh7-2"})([""]),mS=p.default.div.withConfig({displayName:"swatch__SwatchItem",componentId:"sc-180wh7-3"})(["transform:rotate(","deg);display:block;width:100%;height:100%;font-size:13px;position:relative;svg{width:","px;height:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);filter:drop-shadow(0px 0px 4px rgba(0,0,0,0.4));color:",";transform:rotate(","deg);}"],(e=>{let{displaySplit:t}=e;return t?-45:0}),cS,cS,12,12,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{displaySplit:t}=e;return t?45:0})),fS=p.default.div.withConfig({displayName:"swatch__OpaqueColorWrapper",componentId:"sc-180wh7-4"})(["height:","px;width:50%;overflow:hidden;position:absolute;left:0;top:0;"],cS),gS=p.default.div.withConfig({displayName:"swatch__OpaqueColor",componentId:"sc-180wh7-5"})(["height:","px;width:","px;position:absolute;top:0;left:0;",""],cS,cS,(e=>{let{pattern:t}=e;return(0,Yr.default)(t)}));function Swatch(e){let{pattern:t,children:n,isPreview:r=!1,isDisabled:a=!1,isIndeterminate:o=!1,className:l="",...i}=e;if(!t)return null;const s=oS(t),d=lS(t),u=s?ZT(t):t,p=!d&&s&&!o,m=r?pS:uS;return c.createElement(m,sS({disabled:a,className:l},i),s&&c.createElement(dS,null),c.createElement(mS,{style:(0,Yr.default)(t),displaySplit:p},p&&c.createElement(fS,null,c.createElement(gS,{style:(0,Yr.default)(u)})),n))}var hS=n(19683),bS=n(13578);const ES=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.DEFAULT}).withConfig({displayName:"focusTrapButton___FocusTrapButton",componentId:"sc-1426fzg-0"})(["background-color:transparent;display:flex;align-items:center;justify-content:flex-start;outline:none;margin:0;padding:0;min-width:inherit;",""],(e=>{let{styleOverride:t}=e;return(0,p.css)(["",""],t)}));ES.propTypes={styleOverride:Ma().array};const yS=(e,t)=>{"Tab"===e.key?(e.preventDefault(),t.current.focus()):e.stopPropagation()},_S=(0,u.forwardRef)((function FocusTrapButton(e,t){let{inputRef:n,inputLabel:r,children:a,styleOverride:o}=e;return c.createElement(ES,{id:(0,pe.default)(),tabIndex:-1,ref:t,onClick:e=>{e.stopPropagation(),n.current.focus()},onBlur:e=>{e.preventDefault(),e.stopPropagation()},onKeyDown:e=>{e.preventDefault(),"Enter"===e.key&&n.current.focus()},"aria-label":(0,We.default)(
/* translators: %s: input label that is accessible by pressing Enter */
(0,d.__)("Press Enter to edit %s","web-stories"),r),styleOverride:o},a)}));const vS=function(e){let{ref:t}=e;const n=e=>{const n=(r=t.current)?[...r.querySelectorAll('a[href], button, textarea, input[type]:not([type="hidden"]), select')].filter((e=>!e.hasAttribute("disabled")&&"-1"!==e.getAttribute("tabindex"))):[];var r;const a=n[0],o=n[n.length-1];e.shiftKey||document.activeElement!==o?e.shiftKey&&document.activeElement===a&&(o.focus(),e.preventDefault()):(a.focus(),e.preventDefault())};(0,fr.useKeyDownEffect)(t,{key:["tab"],allowDefault:!0,editable:!0,shift:!0},n),(0,fr.useKeyDownEffect)(t,{key:["tab"],allowDefault:!0,editable:!0},n)};var wS=n(80852),TS=n(42096);function SS(){return SS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SS.apply(this,arguments)}const CS=function(){let{r:e=0,g:t=0,b:n=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return`rgb(${e},${t},${n})`},IS=e=>{let{r:t,g:n,b:r,a}=e;const o=e=>255*(1-a)+a*e;return`rgb(${o(t)}, ${o(n)}, ${o(r)})`},xS=16,AS=p.default.div.attrs((e=>{let{currentColor:t={},withAlpha:n}=e;return{style:{background:n?IS(t):CS(t)}}})).withConfig({displayName:"pointer__PointerElement",componentId:"sc-1444lan-0"})(["width:","px;height:","px;transform:translate( "," );background:transparent;border:","px solid ",";border-radius:100%;position:relative;&:before{content:'';display:block;width:","px;height:","px;position:absolute;top:-","px;left:-","px;}"],xS,xS,(e=>{let{offsetX:t=0,offsetY:n=0,isRTL:r}=e;return`${(r?-1:1)*t}px, ${n}px`}),2,(e=>{let{theme:t}=e;return t.colors.fg.primary}),32,32,10,10);const kS=function Pointer(e){const{isRTL:t}=U();return c.createElement(AS,SS({},e,{isRTL:t}))},OS=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.EditableInput}))))),PS=p.default.button.withConfig({displayName:"editablePreview__Preview",componentId:"sc-cdmcf1-0"})(["margin:0;padding:5px 7px;border:1px solid ",";border-radius:4px;background:transparent;color:",";width:100%;",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),np),NS=p.default.div.withConfig({displayName:"editablePreview__Wrapper",componentId:"sc-cdmcf1-1"})(["input{",";}"],np);function EditablePreview(e){let{label:t,value:n,width:r,format:a,onChange:o}=e;const[l,i]=(0,u.useState)(!1),s=(0,u.useCallback)((()=>i(!0)),[]),d=(0,u.useCallback)((()=>i(!1)),[]),p=(0,u.useRef)(null),m=(0,u.useRef)(),f=(0,u.useMemo)((()=>({input:{textAlign:"center",textTransform:"lowercase",width:"100%",padding:"6px 12px",border:"1px solid #5E6668",color:"#E4E5E6",borderRadius:"4px",background:"transparent",lineHeight:"18px"},wrap:{lineHeight:0,maxWidth:`${r}px`}})),[r]);(0,fr.useKeyDownEffect)(p,{key:"esc",editable:!0},d,[l]);if((0,u.useLayoutEffect)((()=>{const e=setTimeout((()=>{l&&m.current&&(m.current.input.focus(),m.current.input.select(),m.current.input.setAttribute("aria-label",t))}));return()=>clearTimeout(e)}),[l,t]),!l)return c.createElement(PS,{"aria-label":t,onClick:s,onFocus:s},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},a(n)));const g="transparent"===n?"000000":n;return c.createElement(NS,{ref:p,tabIndex:-1,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||d()}},c.createElement(u.Suspense,{fallback:null},c.createElement(OS,{value:g,ref:m,onChange:o,onChangeComplete:d,style:f})))}EditablePreview.defaultProps={label:"",value:""};const RS=EditablePreview,MS=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Saturation}))))),LS=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Hue}))))),DS=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Alpha}))))),BS=p.default.div.withConfig({displayName:"currentColorPicker__BodyFallback",componentId:"sc-eqs4bc-0"})(["height:","px;display:flex;align-items:center;justify-content:center;"],240),FS=p.default.div.withConfig({displayName:"currentColorPicker__SaturationWrapper",componentId:"sc-eqs4bc-1"})(["position:relative;margin:0 16px;flex:0 1 ","px;"],116),HS=(0,p.css)(["margin:0 16px;border:1px solid ",";flex:0 0 ","px;position:relative;border-radius:","px;background-clip:padding-box;"],(e=>{let{theme:t}=e;return t.colors.shadow.active}),20,50),US=p.default.div.withConfig({displayName:"currentColorPicker__HueWrapper",componentId:"sc-eqs4bc-2"})(["",""],HS),jS=p.default.div.withConfig({displayName:"currentColorPicker__AlphaWrapper",componentId:"sc-eqs4bc-3"})([""," div:first-child div:first-child div:first-child{background-image:conic-gradient( "," 0.25turn,transparent 0turn 0.5turn,"," 0turn 0.75turn,transparent 0turn 1turn ) !important;background-size:8px 8px !important;}"],HS,(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),zS=p.default.div.withConfig({displayName:"currentColorPicker__Footer",componentId:"sc-eqs4bc-4"})(["height:","px;line-height:19px;position:relative;margin:0 16px;display:flex;justify-content:space-between;"],36),GS=p.default.div.withConfig({displayName:"currentColorPicker__HexValue",componentId:"sc-eqs4bc-5"})(["width:","px;"],74),YS=p.default.div.withConfig({displayName:"currentColorPicker__Opacity",componentId:"sc-eqs4bc-6"})(["width:","px;"],52);function CurrentColorPicker(e){let{rgb:t,hsl:n,hsv:r,hex:a,onChange:o,showOpacity:l,hasEyedropper:i}=e;const s=String(Math.round(100*t.a)),p="#"===a[0]?a.substr(1):a,g=(0,u.useCallback)((e=>("transparent"===e&&(e="000000"),`#${e}`)),[]),h=(0,u.useCallback)((e=>`${e}%`),[]),b=(0,u.useCallback)((e=>o({hex:e})),[o]),E=(0,u.useCallback)((e=>o({...t,a:isNaN(e)?1:parseInt(e)/100})),[t,o]),{initEyedropper:y}=GT({onChange:o});return c.createElement(c.Fragment,null,c.createElement(u.Suspense,{fallback:null},c.createElement(FS,null,c.createElement(MS,{radius:"8px",pointer:()=>c.createElement(kS,{offsetX:-8,offsetY:-8,currentColor:t}),hsl:n,hsv:r,onChange:o})),c.createElement(US,null,c.createElement(LS,{direction:"horizontal",height:"20px",radius:"50px",pointer:()=>c.createElement(kS,{offsetX:-8,offsetY:1,currentColor:t}),hsl:n,onChange:o})),l&&c.createElement(jS,null,c.createElement(DS,{direction:"horizontal",height:"20px",radius:"50px",pointer:()=>c.createElement(kS,{offsetX:-8,offsetY:1,currentColor:t,withAlpha:!0}),rgb:t,hsl:n,onChange:o}))),c.createElement(zS,null,i&&c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,"aria-label":(0,d.__)("Pick a color from canvas","web-stories"),onClick:y(),onPointerEnter:y(!1)},c.createElement(Ty,null)),c.createElement(GS,null,c.createElement(RS,{label:(0,d.__)("Edit hex value","web-stories"),value:p,onChange:b,width:80,format:g})),l&&c.createElement(YS,null,c.createElement(RS,{label:(0,d.__)("Edit opacity","web-stories"),value:s,width:52,format:h,onChange:E}))))}CurrentColorPicker.defaultProps={showOpacity:!0};const ZS=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function DynamicFetcher(e){const r=(0,u.useRef)(!1),[a,o]=(0,u.useState)(null);return(0,u.useEffect)((()=>(r.current=!0,n.e(341).then(n.bind(n,66286)).then((e=>{let{CustomPicker:n}=e;r.current&&o({component:n(...t)})})),()=>{r.current=!1})),[]),a?c.createElement(a.component,e):c.createElement(BS,null,c.createElement(TS.default,null))}return DynamicFetcher}(CurrentColorPicker),WS=112,VS=12,$S="solid",qS="linear",KS="radial",XS="DELETE_COLOR_PRESET_DIALOG_DISMISSED",QS=e=>(0,Ow.default)(`#${e}`),JS=[QS("00000000"),QS("000000"),QS("454545"),QS("B6B6B6"),QS("EEEEEE"),QS("FFFFFF"),QS("003BAD"),QS("0044C9"),QS("0354F2"),QS("1263FF"),QS("347EFF"),QS("6D9FFF"),QS("4B1283"),QS("5A189A"),QS("7B2CBF"),QS("9D4EDD"),QS("C77DFF"),QS("E0AAFF"),QS("E03568"),QS("FF477E"),QS("FF5C8A"),QS("FF7096"),QS("FF85A1"),QS("FF99AC"),QS("590D22"),QS("800F2F"),QS("A4133C"),QS("C9184A"),QS("FF4D6D"),QS("FF758F"),QS("DBCA09"),QS("FFD900"),QS("FFE747"),QS("FFEE70"),QS("FFF599"),QS("FFFFB7"),QS("E06E04"),QS("EA7D00"),QS("FF9500"),QS("FFA811"),QS("FFBC35"),QS("FFCC4A"),QS("607047"),QS("79895D"),QS("839568"),QS("A5B98B"),QS("C1D3AA"),QS("D4E4C0"),QS("603809"),QS("603808"),QS("6F4518"),QS("8B5E34"),QS("A47148"),QS("BC8A5F")],eC=p.default.button.attrs((e=>{let{position:t}=e;return{style:{right:t*WS-6+"px"}}})).withConfig({displayName:"gradientStop__Stop",componentId:"sc-1kqiqwc-0"})(["position:absolute;top:-","px;background:transparent;border:0;padding:0;&:focus{outline:none;}"],24),tC=(0,p.css)(["position:absolute;left:0;top:0;width:100%;height:100%;"]),nC=p.default.div.withConfig({displayName:"gradientStop__Background",componentId:"sc-1kqiqwc-1"})([""," ",""],tC,(e=>{let{color:t}=e;return(0,Yr.default)(t)})),rC=p.default.div.withConfig({displayName:"gradientStop__Transparent",componentId:"sc-1kqiqwc-2"})([""," width:100%;height:100%;position:absolute;top:0;"],iS.transparentBg),aC=p.default.div.withConfig({displayName:"gradientStop__StopPointer",componentId:"sc-1kqiqwc-3"})(["transform:translate(",",0);width:","px;height:","px;border-radius:2px;overflow:hidden;"],(e=>{let{offset:t}=e;return`${t}px`}),14,14),oC=p.default.div.withConfig({displayName:"gradientStop__IconWrapper",componentId:"sc-1kqiqwc-4"})(["position:absolute;left:-","px;top:-8px;color:",";svg{width:32px;height:32px;}"],10,(e=>{let{theme:t,isSelected:n}=e;return n?t.colors.fg.primary:t.colors.fg.tertiary}));const lC=(0,u.forwardRef)((function GradientStopWithRef(e,t){let{position:n,index:r,isSelected:a,color:o,onSelect:l}=e;return c.createElement(eC,{ref:t,key:r,isSelected:a,position:n,onFocus:()=>l(r),onClick:()=>l(r),"aria-label":(0,We.default)(
/* translators: %d: stop percentage */
(0,d.__)("Gradient stop at %d%%","web-stories"),Math.round(100-100*n))},c.createElement(oC,{isSelected:a},c.createElement(C_,null)),c.createElement(aC,{offset:-1},c.createElement(rC,null),c.createElement(nC,{color:o})))}));lC.propTypes={position:Ma().number.isRequired,index:Ma().number.isRequired,isSelected:Ma().bool.isRequired,color:Ma().object.isRequired,onSelect:Ma().func.isRequired};const iC=lC;const sC=function(e,t){(0,fr.useKeyDownEffect)(e,"left",(()=>t(.01)),[t]),(0,fr.useKeyDownEffect)(e,"right",(()=>t(-.01)),[t])};const cC=function(e,t,n,r){(0,fr.useKeyDownEffect)(e,"enter",(()=>{return t((e=function(e,t){const n=t===e.length-1;if(n&&e[t].position<1)return 1;if(0===t&&e[0].position>0)return 0;const r=n?e[t-1]:e[t],a=n?e[t]:e[t+1];return r.position+(a.position-r.position)/2}(n,r),a=4,Number(e.toFixed(a))));var e,a}),[t,n,r])};const dC=function(e,t){(0,fr.useKeyDownEffect)(e,"delete",(()=>{e.current.focus(),t()}),[t,e])};const uC=function(e,t,n){const r=t.length,a=(0,u.useMemo)((()=>Array.from({length:r}).map(u.createRef)),[r]);return(0,u.useLayoutEffect)((()=>{e.current.contains(document.activeElement)&&a[n].current.focus()}),[n,a,r,e]),a};function pC(e){return e.pageX||e.clientX}const mC=function(e,t){const[n,r]=(0,u.useState)(null);return(0,u.useLayoutEffect)((()=>{const n=e.current,a=n.getBoundingClientRect().left,o=e=>{if(e.target!==n)return;const o=(pC(e)-a+7)/WS;t(1.0625-o),r(null)},l=e=>{e.target===n?r(pC(e)-a):r(null)},i=e=>{e.target===n&&r(null)};return n.addEventListener("pointermove",l),n.addEventListener("pointerleave",i),n.addEventListener("pointerdown",o),()=>{n.removeEventListener("pointermove",l),n.removeEventListener("pointerleave",i),n.removeEventListener("pointerdown",o)}}),[e,t]),n};const fC=function(e,t){const n=(0,u.useRef)(null);(0,u.useLayoutEffect)((()=>{const r=e.current,a=e=>{const r=pC(e)-n.current;n.current=pC(e),t(-r/WS)},o=e=>{n.current=null,function(e){e.target.releasePointerCapture&&e.target.releasePointerCapture(e.pointerId)}(e),e.target.removeEventListener("pointermove",a),e.target.removeEventListener("pointerup",o)},l=e=>{e.target!==r&&(n.current=pC(e),function(e){e.target.setPointerCapture&&e.target.setPointerCapture(e.pointerId)}(e),e.target.addEventListener("pointermove",a),e.target.addEventListener("pointerup",o))};return r.addEventListener("pointerdown",l),()=>r.removeEventListener("pointerdown",l)}),[e,t])},gC=p.default.div.withConfig({displayName:"gradientLine__Line",componentId:"sc-1k22wp0-0"})([""," width:","px;height:","px;border-radius:2px;position:relative;&:focus{outline:none;}"],iS.transparentBg,WS,VS),hC=p.default.div.attrs((e=>{let{stops:t}=e;return{style:(0,Yr.default)({type:"linear",stops:t,rotation:.25})}})).withConfig({displayName:"gradientLine__Background",componentId:"sc-1k22wp0-1"})(["position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;"]),bC=(0,p.default)(kS).attrs((e=>{let{x:t}=e;return{style:{left:`${t}px`},offsetX:-6}})).withConfig({displayName:"gradientLine__TempPointer",componentId:"sc-1k22wp0-2"})(["height:","px;width:","px;opacity:0.6;top:1px;pointer-events:none;"],10,10);const EC=function GradientLine(e){let{stops:t,currentStopIndex:n,onSelect:r,onAdd:a,onDelete:o,onMove:l}=e;const i=(0,u.useRef)();sC(i,l),cC(i,a,t,n),dC(i,o);const s=uC(i,t,n);fC(i,l);const p=mC(i,a);return c.createElement(gC,{ref:i,"aria-label":(0,d.__)("Gradient line","web-stories"),tabIndex:"-1"},c.createElement(hC,{stops:t}),t.map(((e,t)=>{let{position:a,color:o}=e;return c.createElement(iC,{ref:e=>s[t].current=e,key:t,index:t,isSelected:t===n,position:a,onSelect:r,color:{color:o}},c.createElement(kS,{offsetX:-6}))})),p&&c.createElement(bC,{"aria-label":(0,We.default)(
/* translators: %d: stop percentage */
(0,d.__)("Temporary gradient stop at %d%%","web-stories"),Math.round(p/WS*100)),x:p}))},yC=p.default.div.withConfig({displayName:"gradientPicker__Wrapper",componentId:"sc-a6h8ls-0"})(["display:flex;justify-content:space-between;align-items:center;padding:16px 16px 0;height:60px;"]),_C=p.default.div.withConfig({displayName:"gradientPicker__Buttons",componentId:"sc-a6h8ls-1"})(["display:flex;gap:8px;"]),vC=(0,p.default)(m.Button).withConfig({displayName:"gradientPicker__SmallButton",componentId:"sc-a6h8ls-2"})(["width:24px;height:24px;padding:0;svg{width:24px;height:24px;}"]);const wC=function GradientPicker(e){let{stops:t,currentStopIndex:n,type:r,onSelect:a,onAdd:o,onDelete:l,onMove:i,onRotate:s,onReverse:u}=e;const p=(0,d.__)("Reverse gradient stops","web-stories"),m=(0,d.__)("Rotate gradient","web-stories"),g="radial"!==r;return c.createElement(yC,null,c.createElement(EC,{stops:t,currentStopIndex:n,onSelect:a,onAdd:o,onDelete:l,onMove:i}),c.createElement(_C,null,c.createElement(Tooltip,{hasTail:!0,title:p},c.createElement(vC,{"aria-label":p,onClick:u,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},c.createElement(Ig,null))),g&&c.createElement(Tooltip,{hasTail:!0,title:m},c.createElement(vC,{onClick:s,"aria-label":m,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},c.createElement(yg,{id:"gradient-rotator"})))))};function TC(){return TC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TC.apply(this,arguments)}const SC=p.default.div.withConfig({displayName:"header__Wrapper",componentId:"sc-3jvjbz-0"})(["display:flex;justify-content:space-between;align-items:center;height:","px;padding:4px 8px 4px 8px;position:relative;border-bottom:1px solid ",";"],44,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),CC=p.default.div.withConfig({displayName:"header__Actions",componentId:"sc-3jvjbz-1"})(["display:flex;margin-left:auto;"]),IC=(0,p.default)(m.Button).withConfig({displayName:"header__StyledButton",componentId:"sc-3jvjbz-2"})(["margin-left:8px;",";"],np);const xC=function(e){let{children:t,handleClose:n,isEditMode:r=!1,setIsEditMode:a=(()=>{}),hasPresets:o=!1}=e;const l=(0,u.useRef)();(0,u.useEffect)((()=>{l.current?.focus()}),[]);const i={type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:e=>{e.stopPropagation(),a(!r)},isEditMode:r};return c.createElement(SC,null,t,c.createElement(CC,null,o&&c.createElement(IC,TC({},i,{"aria-label":r?(0,d.__)("Exit edit mode","web-stories"):(0,d.__)("Edit colors","web-stories")}),r?(0,d.__)("Done","web-stories"):c.createElement(dy.default,null)),c.createElement(IC,{"aria-label":(0,d.__)("Close","web-stories"),onClick:n,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,ref:l},c.createElement(Ju.default,null))))};function AC(){return AC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AC.apply(this,arguments)}function kC(e){let{isToggled:t=!1,type:n=null,...r}=e;const a=n===f.BUTTON_TYPES.QUATERNARY?n:t?f.BUTTON_TYPES.SECONDARY:f.BUTTON_TYPES.TERTIARY;return c.createElement(m.Button,AC({},r,{type:a,"aria-pressed":t,isToggled:t}))}function LockToggle(e){let{isLocked:t=!1,...n}=e;return c.createElement(m.Button,AC({},n,{"aria-pressed":t,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE}),t?c.createElement(dE.default,null):c.createElement(gE,null))}const OC=p.default.div.withConfig({displayName:"patternTypePicker__Wrapper",componentId:"sc-1mq6bg0-0"})(["display:flex;justify-content:flex-start;align-items:center;height:","px;padding:0 16px;position:relative;gap:8px;"],52);const PC=function PatternTypePicker(e){let{type:t,setToGradient:n,setToSolid:r}=e;const a=(0,u.useCallback)((()=>n("linear")),[n]),o=(0,u.useCallback)((()=>n("radial")),[n]);return c.createElement(OC,null,c.createElement(kC,{"aria-label":(0,d.__)("Solid pattern type","web-stories"),onClick:r,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,isToggled:"solid"===t},c.createElement(sy,null)),c.createElement(kC,{"aria-label":(0,d.__)("Linear gradient pattern type","web-stories"),onClick:a,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,isToggled:"linear"===t},c.createElement(ey,null)),c.createElement(kC,{"aria-label":(0,d.__)("Radial gradient pattern type","web-stories"),onClick:o,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,isToggled:"radial"===t},c.createElement(oy,null)))};const NC=function(e,t){const n=e.findIndex((e=>{let{position:n}=e;return n>t}));if(-1===n)return{index:e.length,color:e[e.length-1].color};if(0===n)return{index:0,color:e[0].color};const r=e[n-1],a=e[n],o=(t-r.position)/(a.position-r.position),{color:{r:l,g:i,b:s,a:c=1}}=r,{color:{r:d,g:u,b:p,a:m=1}}=a,f=(e,t)=>e+(t-e)*o,g={r:Math.round(f(l,d)),g:Math.round(f(i,u)),b:Math.round(f(s,p)),a:f(c,m)};return{index:n,color:1===g.a?{r:g.r,g:g.g,b:g.b}:g}};function RC(e){return e.map((e=>{let{color:{r:t,g:n,b:r,a},position:o}=e;return{color:(0,wS.default)(t,n,r,a).color,position:o}}))}const MC=function(e){const{regenerate:t,type:n}=e;if(!t)return null;switch(n){case $S:return function(e){let{currentColor:{r:t,g:n,b:r,a}}=e;return(0,wS.default)(t,n,r,a)}(e);case qS:return function(e){let{stops:t,rotation:n,alpha:r}=e;const a={type:qS,stops:RC(t)};return 0!==n&&(a.rotation=n),1!==r&&void 0!==r&&(a.alpha=r),a}(e);case KS:return function(e){let{stops:t,center:n,size:r,alpha:a}=e;const o={type:KS,stops:RC(t)};return!n||.5===n.x&&.5===n.y||(o.center=n),!r||1===r.w&&1===r.h||(o.size=r),1!==a&&void 0!==a&&(o.alpha=a),o}(e);default:return null}},LC={type:$S,regenerate:!1,stops:[],currentColor:{r:0,g:0,b:0,a:0},currentStopIndex:0,rotation:.5,alpha:1,center:{x:.5,y:.5},size:{w:1,h:1}},DC={load:(e,t)=>{let{payload:n}=t;const{type:r,color:a,stops:o,rotation:l,center:i,size:s,alpha:c}=n,d=r&&r!==$S&&(e.type!==r||o?.length!==e.stops?.length)?{currentColor:o[0].color,currentStopIndex:0}:{};switch(r){case qS:return{...e,...d,type:r,regenerate:!1,stops:o,alpha:isNaN(c)?e.alpha:c,rotation:isNaN(l)?0:l};case KS:return{...e,...d,type:r,regenerate:!1,stops:o,center:void 0!==i?i:e.center,size:void 0!==s?s:e.size,alpha:isNaN(c)?e.alpha:c};default:return{...e,type:$S,regenerate:!1,currentColor:a}}},setToSolid:e=>({...e,type:$S,regenerate:!0}),setToGradient:(e,t)=>{let{payload:n}=t;const r=e.stops&&e.stops.length>=2?e.stops:[{color:e.currentColor,position:0},{color:e.currentColor,position:1}];return{...e,regenerate:!0,type:n,stops:r}},addStopAt:(e,t)=>{let{payload:n}=t;if(n=Number(n.toFixed(2)),e.stops.some((e=>{let{position:t}=e;return t===n})))return e;const{index:r,color:a}=NC(e.stops,n),o=[...e.stops.slice(0,r),{color:a,position:n},...e.stops.slice(r)];return{...e,regenerate:!0,currentColor:a,currentStopIndex:r,stops:o}},moveCurrentStopBy:(e,t)=>{let{payload:n}=t;const r=e.currentStopIndex,a=e.stops[r].position,o=Math.max(0,Math.min(1,Number((a+n).toFixed(2))));if(o===a)return e;const l=[...e.stops.slice(0,r),{...e.stops[r],position:o},...e.stops.slice(r+1)];l.sort(((e,t)=>e.position-t.position));const i=l.findIndex((e=>{let{position:t}=e;return t===o}));return{...e,regenerate:!0,stops:l,currentStopIndex:i}},removeCurrentStop:e=>{if(2===e.stops.length)return e;const t=e.currentStopIndex,n=[...e.stops];n.splice(t,1);const r=t===n.length?t-1:t;return{...e,regenerate:!0,stops:n,currentColor:n[r].color,currentStopIndex:r}},updateCurrentColor:(e,t)=>{let{payload:{rgb:n}}=t;const r={...n},a={...e,regenerate:!0,currentColor:r};return e.type!==$S&&(a.stops=[...e.stops.slice(0,e.currentStopIndex),{...e.stops[e.currentStopIndex],color:r},...e.stops.slice(e.currentStopIndex+1)]),a},rotateClockwise:e=>({...e,rotation:(e.rotation+.25)%1,regenerate:!0}),selectStop:(e,t)=>{let{payload:n}=t;const r=Math.max(0,Math.min(e.stops.length-1,n)),a=e.stops[r].color;return{...e,currentStopIndex:r,currentColor:a}},reverseStops:e=>{const t=e.stops.map((e=>{let{color:t,position:n}=e;return{color:t,position:1-n}})).reverse(),n=t.length-e.currentStopIndex-1;return{...e,stops:t,currentStopIndex:n,regenerate:!0}}};const BC=function(){const[e,t]=(0,u.useReduction)(LC,DC),n=MC(e);return{state:{...e,generatedColor:n},actions:t}},FC=(0,p.default)(m.Button).withConfig({displayName:"addCustomColor__StyledButton",componentId:"sc-4t2ps2-0"})(["flex:0 0 32px;margin:0 16px 16px;"]);const HC=function AddCustomColor(e){let{color:t,onSave:n}=e;const{updateStory:r,globalStoryStyles:a}=Ya((e=>{let{state:{story:{globalStoryStyles:t}},actions:{updateStory:n}}=e;return{globalStoryStyles:t,updateStory:n}})),o=(0,u.useCallback)((()=>{r({properties:{globalStoryStyles:{...a,colors:Ir([...a.colors,t].filter(Boolean))}}}),n()}),[n,t,a,r]);return c.createElement(FC,{onClick:o,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Add to Saved Colors","web-stories"))};const UC=function CustomColorPicker(e){let{color:t,allowsGradient:n,allowsOpacity:r,handleColorChange:a,handleClose:o,hideCustomPicker:l,allowsSavedColors:i,hasEyedropper:s}=e;const{state:{type:p,stops:g,currentStopIndex:h,currentColor:b,generatedColor:E},actions:{load:y,updateCurrentColor:_,reverseStops:v,selectStop:w,addStopAt:T,removeCurrentStop:S,rotateClockwise:C,moveCurrentStopBy:I,setToSolid:x,setToGradient:A}}=BC(),k=(0,u.useRef)(!0);(0,u.useEffect)((()=>()=>{k.current=!1}),[]),(0,u.useEffect)((()=>{E&&a(E)}),[a,E]),(0,u.useEffect)((()=>{y(t||(0,wS.default)(0,0,0))}),[t,y]);const O=(0,u.useCallback)((e=>{_(e),!k.current&&e?.rgb&&a({color:e.rgb})}),[_,a]);return c.createElement(c.Fragment,null,c.createElement(xC,{handleClose:o},c.createElement(m.Button,{"aria-label":(0,d.__)("Go back","web-stories"),onClick:l,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},c.createElement(lg,null))),n&&c.createElement(PC,{type:p,setToGradient:A,setToSolid:x}),"solid"!==p&&c.createElement(wC,{stops:g,currentStopIndex:h,onSelect:w,onReverse:v,onAdd:T,onDelete:S,onRotate:C,onMove:I,type:p}),c.createElement(ZS,{color:b,onChange:O,showOpacity:r,hasEyedropper:s}),i&&c.createElement(HC,{color:E||t,onSave:l}))},jC='[tabIndex="-1"]:not(:disabled)';function zC(e,t){let n,r=t;for(;r>0;)n=n?n?.parentElement:e.parentElement,r--;return n}function GC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"firstChild";const r=zC(e,t),a=r.parentNode[n];return a.querySelector(jC)}function YC(e){const t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}function ZC(e,t,n){return n>0?function(e,t,n){const r=zC(e,n);if(r){const e=r[t];return e?e.querySelector(jC):null}return null}(e,t,n):function(e,t){let n=e[t];for(;n&&n.disabled;)n=n[t];return n}(e,t)}function WC(e,t){return(e?"ArrowRight"===t||"ArrowUp"===t||"PageUp"===t:"ArrowLeft"===t||"ArrowUp"===t||"PageUp"===t)?"previousSibling":"nextSibling"}function VC(e,t,n){const r=YC(e);let a=null,o=null,l=null;for(let c=ZC(e,t,n);c;c=ZC(c,t,n)){const e=YC(c);if(Math.floor(e.y)===Math.floor(r.y))continue;if(a&&Math.floor(e.y)>Math.floor(o.y))break;const t=(i=r,s=e,Math.pow(i.x-s.x,2)+Math.pow(i.y-s.y,2));(!l||t<l)&&(l=t,o=e,a=c)}var i,s;return a}function $C(e){let{ref:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{isRTL:a}=U(),o=(0,u.useCallback)((e=>{let{key:t,target:n}=e;const o=n,l=WC(a,t),i=e=>{if(e){const t=r>0?zC(e,r):e;o.tabIndex=-1,e.tabIndex=0,e.focus(),t.scrollIntoView("previousSibling"===l)}};if("ArrowLeft"===t||"ArrowRight"===t){const e=ZC(o,l,r);e&&i(e)}else if("ArrowUp"===t||"ArrowDown"===t){const e=VC(o,l,r);if(e)o.tabIndex=-1,e.tabIndex=0,e.focus();else if("ArrowUp"===t){i(r>0?GC(o,r):o.parentNode.firstChild)}else{i(r>0?GC(o,r,"lastChild"):o.parentNode.lastChild)}}else if("Home"===t){i(r>0?GC(o,r):o.parentNode.firstChild)}else if("End"===t){i(r>0?GC(o,r,"lastChild"):o.parentNode.lastChild)}else if("PageDown"===t||"PageUp"===t){let e=o;for(let t=0;ZC(e,l,r)&&t<5;e=ZC(e,l,r))t++;i(e)}}),[a,r]);(0,fr.useKeyDownEffect)(t,{key:["up","down","left","right","pageup","pagedown","home","end"]},o,[t,o,...n])}var qC=n(63247),KC=n(76611);const XC=["backgroundColor","backgroundTextMode","font","fontSize","lineHeight","padding","textAlign"];function QC(e,t,n){const r=t.colors,a=n?"color":"background";return r.find((t=>{try{return(0,qC.default)(t,e,a)}catch(e){return!1}}))}function JC(e,t){const{color:n,backgroundColor:r,font:a,fontWeight:o,backgroundTextMode:l,textAlign:i,letterSpacing:s,lineHeight:c,isItalic:d,isUnderline:u,padding:p,fontSize:m}=e;let f={textAlign:i,letterSpacing:s/100+"em",fontWeight:o,textDecoration:u?"underline":null,fontStyle:d?"italic":null,fontFamily:(0,Gn.generateFontFamily)(a),...(0,Yr.default)(n,"color")};return t||(f={...f,fontSize:m,lineHeight:c,padding:p,backgroundTextMode:l}),l===On.BACKGROUND_TEXT_MODE.NONE||t&&l===On.BACKGROUND_TEXT_MODE.HIGHLIGHT||(f={...f,...(0,Yr.default)(r,"background")}),f}function eI(e){return e!==ve?e:null}function tI(e){const{color:t,fontWeight:n,isItalic:r,isUnderline:a,letterSpacing:o}=(0,Hr.getHTMLInfo)(e);return{color:t!==ve?t:(0,wS.default)(0,0,0),fontWeight:eI(n),isItalic:eI(r),isUnderline:eI(a),letterSpacing:eI(o)}}function nI(e,t,n,r){const a=Fe===n?[]:e.map((e=>{let{content:t,backgroundColor:n}=e;return r?n:(0,Hr.getHTMLInfo)(t).color})).filter((e=>e!==ve)).filter((e=>e&&!QC(e,t,!0))),o=He===n?[]:e.map((e=>({...Wn(e,XC),...tI(e.content)}))).filter((e=>!function(e,t){const n=t.textStyles,r=(0,KC.default)(JC(e));return n.find((e=>r===(0,KC.default)(JC(e))))}(e,t)));return{colors:a,textStyles:o}}function rI(e,t){const n=e.map((e=>{let{backgroundColor:t}=e;return t||null})).filter((e=>e&&!QC(e,t,!1)));return{colors:n}}function aI(e,t){return t.length>0&&t.every((t=>{let{type:n}=t;return e===n}))}const oI=function(e){let{presetType:t,isBackgroundColor:n}=e;const{currentPage:r,currentStoryStyles:a={colors:[]},selectedElements:o,globalStoryStyles:l={colors:[],textStyles:[]},updateStory:i}=Ya((e=>{let{state:{currentPage:t,selectedElements:n,story:{globalStoryStyles:r,currentStoryStyles:a}},actions:{updateStory:o}}=e;return{currentPage:t,currentStoryStyles:a,selectedElements:n,globalStoryStyles:r,updateStory:o}})),{colors:s,textStyles:c}=l,{colors:d}=a,p=aI("text",o),m=o?.[0]?.id===r?.elements?.[0]?.id,f=(0,u.useCallback)(((e,a)=>{return p?{...e,...nI(o,a,t,n)}:m?{...e,...(l=r,i=a,{colors:[l.backgroundColor].filter((e=>e&&!QC(e,i,!1)))})}:{...e,...rI(o,a)};var l,i}),[r,m,p,t,o,n]),g=(0,u.useCallback)((e=>{i({properties:{currentStoryStyles:{colors:Ir([...d,...e.colors])}}})}),[d,i]),h=(0,u.useCallback)((e=>{i({properties:{globalStoryStyles:{textStyles:Ir([...c,...e.textStyles]),colors:Ir([...s,...e.colors])}}})}),[s,c,i]),b=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t?a:l;if((e=f(e,n)).colors?.length>0||e.textStyles?.length>0)return t?g(e,n):h(e,n),e}),[f,a,l,h,g]);return{addGlobalPreset:e=>(e.stopPropagation(),b({textStyles:[],colors:[]})),addLocalPreset:e=>(e.stopPropagation(),b({colors:[]},!0))}};function lI(){return lI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lI.apply(this,arguments)}const iI=p.default.button.withConfig({displayName:"colorAdd__AddColorAction",componentId:"sc-1s3q8di-0"})(["cursor:pointer;background-color:transparent;color:",";border-color:",";border-width:1px;border-style:dashed;border-radius:50%;height:","px;width:","px;padding:0;svg{height:100%;width:100%;}:hover{border-color:",";}",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),24,24,(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),np);const sI=function ColorAdd(e){let{isLocal:t=!1,isGlobal:n=!1,isBackground:r=!1,...a}=e;const{addGlobalPreset:o,addLocalPreset:l}=oI({presetType:He,isBackgroundColor:r});if(!t&&!n)return null;const i=t?(0,d.__)("Add local color","web-stories"):(0,d.__)("Add global color","web-stories");return c.createElement(iI,lI({tabIndex:"0",onClick:t?l:o,"aria-label":i},a),c.createElement(Dy,null))};function cI(){return cI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cI.apply(this,arguments)}const dI=(0,p.css)(["",";"],(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),uI=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"basicColorList__SwatchList",componentId:"sc-10h6tzp-0"})(["display:flex;max-width:100%;flex-wrap:wrap;gap:6px;"]),pI=(0,p.default)(Swatch).attrs((e=>{let{isSelected:t}=e;return{role:"option","aria-selected":t}})).withConfig({displayName:"basicColorList__StyledSwatch",componentId:"sc-10h6tzp-1"})(["",";",""],dI,(e=>{let{isSelected:t,theme:n}=e;return t&&(0,p.css)(["border:2px solid ",";"],n.colors.border.defaultActive)}));function mI(e){if(!e)return"";const t=(0,Yr.default)(e);return t.backgroundColor||t.backgroundImage}function ConditionalTooltip(e){let{tooltip:t,children:n}=e;return t?c.createElement(Tooltip,{title:t},n):n}const fI=function BasicColorList(e){let{color:t,colors:n,handleClick:r,allowsOpacity:a,allowsGradient:o,isLocal:l=!1,isGlobal:i=!1,isEditMode:s,changedStyle:p,...m}=e;const f=mI(t),g=(0,u.useRef)(null);$C({ref:g});const h=n.map(mI).findIndex((e=>f===e));let b=0;const E=l?(0,d.__)("local","web-stories"):(0,d.__)("global","web-stories"),y="background"===p;return c.createElement(c.Fragment,null,n.length>0&&c.createElement(uI,cI({ref:g},m),n.map(((e,t)=>{const n=!a&&oS(e),i=!o&&lS(e),u=(n||i)&&!s;let p=null;u&&!s&&(p=n?(0,d.__)("Page background colors cannot have an opacity.","web-stories"):(0,d.__)("Gradient not allowed for Text","web-stories"));const m=mI(e),g=s?(0,We.default)(
/* translators: First %s is the color type, second %s is the color as a string */
(0,d.__)("Delete %1$s color: %2$s","web-stories"),E,m):m,y=f===m;let _=t===b?0:-1;return h>=0?_=y?0:-1:u&&t===b&&(b++,_=-1),c.createElement(ConditionalTooltip,{key:m,tooltip:p},c.createElement(pI,{onClick:()=>r(e,l),pattern:e,isSelected:y,isDisabled:u,tabIndex:_,title:g},s&&c.createElement(Ju.default,null)))})),(l||i)&&c.createElement(sI,{isLocal:l,isGlobal:i,isBackground:y})),!n.length&&(l||i)&&c.createElement(sI,{isLocal:l,isGlobal:i,isBackground:y}))};var gI=n(98415);const hI=p.default.label.withConfig({displayName:"confirmationDialog__Label",componentId:"sc-bvt4vo-0"})(["margin-left:12px;"]),bI=p.default.footer.withConfig({displayName:"confirmationDialog__CheckboxWrapper",componentId:"sc-bvt4vo-1"})(["display:flex;margin-top:12px;padding:14px 0 0 9px;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary}));const EI=function ConfirmationDialog(e){let{onClose:t,onPrimary:n}=e;const[r,a]=(0,u.useState)(Fo.getItemByKey(Bo[XS])),o=`cb-${(0,pe.default)()}`;return c.createElement(y,{isOpen:!0,onClose:t,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:n,primaryText:(0,d.__)("Delete","web-stories")},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("This is a global color. Deleting this color will remove it from the Saved Colors across all stories and the color will no longer be available to any other users on the site.","web-stories")),c.createElement(bI,null,c.createElement(gI.Checkbox,{id:o,checked:r,onChange:()=>{Fo.setItemByKey(Bo[XS],!r),a(!r)}}),c.createElement(hI,{htmlFor:o},c.createElement($e.Text,{as:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Don't ask for confirmation again.","web-stories")))))};const yI=function(e){let{onEmpty:t=(()=>{})}=e;const{currentStoryStyles:n,globalStoryStyles:r,updateStory:a}=Ya((e=>{let{state:{story:{globalStoryStyles:t,currentStoryStyles:n}},actions:{updateStory:r}}=e;return{currentStoryStyles:n,globalStoryStyles:t,updateStory:r}})),{colors:o}=r||{},{colors:l}=n||{},i=l?.length>0,s=(0,u.useCallback)((e=>{const n=o.filter((t=>t!==e));a({properties:{globalStoryStyles:{...r||{},colors:n}}}),0!==n.length||i||t()}),[o,a,i,r,t]),c=(0,u.useCallback)((e=>{const n=l.filter((t=>t!==e));a({properties:{currentStoryStyles:{colors:n}}}),0===n.length&&0===o.length&&t()}),[o,l,a,t]);return{deleteLocalColor:c,deleteGlobalColor:s}},_I=p.default.div.withConfig({displayName:"basicColorPicker__Body",componentId:"sc-c2cm2c-0"})(["display:flex;flex-direction:column;padding:8px 16px 0;overflow:auto;",";"],A.scrollbarCSS),vI=p.default.div.withConfig({displayName:"basicColorPicker__Footer",componentId:"sc-c2cm2c-1"})(["padding:8px 16px 16px;display:flex;flex-direction:column;"]),wI=p.default.div.withConfig({displayName:"basicColorPicker__SavedColors",componentId:"sc-c2cm2c-2"})(["border-bottom:1px solid ",";padding-bottom:16px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),TI=p.default.div.withConfig({displayName:"basicColorPicker__DefaultColors",componentId:"sc-c2cm2c-3"})([""]),SI=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"basicColorPicker__Label",componentId:"sc-c2cm2c-4"})(["color:",";margin:12px 0 10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),CI=(0,p.default)(SI).withConfig({displayName:"basicColorPicker__DefaultText",componentId:"sc-c2cm2c-5"})(["margin:0 0 0 8px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),II=(0,p.default)(m.Button).withConfig({displayName:"basicColorPicker__StyledButton",componentId:"sc-c2cm2c-6"})(["display:flex;justify-content:center;align-items:center;gap:4px;flex-basis:100%;"]),xI=(0,p.default)($e.Text).withConfig({displayName:"basicColorPicker__StyledText",componentId:"sc-c2cm2c-7"})(["padding:5px 10px;"]),AI=(0,p.default)(zy).withConfig({displayName:"basicColorPicker__StyledPlus",componentId:"sc-c2cm2c-8"})(["width:32px;margin:-8px 0;"]),kI=p.default.div.withConfig({displayName:"basicColorPicker__EyedropperWrapper",componentId:"sc-c2cm2c-9"})(["display:flex;"]);const OI=function BasicColorPicker(e){let{color:t,handleColorChange:n,allowsOpacity:r,allowsGradient:a,allowsSavedColors:o,showCustomPicker:l,handleClose:i,showDialog:s,setShowDialog:p,changedStyle:g,hasEyedropper:h,allowsSavedColorDeletion:b,shouldCloseOnSelection:E}=e;const{savedColors:y,storyColors:_}=Ya((e=>({savedColors:e.state.story?.globalStoryStyles?.colors||[],storyColors:e.state.story?.currentStoryStyles?.colors||[]}))),[v,w]=(0,u.useState)(!1),[T,S]=(0,u.useState)(null),C=_.length>0||y.length>0,{initEyedropper:I}=GT({onChange:e=>n({color:e})}),{deleteLocalColor:x,deleteGlobalColor:A}=yI({onEmpty:()=>w(!1)}),k=e=>{n(e),E&&i()},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!v)return void k(e);if(t)return void x(e);const n=Fo.getItemByKey(Bo[XS]);n?A(e):(p(!0),S(e))},P=!E||b;return c.createElement(c.Fragment,null,P&&c.createElement(xC,{handleClose:i,isEditMode:v,setIsEditMode:w,hasPresets:C&&o},c.createElement(CI,null,(0,d.__)("Color","web-stories"))),c.createElement(_I,null,h&&c.createElement(kI,null,c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,"aria-label":(0,d.__)("Pick a color from canvas","web-stories"),onClick:I(),onPointerEnter:I(!1)},c.createElement(Ty,null)),c.createElement(xI,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Sample color","web-stories"))),o&&c.createElement(wI,null,c.createElement(SI,{id:"colorpicker-story-colors-title"},(0,d.__)("Current story","web-stories")),c.createElement(fI,{color:t,colors:_,handleClick:O,isLocal:!0,allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-story-colors-title",isEditMode:v,"data-testid":"saved-story-colors",changedStyle:g}),c.createElement(SI,{id:"colorpicker-saved-colors-title"},(0,d.__)("Saved colors","web-stories")),c.createElement(fI,{color:t,colors:y,isGlobal:!0,handleClick:O,allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-saved-colors-title",isEditMode:v,changedStyle:g})),c.createElement(TI,null,c.createElement(SI,{id:"colorpicker-default-colors-title"},(0,d.__)("Default","web-stories")),c.createElement(fI,{color:t,colors:JS,handleClick:e=>{k(e),w(!1)},allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-default-colors-title",isEditMode:!1}))),c.createElement(vI,null,c.createElement(II,{onClick:l,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Custom","web-stories"),c.createElement(AI,null))),s&&c.createElement(EI,{onClose:()=>p(!1),onPrimary:()=>{A(T),S(null),p(!1)}}))},PI=p.default.div.withConfig({displayName:"colorPicker__Container",componentId:"sc-1xsejx6-0"})(["border-radius:8px;background:",";user-select:none;display:flex;flex-direction:column;gap:12px;align-items:stretch;",";overflow:hidden;&.picker-appear{opacity:0.01;margin-top:-10px;&.picker-appear-active{opacity:1;margin-top:0;transition:300ms ease-out;transition-property:opacity,margin-top;}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{maxHeight:t}=e;return t?`\n          height: ${t}px;\n          width: ${208+A.SCROLLBAR_WIDTH}px;\n        `:"\n          width: 208px;\n        "}));const NI=function ColorPicker(e){let{onChange:t,isEyedropperActive:n=!1,color:r=null,allowsGradient:a=!1,allowsOpacity:o=!0,allowsSavedColors:l=!1,hasEyedropper:i=!0,maxHeight:s=null,onClose:p=(()=>{}),changedStyle:m="background",onDimensionChange:f=(()=>{}),allowsSavedColorDeletion:g=!0,shouldCloseOnSelection:h=!1}=e;const[b,E]=(0,u.useState)(!1),[y,_]=(0,u.useState)(lS(r)),v=(0,u.useCallback)((()=>{_(!0),f()}),[f]),w=(0,u.useCallback)((()=>{_(!1),f()}),[f]),{actions:{pushTransform:T}}=(0,I.useTransform)(),{selectedElementIds:S=[]}=Ya((e=>{let{state:{selectedElementIds:t}}=e;return{selectedElementIds:t}})),C=(0,u.useDebouncedCallback)(t,100,{leading:!0}),x=(0,u.useRef)(!0);(0,u.useEffect)((()=>()=>{x.current=!1}),[]);const A=(0,u.useCallback)((e=>{x.current?C(e):t(e),S.forEach((t=>{T(t,{color:e,style:m,staticTransformation:!0})}))}),[t,C,S,m,T]),k=(0,u.useRef)();(0,u.useFocusOut)(k,(()=>{n||b||p()}),[n,b]);const O=(0,u.useRef)(document.activeElement),P=(0,u.useCallback)((e=>{O.current&&O.current.focus(),p(e)}),[p]);(0,fr.useKeyDownEffect)(k,"esc",P),vS({ref:k});const N=y?UC:OI;return c.createElement(Cv.default,{nodeRef:k,in:!0,appear:!0,classNames:"picker",timeout:300},c.createElement(PI,{role:"dialog","aria-label":(0,d.__)("Color and gradient picker","web-stories"),ref:k,maxHeight:s},c.createElement(N,{color:r,allowsGradient:a,allowsOpacity:o,handleColorChange:A,showCustomPicker:v,hideCustomPicker:w,handleClose:P,hasEyedropper:i,allowsSavedColors:l,showDialog:b,setShowDialog:E,changedStyle:m,allowsSavedColorDeletion:g,shouldCloseOnSelection:h})))};function RI(){return RI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RI.apply(this,arguments)}const MI=p.default.div.withConfig({displayName:"colorInput__Preview",componentId:"sc-1h4cp44-0"})(["height:36px;color:",";cursor:pointer;position:relative;width:100%;padding:0;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),LI=(0,p.default)(rS).withConfig({displayName:"colorInput__Input",componentId:"sc-1h4cp44-1"})(["min-width:100px;div{background-color:transparent;}input{padding-left:26px;}"]),DI=(0,p.default)(Tooltip).withConfig({displayName:"colorInput__Tooltip",componentId:"sc-1h4cp44-2"})(["width:100%;height:100%;"]),BI=(0,p.css)(["position:absolute;top:0;left:0;border-radius:50px;width:24px;height:24px;"]),FI=(0,p.css)(["overflow:hidden;border:1px solid ",";outline:none;background:transparent;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),HI=(0,p.css)(["",";padding-right:6px;"],rp),UI=(0,p.default)(MI).attrs({as:"button",type:"button"}).withConfig({displayName:"colorInput__ColorButton",componentId:"sc-1h4cp44-3"})(["border-radius:4px;"," display:flex;&:focus{box-shadow:0px 0px 0 2px ",",0px 0px 0 4px ",";border-color:",";}"],FI,(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.defaultHover})),jI=p.default.div.withConfig({displayName:"colorInput__ColorPreview",componentId:"sc-1h4cp44-4"})([""," top:6px;left:6px;padding:0;background:transparent;cursor:pointer;"],BI),zI=p.default.div.withConfig({displayName:"colorInput__TextualPreview",componentId:"sc-1h4cp44-5"})(["padding:6px 12px 6px 38px;text-align:left;flex-grow:1;height:32px;"]),GI=(0,p.default)(zI).withConfig({displayName:"colorInput__MixedLabel",componentId:"sc-1h4cp44-6"})(["align-self:center;padding:6px 6px 6px 38px;"]),YI=(0,p.default)(Swatch).withConfig({displayName:"colorInput__StyledSwatch",componentId:"sc-1h4cp44-7"})(["",";"],np),ZI=p.default.div.withConfig({displayName:"colorInput__ChevronContainer",componentId:"sc-1h4cp44-8"})(["width:",";display:flex;justify-content:",";align-items:center;align-self:center;svg{width:24px;height:24px;}"],(e=>{let{isSmall:t}=e;return t?"28px":"58px"}),(e=>{let{isSmall:t}=e;return t?"center":"flex-end"})),WI=()=>n.e(341).then(n.bind(n,66286)),VI=(0,u.forwardRef)((function ColorInput(e,t){let{onChange:n,value:r=null,label:a=null,changedStyle:o,pickerPlacement:l=Bd.PLACEMENT.RIGHT_START,isInDesignMenu:i=!1,hasInputs:s=!0,pickerProps:p,spacing:m,tooltipPlacement:f,colorFocusTrap:g=!1,...h}=e;const b=(0,u.useRef)(),E=(0,u.useRef)(),y=r===ve;r=y?"":r;const _=r?ZT(r):{color:{r:0,g:0,b:0,a:0}},v=zT(r),[w,T]=(0,u.useState)(!1),S=(0,u.useRef)(null),{isEyedropperActive:C}=Vs((e=>{let{state:{isEyedropperActive:t}}=e;return{isEyedropperActive:t}})),[I,x]=(0,u.useState)(l),{refs:{sidebar:A}}=Zm(),{styleConstants:{topOffset:k}={}}=U(),O=(0,u.useCallback)((e=>{if(l?.startsWith("top")){const{top:t}=e.current?.getBoundingClientRect()||{};t<=k&&x(l.replace("top","bottom"))}}),[l,k]),P=r?.type,N=(!P||"solid"===P)&&s,R={onClick:()=>T(!0),"aria-label":a,onPointerEnter:()=>WI(),onFocus:()=>WI(),tabIndex:h.tabIndex};(0,u.useUnmount)((()=>()=>T(!1)));const M=(0,u.useCallback)((()=>T(!1)),[]),L=(0,d.__)("Open color picker","web-stories"),D=i?HI:rp;return c.createElement(c.Fragment,null,N?c.createElement(MI,{ref:S},g?c.createElement(_S,{ref:E,inputRef:b,inputLabel:a},c.createElement(LI,RI({ref:b,"aria-label":a,value:y?null:r,onChange:n,isIndeterminate:y,placeholder:y?we:"",containerStyleOverride:D,id:(0,pe.default)(),onKeyDown:e=>yS(e,E),inputClassName:hS.CONTEXT_MENU_SKIP_ELEMENT},h))):c.createElement(LI,RI({ref:t,"aria-label":a,value:y?null:r,onChange:n,isIndeterminate:y,placeholder:y?we:"",containerStyleOverride:D,id:(0,pe.default)()},h)),c.createElement(jI,null,c.createElement(DI,{title:L,hasTail:!0,placement:f},c.createElement(YI,RI({isSmall:!0,pattern:_,id:(0,pe.default)()},R))))):c.createElement(DI,{title:L,hasTail:!0,placement:f},c.createElement(UI,RI({ref:S,id:(0,pe.default)()},R),c.createElement(jI,null,c.createElement(Swatch,{isPreview:!0,role:"status",tabIndex:"-1",pattern:_,isIndeterminate:y})),s?c.createElement(zI,null,c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},v)):c.createElement(c.Fragment,null,y&&c.createElement(GI,null,c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"span"},we)),c.createElement(ZI,{isSmall:y},c.createElement(ah.default,null))))),c.createElement(bS.Popup,{anchor:S,dock:i?null:A,isOpen:w&&!C,placement:I,spacing:m,refCallback:O,renderContents:e=>{let{propagateDimensionChange:t}=e;return c.createElement(NI,RI({color:y?null:r,isEyedropperActive:C,onChange:n,onClose:M,changedStyle:o,onDimensionChange:t},p))}}))})),$I=VI;var qI=n(93302),KI=n.n(qI);function XI(e,t){let{allowEmpty:n,isFloat:r,min:a,max:o}=t;if(`${e}`.length>0){let t=r?parseFloat(e):parseInt(e);return void 0!==a&&(t=Math.max(a,t)),void 0!==o&&(t=Math.min(o,t)),isNaN(t)?null:t}return n?"":null}const QI=e=>{let{allowEmpty:t,isFloat:n,max:r,min:a,onChange:o,value:l,ref:i}=e;const s=(0,u.useRef)(null),c=i||s,d=(0,u.useRef)(l),p=(0,u.useRef)(!1),[m,f]=(0,u.useState)(l),g=(0,u.useMemo)((()=>({allowEmpty:t,isFloat:n,max:r,min:a})),[t,n,r,a]),h=(0,u.useCallback)((e=>{let t=XI(d.current,g);if(!p.current){const e=XI(m,g);null!==e&&(t=e)}p.current=!1,null!==t&&(f(t),t!==d.current&&o(e,t))}),[m,o,g]),b=(0,u.useCallback)((e=>{f(e.target.value)}),[]),E=(0,u.useCallback)((e=>{const{altKey:t,key:n}=e,l=function(e,t){let{allowEmpty:n,isFloat:r,max:a,min:o}=t;if(n&&0===`${e}`.length)return!0;const l=r?parseFloat(e):parseInt(e);return!(void 0!==o&&l<o||void 0!==a&&l>a||isNaN(l))}(m,g);let i=l?XI(m,g):0;const s=KI()(g.isFloat&&t?.1:1);"ArrowUp"===n?i=void 0!==r?Math.min(r,KI()(i).plus(s)):KI()(i).plus(s):"ArrowDown"===n&&(i=void 0!==a?Math.max(a,KI()(i).minus(s)):KI()(i).minus(s)),o(e,Number(i))}),[m,r,a,o,g]),y=(0,u.useCallback)((()=>{f(d.current),p.current=!0,c&&c.current?.blur()}),[c]);return(0,u.useEffect)((()=>{d.current=l,f(l)}),[l]),{currentValue:m,inputRef:c,handleBlur:h,handleChange:b,handleEsc:y,handleKeyUpAndDown:E,isIndeterminate:d.current===m}};function JI(){return JI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JI.apply(this,arguments)}const ex=(0,u.forwardRef)((function NumericInput(e,t){let{allowEmpty:n,isFloat:r,onChange:a,max:o,min:l,value:i="",isIndeterminate:s,...d}=e;const{currentValue:u,handleBlur:p,handleChange:m,handleEsc:f,handleKeyUpAndDown:g,inputRef:h,isIndeterminate:b}=QI({allowEmpty:n,isFloat:r,onChange:a,max:o,min:l,value:i,isIndeterminate:s,ref:t});return(0,fr.useKeyDownEffect)(h,{key:["up","alt+up","down","alt+down"],editable:!0},g,[g]),(0,fr.useKeyDownEffect)(h,{key:["escape"],editable:!0},f,[f]),(0,fr.useKeyDownEffect)(h,{key:["enter"],editable:!0},p,[p]),c.createElement(tS,JI({ref:h,onBlur:p,onChange:m,value:String(u),isIndeterminate:b&&s},d))}));const tx=function(e){if(!e||e===ve)return null;if(!("solid"===e.type||!e.type)){const{alpha:t=1}=e;return 100*t}const{color:{a:t=1}}=e;return Math.round(100*t)};function nx(){return nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nx.apply(this,arguments)}const rx=(0,p.default)(ex).withConfig({displayName:"opacityInput__Input",componentId:"sc-xy6710-0"})(["min-width:100px;div{background-color:transparent;}"]),ax=(0,p.css)(["",";width:76px;padding-right:6px;"],rp),ox=(0,u.forwardRef)((function OpacityInput(e,t){let{value:n,onChange:r,isInDesignMenu:a,...o}=e;const[l,i]=(0,u.useState)(""),s=(0,u.useCallback)(((e,t)=>{i(t),isNaN(t)||r(t/100)}),[r]),p=(0,u.useCallback)((()=>i(tx(n))),[n]);(0,u.useEffect)((()=>p()),[p,n]);const m=a?ax:rp;return c.createElement(rx,nx({ref:t,"aria-label":(0,d.__)("Opacity","web-stories"),onChange:s,value:l,unit:(0,d._x)("%","Percentage","web-stories"),suffix:c.createElement(wh,null),min:0,max:100,allowEmpty:!1,isFloat:!1,containerStyleOverride:m,id:(0,pe.default)()},o))})),lx=p.default.div.withConfig({displayName:"activeOpacity__OpacityWrapper",componentId:"sc-9gk8t7-0"})(["width:",";"],(e=>{let{isInDesignMenu:t}=e;return t?"calc(39% - 10px)":"calc(47% - 10px)"})),ix=e=>{let{handleOpacityChange:t,isInDesignMenu:n,opacityFocusTrap:r,tabIndex:a,value:o}=e;const l=(0,u.useRef)(),i=(0,u.useRef)();return r?c.createElement(_S,{ref:l,inputRef:i,inputLabel:(0,d.__)("Opacity","web-stories"),styleOverride:(0,p.css)(["width:",";"],n?"calc(35%)":"calc(45%)")},c.createElement(lx,{isInDesignMenu:n},c.createElement(ox,{ref:i,tabIndex:a,inputClassName:hS.CONTEXT_MENU_SKIP_ELEMENT,value:o,onChange:t,isInDesignMenu:n,onKeyDown:e=>yS(e,l)}))):c.createElement(lx,{isInDesignMenu:n},c.createElement(ox,{tabIndex:a,value:o,onChange:t,isInDesignMenu:n}))},sx={FLOATING_MENU:{x:0,y:12},DEFAULT_SIDEBAR:{x:12,y:0}},cx=(0,p.css)(["display:flex;align-items:center;"]),dx=p.default.section.withConfig({displayName:"color__Container",componentId:"sc-c7i660-0"})([""," gap:","px;width:",";"],cx,(e=>{let{isInDesignMenu:t}=e;return t?6:8}),(e=>{let{width:t}=e;return t?`${t}px`:"inherit"}));dx.propTypes={isInDesignMenu:Ma().bool,width:Ma().number};const ux=p.default.div.withConfig({displayName:"color__ColorInputsWrapper",componentId:"sc-c7i660-1"})([""," gap:","px;"],cx,(e=>{let{isInDesignMenu:t}=e;return t?0:6})),px=p.default.div.withConfig({displayName:"color__Space",componentId:"sc-c7i660-2"})(["width:8px;height:1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),mx=p.default.div.withConfig({displayName:"color__InputWrapper",componentId:"sc-c7i660-3"})(["",""],(e=>{let{hasInputs:t}=e;return t&&"width: calc(53% - 10px);"})),fx=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"color__EyeDropperButton",componentId:"sc-c7i660-4"})(["",";"],np),gx=(0,d.__)("Color input","web-stories"),hx=(0,u.forwardRef)((function Color(e,t){let{onChange:n,allowsGradient:r=!1,allowsOpacity:a=!0,allowsSavedColors:o=!1,value:l=null,label:i=null,containerLabelBase:s=gx,changedStyle:p=null,hasEyedropper:m=!1,pickerHasEyedropper:f=!0,maxHeight:g=null,shouldCloseOnSelection:h=!1,allowsSavedColorDeletion:b=!0,pickerPlacement:E=Bd.PLACEMENT.RIGHT_START,isInDesignMenu:y=!1,hasInputs:_=!0,width:v,tabIndex:w,opacityFocusTrap:T,colorFocusTrap:S}=e;const C=(0,u.useCallback)((e=>n(YT(l,e))),[l,n]),I=(0,We.default)(
/* translators: 1: the input section in the editor. 2: color input label name. */
(0,d.__)("%1$s: %2$s","web-stories"),s,i),x=l!==ve&&Boolean(zT(l))&&_,{initEyedropper:A}=GT({onChange:e=>n({color:e})}),k=(0,d.__)("Pick a color from canvas","web-stories"),O=y||m?Bd.PLACEMENT.BOTTOM:Bd.PLACEMENT.BOTTOM_START,P=v&&l===ve;return c.createElement(dx,{"aria-label":I,isInDesignMenu:y,width:!P&&v?v:null},m&&c.createElement(Tooltip,{title:k,hasTail:!0,placement:y?Bd.PLACEMENT.BOTTOM:Bd.PLACEMENT.BOTTOM_START},c.createElement(fx,{id:(0,pe.default)(),tabIndex:w,"aria-label":k,onClick:A(),onPointerEnter:A(!1)},c.createElement(Ty,null))),c.createElement(ux,{isInDesignMenu:y},c.createElement(mx,{hasInputs:_},c.createElement($I,{ref:t,tabIndex:w,onChange:n,value:l,label:i,changedStyle:p,pickerPlacement:E,hasInputs:_,isInDesignMenu:y,spacing:y?sx.FLOATING_MENU:sx.DEFAULT_SIDEBAR,tooltipPlacement:O,colorFocusTrap:S,pickerProps:{allowsGradient:r,allowsOpacity:a,allowsSavedColors:o,hasEyedropper:f,allowsSavedColorDeletion:b,maxHeight:g,shouldCloseOnSelection:h}})),a&&x&&c.createElement(c.Fragment,null,c.createElement(px,null),c.createElement(ix,{handleOpacityChange:C,isInDesignMenu:y,opacityFocusTrap:T,tabIndex:w,value:l}))))})),bx=hx;function Ex(){return Ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ex.apply(this,arguments)}const yx=(0,p.css)(["width:100%;height:100%;position:absolute;top:0;left:0;border-radius:",";"],(e=>{let{theme:t}=e;return t.borders.radius.small})),_x=p.default.div.withConfig({displayName:"filterToggle__Overlay",componentId:"sc-1xtaed1-0"})(["",";"],yx),vx=p.default.div.withConfig({displayName:"filterToggle__Filter",componentId:"sc-1xtaed1-1"})(["",";",";"],yx,(e=>{let{filter:t}=e;return(0,Yr.default)(t)})),wx=p.default.button.withConfig({displayName:"filterToggle__Button",componentId:"sc-1xtaed1-2"})((e=>{let{theme:t}=e;return(0,p.css)(["border-radius:",";width:100%;height:48px;position:relative;display:flex;align-items:center;justify-content:space-around;box-sizing:border-box;padding:0;margin:0;background:transparent;border:none;cursor:pointer;",";img{width:100%;height:100%;border-radius:",";}","{",";}&:active > ","{box-shadow:0px 0px 0 2px ",",0px 0px 0 3px ",";}&:disabled{pointer-events:none;","{background-color:",";}}transition:background-color ",",color ",";"],t.borders.radius.small,np,t.borders.radius.small,_x,(e=>{let{isToggled:n}=e;return n&&`\n        box-shadow:\n          0px 0px 0 2px ${t.colors.bg.secondary},\n          0px 0px 0 3px ${t.colors.fg.primary}`}),_x,t.colors.bg.secondary,t.colors.fg.primary,_x,t.colors.opacity.black64,f.BUTTON_TRANSITION_TIMING,f.BUTTON_TRANSITION_TIMING)})),Tx=p.default.div.withConfig({displayName:"filterToggle__Wrapper",componentId:"sc-1xtaed1-3"})(["width:60px;"]),Sx=(0,p.default)($e.Text).attrs({forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"filterToggle__StyledText",componentId:"sc-1xtaed1-4"})(["color:",";margin-top:8px;text-align:center;width:100%;display:block;"],(e=>{let{theme:t}=e;return t.colors.border.defaultActive}));const Cx=function FilterToggle(e){let{isToggled:t,filter:n=null,children:r,label:a,...o}=e;return c.createElement(Tx,null,c.createElement(wx,Ex({},o,{isToggled:t,"aria-pressed":t}),r,c.createElement(vx,{filter:n}),c.createElement(_x,null)),a&&c.createElement(Sx,null,a))},Ix={CIRCLE:"circle",RECTANGLE:"rectangle",NONE:"none"};var xx,Ax,kx=n(36514);function Ox(){return Ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ox.apply(this,arguments)}const SvgLandscape=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ox({fill:"none",viewBox:"0 0 100 93",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,xx||(xx=c.createElement("path",{d:"M33 52 .5 93h99L75 60 58 82z",fill:"currentColor",opacity:.2})),Ax||(Ax=c.createElement("circle",{cx:79,cy:13,fill:"currentColor",opacity:.1,r:13})))},Px=(0,c.memo)(SvgLandscape);function Nx(){return Nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nx.apply(this,arguments)}const Rx=p.default.section.withConfig({displayName:"mediaInput__MediaRectangle",componentId:"sc-1aevzta-0"})(["width:100%;height:100%;background-color:",";border-radius:4px;position:relative;"],(e=>{let{theme:t}=e;return t.colors.bg.primary})),Mx=(0,p.default)(Rx).withConfig({displayName:"mediaInput__MediaCircle",componentId:"sc-1aevzta-1"})(["border-radius:100px;height:100%;width:100%;"]),Lx=p.default.div.withConfig({displayName:"mediaInput__EmptyMediaWrapper",componentId:"sc-1aevzta-2"})([""]),Dx=p.default.div.withConfig({displayName:"mediaInput__ImageWrapper",componentId:"sc-1aevzta-3"})(["border-radius:","px;overflow:hidden;height:100%;display:flex;"],(e=>{let{variant:t}=e;return t===Ix.CIRCLE?100:4})),Bx=p.default.div.withConfig({displayName:"mediaInput__DefaultImageWrapper",componentId:"sc-1aevzta-4"})(["padding:8px;"]),Fx=(0,p.default)(Px).withConfig({displayName:"mediaInput__DefaultImage",componentId:"sc-1aevzta-5"})(["width:100%;height:100%;display:block;color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white})),Hx=p.default.img.withConfig({displayName:"mediaInput__Img",componentId:"sc-1aevzta-6"})(["width:100%;height:100%;object-fit:cover;"]),Ux=(0,p.css)(["min-width:100px;margin-top:0;li{display:block;}"]),jx=(0,p.default)(m.Button).withConfig({displayName:"mediaInput__Button",componentId:"sc-1aevzta-7"})((e=>{let{showImage:t}=e;return(0,p.css)(["background-color:",";position:relative;"," &:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),t&&(0,p.css)(["position:absolute;bottom:-8px;right:-8px;"]),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryHover}))})),zx={[Ix.RECTANGLE]:Rx,[Ix.CIRCLE]:Mx,[Ix.NONE]:Lx},Gx=(0,p.keyframes)(["0%,20%{color:transparent;text-shadow:6px 0 0 transparent,12px 0 0 transparent;}40%{color:white;text-shadow:6px 0 0 transparent,12px 0 0 transparent;}60%{text-shadow:6px 0 0 ",",12px 0 0 transparent;}80%,100%{text-shadow:6px 0 0 ",",12px 0 0 ",";}"],(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white})),Yx=p.default.div.withConfig({displayName:"mediaInput__LoadingDots",componentId:"sc-1aevzta-8"})(["position:absolute;top:0px;left:0px;width:100%;height:100%;pointer-events:none;border-radius:50%;flex-direction:column;justify-content:center;align-items:center;display:flex;&:after{pointer-events:none;color:",";content:'.';font-weight:bold;animation:"," 1s steps(5,end) infinite;margin-left:-12px;}"],(e=>{let{theme:t}=e;return t.colors.standard.white}),Gx),Zx=(0,u.forwardRef)((function Media(e,t){let{className:n,onBlur:r,alt:a=(0,d.__)("Preview image","web-stories"),value:o,ariaLabel:l=(0,d.__)("Choose an image","web-stories"),variant:i=Ix.RECTANGLE,isLoading:s,menuOptions:p=[],onMenuOption:m,openMediaPicker:g,canUpload:h=!0,menuProps:b={},imgProps:E={},...y}=e;const _=p?.length>0,[v,w]=(0,u.useState)(!1),T=(0,u.useMemo)((()=>`list-${(0,pe.default)()}`),[]),S=(0,u.useMemo)((()=>`button-${(0,pe.default)()}`),[]),C=(0,u.useRef)(null),I=zx[i],x=[{group:p}];return c.createElement(I,{className:n},i!==Ix.NONE&&c.createElement(Dx,{variant:i},o?c.createElement(Hx,{src:o,alt:a,crossOrigin:"anonymous",decoding:"async",width:E?.width||null,height:E?.height||null}):c.createElement(Bx,null,c.createElement(Fx,null)),s&&c.createElement(Yx,null)),h&&c.createElement(Fd.BaseTooltip,{title:_?null:(0,d.__)("Open media picker","web-stories")},c.createElement(jx,Nx({ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),C.current=e},id:S,showImage:i!==Ix.NONE,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,"aria-label":l,onClick:_?()=>w(!0):g,"aria-owns":_?T:null,"aria-pressed":v,"aria-expanded":v},y),c.createElement(dy.default,null))),c.createElement(bS.Popup,{placement:Bd.PLACEMENT.BOTTOM_END,anchor:C,isOpen:v},c.createElement(kx.Menu,Nx({parentId:S,listId:T,hasMenuRole:!0,options:x,onMenuItemClick:(e,t)=>{m(e,t),w(!1)},onDismissMenu:()=>w(!1),menuStylesOverride:Ux},b))))}));function Wx(){return Wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wx.apply(this,arguments)}const Vx=(0,p.default)(Zx).withConfig({displayName:"media__StyledInput",componentId:"sc-17cx4v4-0"})(["button:focus{","}"],(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),MediaInputField=e=>{let{open:t,dropdownOptions:n,onChange:r,forwardedRef:a,value:o,...l}=e;const i=(0,u.useCallback)(((e,n)=>{switch(n){case"edit":t(e);break;case"remove":case"reset":r(null)}}),[r,t]);return c.createElement(Vx,Wx({onMenuOption:i,menuOptions:n,openMediaPicker:t,ref:a,value:o===ve?null:o},l))};const $x=(0,u.forwardRef)((function(e,t){let{buttonInsertText:n=(0,d.__)("Choose an image","web-stories"),menuOptions:r=[],onChange:a,onChangeErrorText:o=(0,d.__)("Unable to use this file type, please select a valid image type.","web-stories"),title:l=(0,d.__)("Choose an image","web-stories"),type:i="image",value:s,cropParams:p,...m}=e;const{MediaUpload:f}=U(),g=(0,u.useCallback)((e=>{const n=[{label:(0,d.__)("Edit","web-stories"),value:"edit"},{label:(0,d.__)("Remove","web-stories"),value:"remove"},{label:(0,d.__)("Reset","web-stories"),value:"reset"}],o=s===ve?[]:n.filter((e=>{let{value:t}=e;return r.includes(t)}));return c.createElement(MediaInputField,Wx({open:e,onChange:a,dropdownOptions:o,forwardedRef:t,value:s},m))}),[s,a,t,m,r]);return c.createElement(f,{title:l,buttonInsertText:n,onSelect:a,onSelectErrorMessage:o,type:i,cropParams:p,render:g})})),qx=$x;function Kx(){return Kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kx.apply(this,arguments)}const Xx=(0,p.default)(qx).withConfig({displayName:"linkIcon__StyledMedia",componentId:"sc-1078kj7-0"})(["width:54px;height:54px;"]);const Qx=function LinkIcon(e){let{handleChange:t,icon:n,isLoading:r=!1,...a}=e;const{allowedMimeTypes:{image:o},capabilities:{hasUploadMediaAction:l}}=U(),i=(0,u.useMemo)((()=>o.map((e=>Pt(e))).flat()),[o]),s=(0,u.useMemo)((()=>{let e=(0,d.__)("No image file types are currently supported.","web-stories");return i.length&&(e=(0,We.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as an icon.","web-stories"),(0,xt.default)(i))),e}),[i]),p=l?["edit","remove"]:["remove"];return c.createElement(Xx,Kx({value:n||"",cropParams:{width:96,height:96},onChange:t,onChangeErrorText:s,title:(0,d.__)("Select as link icon","web-stories"),ariaLabel:(0,d.__)("Edit link icon","web-stories"),buttonInsertText:(0,d.__)("Select as link icon","web-stories"),type:o,isLoading:r,variant:Ix.CIRCLE,canUpload:n&&!l||l,menuOptions:n?p:[]},a))},Jx=p.default.div.withConfig({displayName:"row__Row",componentId:"sc-1olml0k-0"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-bottom:16px;"," ",""],(e=>{let{spaceBetween:t=!0}=e;return t&&"justify-content: space-between;"}),(e=>{let{expand:t=!0}=e;return t&&"flex: 1;"}));function eA(){return eA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eA.apply(this,arguments)}const tA={MIN:2,MAX:2048},nA=(0,u.forwardRef)((function LinkInput(e,t){let{onChange:n,onBlur:r,onFocus:a,value:o="",hint:l,hasError:i,...s}=e;const u=(o||"").trim(),p=qr(Kr(u)),m=u.length>0&&!p;return c.createElement(Jx,null,c.createElement(tS,eA({ref:t,placeholder:(0,d.__)("Web address","web-stories"),onChange:e=>n(e.target.value),onBlur:()=>{if(u?.length){const e=Kr(u);e!==u&&n(e)}r&&r()},onFocus:a,value:o||"",minLength:tA.MIN,maxLength:tA.MAX,hasError:m||i,hint:m?(0,d.__)("Invalid web address.","web-stories"):l,containerStyleOverride:rp},s)))})),rA=nA;const aA=function MediaUploadButton(e){let{onInsert:t,renderButton:n,buttonInsertText:r}=e;const{allowedMimeTypes:{image:a,vector:o,video:l},MediaUpload:i}=U(),s=(0,u.useMemo)((()=>[...a,...o,...l]),[a,o,l]),p=(0,u.useMemo)((()=>s.map((e=>Pt(e))).flat()),[s]),{canTranscodeResource:m,resetWithFetch:f,postProcessingResource:g,optimizeVideo:h,optimizeGif:b}=Bi((e=>{let{state:{canTranscodeResource:t},actions:{resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}}=e;return{canTranscodeResource:t,resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}})),{isTranscodingEnabled:E}=Ja(),{showSnackbar:y}=(0,kr.useSnackbar)(),_=(0,u.useMemo)((()=>E?[...qa,...a,...o,...l]:[...a,...o,...l]),[a,o,l,E]),v=(0,u.useMemo)((()=>qa.filter((e=>!l.includes(e)))),[l]);let w=(0,d.__)("No file types are currently supported.","web-stories");p.length&&(w=(0,We.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,xt.default)(p)));const T=(0,u.useCallback)((e=>{try{E&&m(e)&&(v.includes(e.mimeType)&&h({resource:e}),"image/gif"===e.mimeType&&b({resource:e})),t(e),g(e)}catch(e){y({message:e.message,dismissible:!0})}}),[E,m,t,b,h,g,y,v]);return c.createElement(i,{onSelect:T,onSelectErrorMessage:w,onClose:f,type:_,render:n,buttonInsertText:r})};function oA(){return oA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oA.apply(this,arguments)}const lA="ON",iA="OFF",sA=p.default.h3.withConfig({displayName:"switch__VisuallyHiddenRadioGroupLabel",componentId:"sc-1kebe5q-0"})(["",";"],Iv.visuallyHidden),cA=p.default.span.withConfig({displayName:"switch__SlidingButton",componentId:"sc-1kebe5q-1"})(["position:absolute;display:block;top:0;left:0;width:50%;height:","px;border-radius:100px;transition:all 0.15s ease-out;z-index:0;",""],32,(e=>{let{hasOffset:t}=e;return t&&"left: 50%"})),dA=p.default.div.withConfig({displayName:"switch__SwitchContainer",componentId:"sc-1kebe5q-2"})(["position:relative;height:","px;display:flex;flex-direction:row;justify-content:center;align-items:center;appearance:none;background:",";border-radius:100px;color:",";cursor:pointer;",";"],32,(e=>{let{theme:t}=e;return t.colors.divider.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{disabled:t,theme:n}=e;return t?(0,p.css)(["cursor:default;background:",";","{background-color:",";}"],n.colors.divider.tertiary,cA,n.colors.interactiveBg.disable):(0,p.css)([":hover ","{background-color:",";}"],cA,n.colors.interactiveBg.primaryHover)})),uA=p.default.input.attrs({type:"radio"}).withConfig({displayName:"switch__HiddenRadioButton",componentId:"sc-1kebe5q-3"})(["position:absolute;height:0;width:0;padding:0;min-width:unset;appearance:none;border:0;box-shadow:none;margin:-1px;outline:none;overflow:hidden;opacity:0;"]),pA=(0,p.default)($e.Text).attrs({forwardedAs:"label",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"switch__RadioButtonLabel",componentId:"sc-1kebe5q-4"})(["display:flex;align-items:center;justify-content:center;flex:1;height:","px;width:50%;padding:0px 6px;z-index:1;color:",";background-color:",";border-radius:100px;cursor:pointer;overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap;transition:all 0.15s ease-out;"," :focus-within ~ span{",";}"],32,(e=>{let{isActive:t,theme:n}=e;return t?n.colors.inverted.fg.primary:n.colors.fg.secondary}),(e=>{let{isActive:t,theme:n}=e;return t&&n.colors.interactiveBg.primaryNormal}),(e=>{let{disabled:t,theme:n}=e;return t&&(0,p.css)(["cursor:default;color:",";"],n.colors.fg.disable)}),tp.focusCSS),mA=(0,u.forwardRef)((function(e,t){let{className:n,disabled:r,groupLabel:a,id:o,offLabel:l,onChange:i,onLabel:s,value:d,...p}=e;const m=(0,u.useMemo)((()=>({group:o||(0,pe.default)(),offInput:(0,pe.default)(),onInput:(0,pe.default)()})),[o]),f=(0,u.useCallback)((e=>{i(e,e.target.value===lA)}),[i]);return c.createElement(dA,{ref:t,className:n,role:"radiogroup","aria-labelledby":m.group,"aria-disabled":r,disabled:r},c.createElement(sA,{id:m.group},a),c.createElement(pA,{htmlFor:m.onInput,isActive:d,disabled:r},s,c.createElement(uA,oA({checked:d,disabled:r,id:m.onInput,onChange:f,value:lA},p))),c.createElement(pA,{htmlFor:m.offInput,isActive:!d,disabled:r},l,c.createElement(uA,oA({checked:!d,disabled:r,id:m.offInput,onChange:f,value:iA},p))),c.createElement(cA,{hasOffset:!d}))}));mA.displayName="Switch";Ma().string,Ma().bool,Ma().string.isRequired,Ma().string,Ma().string.isRequired,Ma().string.isRequired,Ma().func.isRequired,Ma().string.isRequired,Ma().bool;function fA(){return fA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fA.apply(this,arguments)}mA.defaultProps={value:!1};const gA=(0,p.default)(mA).withConfig({displayName:"switch__StyledSwitch",componentId:"sc-xytur2-0"})(["label:focus-within ~ span{",";}"],(e=>{let{theme:t}=e;return`box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;`}));const hA=function(e){let{offLabel:t=(0,d.__)("Off","web-stories"),onChange:n,onLabel:r=(0,d.__)("On","web-stories"),value:a,...o}=e;const l=(0,u.useRef)(null),i=(0,u.useCallback)((e=>{n(e,!a)}),[n,a]);return(0,fr.useKeyDownEffect)(l,["space","enter","left","right","up","down"],i,[i,a]),c.createElement(gA,fA({ref:l,offLabel:t,onChange:n,onLabel:r,value:a},o))};function bA(){return bA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bA.apply(this,arguments)}const EA=(0,u.forwardRef)(((e,t)=>{let{className:n,placeholder:r,value:a,disabled:o,rows:l,onChange:i,onBlur:s,...d}=e;const[p,m]=(0,u.useState)(a),f=(0,u.useCallback)((e=>{p!==a&&i(e)}),[p,i,a]);(0,u.useEffect)((()=>{m(a)}),[a]);const g=(0,u.useCallback)((e=>{f(e),s&&s(e)}),[s,f]);return c.createElement(UT,bA({placeholder:r,value:p},d,{containerStyleOverride:rp,onChange:e=>m(e.target.value),onBlur:g,ref:t}))}));EA.displayName="TextArea",EA.defaultProps={showTextLimit:!0,rows:2};const yA=EA,_A=(0,u.createContext)({isMultiple:!1,registerPresubmitHandler:()=>{}});const vA=function(e){return(0,u.useContextSelector)(_A,e??u.identity)};const wA=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const n=vA((e=>e.registerPresubmitHandler));(0,u.useEffect)((()=>n(e)),[n].concat(t||[]))},TA=p.default.div.withConfig({displayName:"timeZone__Wrapper",componentId:"sc-1n80l1r-0"})(["white-space:nowrap;"]),SA=(0,p.default)($e.Text).withConfig({displayName:"timeZone__StyledText",componentId:"sc-1n80l1r-1"})(["color:",";line-height:30px;"],(e=>{let{theme:t}=e;return t.colors.fg.disable}));const CA=function TimeZone(e){let{date:t}=e;const{timezone:n,gmtOffset:r}=(0,Kd.getSettings)(),a=(new Date).getTimezoneOffset()/60*-1;if(Number(r)===a)return null;const{timeZone:o}=(0,Qd.default)(),l=n?.length?(0,Xd.default)(t,"T"):`UTC${o}`,i="UTC"===l?(0,d.__)("Coordinated Universal Time","web-stories"):n;return c.createElement(TA,null,c.createElement(Tooltip,{hasTail:!0,title:i,placement:Bd.PLACEMENT.TOP},c.createElement(SA,{forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},l)))},IA=p.default.div.withConfig({displayName:"timePicker__TimeWrapper",componentId:"sc-14og2kb-0"})(["margin-bottom:1em;padding:0 20px;"]),xA=p.default.fieldset.withConfig({displayName:"timePicker__Fieldset",componentId:"sc-14og2kb-1"})(["margin-top:0.5em;position:relative;"]),AA=p.default.legend.withConfig({displayName:"timePicker__Legend",componentId:"sc-14og2kb-2"})(["position:absolute;top:-999em;left:-999em;"]),kA=p.default.div.withConfig({displayName:"timePicker__InputRow",componentId:"sc-14og2kb-3"})(["display:flex;"]),OA=(0,p.css)(["min-height:30px;box-shadow:0 0 0 transparent;transition:box-shadow 0.1s linear;border-radius:4px;border:1px solid #006edc;height:28px;vertical-align:middle;background-color:",";color:#32373c;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),PA=p.default.input.withConfig({displayName:"timePicker__NumberInput",componentId:"sc-14og2kb-4"})([""," padding:0;margin-right:4px;text-align:center;width:50%;max-width:50px;::-webkit-inner-spin-button,::-webkit-outer-spin-button{margin:0;appearance:none;}"],OA),NA=p.default.span.withConfig({displayName:"timePicker__TimeSeparator",componentId:"sc-14og2kb-5"})(["padding:0 3px 0 0;color:#555d66;"]),RA=p.default.button.withConfig({displayName:"timePicker__Button",componentId:"sc-14og2kb-6"})(["display:inline-flex;text-decoration:none;font-size:13px;margin:0;border:0;cursor:pointer;transition:box-shadow 0.1s linear;padding:0 10px;line-height:2;height:30px;border-radius:3px;white-space:nowrap;border-width:1px;border-style:solid;color:#006edc;border-color:#006edc;background:#f3f5f6;&:focus{outline:2px solid transparent;background:#f3f5f6;color:rgb(0,93,140);border-color:",";box-shadow:0 0 0 1px ",";text-decoration:none;}",""],(e=>{let{theme:t}=e;return t.colors.fg.linkHover}),(e=>{let{theme:t}=e;return t.colors.fg.linkHover}),(e=>{let{isToggled:t}=e;return t&&"\n  background: #edeff0;\n  border-color: #8f98a1;\n  box-shadow: inset 0 2px 5px -3px #555d66;\n  "})),MA=p.default.div.withConfig({displayName:"timePicker__InputGroup",componentId:"sc-14og2kb-7"})(["flex-basis:100%;"]),LA=(0,p.default)(RA).withConfig({displayName:"timePicker__AMButton",componentId:"sc-14og2kb-8"})(["margin-right:-1px;border-radius:3px 0 0 3px;"]),DA=(0,p.default)(RA).withConfig({displayName:"timePicker__PMButton",componentId:"sc-14og2kb-9"})(["margin-left:-1px;border-radius:0 3px 3px 0;"]);const BA=function TimePicker(e){let{onChange:t,is12Hour:n,localData:r,setLocalData:a}=e;const o=e=>t=>{a({...r,[e]:parseInt(t.target.value)})},l=()=>n?12:23,i=()=>n?1:0,s=e=>{const{am:t}=r;return n?"AM"===t?e%12:(e%12+12)%24:e},p=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a({...r,...n,date:e}),t(e.toISOString())},m=e=>()=>{const{am:t,date:n,hours:a}=r;if(t===e)return;const o=n;"PM"===e?o.setHours((a%12+12)%24):o.setHours(a%12),p(o,{am:e})},f=(0,u.useRef)();(0,u.useEffect)((()=>{f.current.focus()}),[]);const g="AM"===r.am,h="PM"===r.am;return c.createElement(IA,null,c.createElement(xA,null,c.createElement(AA,null,(0,d.__)("Time","web-stories")),c.createElement(kA,null,c.createElement(MA,null,c.createElement(PA,{ref:f,"aria-label":(0,d.__)("Hours","web-stories"),type:"number",step:1,min:i(),max:l(),value:parseInt(r.hours),onChange:o("hours"),onBlur:()=>{const{hours:e,date:t}=r,n=parseInt(e);if(!(isNaN(n)||n<i()||n>l())&&t.getHours()!==s(e)){const n=t;n.setHours(s(e)),p(n)}}}),c.createElement(NA,null,":"),c.createElement(PA,{"aria-label":(0,d.__)("Minutes","web-stories"),type:"number",min:0,max:59,value:parseInt(r.minutes),onChange:o("minutes"),onBlur:()=>{const{minutes:e,date:t}=r,n=parseInt(e);if(!(isNaN(n)||n<0||n>59)&&t.getMinutes()!==e){const n=t;n.setMinutes(e),p(n)}}})),n&&c.createElement(MA,null,c.createElement(LA,{"aria-pressed":g,type:"button",isToggled:g,onClick:m("AM")},(0,d.__)("AM","web-stories")),c.createElement(DA,{"aria-pressed":h,type:"button",isToggled:h,tabIndex:"-1",onClick:m("PM")},(0,d.__)("PM","web-stories"))),c.createElement(CA,{date:r?.date}))))},FA=p.default.div.withConfig({displayName:"calendarWrapper__CalendarWrapper",componentId:"sc-u1av1j-0"})(["min-height:236px;.react-calendar{width:350px;max-width:100%;background:white;border:1px solid #a0a096;font-family:Arial,Helvetica,sans-serif;line-height:1.125em;}.react-calendar--doubleView{width:700px;}.react-calendar--doubleView .react-calendar__viewContainer{display:flex;margin:-0.5em;}.react-calendar--doubleView .react-calendar__viewContainer > *{width:50%;margin:0.5em;}.react-calendar,.react-calendar *,.react-calendar *:before,.react-calendar *:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;}.react-calendar button{margin:0;border:0;outline:none;}.react-calendar button:enabled:hover{cursor:pointer;}.react-calendar__navigation{display:flex;height:44px;margin-bottom:1em;}.react-calendar__navigation button{min-width:44px;background:none;}.react-calendar__navigation button:disabled{background-color:#f0f0f0;}.react-calendar__navigation button:enabled:hover,.react-calendar__navigation button:enabled:focus{background-color:#e6e6e6;}.react-calendar__month-view__weekdays{text-align:center;text-transform:uppercase;font-weight:bold;font-size:0.75em;}.react-calendar__month-view__weekdays__weekday{padding:0.5em;}.react-calendar__month-view__weekNumbers .react-calendar__tile{display:flex;align-items:center;justify-content:center;font-size:0.75em;font-weight:bold;}.react-calendar__month-view__days__day--weekend{color:#d10000;}.react-calendar__month-view__days__day--neighboringMonth{color:#757575;}.react-calendar__year-view .react-calendar__tile,.react-calendar__decade-view .react-calendar__tile,.react-calendar__century-view .react-calendar__tile{padding:2em 0.5em;}.react-calendar__tile{max-width:100%;padding:10px 6.6667px;background:none;text-align:center;line-height:16px;}.react-calendar__tile:disabled{background-color:#f0f0f0;}.react-calendar__tile:enabled:hover,.react-calendar__tile:enabled:focus{background-color:#e6e6e6;}.react-calendar__tile--now{background:#ffff76;}.react-calendar__tile--now:enabled:hover,.react-calendar__tile--now:enabled:focus{background:#ffffa9;}.react-calendar__tile--hasActive{background:#76baff;}.react-calendar__tile--hasActive:enabled:hover,.react-calendar__tile--hasActive:enabled:focus{background:#a9d4ff;}.react-calendar__tile--active{background:#006edc;color:white;}.react-calendar__tile--active:enabled:hover,.react-calendar__tile--active:enabled:focus{background:#1087ff;}.react-calendar--selectRange .react-calendar__tile--hover{background-color:#e6e6e6;}"]);const HA=(0,u.lazy)((()=>n.e(2392).then(n.bind(n,73)))),UA=p.default.div.withConfig({displayName:"datePicker__FallbackCalendar",componentId:"sc-9qun1q-0"})(["height:256px;width:350px;display:flex;align-items:center;justify-content:center;"]);const jA=function DatePicker(e){let{currentDate:t,onChange:n,onViewChange:r}=e;const a=(0,u.useRef)(),o=(0,u.useMemo)((()=>new Date(t)),[t]),l=(0,u.useCallback)((e=>{e.setHours(o.getHours()),e.setMinutes(o.getMinutes()),n(e.toISOString(),!0)}),[o,n]),i=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a.current){const t=[...a.current.querySelectorAll(".react-calendar__navigation button")];t[0].tabIndex="0",t.shift();for(const e of t)e.tabIndex="-1";const n=[...a.current.querySelectorAll(".react-calendar__viewContainer button")];let r=!1;for(const t of n)t.classList.contains("react-calendar__tile--now")?(t.tabIndex="0",e&&t.focus(),r=!0):t.tabIndex="-1";r||(n[0].tabIndex="0",n[0].focus())}}),[a]);(0,u.useEffect)((()=>{const e=setTimeout((()=>{i()}));return()=>{clearTimeout(e)}}),[i]);const{weekStartsOn:s}=(0,Qd.default)(),p=function(e){return{0:"US",1:"ISO 8601",5:"Hebrew",6:"Arabic"}[e]||"ISO 8601"}(s);return c.createElement(u.Suspense,{fallback:c.createElement(UA,null,c.createElement(TS.default,null))},c.createElement(FA,{ref:a},c.createElement(HA,{value:o,calendarType:p,onChange:l,onViewChange:r,onActiveStartDateChange:()=>i(!0),nextAriaLabel:(0,d._x)("Next","This label can apply to next month, year and/or decade","web-stories"),prevAriaLabel:(0,d._x)("Previous","This label can apply to previous month, year and/or decade","web-stories"),next2AriaLabel:(0,d._x)("Jump forward","This label can apply to month, year and/or decade","web-stories"),prev2AriaLabel:(0,d._x)("Jump backwards","This label can apply to month, year and/or decade","web-stories")})))},zA=p.default.div.withConfig({displayName:"dateTime__DateTimeWrapper",componentId:"sc-15cbv9f-0"})(["border-radius:4px;box-shadow:0 3px 30px rgba(25,30,35,0.1);border:1px solid ",";background-color:",";width:100%;padding:4px;"],(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.standard.black,.2)}),(e=>{let{theme:t}=e;return t.colors.standard.white})),GA=(0,p.default)(m.Button).withConfig({displayName:"dateTime__StyledButton",componentId:"sc-15cbv9f-1"})(["color:#006edc;margin:5px 0;"]);const YA=function DateTime(e){let{value:t,onChange:n,onViewChange:r,is12Hour:a=!0,forwardedRef:o,onClose:l,canReset:i=!1}=e;const s=t?new Date(t):new Date,p=s.getHours(),[m,g]=(0,u.useState)({minutes:s.getMinutes(),am:p<12?"AM":"PM",hours:a?p%12||12:p,date:s}),h=(0,u.useRef)(document.activeElement),b=(0,u.useCallback)((e=>{h.current&&h.current.focus(),l(e)}),[l]);return(0,fr.useKeyDownEffect)(o,{key:["esc"],editable:!0},b),$C({ref:o}),vS({ref:o}),c.createElement(zA,{ref:o},c.createElement(BA,{localData:m,setLocalData:g,onChange:n,is12Hour:a}),c.createElement(jA,{currentDate:t,onChange:n,onViewChange:r}),i&&c.createElement(GA,{size:f.BUTTON_SIZES.SMALL,onClick:()=>{n(null),l()},"aria-label":(0,d.__)("Reset publish time","web-stories")},(0,d.__)("Reset","web-stories")))},ZA=p.default.div.withConfig({displayName:"required__RequiredWrapper",componentId:"sc-19c61h7-0"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;"]),WA=(0,p.default)($e.Text).attrs({as:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"required__StyledText",componentId:"sc-19c61h7-1"})(["color:",";font-size:12px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const VA=function Required(){return c.createElement(ZA,null,c.createElement(WA,null,(0,d._x)("Required","Required form input","web-stories")))};function $A(){return $A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$A.apply(this,arguments)}const qA=24,KA=p.default.div.withConfig({displayName:"radio__Container",componentId:"sc-dphfhc-0"})(["display:flex;align-items:center;min-height:","px;padding:8px 0;"],44),XA=p.default.div.withConfig({displayName:"radio__RadioInputContainer",componentId:"sc-dphfhc-1"})(["position:relative;height:","px;width:","px;"],qA,qA),QA=p.default.div.withConfig({displayName:"radio__LabelContainer",componentId:"sc-dphfhc-2"})(["display:flex;flex-direction:column;margin:0 12px;gap:","px;"],8),JA=p.default.span.withConfig({displayName:"radio__RadioBorder",componentId:"sc-dphfhc-3"})((e=>{let{theme:t}=e;return(0,p.css)(["display:inline-block;height:","px;width:","px;border:","px solid ",";border-radius:",";pointer-events:none;transition:all 0.15s;"],qA,qA,1,t.colors.border.defaultNormal,t.borders.radius.round)})),ek=p.default.span.withConfig({displayName:"radio__InnerButton",componentId:"sc-dphfhc-4"})((e=>{let{theme:t}=e;return(0,p.css)(["pointer-events:none;display:none;:after{content:'';position:absolute;height:","px;width:","px;top:50%;left:50%;transform:translate(-50%,-50%);background-color:",";border-radius:",";}"],16,16,t.colors.fg.primary,t.borders.radius.round)})),tk=p.default.input.attrs({type:"radio"}).withConfig({displayName:"radio__HiddenInput",componentId:"sc-dphfhc-5"})(["position:absolute;height:","px;width:","px;margin:0;opacity:0;cursor:pointer;:hover ~ ","{border-color:",";}:focus{outline:none;}:focus ~ ",",&."," ~ ","{",";border-color:",";}:active ~ ","{box-shadow:0 0 0 8px ",";}:checked ~ ","{display:block;}:disabled{cursor:auto;~ ","{border-color:",";}~ ","::after{background-color:",";}}"],qA,qA,JA,(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),JA,hp.FOCUS_VISIBLE_SELECTOR,JA,(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus)}),(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),JA,(e=>{let{theme:t}=e;return t.colors.shadow.active}),ek,JA,(e=>{let{theme:t}=e;return t.colors.border.disable}),ek,(e=>{let{theme:t}=e;return t.colors.fg.disable})),nk=(0,p.default)($e.Text).attrs({forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"radio__Hint",componentId:"sc-dphfhc-6"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),rk=(0,u.forwardRef)((function RadioButton(e,t){let{className:n,hint:r,id:a,label:o,...l}=e;const i=(0,u.useMemo)((()=>a||(0,pe.default)()),[a]);return c.createElement(KA,{className:n},c.createElement(XA,null,c.createElement(tk,$A({id:i,ref:t},l)),c.createElement(JA,null),c.createElement(ek,null)),c.createElement(QA,null,c.createElement($e.Text,{htmlFor:i,as:"label",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o),r&&c.createElement(nk,null,r)))}));const ak=function(e){const t=(0,u.useCallback)((t=>{const n=e.current;if(!n)return;const r=Array.from(n.querySelectorAll('input[type="radio"]')),a=r.indexOf(document.activeElement);if(-1===a)return;const o=a+t;o<0||o>=r.length||(r[o].focus(),r[o].click())}),[e]),n=(0,u.useCallback)((()=>t(-1)),[t]);(0,fr.useKeyDownEffect)(e,["up","left"],n,[n]);const r=(0,u.useCallback)((()=>t(1)),[t]);(0,fr.useKeyDownEffect)(e,["down","right"],r,[r])};p.default.h3.withConfig({displayName:"radioGroup__VisuallyHiddenLabel",componentId:"sc-k5v4js-0"})(["",";"],Iv.visuallyHidden),(0,p.default)(rk).withConfig({displayName:"radioGroup__StyledRadio",componentId:"sc-k5v4js-1"})(["input:focus + span,input&."," + span{",";}"],hp.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return`box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;`}));var ok=n(71577);function lk(){return lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lk.apply(this,arguments)}const ik=p.default.div.withConfig({displayName:"select__Container",componentId:"sc-1pv4s6p-0"})(["position:relative;width:100%;"]),sk=(0,p.default)(ok.DropDown).withConfig({displayName:"select__StyledDropDown",componentId:"sc-1pv4s6p-1"})(["background-color:transparent;border:0;width:auto;"]),ck=(0,p.css)(["top:-14px;right:unset;width:auto;"]),dk=(0,p.css)(["border:none;width:auto;margin-right:auto;padding-left:0;",";"],np),uk=(0,p.css)(["margin-right:-12px;"]);const pk=function Select(e){return c.createElement(ik,null,c.createElement(sk,lk({isInline:!0,hasSearch:!1,menuStylesOverride:ck,selectButtonStylesOverride:dk,selectValueStylesOverride:uk},e)))};var mk=n(37309);const fk=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map((t=>{const n=e[t.id];return{...t,options:n&&n.length?fk(e,n):[]}}))},gk=e=>{const t=e.map((e=>({options:[],parent:0,...e}))),n=(r="parent",t.reduce(((e,t)=>(e[t[r]]?e[t[r]].push(t):e[t[r]]=[t],e)),{}));var r;return fk(n,n[0])},hk=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{options:n,...r}=e;let a=[];if(n)for(let e=0;e<n.length;e++)a=a.concat(hk(n[e],t));const o=e.label.toLowerCase().includes(t.trim().toLowerCase()),l={...r,options:a};return o||a.length?[l]:[]},bk=(e,t)=>e.reduce(((e,n)=>e.concat(hk(n,t))),[]);function Ek(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.flatMap((e=>{let{options:n,...r}=e;return[{...r,$level:t},...Ek(n,t+1)]}))}function yk(){return yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yk.apply(this,arguments)}const _k=p.default.div.withConfig({displayName:"hierarchical__Container",componentId:"sc-1pgjcwl-0"})(["margin-bottom:8px;display:block;"]),vk=(0,p.default)($e.Text).attrs({forwardedAs:"label",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"hierarchical__Label",componentId:"sc-1pgjcwl-1"})(["margin:0 12px;"]),wk=p.default.div.withConfig({displayName:"hierarchical__Border",componentId:"sc-1pgjcwl-2"})(["padding-top:4px;margin-top:-4px;border:1px solid ",";border-top:none;border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return`0 0 ${t.borders.radius.small} ${t.borders.radius.small}`})),Tk=p.default.ul.withConfig({displayName:"hierarchical__CheckboxArea",componentId:"sc-1pgjcwl-3"})(["max-height:175px;padding:12px 12px 0 12px;overflow-y:scroll;margin-top:4px;margin-bottom:0;",";:focus-within{",";}"],A.scrollbarCSS,(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),Sk=p.default.li.withConfig({displayName:"hierarchical__CheckboxContainer",componentId:"sc-1pgjcwl-4"})(["display:flex;align-items:center;margin-bottom:8px;margin-left:","px;"],(e=>{let{$level:t}=e;return 20*t})),Ck=(0,p.default)($e.Text).withConfig({displayName:"hierarchical__NoResultsText",componentId:"sc-1pgjcwl-5"})(["margin-bottom:12px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Ik=e=>`hierarchical_term_option_${e}`,Option=e=>{let{optionRefs:t={current:{}},$level:n=0,...r}=e;const{id:a,label:o,onBlur:l,onChange:i,onFocus:s,checked:d,value:u}=r,p=Ik(r.id),m=`hierarchical_term_${r.label}`;return c.createElement(Sk,{"aria-selected":d,role:"treeitem",$level:n},c.createElement(gI.Checkbox,{id:p,ref:e=>{t.current[a]=e},value:u,checked:d,name:m,onChange:e=>i(e,r),onBlur:l,onFocus:s,tabIndex:-1}),c.createElement(vk,{htmlFor:p},o))},xk=e=>{let{className:t,inputValue:n,onInputChange:r,label:a,noOptionsText:o,options:l,onChange:i,...s}=e;const p=(0,mk.default)("assertive"),m=(0,u.useDebouncedCallback)(p,500),f=(0,u.useRef)(null),g=(0,u.useRef)(null),[h,b]=(0,u.useState)(-1),E=(0,u.useRef)({}),y=(0,u.useCallback)((e=>{if(document.activeElement===f.current){if(!l.length)return;if(f.current.contains(e.relatedTarget))return void g.current?.focus();if(-1===h){const e=l.find((e=>e.checked))?.id;b(e||0)}else E.current[h]?.focus()}}),[h,l]),_=(0,u.useCallback)((e=>{const t=l.findIndex((e=>e.id===h));switch(e.key){case Xs.KEYS.UP:t>0&&b(l[t-1].id);break;case Xs.KEYS.DOWN:t<l.length-1&&b(l[t+1].id)}}),[l,h]),v=(0,u.useCallback)((e=>{r(e.target.value)}),[r]),w=(0,u.useCallback)(((e,t)=>{i(e,{id:t.id,checked:!t.checked})}),[i]),T=(0,u.usePrevious)(n);(0,u.useEffect)((()=>{if(T!==n){const e=l.length,t=(0,We.default)(
/* Translators: %d: Number of results. */
(0,d._n)("%d result found.","%d results found.",e,"web-stories"),e);m(t)}}),[m,l,n,T]),(0,fr.useKeyDownEffect)(f,{key:["up","down","shift+up","shift+down"]},_,[_]),(0,u.useEffect)((()=>{f.current?.contains(document.activeElement)&&E.current[h]?.focus()}),[h]);const S=Boolean(l.length)||Boolean(n.length);return c.createElement(_k,{className:t},c.createElement(tS,yk({ref:g,value:n,onChange:v,label:a,type:"search",placeholder:(0,d.__)("Search","web-stories")},s)),S&&c.createElement(wk,null,c.createElement(Uu,null,c.createElement(Tk,{id:"checkbox_list",ref:f,tabIndex:0,onFocus:y,role:"tree","aria-activedescendant":-1!==h?Ik(h):void 0,"aria-multiselectable":!0},l.length?l.map((e=>c.createElement(Option,yk({key:e.id},e,{onChange:w,optionRefs:E})))):c.createElement(Ck,{role:"treeitem",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o)))))},Ak=(0,u.createContext)({state:{},actions:{}});function kk(){return kk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kk.apply(this,arguments)}const Ok=999999999,Pk=p.default.section.withConfig({displayName:"panel__Wrapper",componentId:"sc-1vyy7rt-0"})(["display:flex;flex-direction:column;position:relative;border-bottom:1px solid ",";",""],(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{noBorder:t}=e;return t&&"border-bottom: none;"}));const Nk=function Panel(e){let{name:t,children:n,resizable:r=!1,showDragHandle:a,showFocusStyles:o,canCollapse:l=!0,collapsedByDefault:i=!0,initialHeight:s=null,maxHeight:d=Ok,ariaLabel:p=null,ariaHidden:m=!1,isPersistable:f=!0,...g}=e;const h=0===d?Ok:d,{selectedElementIds:b}=Ya((e=>{let{state:{selectedElementIds:t}}=e;return{selectedElementIds:t}})),E=(0,u.useMemo)((()=>f?Fo.getItemByKey(`${Bo.PANEL}:${t}`):null),[t,f]),[y,_]=(0,u.useState)((()=>!!f&&(E?.isCollapsed??i))),[v,w]=(0,u.useState)(Math.min(E?.expandToHeight,h)||s),[T,S]=(0,u.useState)(Math.min(E?.height,h)||s),[C,I]=(0,u.useState)(!1),[x,A]=(0,u.useState)(!1),k=(0,u.useCallback)((e=>{S(Math.min(e,h))}),[h]),O=(0,u.useCallback)((e=>{w(Math.min(e,h))}),[h]),N=(0,u.useCallback)((()=>I(!0)),[]),R=(0,u.useCallback)((()=>{l&&(_(!0),A(!0),r&&k(0),(0,P.trackEvent)("panel_toggled",{name:t,status:"collapsed"}))}),[r,l,t,k]),M=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_(!1),A(!0),e&&r&&k(v),(0,P.trackEvent)("panel_toggled",{name:t,status:"expanded"})}),[r,v,t,k]);(0,u.useEffect)((()=>{f||M(!0)}),[M,f,b]),(0,u.useEffect)((()=>{r&&T<=10&&!y&&R()}),[R,T,r,y]),(0,u.useEffect)((()=>{x||E||!r||(k(s),O(s))}),[x,s,r,E,t,O,k]),(0,u.useEffect)((()=>{h<T&&k(h),h<v&&O(h)}),[v,T,h,k,O]),(0,u.useEffect)((()=>{f&&x&&Fo.setItemByKey(`${Bo.PANEL}:${t}`,{height:T,isCollapsed:y,expandToHeight:v})}),[t,y,T,v,x,f]);const L=(0,u.useCallback)((e=>{r&&(A(!0),k(Math.min(e(T),h)),y&&e(T)>10&&M(!1))}),[M,T,y,h,r,k,A]),D=(0,u.useCallback)((()=>{A(!1),y&&M(!0)}),[M,y]),B=`panel-${t}-${(0,pe.default)()}`,F=`panel-title-${t}-${(0,pe.default)()}`,H={state:{height:T,resizable:r,showDragHandle:a,showFocusStyles:o,isCollapsed:y,panelContentId:B,panelTitleId:F,panelTitleReadable:`panel-title-${t}`,ariaHidden:m},actions:{setHeight:L,setExpandToHeight:O,collapse:R,expand:M,resetHeight:D,confirmTitle:N}},U=Ak.Provider,j=(0,u.useMemo)((()=>C?{"aria-labelledby":F}:{"aria-label":p}),[C,F,p]);return c.createElement(Pk,kk({},j,{"aria-hidden":m},g),c.createElement(U,{value:H},n))};var Rk=n(98240),Mk=n(41044);function Lk(){return Lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lk.apply(this,arguments)}const Dk={PRIMARY:"primary",SECONDARY:"secondary",TERTIARY:"tertiary",QUATERNARY:"quaternary",POSITIVE:"positive",NEGATIVE:"negative",ACCENT:"accent"};function Bk(e){return 9*(e-1)}const Fk=p.default.div.withConfig({displayName:"notificationBubble__Bubble",componentId:"sc-1w06lrc-0"})([""," position:relative;height:","px;width:","px;",";"],(e=>{let{theme:t,variant:n}=e;return(0,p.css)(["color:",";background-color:",";border-radius:",";"],t.colors.fg.primary,t.colors.bg[n],t.borders.radius.round)}),24,(e=>{let{digitLen:t}=e;return 24+Bk(t)}),(e=>{let{digitLen:t,$isSmall:n}=e;return n&&(0,p.css)(["height:","px;width:","px;"],20,20+Bk(t))})),Hk=p.default.span.withConfig({displayName:"notificationBubble__Inner",componentId:"sc-1w06lrc-1"})([""," "," ",";font-weight:",";color:",";user-select:none;"],Rk.fullSizeAbsolute,Mk.centerContent,(e=>{let{$isSmall:t,theme:n}=e;return ep.expandTextPreset(((e,n)=>{let{paragraph:r}=e;return r[t?n.X_SMALL:n.SMALL]}))({theme:n})}),(e=>{let{theme:t}=e;return t.typography.weight.bold}),(e=>{let{$invertColor:t,theme:n}=e;return t?n.colors.inverted.fg.primary:n.colors.fg.primary}));const Uk=function(e,t,n){const r=(0,u.useRef)(),[a,o]=(0,u.useState)(!1),l=(0,u.useCallback)((e=>{const n=r.current-e.pageY;t(n),r.current=e.pageY}),[t]),i=(0,u.useCallback)((e=>{e.target.releasePointerCapture(e.pointerId),o(!1),n()}),[n]),s=(0,u.useCallback)((e=>{e.target.setPointerCapture(e.pointerId),r.current=e.pageY,o(!0)}),[]);(0,u.useLayoutEffect)((()=>{const t=e.current;return t.addEventListener("pointerdown",s),a&&(t.addEventListener("pointermove",l),t.addEventListener("pointerup",i)),()=>{t.removeEventListener("pointerdown",s),a&&(t.removeEventListener("pointermove",l),t.removeEventListener("pointerup",i))}}),[a,i,l,s,e])};const jk=function(e,t){(0,fr.useKeyEffect)(e,"up",(()=>t(20)),[t]),(0,fr.useKeyEffect)(e,"down",(()=>t(-20)),[t])};function zk(){return zk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zk.apply(this,arguments)}const Gk=p.default.div.withConfig({displayName:"handle__Handle",componentId:"sc-ffqbiq-0"})(["border:0;padding:0;height:","px;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:row-resize;user-select:none;position:absolute;",";",";left:0;right:0;width:100%;",";"],8,(e=>{let{$position:t}=e;return"top"===t&&"top: 0"}),(e=>{let{$position:t}=e;return"bottom"===t&&"bottom: 0"}),(e=>{let{$showFocusStyles:t}=e;return t&&(0,p.css)(["border-bottom:1px solid transparent;&:focus{border-color:",";}"],(e=>{let{theme:t}=e;return t.colors.border.focus}))})),Yk=p.default.div.withConfig({displayName:"handle__DragBar",componentId:"sc-ffqbiq-1"})(["position:absolute;width:35px;height:3px;top:","px;background:",";border-radius:",";cursor:inherit;"],4,(e=>{let{theme:t}=e;return t.colors.bg.quaternary}),(e=>{let{theme:t}=e;return t.borders.radius.small}));function DragHandle(e){let{height:t,minHeight:n,maxHeight:r,handleHeightChange:a,handleExpandToHeightChange:o,handleDoubleClick:l,position:i,showDragHandle:s,showFocusStyles:p=!0,...m}=e;const f=(0,u.useRef)();return Uk(f,a,o),jk(f,a),c.createElement(Gk,zk({ref:f,onClick:e=>e.stopPropagation(),onDoubleClick:l,tabIndex:0,$position:i,role:"slider","aria-orientation":"vertical","aria-valuenow":t,"aria-valuemin":n,"aria-valuemax":r,"aria-label":(0,d.__)("Set panel height","web-stories"),$showFocusStyles:p},m),s&&c.createElement(Yk,null))}DragHandle.defaultProps={position:"top"};const Zk=DragHandle;function Wk(){return Wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wk.apply(this,arguments)}const Vk=(0,p.default)(Qu.Headline).attrs({as:"h2"}).withConfig({displayName:"title__Header",componentId:"sc-1tphhj5-0"})(["color:",";background-color:",";"," margin:0;position:relative;display:flex;flex-direction:row;user-select:none;align-items:center;justify-content:space-between;padding:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{isSecondary:t,theme:n}=e;return t&&n.colors.interactiveBg.secondaryNormal}),(e=>{let{hasResizeHandle:t}=e;return t&&"padding-top: 0;"}),(e=>{let{isCollapsed:t}=e;return t?"14px 16px":"14px 16px 6px 16px"})),$k=p.default.span.withConfig({displayName:"title__Heading",componentId:"sc-1tphhj5-1"})(["color:",";display:flex;align-items:space-between;",";"],(e=>{let{theme:t,isCollapsed:n}=e;return n?t.colors.fg.secondary:t.colors.fg.primary}),(e=>{let{theme:t}=e;return ep.expandPresetStyles({preset:t.typography.presets.headline[qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL],theme:t})})),qk=(0,p.default)((e=>{let{notificationCount:t,isSmall:n,variant:r=Dk.ACCENT,invertTextColor:a,...o}=e;return c.createElement(Fk,Lk({variant:r,$isSmall:n,digitLen:t?.toString().length||1},o),c.createElement(Hk,{$invertColor:a,$isSmall:n},t))})).withConfig({displayName:"title__StyledNotificationBubble",componentId:"sc-1tphhj5-2"})(["margin-left:12px;"]),Kk=p.default.div.withConfig({displayName:"title__HeaderActions",componentId:"sc-1tphhj5-3"})(["display:flex;align-items:center;"]),Xk=p.default.div.withConfig({displayName:"title__IconWrapper",componentId:"sc-1tphhj5-4"})(["position:relative;width:32px;height:32px;svg{position:relative;z-index:1;}"]),Qk=p.default.button.withConfig({displayName:"title__Collapse",componentId:"sc-1tphhj5-5"})(["border:none;border-radius:",";background:transparent;color:",";height:32px;display:flex;padding:0 4px 0 0;align-items:center;justify-content:flex-start;cursor:pointer;margin-left:-12px;transition:",";&:hover,&.",",&[","]{color:",";}",";svg{width:32px;height:32px;",";}:hover ",":after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:16px;width:16px;border-radius:",";background:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t,isCollapsed:n}=e;return n?t.colors.fg.secondary:t.colors.fg.primary}),f.BUTTON_TRANSITION_TIMING,hp.FOCUS_VISIBLE_SELECTOR,hp.FOCUS_VISIBLE_DATA_ATTRIBUTE,(e=>{let{theme:t}=e;return t.colors.fg.primary}),np,(e=>{let{$isCollapsed:t,theme:n}=e;return t&&(0,p.css)(["color:",";transform:rotate(-90deg);"],n.colors.fg.secondary)}),Xk,(e=>{let{theme:t}=e;return t.borders.radius.round}),(e=>{let{theme:t}=e;return t.colors.bg.quaternary}));function Jk(e){let{children:t,isCollapsed:n,toggle:r,...a}=e;return c.createElement(Qk,Wk({onClick:e=>{e.stopPropagation(),r()},$isCollapsed:n},a),t)}function eO(e){let{ariaLabel:t,children:n,isPrimary:r,isSecondary:a,secondaryAction:o,isResizable:l,canCollapse:i,maxHeight:s,count:d,...p}=e;const{state:{isCollapsed:m,height:f,resizable:g,showDragHandle:h,showFocusStyles:b,panelContentId:E,panelTitleId:y,ariaHidden:_},actions:{collapse:v,expand:w,setHeight:T,setExpandToHeight:S,resetHeight:C,confirmTitle:I}}=(0,u.useContext)(Ak),{state:{sidebarContentHeight:x}}=Zm();(0,u.useEffect)(I,[I]);const A=s||Math.round(.7*x),k=(0,u.useCallback)((e=>g?T((t=>Math.max(0,Math.min(A,t+e)))):null),[g,T,A]),O=(0,u.useCallback)((()=>{g&&f>=10&&S(f)}),[S,f,g]),P=m?w:v,N=0===d||Boolean(d);return c.createElement(Vk,Wk({isPrimary:r,isSecondary:a,hasResizeHandle:l&&!m,isCollapsed:m},p),l&&c.createElement(Zk,{height:f,minHeight:0,maxHeight:A,handleHeightChange:k,handleExpandToHeightChange:O,handleDoubleClick:C,tabIndex:_?-1:0,showDragHandle:h,showFocusStyles:b}),c.createElement(Jk,{toggle:P,disabled:!i,tabIndex:_?-1:0,"aria-label":t,"aria-expanded":!m,"aria-controls":E,isCollapsed:m},i&&c.createElement(Xk,null,c.createElement(fp.default,null)),c.createElement($k,{isCollapsed:m,id:y,size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL},n),N&&c.createElement(qk,{"data-testid":"panel-badge",notificationCount:d,variant:Dk.PRIMARY,"aria-hidden":!0})),o&&c.createElement(Kk,null,o))}eO.defaultProps={isPrimary:!1,isSecondary:!1,isResizable:!1,canCollapse:!0};const tO=eO;function nO(){return nO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nO.apply(this,arguments)}const rO=p.default.div.withConfig({displayName:"content__Container",componentId:"sc-1juzn5p-0"})(["padding:",";overflow:auto;background-color:",";"],(e=>{let{padding:t}=e;return t||"8px 12px 8px"}),(e=>{let{isSecondary:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryNormal:"transparent"}));function aO(e){let{children:t,...n}=e;const{state:{isCollapsed:r,height:a,resizable:o,panelContentId:l}}=(0,u.useContext)(Ak),i={height:o?`${a}px`:"auto"};return r?null:c.createElement(rO,nO({style:i},n,{id:l}),t)}aO.defaultProps={isPrimary:!1};const oO=aO;function lO(){return lO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lO.apply(this,arguments)}const iO=function SimplePanel(e){let{children:t,name:n,ariaLabel:r,title:a,className:o,...l}=e;return c.createElement(Nk,lO({name:n},l),c.createElement(tO,lO({ariaLabel:r??("string"==typeof a?a:"")},l),a),c.createElement(oO,{className:o},t))},sO=(0,p.default)($e.Text).withConfig({displayName:"excerpt__StyledText",componentId:"sc-t9wjp4-0"})(["color:",";margin-top:-4px;"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}));const cO=function ExcerptPanel(e){let{nameOverride:t}=e;const{excerpt:n,updateStory:r}=Ya((e=>{let{state:{story:{excerpt:t=""}},actions:{updateStory:n}}=e;return{excerpt:t,updateStory:n}})),a=(0,u.useCallback)((e=>{r({properties:{excerpt:e.target.value}})}),[r]),{highlight:o,resetHighlight:l,cancelHighlight:i}=nm((e=>({highlight:e[df.EXCERPT],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(dO,{onAnimationEnd:()=>l(),name:t||"excerpt",title:(0,d.__)("Story Description","web-stories"),collapsedByDefault:!1,isPersistable:!o,$_css:o?.showEffect&&uv.FLASH},c.createElement(Jx,null,c.createElement(uO,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",i,{once:!0}),e.focus())},value:n,onChange:a,placeholder:(0,d.__)("Write a description of the story","web-stories"),"aria-label":(0,d.__)("Story Description","web-stories"),maxLength:200,showCount:!0,rows:4,$_css2:o?.showEffect&&uv.OUTLINE})),c.createElement(Jx,null,c.createElement(sO,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Stories with a description tend to do better on search and have a wider reach","web-stories"))))};var dO=(0,p.default)(iO).withConfig({displayName:"excerpt___StyledSimplePanel",componentId:"sc-t9wjp4-1"})(["",""],(e=>e.$_css)),uO=(0,p.default)(yA).withConfig({displayName:"excerpt___StyledTextArea",componentId:"sc-t9wjp4-2"})(["",""],(e=>e.$_css2));const pO=p.default.div.withConfig({displayName:"mainStoryInfo__FormSection",componentId:"sc-1f06m84-0"})(["padding:0 4px;&:first-of-type{margin:20px 0px 0px;}"]),mO=(0,p.default)(UT).withConfig({displayName:"mainStoryInfo___TextArea",componentId:"sc-1f06m84-1"})(["margin:8px 0 0;& > p{margin-bottom:-4px;}"]),fO=()=>{const e=Ya((e=>{let{actions:t}=e;return t.updateStory})),t=Ya((e=>{let{state:{story:t}}=e;return{[vT]:t.excerpt,[wT]:t.title||""}})),n=Ya((e=>{let{state:{story:{slug:t}}}=e;return t})),r=Zm((e=>{let{data:t}=e;return t?.modalSidebarTab?.IsolatedStatusPanel})),[a,o]=(0,u.useState)(t),l=(0,u.useCallback)((t=>{jT({currentSlug:n,currentTitle:t,updateStory:e})}),[n,e]),i=(0,u.useCallback)((t=>{let{target:n}=t;const{value:r,name:a}=n;e({properties:{[a]:r}}),a===wT&&l(r)}),[l,e]),s=e=>{let{currentTarget:t}=e;o((e=>({...e,[t.name]:t.value})))};return c.createElement(c.Fragment,null,c.createElement(pO,null,c.createElement(Qu.Headline,{as:"label",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:wT},(0,d.__)("Story Title","web-stories")),c.createElement(mO,{name:wT,id:"story-title",showCount:!0,value:a[wT],onChange:s,onBlur:i,"aria-label":(0,d.__)("Story Title","web-stories"),placeholder:(0,d.__)("Add title","web-stories")})),c.createElement(pO,null,c.createElement(Qu.Headline,{as:"label",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:vT},(0,d.__)("Story Description","web-stories")),c.createElement(mO,{name:vT,id:"story-excerpt",showCount:!0,maxLength:200,value:a[vT],"aria-label":(0,d.__)("Story Description","web-stories"),placeholder:(0,d.__)("Write a description of the story","web-stories"),hint:(0,d.__)("Stories with a description tend to do better on search and have a wider reach","web-stories"),onChange:s,onBlur:i})),r&&c.createElement(r,null))},gO=p.default.div.withConfig({displayName:"storyPreview__PreviewWrapper",componentId:"sc-zk17py-0"})(["width:","px;height:","px;position:relative;margin-top:8px;"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}));gO.propTypes={width:Ma().number.isRequired,height:Ma().number.isRequired};const hO=p.default.div.withConfig({displayName:"storyPreview__PreviewContainer",componentId:"sc-zk17py-1"})(["width:","px;height:","px;position:absolute;"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}));hO.propTypes={width:Ma().number.isRequired,height:Ma().number.isRequired};const bO=p.default.img.withConfig({displayName:"storyPreview__Image",componentId:"sc-zk17py-2"})(["height:100%;width:100%;display:block;aspect-ratio:",";object-fit:cover;border-radius:",";background:",";"],ee.PAGE_RATIO,(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal})),EO=p.default.div.withConfig({displayName:"storyPreview__EmptyPlaceholder",componentId:"sc-zk17py-3"})(["height:100%;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal})),yO=p.default.div.withConfig({displayName:"storyPreview__Gradient",componentId:"sc-zk17py-4"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.gradient.posterOverlay})),_O=p.default.div.withConfig({displayName:"storyPreview__ScrimWrapper",componentId:"sc-zk17py-5"})(["position:absolute;top:0;box-sizing:border-box;width:100%;height:100%;border-radius:",";background:",";padding:8px;"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.opacity.black3})),vO=p.default.div.withConfig({displayName:"storyPreview__ScrimContainer",componentId:"sc-zk17py-6"})(["display:flex;height:100%;width:100%;flex-wrap:wrap;justify-content:space-between;"]),wO=p.default.div.withConfig({displayName:"storyPreview__ScrimTop",componentId:"sc-zk17py-7"})(["display:grid;grid-template-columns:50% 50%;grid-template-rows:auto;grid-template-areas:'publisherLogo editButton';justify-content:inherit;width:100%;"]),TO=p.default.img.withConfig({displayName:"storyPreview__PublisherLogo",componentId:"sc-zk17py-8"})(["grid-area:publisherLogo;height:24px;width:24px;border-radius:2px;box-shadow:0 0 8px rgba(0,0,0,0.08);"]),SO=(0,p.default)(qx).withConfig({displayName:"storyPreview__StyledMedia",componentId:"sc-zk17py-9"})(["grid-area:editButton;display:flex;flex-direction:row-reverse;"]),CO=p.default.div.withConfig({displayName:"storyPreview__ScrimBottom",componentId:"sc-zk17py-10"})(["width:100%;margin:auto 0 0;align-self:flex-end;"]),IO=(0,p.default)(Qu.Headline).attrs({as:"h3",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"storyPreview__Title",componentId:"sc-zk17py-11"})(["max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;padding:0;margin:0 0 4px;overflow:hidden;text-overflow:ellipsis;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),xO=(0,p.default)($e.Text).attrs({forwardAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"storyPreview__Publisher",componentId:"sc-zk17py-12"})(["display:block;margin:0;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),AO=()=>{const{title:e,featuredMedia:t,publisherLogo:n,updateStory:r}=Ya((e=>{let{state:{story:t},actions:n}=e;return{title:t?.title,featuredMedia:t?.featuredMedia||{},publisherLogo:t?.publisherLogo||{},updateStory:n.updateStory}})),{allowedImageMimeTypes:a,hasUploadMediaAction:o,publisher:l}=U((e=>{let{allowedMimeTypes:t,capabilities:n,metadata:r}=e;return{allowedImageMimeTypes:t?.image||Ue,hasUploadMediaAction:n?.hasUploadMediaAction,publisher:r?.publisher}})),i=(0,u.useMemo)((()=>a.map((e=>Pt(e))).flat()),[a]),s=Math.round(232/ee.PAGE_RATIO),p=(0,u.useCallback)((e=>r({properties:{featuredMedia:{id:e.id,url:e.src,height:e.height,width:e.width}}})),[r]);let m=(0,d.__)("No file types are currently supported.","web-stories");return i.length&&(m=(0,We.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories"),(0,xt.default)(i))),c.createElement(c.Fragment,null,c.createElement(Qu.Headline,{as:"label",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL},(0,d.__)("Cover Preview","web-stories")),c.createElement(gO,{width:232,height:s},c.createElement(hO,{width:232,height:s},t?.url?c.createElement(bO,{crossOrigin:"anonymous",src:t.url,width:t.width,height:t.height,alt:(0,d.__)("Preview image","web-stories"),"data-testid":"story_preview_featured_media"}):c.createElement(EO,null),c.createElement(yO,null),c.createElement(_O,null,c.createElement(vO,null,c.createElement(wO,null,n?.url?.length>0&&c.createElement(TO,{crossOrigin:"anonymous",width:n.width,height:n.height,src:n.url,alt:(0,d.__)("Publisher Logo","web-stories"),"data-testid":"story_preview_logo"}),o&&c.createElement(SO,{onChange:p,title:(0,d.__)("Select as poster image","web-stories"),buttonInsertText:(0,d.__)("Select as poster image","web-stories"),type:a,ariaLabel:(0,d.__)("Poster image","web-stories"),onChangeErrorText:m,imgProps:t,canUpload:o,variant:Ix.NONE,cropParams:{width:640,height:853}})),c.createElement(CO,null,e&&c.createElement(IO,{"data-testid":"story_preview_title"},e),l&&c.createElement(xO,{"data-testid":"story_preview_publisher"},l)))))))},kO=(0,p.default)(Pp).withConfig({displayName:"checklistButton__MainIcon",componentId:"sc-xuwt1b-0"})(["height:32px;width:auto;display:block;"]),OO=e=>{let{handleReviewChecklist:t}=e;const n=Bu(fu.PRIORITY);return c.createElement(Dp,{MainIcon:kO,label:(0,d.__)("Checklist","web-stories"),"aria-label":(0,d.__)("Checklist","web-stories"),popupZIndexOverride:10,onClick:t,notificationCount:n})},PO=p.default.div.withConfig({displayName:"content__Main",componentId:"sc-1d1lm9j-0"})(["display:grid;min-width:917px;width:100%;height:calc(100% - "," - ",");grid-template-columns:30.5% 34% 35.5%;grid-template-rows:auto;grid-template-areas:'preview mainPanel sidePanel' 'footer mainPanel sidePanel';"],"1px",TT),NO=p.default.div.withConfig({displayName:"content___StoryPreview",componentId:"sc-1d1lm9j-1"})(["grid-area:preview;margin:20px 18px 0 32px;"]),RO=p.default.div.withConfig({displayName:"content___MainStoryInfo",componentId:"sc-1d1lm9j-2"})(["grid-area:mainPanel;display:flex;flex-direction:column;padding:0 16px;overflow-y:scroll;gap:34px;& > section{border:none;& > h2{padding-top:0;padding-bottom:2px;& > button{height:1em;}}}"]),MO=p.default.div.attrs({role:"tabpanel"}).withConfig({displayName:"content__PanelContainer",componentId:"sc-1d1lm9j-3"})(["grid-area:sidePanel;height:100%;margin-left:18px;background-color:",";border-bottom-right-radius:",";overflow-y:scroll;",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),A.scrollbarCSS),LO=p.default.div.withConfig({displayName:"content__Footer",componentId:"sc-1d1lm9j-4"})(["grid-area:footer;display:flex;align-items:flex-end;margin:0 18px 20px 32px;"]),DO=e=>{let{handleReviewChecklist:t}=e;const{DocumentPane:n,id:r}=Zm((e=>{let{data:t}=e;return t?.modalSidebarTab||{}})),a=function(){const e=(0,u.useContext)(Ru)?.[0];if(!e)throw new Error("Cannot use `useHasChecklist` outside of `ChecklistCountProvider`");const{hasChecklist:t}=e;return t}();return c.createElement(PO,null,c.createElement(NO,null,c.createElement(AO,null)),c.createElement(RO,null,c.createElement(fO,null)),n&&c.createElement(MO,{"aria-label":(0,d.__)("Story Settings","web-stories"),id:r},c.createElement(n,null)),a&&c.createElement(LO,null,c.createElement(OO,{handleReviewChecklist:t})))},BO=p.default.div.withConfig({displayName:"publishModal__Container",componentId:"sc-16gvo2-0"})(["height:100%;color:",";background-color:",";border:",";border-radius:",";"],g.theme.colors.fg.primary,g.theme.colors.bg.primary,`1px solid ${g.theme.colors.divider.primary}`,g.theme.borders.radius.medium);const FO=function PublishModal(e){let{isOpen:t,onPublish:n,onClose:r,publishButtonDisabled:a,hasFutureDate:o}=e;const l=Nu((e=>{let{actions:t}=e;return t.handleReviewChecklist}));(0,u.useEffect)((()=>{t&&(0,P.trackEvent)("publish_modal")}),[t]);const i=(0,u.useCallback)((()=>{(0,P.trackEvent)("review_prepublish_checklist"),r({focusPublishButton:!1}),l()}),[r,l]);return c.createElement(S.Modal,{isOpen:t,onClose:r,contentLabel:(0,d.__)("Story details","web-stories"),contentStyles:{display:"block",width:"71vw",minWidth:"917px",height:"66vh",minHeight:"580px",overflow:"hidden"},overlayStyles:{backgroundColor:g.theme.colors.inverted.interactiveBg.modalScrim}},t&&c.createElement(Uu,null,c.createElement(BO,null,c.createElement(PT,{hasFutureDate:o,publishButtonDisabled:a,onClose:r,onPublish:n}),c.createElement(DO,{handleReviewChecklist:i}))))};const HO=function PublishButton(e){let{forceIsSaving:t}=e;const{date:n,storyId:r,saveStory:a,title:o,editLink:l,canPublish:i}=Ya((e=>{let{state:{story:{date:t,storyId:n,title:r,editLink:a},capabilities:o},actions:{saveStory:l}}=e;return{date:t,storyId:n,saveStory:l,title:r,editLink:a,canPublish:Boolean(o?.publish)}})),s=Nu((e=>{let{actions:{showPriorityIssues:t}}=e;return t})),[d,p]=(0,u.useState)(!1),m=(0,u.useRef)(),f=Pr(r,l),g=(0,$d.default)((0,Wd.default)((0,qd.toDate)(n,(0,Qd.default)()),1),(0,qd.toDate)(new Date,(0,Qd.default)())),h=(0,u.useCallback)((()=>{let e="pending";i&&(e=g?"future":"publish"),(0,P.trackEvent)("publish_story",{status:e,title_length:o.length}),p(!1),a({status:e}),f()}),[f,a,g,o,i]),b=(0,u.useCallback)((()=>{s(),p(!0)}),[s]),E=(0,u.useCallback)((function(){let{focusPublishButton:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(!1),e&&m.current.focus()}),[]);return c.createElement(c.Fragment,null,c.createElement(xT,{ref:m,onClick:b,disabled:t,hasFutureDate:g}),c.createElement(FO,{isOpen:d,onPublish:h,onClose:E,hasFutureDate:g,publishButtonDisabled:t}))};const UO=function SwitchToDraftButton(e){let{forceIsSaving:t=!1}=e;const{isSaving:n,saveStory:r}=Ya((e=>{let{state:{meta:{isSaving:t}},actions:{saveStory:n}}=e;return{isSaving:t,saveStory:n}})),a=Ic(),o=(0,u.useCallback)((()=>{r({status:"draft"})}),[r]),l=(0,d.__)("Switch to Draft","web-stories");return c.createElement(Tooltip,{title:l,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:o,disabled:n||t||a,"aria-label":l},c.createElement(qE,null)))};function PlainButton(e){let{text:t,onClick:n,disabled:r}=e;return c.createElement(Tooltip,{title:t,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,onClick:n,disabled:r,"aria-label":t},c.createElement(eb,null)))}const jO=function UpdateButton(e){let{hasUpdates:t=!1,forceIsSaving:n=!1}=e;const{isSaving:r,status:a,date:o,saveStory:l,canPublish:i}=Ya((e=>{let{state:{meta:{isSaving:t},story:{status:n,date:r},capabilities:a},actions:{saveStory:o}}=e;return{isSaving:t,status:n,date:r,saveStory:o,canPublish:Boolean(a?.publish)}})),s=r||n,u=Ic(),{state:{hasNewChanges:p}}=Cr();(0,fr.useGlobalKeyDownEffect)({key:["mod+s"]},(e=>{e.preventDefault(),s||u||l()}),[l,s,u]);const m=!s&&!u&&(p||t),f="draft"===a||!a;if("pending"===a)return c.createElement(PlainButton,{text:(0,d.__)("Save as pending","web-stories"),disabled:!m,onClick:()=>l()});if(f)return c.createElement(PlainButton,{text:(0,d.__)("Save draft","web-stories"),disabled:!m,onClick:()=>l()});const g=(0,$d.default)((0,Wd.default)((0,qd.toDate)(o,(0,Qd.default)()),1),(0,qd.toDate)(new Date,(0,Qd.default)()))&&"private"!==a?(0,d.__)("Schedule","web-stories"):(0,d.__)("Update","web-stories");return c.createElement(xT,{text:g,onClick:()=>l(),disabled:!m,isUploading:u,canPublish:i})},zO=p.default.input.withConfig({displayName:"title__Input",componentId:"sc-jcmnyx-0"})(["color:",";margin:0;"," background:",";border:none !important;text-align:start;min-width:60%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;border-radius:",";",";",""],(e=>{let{theme:t}=e;return`${t.colors.fg.primary} !important`}),ep.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{isHighlighted:t}=e;return!t&&"none !important"}),(e=>{let{theme:t}=e;return t.borders.radius.small}),tp.focusableOutlineCSS,(e=>{let{isHighlighted:t}=e;return t&&(0,p.css)([""," ",""],uv.OUTLINE,uv.FLASH)}));const GO=function HeaderTitle(){const{title:e,slug:t,updateStory:n}=Ya((e=>{let{state:{story:{title:t,slug:n}},actions:{updateStory:r}}=e;return{title:t,slug:n,updateStory:r}})),{highlight:r,resetHighlight:a,cancelHighlight:o}=nm((e=>({highlight:e[df.STORY_TITLE],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),l=(0,u.useCallback)((e=>n({properties:{title:e.target.value}})),[n]),i=(0,u.useCallback)((()=>{jT({currentSlug:t,currentTitle:e,updateStory:n})}),[t,e,n]);return"string"!=typeof e?null:c.createElement(zO,{ref:e=>{e&&r?.focus&&r?.showEffect&&(e.addEventListener("keydown",o,{once:!0}),e.focus())},value:e,type:"text",onBlur:i,onChange:l,placeholder:(0,d.__)("Add title","web-stories"),"aria-label":(0,d.__)("Story title","web-stories"),isHighlighted:r?.showEffect,onAnimationEnd:()=>a()})},YO=p.default.div.withConfig({displayName:"pageAdvancement__SwitchRow",componentId:"sc-11tn322-0"})(["margin-bottom:16px;"]),ZO=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"pageAdvancement__MutedText",componentId:"sc-11tn322-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),WO={MIN:1,MAX:20};const VO=function PageAdvancementPanel(e){let{nameOverride:t}=e;const{autoAdvance:n,defaultPageDuration:r,updateStory:a}=Ya((e=>{let{state:{story:{autoAdvance:t=Wr,defaultPageDuration:n=Zr}},actions:{updateStory:r}}=e;return{autoAdvance:t,defaultPageDuration:n,updateStory:r}})),[o,l]=(0,u.useState)(r);(0,u.useEffect)((()=>{l(r)}),[r]);const i=(0,u.useCallback)(((e,t)=>{a({properties:{autoAdvance:t}}),(0,P.trackEvent)("change_page_advancement",{status:t?"auto":"manual",duration:o})}),[a,o]),s=(0,u.useDebouncedCallback)((e=>{const t=(0,Ks.clamp)(e,WO);e!==t&&l(t),r!==t&&(a({properties:{defaultPageDuration:t}}),(0,P.trackEvent)("change_page_advancement",{status:n?"auto":"manual",duration:t}))}),800);(0,u.useEffect)((()=>{s(o)}),[o,s]);const p=(0,u.useCallback)(((e,t)=>l(t)),[]);return c.createElement(iO,{name:t||"pageAdvancement",title:(0,d.__)("Page Advancement","web-stories"),collapsedByDefault:!1},c.createElement(Jx,null,c.createElement(ZO,null,(0,d.__)("Control whether a story auto-advances between pages, or whether the reader has to manually tap to advance.","web-stories"))),c.createElement(YO,null,c.createElement(hA,{groupLabel:(0,d.__)("Page Advancement","web-stories"),name:"page-advancement-switch",value:n,onLabel:(0,d.__)("Auto","web-stories"),offLabel:(0,d.__)("Manual","web-stories"),onChange:i})),n&&c.createElement(Jx,null,c.createElement(ex,{unit:` ${(0,d.__)("seconds","web-stories")}`,suffix:(0,d.__)("Duration","web-stories"),value:o,onChange:p,"aria-label":(0,d.__)("Default page duration in seconds","web-stories"),min:WO.MIN,max:WO.MAX,isFloat:!0,containerStyleOverride:rp})))},$O=(e,t)=>{let{MIN:n,MAX:r}=t;return e>=n&&e<=r},qO={MIN:1,MAX:200},KO=(0,p.default)(Jx).withConfig({displayName:"slug__PermalinkRow",componentId:"sc-12ylqoy-0"})(["margin-bottom:12px;input{color:",";:active,:focus,.","{color:",";}}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),hp.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.fg.primary})),XO=p.default.div.withConfig({displayName:"slug__LinkContainer",componentId:"sc-12ylqoy-1"})(["margin-bottom:16px;"]);const QO=function SlugPanel(e){let{nameOverride:t}=e;const{slug:n,link:r,permalinkConfig:a,updateStory:o}=Ya((e=>{let{state:{story:{slug:t="",link:n,permalinkConfig:r}},actions:{updateStory:a}}=e;return{slug:t,link:n,permalinkConfig:r,updateStory:a}})),[l,i]=(0,u.useState)(n);(0,u.useEffect)((()=>{i(n)}),[n]);const s=(0,u.useCallback)((e=>{const t=e.slice(0,qO.MAX);o({properties:{slug:ko(t)}})}),[o]),p=(0,u.useCallback)((e=>i(ko(e.target.value,!0))),[]),m=(0,u.useCallback)((e=>s(e.target.value)),[s]),f=l&&a&&$O(l.length,qO)?a.prefix+l+a.suffix:r;return c.createElement(iO,{name:t||"permalink",title:(0,d.__)("Permalink","web-stories"),collapsedByDefault:!1},a&&c.createElement(KO,null,c.createElement(tS,{value:String(l),onChange:p,onBlur:m,placeholder:(0,d.__)("Enter slug","web-stories"),"aria-label":(0,d.__)("URL slug","web-stories"),minLength:qO.MIN,maxLength:qO.MAX,containerStyleOverride:rp})),c.createElement(XO,null,c.createElement(lu.Link,{rel:"noopener noreferrer",target:"_blank",href:r,size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},f)))};function JO(e){try{return"/"!==new URL(e).pathname}catch{return!1}}function CORSMessage(){return c.createElement(ou.default,{mapping:{a:c.createElement(lu.Link,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM,href:"https://wp.stories.google/docs/troubleshooting/common-issues/",target:"_blank",rel:"noopener noreferrer",onClick:e=>(0,P.trackClick)(e,"click_cors_check_docs")})}},(0,d.__)("Unable to load media. Make sure CORS is set up correctly for the file. <a>Learn more</a>.","web-stories"))}const eP=function(e){let{onSelect:t,onClose:n,onError:r,allowedFileTypes:a,canUseProxy:o}=e;const[l,i]=(0,u.useState)(!1),[s,p]=(0,u.useState)(""),[m,f]=(0,u.useState)(null),{actions:{getHotlinkInfo:g}}=W(),{checkResourceAccess:h}=Zo(),b=m||!s||l,E=function(e){let t=(0,d.__)("No file types are currently supported.","web-stories");return e.length&&(t=(0,We.default)(
/* translators: %s is a list of allowed file extensions. */
(0,d.__)("You can insert %s.","web-stories"),(0,xt.default)(e))),t}(a),y=(0,u.useCallback)((()=>{if(s?.length>0){const e=Kr(s);p(e),JO(e)||f((0,d.__)("Invalid link.","web-stories"))}}),[s,f,p]),_=(0,u.useCallback)((e=>{let{target:{value:t}}=e;m&&f(null),p(t)}),[m,p,f]),v=(0,u.useCallback)((()=>{n(),p(""),f(null),i(!1)}),[n]),w=(0,u.useCallback)((async()=>{if(s)if(JO(s)){i(!0);try{const e=await g(s);if(!a.includes(e?.ext))return void f((0,d.__)("Invalid link.","web-stories"));const n=await h(s);if(n&&!o)return void f(c.createElement(CORSMessage,null));await t({link:s,hotlinkInfo:e,needsProxy:n}),p(""),f(null)}catch(e){r&&r(e),f(function(e,t){switch(e){case"rest_invalid_param":case"rest_invalid_url":return(0,d.__)("Invalid link.","web-stories");case"rest_invalid_ext":return(0,We.default)(
/* translators: %s is the description with allowed file extensions. */
(0,d.__)("Invalid link. %s","web-stories"),t);default:return(0,d.__)("Media failed to load. Please ensure the link is valid and the site allows linking from external sites.","web-stories")}}(e.code,E))}finally{i(!1)}}else f((0,d.__)("Invalid link.","web-stories"))}),[s,g,a,h,o,t,r,E]);return{action:{onChange:_,onSubmit:(0,u.useCallback)((e=>{e.preventDefault(),b||w()}),[b,w]),onBlur:y,onCloseDialog:v,onInsert:w},state:{description:E,isInserting:l,link:s,errorMsg:m,isDisabled:b}}},tP=p.default.form.withConfig({displayName:"hotlinkModal__InputWrapper",componentId:"sc-21vzo8-0"})(["margin:16px 4px;width:470px;height:100px;"]);const nP=function HotlinkModal(e){let{isOpen:t,onClose:n,onSelect:r,onError:a,allowedFileTypes:o=[],insertText:l=(0,d.__)("Insert","web-stories"),insertingText:i=(0,d.__)("Inserting…","web-stories"),title:s,canUseProxy:p=!0}=e;const m=(0,u.useRef)(null),{action:{onSubmit:f,onBlur:g,onChange:h,onCloseDialog:b,onInsert:E},state:{errorMsg:_,isInserting:v,link:w,description:T,isDisabled:S}}=eP({allowedFileTypes:o,onClose:n,onError:a,onSelect:r,canUseProxy:p}),C=v?i:l;return(0,u.useLayoutEffect)((()=>{const e=setTimeout((()=>{t&&m.current&&m.current.focus()}));return()=>clearTimeout(e)}),[t,m]),c.createElement(y,{onClose:b,isOpen:t,title:s,onPrimary:E,primaryText:C,secondaryText:(0,d.__)("Cancel","web-stories"),primaryRest:{disabled:S}},c.createElement(tP,{onSubmit:f},c.createElement(tS,{ref:m,onChange:h,value:w,hint:_||T,hasError:Boolean(_),onBlur:g,label:(0,d.__)("URL","web-stories"),type:"url",required:!0})))};var rP=n(25820),aP=n(66044);function oP(){return oP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oP.apply(this,arguments)}const lP=(0,p.default)(m.Button).withConfig({displayName:"dropDownMenu__MenuButton",componentId:"sc-160pl0l-0"})(["top:4px;right:4px;"]),iP=p.default.div.withConfig({displayName:"dropDownMenu__DropDownContainer",componentId:"sc-160pl0l-1"})(["margin-top:10px;"]),sP=p.default.div.withConfig({displayName:"dropDownMenu__MenuContainer",componentId:"sc-160pl0l-2"})(["z-index:1;"]),cP=(0,p.css)(["min-width:160px;margin-top:0;"]),dP=(0,p.default)(rh.default).withConfig({displayName:"dropDownMenu__ActiveIcon",componentId:"sc-160pl0l-3"})(["position:absolute;left:4px;top:50%;transform:translateY(-50%);"]),uP=(0,u.forwardRef)((function CustomItemRenderer(e,t){let{option:n,isSelected:r,...a}=e;const{MediaUpload:o}=U();return n.mediaPickerProps?c.createElement(o,oP({},n.mediaPickerProps,{render:e=>c.createElement(rP.ListItem,oP({},a,{ref:t,isSelected:r,disabled:n.disabled,"aria-disabled":n.disabled,onClick:t=>{a.onClick?.(t),e(t)}}),c.createElement(rP.ListItemLabelDisplayText,{forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},n.label))})):c.createElement(rP.ListItem,oP({},a,{ref:t,isSelected:r,disabled:n.disabled,"aria-disabled":n.disabled}),r&&c.createElement(dP,{"data-testid":"dropdownMenuItem_active_icon","aria-label":(0,d.__)("Selected","web-stories"),width:32,height:32}),c.createElement(rP.ListItemLabelDisplayText,{forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},n.label))}));const pP=function DropDownMenu(e){let{display:t,isMenuOpen:n,onMenuOpen:r,onMenuClose:a,onMenuSelected:o,setParentActive:l=aP.noop,options:i,children:s,ariaLabel:p=(0,d.__)("More","web-stories"),className:m,...g}=e;const h=(0,u.useRef)(),b=(0,u.useCallback)((()=>{a(),h.current?.focus(),l()}),[a,l]);$C({ref:h.current||null},[],3);const E=ws();(0,fr.useKeyDownEffect)(h.current||null,"tab",E,[E]);const y=(0,u.useMemo)((()=>`list-${(0,pe.default)()}`),[]),_=(0,u.useMemo)((()=>`button-${(0,pe.default)()}`),[]);return c.createElement(sP,{className:m},c.createElement(lP,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,ref:h,onClick:r,"aria-label":p,"aria-pressed":n,"aria-haspopup":!0,"aria-expanded":n,"aria-owns":n?y:null,id:_,$display:t,tabIndex:t||n?0:-1},s),(t||n)&&c.createElement(bS.Popup,{anchor:h,placement:Bd.PLACEMENT.BOTTOM_START,isOpen:n},c.createElement(iP,null,c.createElement(kx.Menu,oP({parentId:_,listId:y,onMenuItemClick:(e,t)=>{o(t)},options:i,onDismissMenu:b,hasMenuRole:!0,menuStylesOverride:cP,renderItem:uP},g)))))},mP=p.default.div.withConfig({displayName:"fileRow__InputRow",componentId:"sc-w8gml-0"})(["flex-grow:1;margin:0 8px;min-width:0;"]),fP=(0,p.default)(Qy).withConfig({displayName:"fileRow__ReplaceIcon",componentId:"sc-w8gml-1"})(["vertical-align:bottom;"]),gP=(0,p.default)(sE).withConfig({displayName:"fileRow__LinkIcon",componentId:"sc-w8gml-2"})(["width:24px;height:24px;vertical-align:bottom;"]),hP=(0,p.default)(mg).withConfig({displayName:"fileRow__UploadIcon",componentId:"sc-w8gml-3"})(["width:24px;height:24px;vertical-align:bottom;"]),bP=p.default.a.withConfig({displayName:"fileRow__Link",componentId:"sc-w8gml-4"})(["",";"],(e=>{let{theme:t}=e;return(0,p.css)(["color:",";text-decoration:none;cursor:pointer;:hover,:active,:focus{text-decoration:underline;color:"," !important;}",""],t.colors.fg.primary,t.colors.fg.primary,tp.focusableOutlineCSS(t.colors.border.focus))})),EP=(0,p.default)(m.Button).withConfig({displayName:"fileRow__StyledButton",componentId:"sc-w8gml-5"})(["",";"],(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),yP=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"fileRow__FileName",componentId:"sc-w8gml-6"})(["color:",";text-overflow:ellipsis;overflow:hidden;"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const _P=function FileRow(e){let{id:t,isExternal:n,src:r,title:a,options:o,removeItemLabel:l,onRemove:i,children:s}=e;const p=[{group:o}],[m,g]=(0,u.useState)(!1),h=(0,mk.default)(),b=(0,u.useCallback)((e=>{g(!1),o.find((t=>t.value===e))?.onClick()}),[o]),E=(0,u.useCallback)((()=>{i(t),h((0,d.__)("File removed","web-stories"))}),[t,i,h]),y=n?(0,d.__)("External file","web-stories"):(0,d.__)("Local file","web-stories");return c.createElement(Jx,{key:`row-filename-${t}`},c.createElement(Tooltip,{title:y},n?c.createElement(gP,{title:y}):c.createElement(hP,{title:y})),c.createElement(mP,null,c.createElement(yP,null,c.createElement(bP,{href:r,rel:"noreferrer",target:"_blank"},a))),s,o.length>0&&c.createElement(pP,{onMenuOpen:()=>g(!0),isMenuOpen:m,onMenuSelected:b,display:!0,onMenuClose:()=>g(!1),options:p,ariaLabel:(0,d.__)("Replace file","web-stories")},c.createElement(Tooltip,{title:(0,d.__)("Replace","web-stories")},c.createElement(fP,null))),c.createElement(Tooltip,{hasTail:!0,title:l},c.createElement(EP,{"aria-label":l,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:E},c.createElement(O_.default,null))))},vP=(0,p.default)(Jx).withConfig({displayName:"captionsPanelContent__ButtonRow",componentId:"sc-nb4jvi-0"})(["gap:12px;"]),wP=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"captionsPanelContent__FileName",componentId:"sc-nb4jvi-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),TP=(0,p.default)(m.Button).withConfig({displayName:"captionsPanelContent__HotlinkButton",componentId:"sc-nb4jvi-2"})(["padding:12px 8px;"]),SP="hotlink_caption";const CP=function CaptionsPanelContent(e){let{isIndeterminate:t=!1,tracks:n=[],captionText:r=(0,d.__)("Upload a file","web-stories"),handleChangeTrack:a,handleRemoveTrack:o,renderUploadButton:l,removeItemLabel:i=(0,d.__)("Remove file","web-stories")}=e;const{allowedMimeTypes:{caption:s=[]},capabilities:{hasUploadMediaAction:p},MediaUpload:m}=U(),[g,h]=(0,u.useState)(!1),b=(0,C.useFeature)("captionHotlinking"),E=(0,u.useMemo)((()=>s.map((e=>Pt(e))).flat()),[s]),y=(0,u.useCallback)((e=>{let{link:t,hotlinkInfo:n,needsProxy:r}=e;a({src:t,needsProxy:r}),(0,P.trackEvent)(SP,{event_label:t,file_size:n.fileSize,file_type:n.mimeType,needs_proxy:r}),h(!1)}),[a]),_=(0,u.useCallback)((e=>(0,P.trackError)(SP,e?.message)),[]);if(!s?.length)return null;const v=[p&&{label:(0,d.__)("Upload a file","web-stories"),value:"upload",onClick:()=>{},mediaPickerProps:{onSelect:a,onSelectErrorMessage:(0,d.__)("Please choose a VTT file to use as caption.","web-stories"),type:s,title:r,buttonInsertText:(0,d.__)("Select caption","web-stories")}},b&&{label:(0,d.__)("Link to a file","web-stories"),value:"hotlink",onClick:()=>{h(!0)}}].filter(Boolean);return c.createElement(c.Fragment,null,t&&c.createElement(Jx,null,c.createElement(wP,null,we)),n.map((e=>c.createElement(_P,{key:e.id,id:e.id,src:e.track,title:e.track.split("/").pop(),isExternal:!e.trackId,options:v,onRemove:o,removeItemLabel:i}))),!n.length&&!t&&c.createElement(vP,{spaceBetween:!1},p&&c.createElement(m,{onSelect:a,onSelectErrorMessage:(0,d.__)("Please choose a VTT file to use as caption.","web-stories"),type:s,title:r,buttonInsertText:(0,d.__)("Select caption","web-stories"),render:l}),b&&c.createElement(TP,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>h(!0)},(0,d.__)("Link to caption file","web-stories"))),b&&c.createElement(nP,{title:(0,d.__)("Insert external captions","web-stories"),isOpen:g,onSelect:y,onError:_,onClose:()=>h(!1),allowedFileTypes:E,insertText:(0,d.__)("Use caption","web-stories"),insertingText:(0,d.__)("Selecting caption","web-stories"),canUseProxy:!1}))};function IP(){return IP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IP.apply(this,arguments)}const xP=(0,p.default)(gI.Checkbox).withConfig({displayName:"loopPanelContent__StyledCheckbox",componentId:"sc-4opv01-0"})(["",""],(e=>{let{theme:t}=e;return`\n    input[type='checkbox']&.${hp.FOCUS_VISIBLE_SELECTOR} ~ div, input[type='checkbox']:focus ~ div {\n      box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;\n    }\n  `})),AP=p.default.div.withConfig({displayName:"loopPanelContent__Wrapper",componentId:"sc-4opv01-1"})(["display:flex;gap:12px;align-items:center;"]);const kP=function LoopPanelContent(e){let{loop:t,className:n="",onChange:r,...a}=e;const o=(0,u.useInitializedValue)((()=>`cb-${(0,pe.default)()}`));return c.createElement(AP,{className:n},c.createElement(xP,IP({id:o,checked:t,onChange:r},a)),c.createElement($e.Text,{as:"label",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,htmlFor:o},(0,d.__)("Loop","web-stories")))},OP=(0,p.default)(Ay.default).withConfig({displayName:"audioPlayer__Play",componentId:"sc-gch3p5-0"})(["width:30px !important;height:30px !important;"]),PP=(0,p.default)(y_.default).withConfig({displayName:"audioPlayer__Stop",componentId:"sc-gch3p5-1"})(["width:30px !important;height:30px !important;"]),NP=(0,p.default)(m.Button).withConfig({displayName:"audioPlayer__StyledButton",componentId:"sc-gch3p5-2"})(["",";"],(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),RP=p.default.div.withConfig({displayName:"audioPlayer__Wrapper",componentId:"sc-gch3p5-3"})((e=>{let{theme:t}=e;return(0,p.css)(["color:",";",";"],t.colors.fg.primary,ep.expandPresetStyles({preset:{...t.typography.presets.paragraph[qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:t}))})),MP=p.default.audio.withConfig({displayName:"audioPlayer__Audio",componentId:"sc-gch3p5-4"})(["display:none;"]);const LP=function AudioPlayer(e){let{src:t,mimeType:n,tracks:r=[],audioId:a,loop:o}=e;const[l,i]=(0,u.useState)(!1),s=(0,u.useRef)(),{getProxiedUrl:p}=Zo(),m=(0,u.useCallback)((()=>{const e=s.current;e&&(l?e.pause():e.play().catch((()=>{})))}),[l]);(0,u.useEffect)((()=>{const e=s.current;if(!e)return;const t=()=>i(!0),n=()=>i(!1),r=()=>{e.currentTime=0,i(!1)};return e.addEventListener("play",t),e.addEventListener("pause",n),e.addEventListener("ended",r),()=>{e.removeEventListener("play",t),e.removeEventListener("pause",n),e.removeEventListener("ended",r)}}),[s]);const g=l?(0,d.__)("Pause","web-stories"):(0,d.__)("Play","web-stories"),h=r.map((e=>{const t=p(e,e?.track);return{...e,track:t}}));return c.createElement(RP,null,c.createElement(MP,{crossOrigin:"anonymous",loop:o,ref:s,id:a},c.createElement("source",{src:t,type:n}),h&&h.map(((e,t)=>{let{srclang:n,label:r,track:a,id:o}=e;return c.createElement("track",{srcLang:n,label:r,kind:"metadata",src:a,key:o,default:0===t})}))),c.createElement(Tooltip,{hasTail:!0,title:g,popupZIndexOverride:10},c.createElement(NP,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,"aria-label":g,onClick:m},l?c.createElement(PP,null):c.createElement(OP,null))))},DP=(0,p.default)(m.Button).withConfig({displayName:"backgroundAudioPanelContent__StyledButton",componentId:"sc-t2iem8-0"})(["",";"],(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),BP=(0,p.default)(DP).withConfig({displayName:"backgroundAudioPanelContent__UploadButton",componentId:"sc-t2iem8-1"})(["padding:12px 8px;"]),FP=(0,p.default)(Jx).withConfig({displayName:"backgroundAudioPanelContent__ButtonRow",componentId:"sc-t2iem8-2"})(["gap:12px;"]),HP=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"backgroundAudioPanelContent__SectionHeading",componentId:"sc-t2iem8-3"})(["font-weight:bold;margin-bottom:12px;"]),UP="hotlink_audio";const jP=function BackgroundAudioPanelContent(e){let{backgroundAudio:t,updateBackgroundAudio:n,showCaptions:r=!1,showLoopControl:a=!1,audioId:o}=e;const{allowedMimeTypes:{audio:l},capabilities:{hasUploadMediaAction:i},MediaUpload:s}=U(),[p,m]=(0,u.useState)(!1),g=(0,C.useFeature)("audioHotlinking"),h=(0,C.useFeature)("captionHotlinking"),{getProxiedUrl:b}=Zo(),E=(0,u.useMemo)((()=>l.map((e=>Pt(e))).flat()),[l]),{resource:y={},tracks:_=[],loop:v=!0}=t||{},w=_.length>0||i||h,T=b(y,y?.src),S=(0,We.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,xt.default)(E)),I=(0,u.useCallback)((e=>{let{src:t,id:o,mimeType:l,needsProxy:i,length:s,lengthFormatted:c}=e;const d={resource:{src:t,id:o,mimeType:l,length:s,lengthFormatted:c,needsProxy:i}};r&&(d.tracks=[]),a&&(d.loop=!0),n(d)}),[r,a,n]),x=(0,u.useCallback)((async e=>{let{link:t,hotlinkInfo:n,needsProxy:r}=e;const{mimeType:a}=n,o=b({needsProxy:r},t),l=await re(o),{length:i,lengthFormatted:s}=le(l);I({src:t,mimeType:a,length:i,lengthFormatted:s,needsProxy:r}),m(!1),(0,P.trackEvent)(UP,{event_label:t,file_size:n.fileSize,file_type:n.mimeType,needs_proxy:r}),m(!1)}),[b,I]),A=(0,u.useCallback)((e=>(0,P.trackError)(UP,e?.message)),[]),k=(0,u.useCallback)((e=>{n({...t,tracks:e})}),[t,n]),O=(0,u.useCallback)((e=>{n({...t,loop:e.target.checked})}),[t,n]),N=(0,u.useCallback)((e=>{let t=[];if(e){const n=_.findIndex((t=>{let{id:n}=t;return n===e}));t=[..._.slice(0,n),..._.slice(n+1)]}k(t)}),[_,k]),R=(0,u.useCallback)((e=>{let{src:t="",id:n,needsProxy:r=!1}=e;const a={track:t,trackId:n,id:(0,pe.default)(),kind:"captions",srclang:"",label:"",needsProxy:r};k([a])}),[k]),M=(0,u.useCallback)((e=>c.createElement(BP,{onClick:e,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Upload an audio file","web-stories"))),[]),L=(0,u.useCallback)((e=>c.createElement(BP,{onClick:e,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Upload audio captions","web-stories"))),[]),D=[i&&{label:(0,d.__)("Upload a file","web-stories"),value:"upload",onClick:()=>{},mediaPickerProps:{onSelect:I,onSelectErrorMessage:(0,d.__)("Please choose a VTT file to use as caption.","web-stories"),type:l,title:(0,d.__)("Upload an audio file","web-stories"),buttonInsertText:(0,d.__)("Select audio file","web-stories")}},g&&{label:(0,d.__)("Link to a file","web-stories"),value:"hotlink",onClick:()=>{m(!0)}}].filter(Boolean);return c.createElement(c.Fragment,null,!y?.src&&c.createElement(FP,{spaceBetween:!1},i&&c.createElement(s,{onSelect:I,onSelectErrorMessage:S,type:l,title:(0,d.__)("Upload an audio file","web-stories"),buttonInsertText:(0,d.__)("Select audio file","web-stories"),render:M}),g&&c.createElement(BP,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>m(!0)},(0,d.__)("Link to audio file","web-stories"))),y?.src&&c.createElement(c.Fragment,null,c.createElement(_P,{id:y.id,src:y.src,title:y.src.split("/").pop(),isExternal:!y.id,options:D,onRemove:()=>n(null),removeItemLabel:(0,d.__)("Remove file","web-stories")},c.createElement(LP,{title:y.src.substring(y?.src.lastIndexOf("/")+1),src:T,mimeType:y.mimeType,tracks:_,audioId:o,loop:v})),r&&w&&c.createElement(c.Fragment,null,c.createElement(HP,null,(0,d.__)("Caption and Subtitles","web-stories")),c.createElement(CP,{captionText:(0,d.__)("Upload a file","web-stories"),tracks:_||[],handleChangeTrack:R,handleRemoveTrack:N,renderUploadButton:L})),a&&y?.length>0&&c.createElement(c.Fragment,null,c.createElement(HP,null,(0,d.__)("Options","web-stories")),c.createElement(Jx,{spaceBetween:!1},c.createElement(kP,{loop:v,onChange:O})))),g&&c.createElement(nP,{title:(0,d.__)("Insert external background audio","web-stories"),isOpen:p,onError:A,onSelect:x,onClose:()=>m(!1),allowedFileTypes:E,insertText:(0,d.__)("Use audio file","web-stories"),insertingText:(0,d.__)("Selecting audio file","web-stories"),canUseProxy:!r&&!a}))},zP=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"backgroundAudio__HelperText",componentId:"sc-1n4veap-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const GP=function BackgroundAudioPanel(e){let{nameOverride:t}=e;const{capabilities:{hasUploadMediaAction:n}}=U(),{backgroundAudio:r,updateStory:a}=Ya((e=>{let{state:{story:{backgroundAudio:t}},actions:{updateStory:n}}=e;return{backgroundAudio:t,updateStory:n}})),o=(0,u.useCallback)((e=>{a({properties:{backgroundAudio:e}})}),[a]);return r||n?c.createElement(iO,{name:t||"backgroundAudio",title:(0,d.__)("Background Audio","web-stories"),collapsedByDefault:!0},c.createElement(Jx,null,c.createElement(zP,null,(0,d.__)("Select an audio file that plays throughout the story.","web-stories"))),c.createElement(jP,{backgroundAudio:r,updateBackgroundAudio:o})):null},YP=(Ma().shape({capabilities:Ma().object,description:Ma().string,hierarchical:Ma().bool,labels:Ma().object,name:Ma().string.isRequired,restBase:Ma().string.isRequired,showCloud:Ma().bool,slug:Ma().string.isRequired,types:Ma().arrayOf(Ma().string),visibility:Ma().object}),(0,p.default)(Qu.Headline).attrs({as:"h3",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"shared__ContentHeading",componentId:"sc-1pfee07-0"})(["margin:4px 0 16px;font-weight:",";"],(e=>{let{theme:t}=e;return t.typography.weight.regular}))),ZP=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.LINK}).withConfig({displayName:"shared__LinkButton",componentId:"sc-1pfee07-1"})([""," margin-bottom:16px;font-weight:500;"],ep.expandTextPreset(((e,t)=>{let{link:n}=e,{X_SMALL:r}=t;return n[r]}))),WP=p.default.div.withConfig({displayName:"shared__SiblingBorder",componentId:"sc-1pfee07-2"})(["padding-left:16px;padding-right:16px;& + &{border-top:1px solid ",";padding-top:16px;padding-bottom:8px;}"],(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),VP={Heading:(0,p.default)(YP).attrs({as:"h4"}).withConfig({displayName:"shared__Heading",componentId:"sc-1pfee07-3"})(["margin-bottom:4px;"]),Wrapper:p.default.div.withConfig({displayName:"shared__Wrapper",componentId:"sc-1pfee07-4"})(["padding:18px 0px;"]),List:p.default.ul.withConfig({displayName:"shared__List",componentId:"sc-1pfee07-5"})(["all:unset;cursor:pointer;"]),ListItem:p.default.li.withConfig({displayName:"shared__ListItem",componentId:"sc-1pfee07-6"})(["all:unset;"]),Word:(0,p.default)(ZP).withConfig({displayName:"shared__Word",componentId:"sc-1pfee07-7"})(["margin:0;display:revert;"])},$P="NO_PARENT_VALUE",qP=p.default.div.withConfig({displayName:"HierarchicalTermSelector__ContentArea",componentId:"sc-17x36f5-0"})(["label,* > label{",";color:",";}"],(e=>{let{theme:t}=e;return ep.expandPresetStyles({preset:t.typography.presets.label[qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL],theme:t})}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),KP=p.default.form.withConfig({displayName:"HierarchicalTermSelector__AddNewCategoryForm",componentId:"sc-17x36f5-1"})(["margin:24px 0 16px;"]),XP=p.default.div.withConfig({displayName:"HierarchicalTermSelector__ButtonContainer",componentId:"sc-17x36f5-2"})(["display:flex;gap:8px;"]),QP=(0,p.default)($e.Text).attrs({forwardedAs:"label",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"HierarchicalTermSelector__Label",componentId:"sc-17x36f5-3"})(["display:inline-block;margin:12px 0;"]),JP=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.SECONDARY}).withConfig({displayName:"HierarchicalTermSelector__AddNewCategoryButton",componentId:"sc-17x36f5-4"})(["margin-top:20px;"]);const eN=function HierarchicalTermSelector(e){let{noParentId:t=$P,taxonomy:n,canCreateTerms:r}=e;const{createTerm:a,termCache:o,terms:l,setTerms:i}=Yi((e=>{let{state:{termCache:t,terms:n},actions:{createTerm:r,setTerms:a}}=e;return{createTerm:r,setTerms:a,termCache:t,terms:n}})),s=(0,u.useMemo)((()=>o?.[n.restBase]?Object.values(o[n.restBase]).map((e=>({id:e.id,parent:e.parent,value:e.id,label:e.name,checked:l[n.restBase]?.includes(e.id),slug:e.slug}))):[]),[n,o,l]),[p,m]=(0,u.useState)(!1),[f,g]=(0,u.useState)(""),[h,b]=(0,u.useState)(t),E=(0,u.useMemo)(pe.default,[]),[y,_]=(0,u.useState)(!1),v=(0,u.useRef)(),w=(0,u.useRef)(),[T,S]=(0,u.useState)(!1),[C,I]=(0,u.useState)(""),x=(0,u.useCallback)((e=>I(e)),[]),A=(0,mk.default)("assertive"),k=(0,u.useCallback)((()=>{g(""),b(t)}),[t]),O=(0,u.useCallback)(((e,t)=>{let{id:r,checked:a}=t;const o=s.find((e=>e.id===r));i(n,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e.findIndex((e=>e===o.id));return a&&-1===t?[...e,o.id]:!a&&t>-1?[...e.slice(0,t),...e.slice(t+1)]:e}))}),[s,i,n]),P=(0,u.useCallback)((()=>{m(!p),k(),_(!p),S(p)}),[k,p]),N=(0,u.useCallback)((e=>{g(e.target.value)}),[]),R=(0,u.useMemo)((()=>s.find((e=>e.id===h))?.slug),[h,s]),M=(0,u.useCallback)((e=>{e.preventDefault();a(n,f,{id:h===t?0:h,slug:R},!0),A((0,We.default)(
/* Translators: %s: Taxonomy label name. */
(0,d.__)("%s added.","web-stories"),n.labels.singular_name)),m(!1),k(),S(p)}),[a,A,f,t,k,h,p,n,R]),L=(0,u.useCallback)(((e,t)=>b(t)),[]);(0,u.useEffect)((()=>{const e=v.current;if(e){const t=e=>{"Enter"===e.key&&M(e)};return e.addEventListener("keypress",t),()=>{e.removeEventListener("keypress",t)}}return null}),[M,v]),(0,u.useEffect)((()=>{T&&w.current.focus()}),[T]);const D=(0,u.useMemo)((()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=gk(e);return Ek(bk(n,t))}(s,C)),[s,C]),B=(0,u.useMemo)((()=>[{value:$P,label:(0,d._x)("None","parent taxonomy","web-stories")}].concat(D).map((e=>{let{$level:t,label:n,...r}=e;return{...r,label:`${Array.from({length:t},(()=>"— ")).join("")} ${n}`}}))),[D]);return c.createElement(qP,null,c.createElement(YP,null,n.labels.name),c.createElement(xk,{inputValue:C,onInputChange:x,label:n.labels.searchItems,options:D,onChange:O,noOptionsText:n.labels?.notFound}),r?c.createElement(c.Fragment,null,!p&&c.createElement(ZP,{ref:w,"aria-expanded":!1,onClick:P},n.labels.addNewItem),p?c.createElement(KP,{ref:v,onSubmit:M},c.createElement(tS,{autoFocus:!0,name:n.labels.newItemName,label:n.labels.newItemName,value:f,onChange:N,hasFocus:y}),c.createElement(QP,{htmlFor:E},n.labels.parentItem),c.createElement(ok.DropDown,{id:E,ariaLabel:n.labels.parentItem,options:B,selectedValue:h,onMenuItemClick:L}),c.createElement(XP,null,c.createElement(JP,{disabled:!f.length,type:"submit"},n.labels.addNewItem),c.createElement(JP,{"aria-expanded":!0,onClick:P},(0,d.__)("Cancel","web-stories")))):null):null)};function tN(e){return e.replace(/( +)/g," ").trim()}function nN(e){const t=new Map;return e.forEach((e=>{t.set(ko(e),e)})),[...t.values()]}function rN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length===t.length&&e.every((e=>t.includes(e)))}const aN="updateValue",oN="submitValue",lN="removeTag",iN="resetOffset",sN="resetValue",cN="incrementOffset",dN="decrementOffset",uN="updateTags";const pN=function(e,t){switch(t.type){case aN:{const n=t.payload.split(",");if(n.length<=1)return{...e,value:t.payload};const r=n.slice(0,-1).map(tN).filter((e=>e.length)),a=n[n.length-1];return function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>e.includes(t)))}(r,e.tags)?{...e,value:a}:{...e,value:a,tagBuffer:nN([...e.tags.slice(0,e.tags.length-e.offset),...r,...e.tags.slice(e.tags.length-e.offset)])}}case oN:{const n=tN(t?.payload||e.value);return""===n||e.tags.includes(n)?{...e,value:""}:{...e,value:"",tagBuffer:nN([...e.tags.slice(0,e.tags.length-e.offset),n,...e.tags.slice(e.tags.length-e.offset)])}}case lN:{const n="string"==typeof t.payload?e.tags.findIndex((e=>e===t.payload)):e.tags.length-1-e.offset;return n<0?e:{...e,tagBuffer:[...e.tags.slice(0,n),...e.tags.slice(n+1,e.tags.length)]}}case cN:return{...e,offset:(0,Ks.clamp)(e.offset+1,{MIN:0,MAX:e.tags.length})};case dN:return{...e,offset:(0,Ks.clamp)(e.offset-1,{MIN:0,MAX:e.tags.length})};case iN:return{...e,offset:0};case sN:return{...e,value:""};case uN:{const n=e.tags.map((e=>[ko(e),e])),r=t.payload.map((e=>[ko(e),e]));if(rN(n.map((e=>{let[t]=e;return t})),r.map((e=>{let[t]=e;return t}))))return e;const a=n.filter((e=>{let[t]=e;return r.map((e=>{let[t]=e;return t})).includes(t)})).map((e=>{let[,t]=e;return t})),o=r.filter((e=>{let[t]=e;return!n.map((e=>{let[t]=e;return t})).includes(t)})).map((e=>{let[,t]=e;return t}));return{...e,tags:[...a,...o],tagBuffer:null}}default:return e}},mN=p.default.button.withConfig({displayName:"tag__Dismiss",componentId:"sc-14unxs6-0"})(["all:unset;cursor:pointer;border-radius:",";",";width:22px;min-width:22px;height:22px;display:flex;justify-content:center;align-items:center;svg{height:20px;width:20px;margin:auto;}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),tp.focusableOutlineCSS),fN=p.default.span.withConfig({displayName:"tag__Token",componentId:"sc-14unxs6-1"})([""," position:relative;display:flex;align-items:center;padding:2px;margin:2px;max-width:calc(100% - 4px);height:32px;"],(e=>{let{theme:t}=e;return(0,p.css)(["color:",";border:1px solid ",";border-radius:",";"],t.colors.fg.primary,t.colors.border.defaultNormal,t.borders.radius.small)})),gN=(0,p.default)($e.Text).attrs({forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"tag__TokenText",componentId:"sc-14unxs6-2"})(["padding-left:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);const hN=function Tag(e){let{children:t,onDismiss:n}=e;const r=(0,u.useMemo)((()=>(0,pe.default)()),[]);return c.createElement(fN,{"data-testid":"flat-term-token"},c.createElement(gN,{id:r},t),c.createElement(Tooltip,{title:(0,d.__)("Remove Tag","web-stories"),placement:Bd.PLACEMENT.BOTTOM,hasTail:!0,popupZIndexOverride:10},c.createElement(mN,{onClick:n,"aria-label":(0,d.__)("Remove Tag","web-stories"),"aria-describedby":r},c.createElement(Ju.default,null))))};function bN(){return bN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bN.apply(this,arguments)}const EN=(0,pe.default)(),yN=p.default.div.withConfig({displayName:"input__Border",componentId:"sc-1nuo5lh-0"})([""," display:flex;flex-direction:column;margin-bottom:6px;"],(e=>{let{theme:t,isInputFocused:n}=e;return(0,p.css)(["color:",";border:1px solid ",";border-radius:",";",";"],t.colors.fg.primary,t.colors.border.defaultNormal,t.borders.radius.small,n&&tp.focusCSS)})),_N=p.default.div.withConfig({displayName:"input__InputWrapper",componentId:"sc-1nuo5lh-1"})(["display:flex;flex-wrap:wrap;padding:0;"]),vN=(0,p.default)(eS).attrs({type:"text"}).withConfig({displayName:"input__TextInput",componentId:"sc-1nuo5lh-2"})(["width:auto;flex-grow:1;height:32px;margin:2px 0;padding-left:4px;"]),wN=(0,p.default)(Iw).withConfig({displayName:"input__SuggestionList",componentId:"sc-1nuo5lh-3"})(["max-height:120px;overflow-y:scroll;border-top:",";display:block;list-style-type:none;width:100%;padding:6px 4px 4px;margin-top:6px;li{cursor:pointer;padding:4px;width:100%;"," border-radius:",";&:hover{background-color:",";}}"],(e=>{let{theme:t}=e;return`1px solid ${t.colors.border.defaultNormal}`}),tp.focusableOutlineCSS(),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.bg.tertiary}));const TN=function(e){let{suggestedTerms:t=[],onTagsChange:n,onInputChange:r,suggestedTermsLabel:a,tagDisplayTransformer:o,tokens:l=[],onUndo:i=aP.noop,...s}=e;const[{value:d,tags:p,offset:m,tagBuffer:f},g]=(0,u.useReducer)(pN,{value:"",tags:[...l],tagBuffer:null,offset:0}),[h,b]=(0,u.useState)(!1),[E,y]=(0,u.useState)(!1),_=(0,u.useRef)(),v=(0,u.useRef)(),w=(0,u.useRef)();(0,u.useEffect)((()=>{g({type:uN,payload:l})}),[l]);const T=(0,pe.default)(),S=t.length;(0,u.useEffect)((()=>{y(S>0)}),[S]);const C=(0,u.useRef)(n);C.current=n,(0,u.useEffect)((()=>{f&&C.current?.(f)}),[f]);const I=(0,u.useRef)(r);I.current=r,(0,u.useEffect)((()=>{I.current?.(d)}),[d]);const{handleFocus:x,handleBlur:A,handleKeyDown:k,handleChange:O,removeTag:P}=(0,u.useMemo)((()=>({handleKeyDown:e=>{""===e.target.value&&("ArrowLeft"===e.key&&g({type:cN}),"ArrowRight"===e.key&&g({type:dN}),"Backspace"===e.key&&g({type:lN}),"z"===e.key&&e.metaKey&&i(e)),"ArrowDown"===e.key&&t.length>0&&v?.current?.firstChild?.focus(),["Comma",",","Enter"].includes(e.key)&&g({type:oN})},handleChange:e=>{g({type:aN,payload:e.target.value})},removeTag:e=>()=>{g({type:lN,payload:e}),_?.current.focus()},handleFocus:()=>{b(!0)},handleBlur:()=>{g({type:iN}),b(!1)}})),[i,t]),N=f||p,R=(0,u.useCallback)(((e,t)=>{e.preventDefault(),y(!1),g({type:oN,payload:t}),_?.current.focus()}),[]),M=(0,u.useCallback)(((e,t,n)=>{const r=t+1,a=t-1;"ArrowDown"===e.key&&r<S&&v?.current?.children?.[r]?.focus(),"ArrowUp"===e.key&&(a<0?_?.current.focus():v?.current?.children?.[a]?.focus()),"Enter"===e.key&&R(e,n)}),[R,S]);return c.createElement(yN,{ref:w,isInputFocused:h},c.createElement(_N,null,[...N.slice(0,N.length-m),EN,...N.slice(N.length-m)].map((e=>e===EN?c.createElement(vN,bN({},s,{key:EN,value:d,onKeyDown:k,onChange:O,onFocus:x,onBlur:A,size:"4",ref:_,autoComplete:E?"off":"on","aria-expanded":E,"aria-autocomplete":"list","aria-owns":E?T:null,role:"combobox"})):c.createElement(hN,{key:e,onDismiss:P(e)},o(e)||e)))),E&&c.createElement(wN,{"aria-label":a,role:"listbox",ref:v,id:T,"data-testid":"suggested_terms_list"},t.map(((e,t)=>{let{name:n,id:r}=e;return c.createElement("li",{key:r,"aria-selected":d===n,role:"option",tabIndex:0,onClick:e=>R(e,n),onKeyDown:e=>M(e,t,n)},n)}))))},SN=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"description",componentId:"sc-1gy988t-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),CN=(0,p.default)($e.Text).attrs({forwardedAs:"label",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"label",componentId:"sc-1y7bq6c-0"})(["display:inline-block;color:",";margin-bottom:8px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),IN={Input:TN,Description:SN,Label:CN};const xN=function FlatTermSelector(e){let{taxonomy:t,canCreateTerms:n}=e;const[r,a]=(0,u.useState)([]),{createTerm:o,termCache:l,addSearchResultsToCache:i,terms:s=[],setTerms:p,addTermToSelection:m}=Yi((e=>{let{state:{termCache:t,terms:n},actions:{createTerm:r,addSearchResultsToCache:a,setTerms:o,addTermToSelection:l}}=e;return{termCache:t,createTerm:r,addSearchResultsToCache:a,terms:n,setTerms:o,addTermToSelection:l}})),{undo:f}=Cr((e=>{let{actions:{undo:t}}=e;return{undo:t}})),[g,h]=(0,u.useState)([]),b=(0,mk.default)("assertive"),E=(0,u.useCallback)((e=>{const r=e.map((e=>[ko(e),e])),a=r.map((e=>{let[t]=e;return t})).map((e=>l[t.restBase]?.[e])).filter((e=>e)).map((e=>e.id));if(rN(s[t.restBase],a)||p(t,a),!n)return;const i=r.filter((e=>{let[n]=e;return!l[t.restBase]?.[n]})).map((e=>{let[,t]=e;return t}));i.forEach((e=>o(t,e,null,!0)))}),[n,s,t,l,p,o]),y=(0,u.useDebouncedCallback)((async e=>{if(0===e.length)return void h([]);if(e.length<3)return;const n=await i(t,{search:e,per_page:20});h(n);const r=n.length,a=(0,We.default)(
/* Translators: %d: Number of results. */
(0,d._n)("%d result found.","%d results found.",r,"web-stories"),r);b(a)}),300),_=(0,u.useMemo)((()=>(s[t.restBase]||[]).map((e=>Object.values(l[t.restBase]||{}).find((t=>t.id===e)))).filter((e=>void 0!==e)).map((e=>e.name))),[t,s,l]),v=(0,u.useCallback)((e=>l[t.restBase]?.[ko(e)]?.name),[t,l]);return(0,u.useEffect)((()=>{!async function(){const e=await i(t,{orderby:"count",order:"desc",hide_empty:!0});a(e)}()}),[t,i]),c.createElement(c.Fragment,null,c.createElement(YP,null,t.labels.name),c.createElement("div",{key:t.slug},c.createElement(IN.Label,{htmlFor:`${t.slug}-input`},t.labels.addNewItem),c.createElement(IN.Input,{id:`${t.slug}-input`,"aria-describedby":`${t.slug}-description`,name:t.slug,onTagsChange:E,onInputChange:y,tagDisplayTransformer:v,tokens:_,onUndo:f,suggestedTerms:g,suggestedTermsLabel:t?.labels?.itemsList}),c.createElement(IN.Description,{id:`${t.slug}-description`},t.labels.separateItemsWithCommas),r.length>0&&c.createElement(VP.Wrapper,{"data-testid":`${t.slug}-most-used`},c.createElement(VP.Heading,null,t.labels.mostUsed),c.createElement(VP.List,null,r.map(((e,n)=>c.createElement(VP.ListItem,{key:e.id},c.createElement(VP.Word,{onClick:()=>{s[t.restBase]?.includes(e.id)||m(t,e)}},e.name,n<r.length-1&&
/* translators: delimiter used in a list */
(0,d.__)(",","web-stories")),n<r.length-1&&" ")))))))};function AN(){return AN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AN.apply(this,arguments)}const kN=(0,p.default)(iO).withConfig({displayName:"taxonomies__StyledSimplePanel",componentId:"sc-171mnp-0"})(["padding-left:0;padding-right:0;"]);const ON=function TaxonomiesPanel(e){let{nameOverride:t,...n}=e;const{capabilities:r}=Ya((e=>{let{state:{capabilities:t}}=e;return{capabilities:t}})),{taxonomies:a}=Yi((e=>{let{state:{taxonomies:t}}=e;return{taxonomies:t}}));if(!a?.length)return null;const o=a.filter((e=>Boolean(r[`assign-${e?.restBase}`]||r[`assign-${e?.slug}`])));return 0===o.length?null:c.createElement(kN,AN({name:t||"taxonomies",title:(0,d.__)("Taxonomies","web-stories")},n),o.map((e=>{const t=Boolean(r[`create-${e?.restBase}`]||r[`create-${e?.slug}`]);return c.createElement(WP,{key:e.slug},e.hierarchical?c.createElement(eN,{taxonomy:e,canCreateTerms:t}):c.createElement(xN,{taxonomy:e,canCreateTerms:t}))})))},PN=p.default.div.withConfig({displayName:"flipControls__ControlsContainer",componentId:"sc-1gcq876-0"})(["display:flex;justify-content:left;align-items:flex-start;"]),NN=p.default.div.withConfig({displayName:"flipControls__Space",componentId:"sc-1gcq876-1"})(["width:8px;"]),RN=(0,p.default)(kC).withConfig({displayName:"flipControls__StyledToggleButton",componentId:"sc-1gcq876-2"})(["",";"],np);const MN=function FlipControls(e){let{value:t,onChange:n}=e;const r=(0,u.useCallback)((e=>!0===t[e]),[t]);return c.createElement(PN,null,c.createElement(Tooltip,{title:(0,d.__)("Flip horizontally","web-stories")},c.createElement(RN,{variant:f.BUTTON_VARIANTS.SQUARE,size:f.BUTTON_SIZES.SMALL,isToggled:!0===t.horizontal,onClick:()=>n({...t,horizontal:!r("horizontal")}),"aria-label":(0,d.__)("Flip horizontally","web-stories")},c.createElement(CE,null))),c.createElement(NN,null),c.createElement(Tooltip,{title:(0,d.__)("Flip vertically","web-stories")},c.createElement(RN,{variant:f.BUTTON_VARIANTS.SQUARE,size:f.BUTTON_SIZES.SMALL,isToggled:!0===t.vertical,onClick:()=>n({...t,vertical:!r("vertical")}),"aria-label":(0,d.__)("Flip vertically","web-stories")},c.createElement(OE,null))))},LN=[{key:"sponsored",title:(0,d.__)("Sponsored","web-stories")},{key:"nofollow",title:(0,d.__)("Nofollow","web-stories")}],DN=p.default.div.withConfig({displayName:"linkRelations__CheckboxWrapper",componentId:"sc-123e3hl-0"})(["display:flex;padding:9px 0;"]),BN=p.default.label.withConfig({displayName:"linkRelations__Label",componentId:"sc-123e3hl-1"})(["margin-left:12px;"]),FN=(0,p.default)($e.Text).withConfig({displayName:"linkRelations__StyledText",componentId:"sc-123e3hl-2"})(["color:",";padding:8px 0;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const HN=function LinkRelations(e){let{rel:t,onChangeRel:n}=e;const r=(0,d.__)("https://developers.google.com/search/docs/advanced/guidelines/qualify-outbound-links?hl=en","web-stories"),a=(0,u.useCallback)((e=>{const r=t.includes(e)?t.filter((t=>t!==e)):[...t,e];n(r)}),[n,t]);return c.createElement(Jx,null,c.createElement("div",null,c.createElement(FN,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Qualify outbound links","web-stories")),LN.map((e=>{let{key:n,title:r}=e;return c.createElement(DN,{key:n},c.createElement(gI.Checkbox,{id:n,name:n,checked:t?.includes(n),onChange:()=>a(n)}),c.createElement(BN,{htmlFor:n},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"span"},r)))})),c.createElement(lu.Link,{rel:"noopener noreferrer",target:"_blank",href:r,size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Learn more","web-stories"))))};function UN(e,t){return void 0===e?t:e}const jN=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r="function"==typeof t?t:e=>e[t],a=UN(r(e[0]),n),o=e.every((e=>UN(r(e),n)===a));return o?a:ve};const zN=function(e,t,n){const r={},a=e.map((e=>e[t]||n));return Object.keys(n).forEach((e=>{r[e]=jN(a,e)})),r};const GN=function(e,t){return(0,u.useMemo)((()=>{const n=e.map((e=>e[t]));if(0===n.length)return null;if(1===n.length)return n[0];const r={};return n.forEach((e=>{const t=(0,KC.default)((0,Yr.default)(e));t in r||(r[t]=e)})),1===Object.keys(r).length?Object.values(r)[0]:ve}),[e,t])};const YN=function(e,t,n){const r=zN(e,t,n),a=Object.keys(n).map((e=>r[e]));return(0,u.useMemo)((()=>r),a)};var ZN=n(30963);function WN(){return WN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WN.apply(this,arguments)}const VN=(0,u.forwardRef)((function FontPicker(e,t){let{zIndex:n,onChange:r,currentValue:a,highlightStylesOverride:o,showDropdownLabel:l,listStyleOverrides:i,containerStyleOverrides:s,className:p,tabIndex:m}=e;const{fonts:f=[],recentFonts:g=[],curatedFonts:h=[],customFonts:b=[],ensureMenuFontsLoaded:E,ensureCustomFontsLoaded:y,getFontsBySearch:_,getCustomFonts:v,getCuratedFonts:w}=No((e=>{let{actions:t,state:n}=e;return{getFontsBySearch:t.getFontsBySearch,ensureMenuFontsLoaded:t.ensureMenuFontsLoaded,ensureCustomFontsLoaded:t.ensureCustomFontsLoaded,getCuratedFonts:t.getCuratedFonts,getCustomFonts:t.getCustomFonts,recentFonts:n.recentFonts,curatedFonts:n.curatedFonts,fonts:n.fonts,customFonts:n.customFonts}}));(0,u.useEffect)((()=>{v(),w()}),[v,w]);const T=(0,u.useMemo)((()=>{const e=new Map;return f.forEach((t=>{e.set(t.id,t)})),b?.forEach((t=>{e.set(t.id,t)})),e}),[f,b]),S=(0,u.useCallback)((e=>{e.length&&(E(e.filter((e=>"fonts.google.com"===T.get(e)?.service))),y(e.filter((e=>"custom"===T.get(e)?.service))))}),[T,y,E]),C=(0,u.useCallback)(((e,t)=>{let{option:n,...r}=e;return c.createElement(ZN.default.Option,WN({ref:t},r,{fontFamily:"fonts.google.com"===n.service?`'${n.name}::MENU'`:n.name}),a===n.id&&c.createElement(ZN.default.Selected,{"aria-label":(0,d.__)("Selected","web-stories")}),n.name)}),[a]),I=(0,u.useMemo)((()=>[...b?.length?[{label:(0,d.__)("Your fonts","web-stories"),options:b}]:[],...g?.length?[{label:(0,d.__)("Recently used","web-stories"),options:g}]:[]]),[b,g]);return c.createElement(ZN.default.DropDown,{ref:t,zIndex:n,tabIndex:m,highlightStylesOverride:o,"data-testid":"font",title:(0,d.__)("Available font families","web-stories"),dropdownButtonLabel:(0,d.__)("Font family","web-stories"),options:f,primaryOptions:h,primaryLabel:(0,d.__)("Recommended","web-stories"),priorityOptionGroups:I,searchResultsLabel:(0,d.__)("Search results","web-stories"),selectedId:ve===a?"":a,placeholder:ve===a?we:a,hasSearch:!0,getOptionsByQuery:_,onChange:r,onObserve:S,renderer:(0,u.forwardRef)(C),disabled:!f?.length,dropDownLabel:l?(0,d.__)("Font","web-stories"):null,listStyleOverrides:i,containerStyleOverrides:s,className:p})})),$N=VN;var qN=n(15242);const KN={...On.ELEMENT_TYPES,MULTIPLE:"multiple",NONE:"none"};var XN=n(98448);const QN=(0,u.createContext)(null),JN={cleanup:null,focusGroups:{},cleanupCallbacks:{}},eR={addNodeToGroup:(e,t)=>{const{groupId:n,nodeTuple:r}=t.payload,a=e.focusGroups[n]||[];let o=[];const l=a.findIndex((e=>e[0]===r[0]));return o=-1===l?[...a,r]:[...a.slice(0,l),r,...a.slice(0,l+1)],{...e,focusGroups:{...e.focusGroups,[n]:o}}},removeNodeFromGroup:(e,t)=>{const{groupId:n,nodeTuple:r}=t.payload,a=(e.focusGroups[n]||[]).filter((e=>e[0]!==r[0]));return{...e,focusGroups:{...e.focusGroups,[n]:a}}},setFocusGroupCleanup:(e,t)=>{const{groupId:n,cleanup:r}=t.payload;return{...e,activeGroupKey:n,cleanupCallbacks:{...e.cleanupCallbacks,[n]:r}}}};function KeyBindings(e){let{uuid:t,node:n,focusGroup:r,exitFocusGroup:a}=e;const o=(0,u.useCallback)((e=>{e.preventDefault();const n=function(e,t){return function(n){if(!t)return;const r=t.findIndex((t=>t[0]===e));if(-1===r)return;const a=((r+n)%(o=t.length)+o)%o;var o;const[,l]=t[a];l?.focus()}}(t,r);e.shiftKey?n(-1):n(1)}),[r,t]),l=(0,u.useCallback)((e=>{e.preventDefault(),a?.()}),[a]);return(0,fr.useKeyDownEffect)(n,{key:["tab"],allowDefault:!0,editable:!0,shift:!0},o,[o]),(0,fr.useKeyDownEffect)(n,{key:["esc"],allowDefault:!0,editable:!0},l,[l]),null}KeyBindings.propTypes={uuid:Ma().string.isRequired,node:"undefined"!=typeof Element?Ma().instanceOf(Element).isRequired:Ma().any.isRequired,focusGroup:Ma().array.isRequired,exitFocusGroup:Ma().func};const tR=KeyBindings;const nR=function EditLayerFocusManager(e){let{children:t}=e;const[n,r]=(0,u.useReduction)(JN,eR),a=(0,u.useRef)(n);a.current=n;const o=(0,u.useCallback)((e=>{let{groupId:t}=e;const n=a.current.focusGroups?.[t]?.[0];if(n){const[,e]=n;e.focus()}}),[a]),l=Object.entries(n.focusGroups),i=n.cleanupCallbacks;return c.createElement(QN.Provider,{value:{enterFocusGroup:o,setFocusGroupCleanup:r.setFocusGroupCleanup,actions:r}},l.map((e=>{let[t,n]=e;return n.map((e=>{let[r,a]=e;return a&&c.createElement(tR,{key:r,uuid:r,node:a,focusGroup:n,exitFocusGroup:i[t]})}))})),t)};const rR=function(e){const t=(0,u.useContextSelector)(QN,(e=>e.actions)),n=(0,u.useInitializedValue)(pe.default);return(0,u.useCallback)((r=>{null!==r?t.addNodeToGroup({groupId:e,nodeTuple:[n,r]}):t.removeNodeFromGroup({groupId:e,nodeTuple:[n,r]})}),[t,e,n])};const aR=function(e){return(0,u.useContextSelector)(QN,e??u.identity)},oR={EDIT_ELEMENT:"EDIT_ELEMENT",ELEMENT_SELECTION:"ELEMENT_SELECTION"},lR=(0,u.createContext)({state:{},actions:{}});const iR=function(e){return(0,u.useContextSelector)(lR,e??u.identity)};const sR=function FloatingMenuProvider(e){let{handleDismiss:t,children:n}=e;const r={state:{},actions:{handleDismiss:t}};return c.createElement(lR.Provider,{value:r},n)},cR={left:0,right:0,top:0,bottom:0,lockedWidth:!0,color:(0,wS.default)(0,0,0)};function dR(){return dR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dR.apply(this,arguments)}const uR=function FloatingColor(e){const{hasInputs:t,hasEyedropper:n,allowsGradient:r=!0}=e,a=function(e,t){return(e?184:60)+(t?38:0)}(t,n);return c.createElement(bx,dR({width:a,maxHeight:362,pickerPlacement:Bd.PLACEMENT.TOP_START,isInDesignMenu:!0,allowsGradient:r,allowsSavedColors:!0,allowsSavedColorDeletion:!1,pickerHasEyedropper:!n,containerLabelBase:(0,d.__)("Color input (floating menu)","web-stories")},e))};var pR=n(87098);function mR(){return mR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mR.apply(this,arguments)}const fR=p.default.div.withConfig({displayName:"icon__IconWrapper",componentId:"sc-scm7dy-0"})(["width:32px;height:32px;"]);const gR=function(e){let{children:t,title:n,className:r="",...a}=e;return c.createElement(c.Fragment,null,c.createElement(pR.VisuallyHidden,null,n),c.createElement(fR,mR({className:r},a),t))};var hR=n(51537);function bR(){return bR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bR.apply(this,arguments)}const ER=(0,u.forwardRef)((function ToggleButton(e,t){let{isToggled:n,children:r,...a}=e;const o="boolean"==typeof n?{type:n?f.BUTTON_TYPES.SECONDARY:f.BUTTON_TYPES.TERTIARY,"aria-pressed":n,role:"button"}:{};return c.createElement(hR.default,bR({ref:t},o,a),r)}));function yR(){return yR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yR.apply(this,arguments)}const _R=(0,u.memo)((0,u.forwardRef)((function IconButton(e,t){let{Icon:n,...r}=e;return c.createElement(Tooltip,{placement:Bd.PLACEMENT.BOTTOM,title:r.title},c.createElement(ER,yR({ref:t,tabIndex:-1},r),c.createElement(gR,{title:r.title},c.createElement(n,null))))}))),vR=_R,wR=(0,p.default)(ex).attrs({inputClassName:hS.CONTEXT_MENU_SKIP_ELEMENT}).withConfig({displayName:"input__Input",componentId:"sc-79zl03-0"})(["width:70px;flex:0 0 70px;"]);var TR=n(77568);const SR=TR.default;function CR(){return CR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CR.apply(this,arguments)}const IR=(0,p.default)(hR.default).withConfig({displayName:"text__Button",componentId:"sc-fb6dx4-0"})(["font-size:14px;padding:0 12px;font-weight:normal;letter-spacing:normal;"]),xR=(0,u.memo)((function TextButton(e){let{text:t,...n}=e;return c.createElement(IR,CR({forcePadding:!0,title:t},n,{tabIndex:-1}),t)}));const AR=function(e){return Ya((t=>{let{state:{selectedElements:n}}=t;return Wn(n[0],e)}))};function kR(e,t){return Object.fromEntries(Object.keys(t).map((n=>{const r=e[n]===ve,a=void 0!==e[n]&&!function(e,t){const n=e&&"object"==typeof e&&(e.type||e.color),r=t&&"object"==typeof t&&(t.type||t.color);return n&&r?(0,qC.default)(e,t):e===t}(e[n],t[n]);return r||a?[n,ve]:[n,t[n]]})))}const OR=function(e,t){const{hasCurrentEditor:n,selectionInfo:r,selectionActions:a}=(0,Hr.useRichText)((e=>{let{state:t,actions:n}=e;return{hasCurrentEditor:t.hasCurrentEditor,selectionInfo:t.selectionInfo,selectionActions:n.selectionActions}})),{clearEditing:o}=Vs((e=>{let{actions:{clearEditing:t}}=e;return{clearEditing:t}})),l=(0,u.useMemo)((()=>n?r:e.map((e=>{let{content:t}=e;return t})).map(Hr.getHTMLInfo).reduce(kR,{})),[n,r,e]),i=(0,u.useCallback)((function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t((t=>{let{content:n}=t;return{content:e(n,...r)}}),!0)}),[t]),s=(0,u.useRef)(null),c=(0,u.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.current=t}),[s]);(0,u.useEffect)((()=>{const e=s.current;e&&(i(...e),s.current=null)}),[e,s,i]);const d=(0,u.useMemo)((()=>{const e=(0,Hr.getHTMLFormatters)();return n?{handleClickBold:()=>a.toggleBoldInSelection(),handleSelectFontWeight:a.setFontWeightInSelection,handleClickItalic:a.toggleItalicInSelection,handleClickUnderline:a.toggleUnderlineInSelection,handleClickUppercase:a.toggleUppercaseInSelection,handleSetLetterSpacing:a.setLetterSpacingInSelection,handleSetColor:a.setColorInSelection,handleResetFontWeight:async t=>{await o(),c(e.setFontWeight,t)}}:{handleClickBold:t=>i(e.toggleBold,t),handleSelectFontWeight:t=>i(e.setFontWeight,t),handleClickItalic:t=>i(e.toggleItalic,t),handleClickUnderline:t=>i(e.toggleUnderline,t),handleClickUppercase:t=>i(e.toggleUppercase,t),handleSetLetterSpacing:t=>i(e.setLetterSpacing,t),handleSetColor:t=>i(e.setColor,t),handleResetFontWeight:t=>i(e.setFontWeight,t)}}),[n,a,i,o,c]),p=(0,u.useCallback)((()=>e.filter((e=>{let{type:t}=e;return"text"===t})).length>0),[e]);return(0,fr.useGlobalKeyDownEffect)({key:["mod+b","mod+u","mod+i"]},(e=>{let{key:t}=e;if(p)switch(t){case"b":d.handleClickBold();break;case"i":d.handleClickItalic();break;case"u":d.handleClickUnderline()}}),[d,p]),{textInfo:l,handlers:d}};const PR=function(e){let{currentValue:t,handler:n,eventName:r}=e;const{content:a}=AR(["content"]),o=Ya((e=>e.actions.updateSelectedElements)),l=(0,u.useCallback)((e=>{(0,P.trackEvent)("floating_menu",{name:r,element:"text"}),o({properties:t=>W_(t,e,!0)})}),[o,r]),{textInfo:i,handlers:s}=OR([{content:a,type:"text"}],l);return{isToggled:i[t],toggle:()=>{(0,s[n])(!i[t])}}},NR=p.default.div.withConfig({displayName:"borderWidthAndColor__Container",componentId:"sc-1qijom4-0"})(["display:flex;align-items:center;"]),RR=p.default.div.withConfig({displayName:"borderWidthAndColor__Dash",componentId:"sc-1qijom4-1"})(["width:8px;height:1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}));const MR={color:{r:0,g:0,b:0}},LR=(0,d.__)("Border width","web-stories"),DR=(0,d.__)("Border color","web-stories");const BR=function BorderWidthAndColor(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{border:n=cR,mask:r,type:a}=AR(["border","mask","type"]),o=Ya((e=>{let{actions:t}=e;return t.updateSelectedElements})),l=n?.left===n?.right&&n?.left===n?.top&&n?.left===n?.bottom;if(!n?.lockedWidth&&!l)return null;const i=(0,Un.canSupportMultiBorder)({mask:r}),s=function(e){if(!e)return!1;const{left:t,right:n,top:r,bottom:a}=e;return Boolean(t||n||r||a)}(n);return c.createElement(NR,null,c.createElement(_S,{ref:t,inputRef:e,inputLabel:LR},c.createElement(wR,{tabIndex:-1,ref:e,suffix:c.createElement(Ng,null),value:n?.left||0,"aria-label":LR,onChange:(e,t)=>(e=>{(0,P.trackEvent)("floating_menu",{name:"set_border_width",element:a}),o({properties:t=>{let{border:r}=t;return{border:{locked:!0,color:n?.color,...r,left:e,right:e,top:e,bottom:e}}}})})(t),onKeyDown:e=>{yS(e,t)}})),s&&c.createElement(c.Fragment,null,c.createElement(RR,null),c.createElement(uR,{tabIndex:-1,label:DR,value:n?.color||MR,onChange:e=>{(0,P.trackEvent)("floating_menu",{name:"set_border_color",element:a}),o({properties:t=>{let{border:n}=t;return{border:{...n,color:e}}}})},hasInputs:!1,hasEyedropper:!1,allowsOpacity:i,allowsGradient:!1,allowsSavedColors:!1})))},FR=(0,p.css)(["position:relative;:focus-within{z-index:1;",";}"],(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),HR=(0,p.css)(["width:29px;height:29px;"]),UR=(0,p.default)(ex).withConfig({displayName:"stackableInput__StackableInput",componentId:"sc-bgp531-0"})(["svg{","}& > div{border-radius:0;margin-left:-1px;padding:2px 7px 2px 12px;",";}"],HR,FR),jR=p.default.div.withConfig({displayName:"stackableGroup__StackableContainer",componentId:"sc-ogfpu5-0"})(["display:flex;max-width:",";& > ","{border-radius:0;&:first-of-type > div{border-top-left-radius:4px;border-bottom-left-radius:4px;margin-left:0;}&:last-of-type > div{border-top-right-radius:4px;border-bottom-right-radius:4px;}}"],(e=>{let{locked:t}=e;return t?"106px":"none"}),UR);const zR=function StackableGroup(e){let{children:t,locked:n,className:r}=e;return c.createElement(jR,{locked:n,className:r},t)},GR={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,locked:!0},YR=p.default.div.withConfig({displayName:"radius__FlexContainer",componentId:"sc-10ryvqs-0"})(["display:flex;"]),ZR=p.default.div.withConfig({displayName:"radius__LockContainer",componentId:"sc-10ryvqs-1"})(["position:relative;display:flex;align-items:center;width:32px;margin-left:8px;"]),WR=(0,p.default)(LockToggle).withConfig({displayName:"radius__StyledLockToggle",componentId:"sc-10ryvqs-2"})(["",";"],np),VR=(0,p.default)(Ch).withConfig({displayName:"radius__TopLeft",componentId:"sc-10ryvqs-3"})(["transform:rotate(90deg);"]),$R=(0,p.default)(Ch).withConfig({displayName:"radius__TopRight",componentId:"sc-10ryvqs-4"})(["transform:rotate(180deg);"]),qR=(0,p.default)(Ch).withConfig({displayName:"radius__BottomRight",componentId:"sc-10ryvqs-5"})(["transform:rotate(270deg);"]);const KR=function RadiusControls(e){let{selectedElements:t,pushUpdateForObject:n}=e;const r=YN(t,"borderRadius",GR),a=t.every((e=>(0,Un.canSupportMultiBorder)(e))),o=!0===r.locked,l=(0,u.useCallback)(((e,t)=>{n("borderRadius",o?{topLeft:t,topRight:t,bottomRight:t,bottomLeft:t}:{[e]:t},GR,!0)}),[n,o]),i=(0,u.useCallback)((e=>{const t=e?{locked:e,topLeft:r.topLeft,topRight:r.topLeft,bottomRight:r.topLeft,bottomLeft:r.topLeft}:{locked:e};n("borderRadius",t,GR,!0)}),[n,r]);if(!a)return null;const s=o?(0,d.__)("Corner Radius","web-stories"):(0,d.__)("Top left corner radius","web-stories");return c.createElement(YR,null,c.createElement(zR,{locked:o},c.createElement(UR,{suffix:c.createElement(VR,null),value:r.topLeft===ve?"":r.topLeft,"aria-label":s,onChange:(e,t)=>l("topLeft",t),placeholder:r.topLeft===ve?we:"",isIndeterminate:r.topLeft===ve}),!o&&c.createElement(c.Fragment,null,c.createElement(UR,{suffix:c.createElement($R,null),value:r.topRight===ve?"":r.topRight,"aria-label":(0,d.__)("Top right corner radius","web-stories"),onChange:(e,t)=>l("topRight",t),placeholder:r.topRight===ve?we:"",isIndeterminate:r.topRight===ve}),c.createElement(UR,{value:r.bottomLeft===ve?"":r.bottomLeft,"aria-label":(0,d.__)("Bottom left corner radius","web-stories"),onChange:(e,t)=>l("bottomLeft",t),placeholder:r.bottomLeft===ve?we:"",suffix:c.createElement(Ch,null),isIndeterminate:r.bottomLeft===ve}),c.createElement(UR,{value:r.bottomRight===ve?"":r.bottomRight,"aria-label":(0,d.__)("Bottom right corner radius","web-stories"),onChange:(e,t)=>l("bottomRight",t),placeholder:r.bottomRight===ve?we:"",suffix:c.createElement(qR,null),isIndeterminate:r.bottomRight===ve}))),c.createElement(ZR,null,c.createElement(Tooltip,{title:(0,d.__)("Toggle consistent corner radius","web-stories"),key:r.locked.toString()},c.createElement(WR,{isLocked:r.locked,onClick:()=>i(!r.locked),"aria-label":(0,d.__)("Toggle consistent corner radius","web-stories")}))))},XR=(0,d.__)("Corner Radius","web-stories");const QR=function BorderRadius(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{borderRadius:n=GR,mask:r,type:a}=AR(["borderRadius","mask","type"]),o=Ya((e=>e.actions.updateSelectedElements)),l=(0,Un.canSupportMultiBorder)({mask:r}),i=n.topLeft===n.topRight&&n.topLeft===n.bottomLeft&&n.topLeft===n.bottomRight;return l&&(n.locked||i)?c.createElement(_S,{ref:t,inputRef:e,inputLabel:XR},c.createElement(wR,{tabIndex:-1,ref:e,suffix:c.createElement(Ch,null),value:n.topLeft,"aria-label":XR,onChange:(e,t)=>(e=>{(0,P.trackEvent)("floating_menu",{name:"set_border_radius",element:a}),o({properties:{borderRadius:{locked:!0,topLeft:e,topRight:e,bottomRight:e,bottomLeft:e}}})})(t),onKeyDown:e=>{yS(e,t)}}),c.createElement(SR,null)):null};const JR=function(e){let{isMultiple:t}=e;const{type:n}=AR(["type"]),{handleDismiss:r}=iR((e=>{let{actions:{handleDismiss:t}}=e;return{handleDismiss:t}}));return c.createElement(vR,{Icon:Ju.default,title:(0,d.__)("Dismiss menu","web-stories"),onClick:()=>{(0,P.trackEvent)("floating_menu",{name:"dismiss_menu",element:t?"multiple":n}),r()}})},eM={startX:0,startY:0,endX:ee.PAGE_WIDTH,endY:ee.PAGE_HEIGHT,width:ee.PAGE_WIDTH,height:ee.PAGE_HEIGHT},tM="left",nM="right",rM="top",aM="bottom";const oM=function(e){let{selectedElements:t,updateElements:n,isFloatingMenu:r}=e;const a=t.length>2,o=(0,u.useMemo)((()=>t.map((e=>{const{id:t,groupId:n,x:r,y:a,width:o,height:l,rotationAngle:i}=e;let s=r,c=a,d=o,u=l;if(i){const e=(0,js.calcRotatedObjectPositionAndSize)(i,r,a,o,l);s=e.x,c=e.y,d=e.width,u=e.height}return{id:t,groupId:n,x:r,y:a,width:o,height:l,frameX:s,frameY:c,frameWidth:d,frameHeight:u}}))),[t]),l=t[0].groupId,i=l&&t.every((e=>e.groupId&&e.groupId===l)),s=1===t.length||i?eM:(0,js.default)(t),c=e=>{(0,P.trackEvent)(r?"floating_menu":"design_panel",{name:`set_alignment_${e}`,element:"multiple"})},d=e=>{c(e),n((n=>{const{id:r,groupId:a}=n,l=a?(0,js.default)(t.filter((e=>e.groupId===a))):null,i=o.find((e=>e.id===r)),{width:c=0,height:d=0,frameWidth:u=0,frameHeight:p=0}=i||{},m=e===tM||e===nM?(u-c)/2:(p-d)/2,f=a?e===tM||e===nM?i.frameX-l.startX:i.frameY-l.startY:0,g=a?l.width:c,h=a?l.height:d;return e===tM||e===nM?{x:e===tM?s.startX+m+f:s.endX-g-m+f}:{y:e===rM?s.startY+m+f:s.endY-h-m+f}}))};return{isDistributionEnabled:a,handleAlignLeft:()=>d(tM),handleAlignCenter:()=>{c("center");const e=(s.endX+s.startX)/2;n((n=>{const{id:r,width:a,groupId:l}=n,i=l?(0,js.default)(t.filter((e=>e.groupId===l))):null,s=l?i.width:a,c=o.find((e=>e.id===r)),d=l?c.frameX-i.startX:0;return{x:e-s/2+d}}))},handleAlignRight:()=>d(nM),handleAlignTop:()=>d(rM),handleAlignMiddle:()=>{c("middle");const e=(s.endY+s.startY)/2;n((n=>{const{id:r,height:a,groupId:l}=n,i=l?(0,js.default)(t.filter((e=>e.groupId===l))):null,s=l?i.height:a,c=o.find((e=>e.id===r)),d=l?c.frameY-i.startY:0;return{y:e-s/2+d}}))},handleAlignBottom:()=>d(aM),handleHorizontalDistribution:()=>{c("horizontal_distribution");const e=[...o];e.sort(((e,t)=>(e.frameX+e.frameWidth)/2-(t.frameX+t.frameWidth)/2));const t=e.reduce(((e,t)=>e+t.frameWidth),0),r=s.width-t,a=(0,Vr.dataPixels)(r/(e.length-1)),l={};let i=0;e.forEach(((t,n)=>{const{id:r,x:o,width:s,frameWidth:c}=t;0===n||n===e.length-1?(l[r]={x:o},i=o):l[r]={x:i+(c-s)/2},i+=c+a})),n((e=>{let{id:t}=e;return l[t]}))},handleVerticalDistribution:()=>{c("vertical_distribution");const e=[...o];e.sort(((e,t)=>(e.frameY+e.frameHeight)/2-(t.frameY+t.frameHeight)/2));const t=e.reduce(((e,t)=>e+t.frameHeight),0),r=s.height-t,a=(0,Vr.dataPixels)(r/(e.length-1)),l={};let i=0;e.forEach(((t,n)=>{const{id:r,y:o,height:s,frameHeight:c}=t;0===n||n===e.length-1?(l[r]={y:o},i=o):l[r]={y:i+(c-s)/2},i+=c+a})),n((e=>{let{id:t}=e;return l[t]}))}}};const lM=function ElementAlignment(){const{selectedElements:e,updateSelectedElements:t}=Ya((e=>{let{state:{selectedElements:t},actions:{updateSelectedElements:n}}=e;return{selectedElements:t,updateSelectedElements:n}})),{isDistributionEnabled:n,handleAlignLeft:r,handleAlignCenter:a,handleAlignRight:o,handleAlignTop:l,handleAlignMiddle:i,handleAlignBottom:s,handleHorizontalDistribution:u,handleVerticalDistribution:p}=oM({selectedElements:e,updateElements:e=>t({properties:e}),isFloatingMenu:!0});return c.createElement(c.Fragment,null,n&&c.createElement(c.Fragment,null,c.createElement(vR,{Icon:Ph,title:(0,d.__)("Distribute horizontally","web-stories"),onClick:u}),c.createElement(vR,{Icon:Lh,title:(0,d.__)("Distribute vertically","web-stories"),onClick:p}),c.createElement(SR,null)),c.createElement(vR,{Icon:kf,title:(0,d.__)("Align left","web-stories"),onClick:r}),c.createElement(vR,{Icon:Cf,title:(0,d.__)("Align center","web-stories"),onClick:a}),c.createElement(vR,{Icon:Bf,title:(0,d.__)("Align right","web-stories"),onClick:o}),c.createElement(vR,{Icon:Jf,title:(0,d.__)("Align top","web-stories"),onClick:l}),c.createElement(vR,{Icon:Rf,title:(0,d.__)("Align vertical center","web-stories"),onClick:i}),c.createElement(vR,{Icon:vf,title:(0,d.__)("Align bottom","web-stories"),onClick:s}))};const iM=function(e){const{flip:t,type:n}=AR(["flip","type"]),r=Ya((e=>e.actions.updateSelectedElements));return{[e]:t[e]||!1,toggle:()=>{(0,P.trackEvent)("floating_menu",{name:`set_flip_${e}`,element:n}),r({properties:t=>({flip:{...t.flip,[e]:!t.flip[e]||!1}})})}}};const sM=function FlipHorizontal(){const{horizontal:e,toggle:t}=iM("horizontal");return c.createElement(vR,{Icon:CE,title:(0,d.__)("Flip horizontally","web-stories"),onClick:t,isToggled:e})};const cM=function FlipVertical(){const{vertical:e,toggle:t}=iM("vertical");return c.createElement(vR,{Icon:OE,title:(0,d.__)("Flip vertically","web-stories"),onClick:t,isToggled:e})};var dM=n(32396);const uM=function(e){const{width:t,height:n,rotationAngle:r,x:a,y:o}=e,l=(0,Vr.dataPixels)((0,zn.calculateTextHeight)(e,t)),[i,s]=(0,dM.default)(r,0,0,0,l-n);return{height:l,x:(0,Vr.dataPixels)(a+i),y:(0,Vr.dataPixels)(o+s)}},pM=400;const mM=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pM,t=arguments.length>1?arguments[1]:void 0;return e=parseInt(e),isNaN(parseInt(e))?pM:t&&0!==t.length?t.reduce(((t,n)=>{t=parseInt(t),n=parseInt(n);const r=Math.abs(t-e),a=Math.abs(n-e);return r===a?t<n?t:n:a<r?n:t})):e};function fM(){return fM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fM.apply(this,arguments)}const gM=(0,u.forwardRef)((function StoryFontPicker(e,t){let{...n}=e;const{updateSelectedElements:r,selectedElements:a}=Ya((e=>{let{state:t,actions:n}=e;return{updateSelectedElements:n.updateSelectedElements,selectedElements:t.selectedElements}})),o=(0,u.useCallback)(((e,t)=>{r({properties:n=>{const r=W_(n,e,t),a=uM({...n,...r});return{...r,...a}}})}),[r]),{textInfo:{fontWeight:l,isItalic:i},handlers:{handleResetFontWeight:s}}=OR(a,o),{addRecentFont:d,maybeEnqueueFontStyle:p}=No((e=>{let{actions:t}=e;return{addRecentFont:t.addRecentFont,maybeEnqueueFontStyle:t.maybeEnqueueFontStyle}})),m=jN(a,(e=>{let{font:t}=e;return t?.family})),f=i?"italic":"normal",g=(0,u.useCallback)((async e=>{const{id:t,name:n,value:r,...i}=e;(0,P.trackEvent)("font_family_changed",{name:n}),await p(a.map((e=>{let{content:t}=e;return{font:i,fontStyle:f,fontWeight:l,content:(0,Or.stripHTML)(t)}}))),d(e),o({font:i},!0);const c=mM(400,i.weights);await s(c)}),[d,f,l,p,o,a,s]);return c.createElement($N,fM({onChange:g,currentValue:m},n,{ref:t}))})),hM=gM,bM=(0,p.default)(hM).withConfig({displayName:"fontFamily__StyledFontPicker",componentId:"sc-sk3dxe-0"})(["width:164px;"]),EM=(0,p.css)(["max-height:200px;"]),yM=(0,p.css)(["border:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}));const _M=function FontFamily(){return c.createElement(bM,{tabIndex:-1,listStyleOverrides:EM,containerStyleOverrides:yM})};const vM=function(e){const t=[{label:me[400],value:"400"}];return e?.weights?e.weights.map((e=>({label:me[e],value:e.toString()}))):t},wM={MIN:8,MAX:800},TM=p.default.div.withConfig({displayName:"font__Space",componentId:"sc-1upk4a3-0"})(["flex:0 0 10px;"]),SM=(0,p.default)(ex).withConfig({displayName:"font__StyledNumericInput",componentId:"sc-1upk4a3-1"})(["flex-basis:80px;text-align:center;"]),CM=(0,p.default)(ok.DropDown).withConfig({displayName:"font__StyledDropDown",componentId:"sc-1upk4a3-2"})(["background-color:transparent;"]);const IM=function FontControls(e){let{selectedElements:t,pushUpdate:n,highlightStylesOverride:r,fontDropdownRef:a}=e;const o=jN(t,(e=>{let{font:t}=e;return t?.family})),l=jN(t,"fontSize"),{textInfo:{fontWeight:i,isItalic:s},handlers:{handleSelectFontWeight:p}}=OR(t,n),{fonts:m=[],maybeEnqueueFontStyle:f,getFontByName:g}=No((e=>{let{actions:{maybeEnqueueFontStyle:t,getFontByName:n},state:{fonts:r}}=e;return{maybeEnqueueFontStyle:t,getFontByName:n,fonts:r}})),h=(0,u.useMemo)((()=>vM(g(o))),[g,o]),b=s?"italic":"normal",E=(0,u.useCallback)((async(e,n)=>{await f(t.map((e=>{let{font:t,content:r}=e;return{font:t,fontStyle:b,fontWeight:parseInt(n),content:(0,Or.stripHTML)(r)}}))),p(n)}),[b,p,f,t]);return wA((e=>{let{fontSize:t}=e;return{fontSize:(0,Ks.clamp)(t,wM)}}),[]),c.createElement(c.Fragment,null,m&&c.createElement(Jx,null,c.createElement(hM,{ref:a,highlightStylesOverride:r,showDropdownLabel:!0})),c.createElement(Jx,null,h&&c.createElement(c.Fragment,null,c.createElement(CM,{ariaLabel:(0,d.__)("Font weight","web-stories"),placeholder:we,options:h,selectedValue:ve===i?"":i,onMenuItemClick:E,selectButtonStylesOverride:np}),c.createElement(TM,null)),c.createElement(SM,{"aria-label":(0,d.__)("Font size","web-stories"),isFloat:!0,value:l,onChange:(e,t)=>n({fontSize:t},!0),min:wM.MIN,max:wM.MAX,isIndeterminate:ve===l,placeholder:ve===l?we:null,containerStyleOverride:rp})))},xM=(0,p.default)(ex).attrs({inputClassName:hS.CONTEXT_MENU_SKIP_ELEMENT}).withConfig({displayName:"fontSize__Input",componentId:"sc-17k2x26-0"})(["width:50px;flex:0 0 50px;"]),AM=(0,d.__)("Font size","web-stories");const kM=function FontSize(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{fontSize:n,updateSelectedElements:r}=Ya((e=>{let{state:t,actions:n}=e;return{fontSize:t.selectedElements[0].fontSize,updateSelectedElements:n.updateSelectedElements}})),a=(0,u.useCallback)((e=>{(0,P.trackEvent)("floating_menu",{name:"set_font_size"}),r({properties:t=>{const n=W_(t,e,!0),r=uM({...t,...n});return{...n,...r}}})}),[r]);return c.createElement(_S,{ref:t,inputRef:e,inputLabel:AM},c.createElement(xM,{tabIndex:-1,ref:e,"aria-label":AM,isFloat:!0,value:n,onChange:(e,t)=>a({fontSize:t}),min:wM.MIN,max:wM.MAX,placeholder:n,containerStyleOverride:rp,selectButtonStylesOverride:np,onKeyDown:e=>{yS(e,t)}}))},OM={MIN:0,MAX:100};function PM(e){let{opacity:t}=e;return void 0!==t?t:OM.MAX}const NM=function OpacityControls(e){let{selectedElements:t,pushUpdate:n}=e;const r=jN(t,PM),a=(0,u.useCallback)(((e,t)=>n({opacity:t??100},!0)),[n]);return c.createElement(ex,{suffix:c.createElement(wh,null),unit:(0,d._x)("%","Percentage","web-stories"),value:r,onChange:a,min:OM.MIN,max:OM.MAX,"aria-label":(0,d.__)("Opacity in percent","web-stories"),placeholder:r===ve?we:"",isIndeterminate:r===ve,containerStyleOverride:rp})},RM=(0,p.default)(ex).withConfig({displayName:"layerOpacity__Input",componentId:"sc-1pptz1t-0"})(["width:82px;flex:0 0 82px;"]),MM=(0,d.__)("Opacity in percent","web-stories");const LM=function LayerOpacity(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{opacity:n,type:r}=AR(["opacity","type"]),a=Ya((e=>e.actions.updateSelectedElements));return c.createElement(_S,{ref:t,inputRef:e,inputLabel:MM},c.createElement(RM,{ref:e,tabIndex:-1,suffix:c.createElement(wh,null),unit:(0,d._x)("%","Percentage","web-stories"),value:n||0,"aria-label":MM,onChange:(e,t)=>{a({properties:()=>({opacity:t??100})}),(0,P.trackEvent)("floating_menu",{name:"set_opacity",element:r})},inputClassName:hS.CONTEXT_MENU_SKIP_ELEMENT,onKeyDown:e=>{yS(e,t)},min:OM.MIN,max:OM.MAX}))},DM=(0,p.default)(kP).withConfig({displayName:"loop__StyledLoopContent",componentId:"sc-154lze5-0"})(["gap:8px;"]);const BM=function Loop(){const{loop:e}=AR(["loop"]),t=Ya((e=>e.actions.updateSelectedElements));return c.createElement(DM,{tabIndex:-1,loop:e,onChange:()=>{(0,P.trackEvent)("floating_menu",{name:"set_loop"}),t({properties:e=>{let{loop:t}=e;return{loop:!t}}})}})};const FM=function More(){const e=nm((e=>{let{setHighlights:t}=e;return t})),t=Ya((e=>{let{state:t}=e;return t.selectedElements[0].type}));return c.createElement(xR,{text:(0,d._x)("More","Link to more options in design panel for selected element","web-stories"),onClick:()=>{e({highlight:df.STYLE_PANE}),(0,P.trackEvent)("floating_menu",{name:"click_more_button",element:t})}})},HM=(0,u.createContext)({state:{},actions:{}});const UM=function(e){return(0,u.useContextSelector)(HM,e??u.identity)};const jM=function(e){let{resource:t,elementId:n,isSingleElement:r=!0}=e;const{isTranscodingEnabled:a}=Ja(),{muteExistingVideo:o,isElementTrimming:l,isNewResourceMuting:i,canTranscodeResource:s}=Bi((e=>{let{state:{canTranscodeResource:t,isNewResourceMuting:n,isElementTrimming:r},actions:{muteExistingVideo:a}}=e;return{canTranscodeResource:t,isNewResourceMuting:n,isElementTrimming:r,muteExistingVideo:a}})),{isMuted:c,id:d=0}=t,p=!!r&&l(n),m=i(d),f=(0,u.useCallback)((()=>{o({resource:t})}),[t,o]),g=!s(t),h=a&&r&&(!c&&s(t)||m),{hasTrimMode:b,toggleTrimMode:E}=UM((e=>{let{state:{hasTrimMode:t},actions:{toggleTrimMode:n}}=e;return{hasTrimMode:t,toggleTrimMode:n}}));return{state:{canTrim:b,canMute:h,isTrimming:p,isMuting:m,isDisabled:g},actions:{handleMute:f,handleTrim:E}}};const zM=function Mute(){const{id:e,resource:t}=AR(["id","resource"]),{state:{canMute:n,isMuting:r,isDisabled:a},actions:{handleMute:o}}=jM({elementId:e,resource:t});if(!n)return null;const l=r?(0,d.__)("Removing audio","web-stories"):(0,d.__)("Remove audio","web-stories");return c.createElement(vR,{Icon:BE,title:l,disabled:a||r,onClick:e=>{(0,P.trackEvent)("floating_menu",{name:"set_mute"}),o(e)}})};const GM=function ShapeColor(){const{backgroundColor:e,updateSelectedElements:t}=Ya((e=>{let{state:t,actions:n}=e;return{backgroundColor:t.selectedElements[0].backgroundColor,updateSelectedElements:n.updateSelectedElements}})),n=(0,u.useCallback)((e=>{(0,P.trackEvent)("floating_menu",{name:"set_shape_color",element:"shape"}),t({properties:()=>({backgroundColor:e})})}),[t]);return c.createElement(uR,{tabIndex:-1,label:(0,d.__)("Shape color","web-stories"),value:e,allowsSavedColors:!0,onChange:n,hasInputs:!0,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!0,opacityFocusTrap:!0,colorFocusTrap:!0})},YM=p.default.div.withConfig({displayName:"textAlign__SubMenuContainer",componentId:"sc-1i0z5qr-0"})(["position:absolute;top:calc(var(--height) + ","px);z-index:9999;"],3),ZM=(0,p.default)(hR.default).withConfig({displayName:"textAlign__StyledMenuButton",componentId:"sc-1i0z5qr-1"})(["flex:0 0 60px;height:36px;border:1px solid ",";padding:2px 0;border-radius:4px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),WM=(0,p.default)(gR).withConfig({displayName:"textAlign__StyledMenuIcon",componentId:"sc-1i0z5qr-2"})(["width:auto;display:flex;overflow:hidden;svg{width:32px;}svg:last-child{margin-left:-8px;}"]),VM=[{value:"left",icon:Wf,label:(0,d.__)("Align text left","web-stories")},{value:"center",icon:Uf,label:(0,d.__)("Align text center","web-stories")},{value:"right",icon:qf,label:(0,d.__)("Align text right","web-stories")},{value:"justify",icon:Gf,label:(0,d.__)("Align text justified","web-stories")}];const $M=function TextAlign(){const{textAlign:e="left"}=AR(["textAlign"]),t=Ya((e=>e.actions.updateSelectedElements)),[n,r]=(0,u.useState)(!1),a=(0,u.useRef)(),o=(0,u.useRef)(),[l,i]=(0,u.useState)(0);(0,u.useEffect)((()=>i(o.current.parentNode.offsetLeft+-8)),[]);const s=e=>{e&&setTimeout((()=>e.focus()))},{icon:p,label:m}=VM.find((t=>{let{value:n}=t;return n===e}))||VM[0],f=e=>()=>{(0,P.trackEvent)("floating_menu",{name:`set_text_alignment_${e}`,element:"text"}),t({properties:{textAlign:e}})},g=()=>{r(!1),o.current.focus()},h=(0,d.__)("Change text alignment","web-stories"),b=n?"":h;return(0,fr.useKeyDownEffect)(o,"down",(()=>r(!0)),[]),c.createElement(c.Fragment,null,c.createElement(Tooltip,{placement:Bd.PLACEMENT.BOTTOM,title:b},c.createElement(ZM,{tabIndex:-1,ref:o,onClick:()=>r((e=>!e)),"aria-haspopup":"menu","aria-expanded":n,"aria-label":h},c.createElement(WM,{title:b},c.createElement(p,{role:"img","aria-label":m}),c.createElement(fp.default,null)))),c.createElement(YM,{ref:a,style:{left:`${l}px`}},c.createElement(XN.default,{onDismiss:g,isOpen:n,onCloseSubMenu:g,"aria-label":(0,d.__)("Text alignment options","web-stories"),isSubMenu:!0,isSecondary:!0,parentMenuRef:o,isHorizontal:!0},VM.map((t=>{let{value:n,icon:r,label:a}=t;return c.createElement(vR,{isToggled:n===e,ref:n===e?s:null,key:n,Icon:r,title:a,onClick:f(n)})})))))};const qM=function TextColor(){const{content:e}=AR(["content"]),t=Ya((e=>e.actions.updateSelectedElements)),n=(0,u.useCallback)((e=>{(0,P.trackEvent)("floating_menu",{name:"set_text_color",element:"text"}),t({properties:t=>W_(t,e,!0)})}),[t]),{textInfo:{color:r},handlers:{handleSetColor:a}}=OR([{content:e,type:"text"}],n);return c.createElement(uR,{tabIndex:-1,label:(0,d.__)("Text color","web-stories"),value:r,allowsSavedColors:!0,onChange:a,hasInputs:!1,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!1})};const KM=function ToggleBold(){const{isToggled:e,toggle:t}=PR({currentValue:"isBold",handler:"handleClickBold",eventName:"set_bold"});return c.createElement(vR,{isToggled:e,Icon:Ob,title:(0,d.__)("Toggle bold","web-stories"),onClick:t,tabIndex:-1})};const XM=function ToggleItalics(){const{isToggled:e,toggle:t}=PR({currentValue:"isItalic",handler:"handleClickItalic",eventName:"set_italic"});return c.createElement(vR,{isToggled:e,Icon:Rb,title:(0,d.__)("Toggle italic","web-stories"),onClick:t,tabIndex:-1})};const QM=function ToggleUnderline(){const{isToggled:e,toggle:t}=PR({currentValue:"isUnderline",handler:"handleClickUnderline",eventName:"set_underline"});return c.createElement(vR,{isToggled:e,Icon:oE,title:(0,d.__)("Toggle underline","web-stories"),onClick:t,tabIndex:-1})};const JM=function Trim(){const{id:e,resource:t}=AR(["id","resource"]),{state:{canTrim:n,isTrimming:r,isDisabled:a},actions:{handleTrim:o}}=jM({elementId:e,resource:t});if(!n)return null;const l=r?(0,d.__)("Trimming video","web-stories"):(0,d.__)("Trim video","web-stories");return c.createElement(vR,{Icon:l_,title:l,disabled:a||r,onClick:e=>{(0,P.trackEvent)("floating_menu",{name:"set_trim"}),o(e)}})};const eL=function Trash(e){let{title:t,handleRemove:n}=e;return c.createElement(vR,{Icon:O_.default,title:t,onClick:n})},tL=(0,u.memo)((function FloatingImageMenu(){return c.createElement(c.Fragment,null,c.createElement(LM,null),c.createElement(SR,null),c.createElement(sM,null),c.createElement(cM,null),c.createElement(SR,null),c.createElement(BR,null),c.createElement(SR,null),c.createElement(FM,null),c.createElement(SR,null),c.createElement(JR,null))})),nL=(0,u.memo)((function FloatingMultipleMenu(){return c.createElement(c.Fragment,null,c.createElement(lM,null),c.createElement(SR,null),c.createElement(JR,{isMultiple:!0}))})),rL=(0,u.memo)((function FloatingShapeMenu(){return c.createElement(c.Fragment,null,c.createElement(GM,null),c.createElement(SR,null),c.createElement(QR,null),c.createElement(sM,null),c.createElement(cM,null),c.createElement(SR,null),c.createElement(BR,null),c.createElement(SR,null),c.createElement(FM,null),c.createElement(SR,null),c.createElement(JR,null))})),aL=(0,u.memo)((function FloatingStickerMenu(){return c.createElement(c.Fragment,null,c.createElement(LM,null),c.createElement(SR,null),c.createElement(sM,null),c.createElement(cM,null),c.createElement(SR,null),c.createElement(FM,null),c.createElement(SR,null),c.createElement(JR,null))})),oL=(0,u.memo)((function FloatingTextMenu(){return c.createElement(c.Fragment,null,c.createElement(_M,null),c.createElement(kM,null),c.createElement($M,null),c.createElement(KM,null),c.createElement(XM,null),c.createElement(QM,null),c.createElement(SR,null),c.createElement(qM,null),c.createElement(SR,null),c.createElement(FM,null),c.createElement(SR,null),c.createElement(JR,null))})),lL=(0,u.memo)((function FloatingVideoMenu(){return c.createElement(c.Fragment,null,c.createElement(LM,null),c.createElement(SR,null),c.createElement(sM,null),c.createElement(cM,null),c.createElement(SR,null),c.createElement(BR,null),c.createElement(SR,null),c.createElement(BM,null),c.createElement(JM,null),c.createElement(zM,null),c.createElement(SR,null),c.createElement(FM,null),c.createElement(SR,null),c.createElement(JR,null))}));function iL(){return iL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iL.apply(this,arguments)}const sL=function ProductDropdown(e){let{product:t,setProduct:n,...r}=e;const a=(0,u.useMemo)((()=>[{id:t?.productId,name:t?.productTitle,product:t}]),[t]),[o,l]=(0,u.useState)(!1),[i,s]=(0,u.useState)(a),{actions:{getProducts:p}}=W(),{isSaving:m,currentPageProductIds:f}=Ya((e=>{let{state:{meta:{isSaving:n},currentPage:r}}=e;return{isSaving:n,currentPageProductIds:r?.elements?.filter((e=>{let{type:t}=e;return t===On.ELEMENT_TYPES.PRODUCT})).filter((e=>{let{product:n}=e;return n.productId!==t.productId})).map((e=>{let{product:t}=e;return t?.productId}))}})),g=(0,u.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{products:t}=await p(e);return t.filter((e=>e.productImages.length&&!f.includes(e.productId))).map((e=>({name:e.productTitle,id:e.productId,product:e})))}),[f,p]);(0,u.useEffect)((()=>{(async()=>{try{l(!0);const e=await g();s(e)}catch(e){s(a)}finally{l(!1)}})()}),[a]);const h={hasSearch:!0,lightMode:!0,onChange:e=>{let{product:t}=e;return n(t)},getOptionsByQuery:g,selectedId:t?.productId,dropDownLabel:(0,d.__)("Product","web-stories"),disabled:m,primaryOptions:o?a:i,zIndex:10};return c.createElement(ZN.default.DropDown,iL({options:i,searchResultsLabel:(0,d.__)("Search results","web-stories"),"aria-label":(0,d.__)("Product","web-stories")},h,r))},cL=(0,p.default)(sL).withConfig({displayName:"product__StyledDropDown",componentId:"sc-6kpcrl-0"})(["width:240px;"]),dL=(0,u.memo)((function FloatingProductMenu(){const{selectedElement:e,updateSelectedElements:t,deleteSelectedElements:n}=Ya((e=>{let{actions:t,state:n}=e;return{updateSelectedElements:t.updateSelectedElements,selectedElement:n.selectedElements[0],deleteSelectedElements:t.deleteSelectedElements}})),{shoppingProvider:r}=U(),a=(0,C.useFeature)("shoppingIntegration"),o="none"!==r&&a,l=(0,u.useCallback)((e=>t({properties:{product:e}})),[t]);return c.createElement(c.Fragment,null,o&&c.createElement(c.Fragment,null,c.createElement(cL,{product:e?.product,setProduct:l}),c.createElement(SR,null)),c.createElement(eL,{title:(0,d.__)("Remove product","web-stories"),handleRemove:n}),c.createElement(JR,null))})),uL=dL,pL=(0,u.memo)((function FloatingMenuSelector(e){let{selectedElementType:t}=e;switch(t){case KN.MULTIPLE:return c.createElement(nL,null);case KN.GIF:case KN.IMAGE:return c.createElement(tL,null);case KN.SHAPE:return c.createElement(rL,null);case KN.STICKER:return c.createElement(aL,null);case KN.TEXT:return c.createElement(oL,null);case KN.VIDEO:return c.createElement(lL,null);case KN.PRODUCT:return c.createElement(uL,null);default:return null}})),mL=(0,d.__)("To exit the floating menu, press Escape.","web-stories"),fL=p.default.section.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-pi2qzl-0"})(["display:flex;position:absolute;z-index:",";visibility:",";transition:140ms opacity;"],4,(e=>{let{visuallyHidden:t}=e;return t?"hidden":"visible"})),gL=(0,u.memo)((0,u.forwardRef)((function FloatingMenu(e,t){let{selectionIdentifier:n,selectedElementType:r,handleDismiss:a,visuallyHidden:o}=e;const l=rR(oR.EDIT_ELEMENT),i=(0,mk.default)(),s=(0,u.useCallback)((()=>{i(mL)}),[i]);return(0,u.useLayoutEffect)((()=>{const e=t.current,n=()=>{e.style.width="";const t=e.getBoundingClientRect();e.style.setProperty("--width",`${t.width.toFixed(2)}px`),e.style.setProperty("--height",`${t.height.toFixed(2)}px`),e.style.width="var(--width)"};n();const r=new MutationObserver(n),a=e.querySelector("[role=menu]");return r.observe(a,{childList:!0}),()=>r.disconnect()}),[t,n]),c.createElement(fL,{ref:t,"aria-label":(0,d.__)("Design menu","web-stories"),visuallyHidden:o},c.createElement(sR,{handleDismiss:a},c.createElement(XN.default,{isInline:!0,isHorizontal:!0,isSecondary:!0,isAlwaysVisible:!0,tabIndex:-1,ref:l,dismissOnEscape:!1,onFocus:s,"aria-label":(0,d.__)("Design options for selected element","web-stories"),onMouseDown:e=>{e.stopPropagation()},popoverZIndex:4},c.createElement(pL,{selectedElementType:r}))))}))),hL=gL;const bL=function FloatingMenuLayer(){const{setMoveableMount:e,isEyedropperActive:t}=Vs((e=>{let{actions:t,state:n}=e;return{setMoveableMount:t.setMoveableMount,isEyedropperActive:n.isEyedropperActive}})),{workspaceWidth:n,workspaceHeight:r}=cs((e=>{let{state:{workspaceWidth:t,workspaceHeight:n}}=e;return{workspaceWidth:t,workspaceHeight:n}})),{selectedElementType:a,selectionIdentifier:o}=Ya((e=>{let{state:{selectedElements:t}}=e;return{selectedElementType:1!==t.length||t[0].isBackground?t.length>1?KN.MULTIPLE:KN.NONE:t[0]?.type,selectionIdentifier:t.map((e=>{let{id:t}=e;return t})).join("")}})),l=(0,I.useTransform)((e=>{let{state:t}=e;return t.isAnythingTransforming})),[i,s]=(0,u.useState)(null),d=(0,u.useRef)(),p=(0,u.useRef)(),[m,f]=(0,u.useState)(!1),g=(0,u.useCallback)((()=>f(!0)),[]);(0,u.useEffect)((()=>f(!1)),[o]),(0,u.useEffect)((()=>(e((()=>s)),()=>e(null))),[e]),(0,u.useEffect)((()=>{f(!!t)}),[t]),(0,u.useEffect)((()=>{p.current={width:n,height:r}}),[n,r]);const h=function(e){switch(e){case KN.MULTIPLE:return!0;case KN.NONE:return!1;default:return(0,On.getDefinitionForType)(e)?.hasDesignMenu}}(a)&&!m&&i;return(0,u.useEffect)((()=>{const e=d.current;if(!e||!i)return;const t=()=>{const t=i.getRect(),{width:n,height:r}=p.current,a=t.left+t.width/2;e.style.left=`clamp(0px, ${a}px - (var(--width) / 2), ${n}px - var(--width))`;const o=t.top+t.height+10;e.style.top=`clamp(0px, ${o}px, ${r}px - var(--height))`};t();const n=new MutationObserver(t),r=document.querySelector(".moveable-control-box");return n.observe(r,{attributes:!0,subtree:!0,attributeFilter:["style"]}),()=>n.disconnect()}),[i,h]),!!h&&c.createElement(hL,{ref:d,handleDismiss:g,selectedElementType:a,selectionIdentifier:o,visuallyHidden:l})};const EL=async function(e,t,n,r){const{width:a,height:o,scale:l,focalX:i,focalY:s,flip:c}=e,{src:d,length:u}=t,p=r,m=p/o*a,f=Math.ceil(n/m),g=n/f,h=g/m*a,{width:b,height:E,offsetX:y,offsetY:_}=(0,kw.default)(t,h,o,l,c?.horizontal?100-i:i,c?.vertical?100-s:s),v=u/(f-1),w=await re(d);w.width=b,w.height=E,await ie(w,1e-6);const T=document.createElement("canvas");T.width=n,T.height=r;const S=T.getContext("2d");let C=0,I=0;const x=async()=>{await ie(w,C);const e=I*g;return(c.vertical||c.horizontal)&&(S.translate(e+g/2,p/2),S.scale(c.horizontal?-1:1,c.vertical?-1:1),S.translate(-(e+g/2),-p/2)),S.drawImage(w,y,_,h,o,e,0,g,p),S.setTransform(1,0,0,1,0,0),I+=1,I===f?Promise.resolve():(C+=v,x())};return x().then((()=>T.toDataURL()))};const yL=function(e,t,n){const[r,a]=(0,u.useState)(null);return(0,u.useEffect)((()=>{if(!e)return;const{element:r,resource:o}=t;EL(r,o,n,36).then(a)}),[e,t,n]),r};function _L(){return _L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_L.apply(this,arguments)}const vL=p.default.button.withConfig({displayName:"slider__Thumb",componentId:"sc-50zvue-0"})(["position:absolute;padding:0;"]);function wL(e){return e.pageX||e.clientX}const TL=function Slider(e){let{railWidth:t,min:n,max:r,step:a,minorStep:o=null,value:l=0,onChange:i=(()=>{}),getValueText:s=null,onPointerDown:d=(()=>{}),onNudge:p=(()=>{}),...m}=e;const f=(0,u.useRef)(),g=(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),f.current.focus(),d?.();const a=function(a){const o=wL(a)-wL(e);i(l+o/t*(r-n)),a.preventDefault(),a.stopPropagation()},o=function(){document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",o)};return document.addEventListener("pointermove",a),document.addEventListener("pointerup",o),o}),[l,r,n,i,t,d]),h=(0,u.useCallback)((e=>{i(l+e),p?.()}),[i,p,l]);(0,fr.useKeyDownEffect)(f,"left",(()=>h(-a)),[h,a]),(0,fr.useKeyDownEffect)(f,"shift+left",(()=>h(-o)),[h,o]),(0,fr.useKeyDownEffect)(f,"right",(()=>h(a)),[h,a]),(0,fr.useKeyDownEffect)(f,"shift+right",(()=>h(o)),[h,o]);const b={left:`${((l-n)/(r-n)*t).toFixed(2)}px`};return c.createElement(vL,_L({ref:f,onPointerDown:g,style:b,role:"slider","aria-valuemin":n,"aria-valuemax":r,"aria-valuenow":l,"aria-valuetext":s?.(l)},m))};function SL(){return SL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SL.apply(this,arguments)}const CL=(0,p.default)(TL).withConfig({displayName:"currentTime__StyledSlider",componentId:"sc-tf91kz-0"})(["top:-3px;bottom:-3px;width:6px;margin-left:-3px;border-radius:6px;border-width:0;background-color:",";box-shadow:0px 1px 2px rgba(60,64,67,0.3),0px 1px 3px 1px rgba(60,64,67,0.15);"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal}));const IL=function CurrentTime(e){const t=UM((e=>{let{state:{currentTime:t}}=e;return t}));return c.createElement(CL,SL({"aria-label":(0,d.__)("Current time","web-stories"),value:t,disabled:!0},e))},xL=p.default.aside.withConfig({displayName:"trimmerComponents__Menu",componentId:"sc-1vmlktu-0"})(["display:flex;justify-content:center;align-items:flex-start;height:","px;gap:14px;"],40),AL=p.default.div.withConfig({displayName:"trimmerComponents__RailWrapper",componentId:"sc-1vmlktu-1"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end;"]),kL=p.default.div.withConfig({displayName:"trimmerComponents__Rail",componentId:"sc-1vmlktu-2"})(["position:relative;width:","px;height:","px;border-radius:4px;border:1px solid ",";background-color:",";"],(e=>{let{width:t}=e;return t}),36,(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white}));function Duration(e){let{children:t}=e;return c.createElement($e.Text,{as:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},t)}const OL=(0,p.default)(TL).withConfig({displayName:"trimmerComponents__Handle",componentId:"sc-1vmlktu-3"})(["top:6px;bottom:6px;width:6px;margin-left:-3px;border-radius:6px;background-color:",";border:1px solid ",";box-shadow:0px 1px 2px rgba(60,64,67,0.3),0px 1px 3px 1px rgba(60,64,67,0.15);cursor:col-resize;&:focus{border-color:",";}&.focus-visible{outline:none !important;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.border.focus})),PL=p.default.svg.withConfig({displayName:"trimmerComponents__SVG",componentId:"sc-1vmlktu-4"})(["position:absolute;top:-1px;"]),NL=p.default.div.withConfig({displayName:"trimmerComponents__ButtonWrapper",componentId:"sc-1vmlktu-5"})(["flex-grow:1;flex-basis:100px;display:flex;justify-content:",";"],(e=>{let{isStart:t}=e;return t?"flex-end":"flex-start"}));function RL(e){let{width:t,isLeftAligned:n=!1}=e;const r=n?{left:"-1px"}:{right:"-1px"},a=n?`M 4 0 h ${t} a 4 4 0 0 0 -4 4 v 28 a 4 4 0 0 0 4 4 h -${t} a 4 4 0 0 1 -4 -4 v -28 a 4 4 0 0 1 4 -4 Z`:`M 0 0 h ${t} a 4 4 0 0 1 4 4 v 28 a 4 4 0 0 1 -4 4 h -${t} a 4 4 0 0 0 4 -4 v -28 a 4 4 0 0 0 -4 -4 Z`;return c.createElement(PL,{style:{width:`${t+4}px`,...r},viewBox:`0 0 ${t+4} 36`},c.createElement("path",{stroke:"transparent",fill:"black",fillOpacity:"0.5",d:a}))}function ML(){return ML=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ML.apply(this,arguments)}const LL=function VideoTrimmer(){const{startOffset:e,endOffset:t,maxOffset:n,setStartOffset:r,setEndOffset:a,hasChanged:o,performTrim:l,setIsDraggingHandles:i,toggleTrimMode:s,videoData:p}=UM((e=>{let{state:{startOffset:t,endOffset:n,maxOffset:r,hasChanged:a,videoData:o},actions:{setStartOffset:l,setEndOffset:i,performTrim:s,toggleTrimMode:c,setIsDraggingHandles:d}}=e;return{startOffset:t,endOffset:n,maxOffset:r,setStartOffset:l,setEndOffset:i,hasChanged:a,performTrim:s,setIsDraggingHandles:d,toggleTrimMode:c,videoData:o}})),{workspaceWidth:g,pageWidth:h}=cs((e=>{let{state:{workspaceWidth:t,pageWidth:n}}=e;return{workspaceWidth:t,pageWidth:n}})),b=(0,u.useDebouncedCallback)((()=>i(!1)),1e3),E=(0,u.useRef)(null);vS({ref:E});const y=(0,u.useCallback)((e=>{e&&e.focus()}),[]),_=Math.min(h,g-260),v=h&&n&&p,w=yL(v,p,_),T={ref:E,"aria-label":(0,d.__)("Video trimmer","web-stories")};if(!v)return c.createElement(xL,T);const S={min:0,max:n,step:100,minorStep:10,onPointerDown:()=>i(!0),onPointerUp:()=>i(!1),onNudge:()=>{i(!0),b()}};return c.createElement(xL,T,c.createElement(NL,{isStart:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:s,ref:y},(0,d.__)("Cancel","web-stories"))),c.createElement(AL,null,c.createElement(kL,{width:_,style:{backgroundImage:w?`url(${w})`:void 0}},c.createElement(RL,{isLeftAligned:!0,width:e/n*_}),c.createElement(RL,{width:(n-t)/n*_}),c.createElement(IL,ML({railWidth:_},S)),c.createElement(OL,ML({railWidth:_,value:e,"aria-label":(0,d.__)("Start offset","web-stories"),onChange:e=>r(e)},S)),c.createElement(OL,ML({railWidth:_,value:t,"aria-label":(0,d.__)("End offset","web-stories"),onChange:e=>a(e)},S))),c.createElement(Duration,null,oe(Math.ceil((t-e)/1e3)))),c.createElement(NL,null,c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:l,disabled:!o},(0,d.__)("Trim","web-stories"))))};function DL(){return DL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DL.apply(this,arguments)}const BL={FLOAT_PANEL:11},FL=p.default.div.withConfig({displayName:"editElement__Wrapper",componentId:"sc-1w8k2uc-0"})([""," "," "," pointer-events:initial;"],jn.elementWithPosition,jn.elementWithSize,jn.elementWithRotation),HL=(0,u.memo)((0,u.forwardRef)((function EditElement(e,t){let{element:n,editWrapper:r,onResize:a}=e;const{id:o,type:l}=n,{getBox:i}=(0,Rc.default)((e=>({getBox:e.actions.getBox}))),{getProxiedUrl:s}=Zo(),{isRTL:d,styleConstants:{topOffset:p}={}}=U(),{actions:{maybeEnqueueFontStyle:m}}=No(),{updateElementById:f,deleteSelectedElements:g}=Ya((e=>({updateElementById:e.actions.updateElementById,deleteSelectedElements:e.actions.deleteSelectedElements}))),{isTrimMode:h,resource:b,setVideoNode:E}=UM((e=>{let{state:{isTrimMode:t,videoData:n},actions:{setVideoNode:r}}=e;return{isTrimMode:t,setVideoNode:r,resource:n?.resource}})),[y,_]=(0,u.useState)(null),{Edit:v}=(0,On.getDefinitionForType)(l),w=y?{...n,...y}:n,T=i(w);return c.createElement(FL,DL({"aria-labelledby":`layer-${o}`},T,{ref:t}),c.createElement(v,{element:w,box:T,editWrapper:r,onResize:a,setLocalProperties:_,getProxiedUrl:s,isRTL:d,topOffset:p,isTrimMode:h,resource:b,setVideoNode:E,updateElementById:f,deleteSelectedElements:g,maybeEnqueueFontStyle:m,zIndexCanvas:BL}))}))),UL=HL,jL=qe.THEME_CONSTANTS.ICON_SIZE,zL=jL+8,GL=qe.THEME_CONSTANTS.ICON_SIZE+6+2,YL=2*(qe.THEME_CONSTANTS.LARGE_BUTTON_SIZE+2)+GL+16+16;const ZL=function(){const{carouselState:e}=cs((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}}));return e===Ce.CLOSED?52:116},WL=(0,p.css)(["",""],(e=>{let{pointerEvents:t}=e;return t&&"string"==typeof t?`pointer-events: ${t};`:""}));const VL=function(e){let{containerRef:t}=e;const{zoomLevel:n,setZoomLevel:r}=cs((e=>{let{state:{zoomLevel:t},actions:{setZoomLevel:n}}=e;return{zoomLevel:t,setZoomLevel:n}})),a=(0,u.useDebouncedCallback)((e=>r(e)),25);(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=e=>Math.min(3,Math.max(.25,e-e%.25)),r=r=>{const{ctrlKey:o,deltaY:l}=r,i=t.current.childNodes[0];if(o&&i.contains(r.target)&&l){a(e(l>0?n-.25:n+.25)),r.preventDefault()}},o=e=>{t.current.childNodes[0].contains(e.target)&&e.preventDefault()},l=r=>{const o=t.current.childNodes[0],{scale:l}=r;if(o.contains(r.target)&&l){a(e(l<1?n-.25:n+.25)),r.preventDefault()}};return document.addEventListener("wheel",r,{passive:!1}),document.addEventListener("gesturestart",o),document.addEventListener("gestureend",o),document.addEventListener("gesturechange",l),()=>{document.removeEventListener("wheel",r,{passive:!1}),document.removeEventListener("gesturestart",o),document.removeEventListener("gestureend",o),document.removeEventListener("gesturechange",l)}}),[t,a,n])};function $L(){return $L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$L.apply(this,arguments)}const qL=qe.THEME_CONSTANTS.LARGE_BUTTON_SIZE+8,KL=p.default.section.withConfig({displayName:"layout__LayerGrid",componentId:"sc-1n0mp4m-0"})([""," position:absolute;top:0;left:0;right:0;bottom:0;"," display:grid;grid:'h h h h h h h' ","px '. . . . . . .' minmax(16px,1fr) '. b . p . f .' var(--viewport-height-px) '. . . . . . .' 1fr 'w w w w w w w' ","px '. . . . . . .' ","px / 1fr var(--page-nav-width) var(--page-nav-gap) var(--viewport-width-px) var(--page-nav-gap) var(--page-nav-width) 1fr;height:100%;"],WL,(e=>{let{zIndex:t}=e;return"number"==typeof t?`z-index: ${t};`:""}),64,(e=>{let{footerHeight:t}=e;return t}),16),XL=p.default.div.withConfig({displayName:"layout__Area",componentId:"sc-1n0mp4m-1"})([""," grid-area:",";overflow:",";position:relative;width:100%;height:100%;",";"],WL,(e=>{let{area:t}=e;return t}),(e=>{let{showOverflow:t}=e;return t?"visible":"hidden"}),(e=>{let{zIndex:t}=e;return void 0!==t?`z-index: ${t}`:null})),QL=(0,p.default)(XL).attrs({area:"p"}).withConfig({displayName:"layout__PageAreaContainer",componentId:"sc-1n0mp4m-2"})(["position:relative;display:flex;justify-content:",";align-items:",";overflow:",";",""],(e=>{let{hasHorizontalOverflow:t}=e;return t?"flex-start":"center"}),(e=>{let{hasVerticalOverflow:t}=e;return t?"flex-start":"center"}),(e=>{let{showOverflow:t}=e;return t?"visible":"var(--overflow-x) var(--overflow-y)"}),(e=>{let{isControlled:t,hasVerticalOverflow:n,hasHorizontalOverflow:r,showOverflow:a}=e;return t&&`\n      overflow: ${a?"visible":"hidden"};\n      width: calc(\n        100% - ${n?A.SCROLLBAR_WIDTH:0}px\n      );\n      height: calc(\n        100% - ${r?A.SCROLLBAR_WIDTH:0}px\n      );\n    `})),JL=(0,u.forwardRef)((function Layer(e,t){let{children:n,...r}=e;const a=ZL();return c.createElement(KL,$L({ref:t,footerHeight:a},r),n)})),eD=p.default.div.withConfig({displayName:"layout__PaddedPage",componentId:"sc-1n0mp4m-3"})(["padding:calc(0.5 * var(--page-padding-px));"]),tD=p.default.div.withConfig({displayName:"layout__PageClip",componentId:"sc-1n0mp4m-4"})(["",""],(e=>{let{hasHorizontalOverflow:t,hasVerticalOverflow:n}=e;return(t||n)&&`\n      overflow: hidden;\n      width: ${t?"calc(var(--page-width-px) + var(--page-padding-px))":`calc(var(--viewport-width-px) - ${A.SCROLLBAR_WIDTH}px)`};\n      flex-basis: ${t?"calc(var(--page-width-px) + var(--page-padding-px))":`calc(var(--viewport-width-px) - ${A.SCROLLBAR_WIDTH}px)`};\n      height: ${n?"calc(var(--fullbleed-height-px) + var(--page-padding-px))":`calc(var(--viewport-height-px) - ${A.SCROLLBAR_WIDTH}px)`};\n      flex-shrink: 0;\n      flex-grow: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    `})),nD=p.default.div.withConfig({displayName:"layout__FullbleedContainer",componentId:"sc-1n0mp4m-5"})([""," overflow:visible;position:relative;width:var(--page-width-px);height:var(--fullbleed-height-px);display:flex;justify-content:center;align-items:center;border-radius:5px;",";",""],(e=>{let{background:t}=e;return(0,Yr.default)(t)}),(e=>{let{isControlled:t}=e;return t&&"\n      left: var(--scroll-left-px);\n      top: var(--scroll-top-px);\n    "}),(e=>{let{isBackgroundSelected:t,theme:n}=e;return t&&`\n      &:before {\n        content: '';\n        position: absolute;\n        top: -4px;\n        left: -4px;\n        right: -4px;\n        bottom: -4px;\n        border: ${n.colors.border.selection} 1px solid;\n        border-radius: ${n.borders.radius.medium};\n      }\n    `})),rD=p.default.div.withConfig({displayName:"layout__PageAreaWithoutOverflow",componentId:"sc-1n0mp4m-6"})(["overflow:",";position:relative;width:var(--page-width-px);height:var(--fullbleed-height-px);display:flex;justify-content:center;align-items:center;"],(e=>{let{showOverflow:t}=e;return t?"initial":"hidden"})),aD=p.default.div.withConfig({displayName:"layout__PageAreaSafeZone",componentId:"sc-1n0mp4m-7"})(["width:var(--page-width-px);height:var(--page-height-px);overflow:visible;position:relative;"]),oD=(0,p.default)(XL).attrs({area:"h"}).withConfig({displayName:"layout__HeadArea",componentId:"sc-1n0mp4m-8"})([""]),lD=((0,p.default)(XL).attrs({area:"m"}).withConfig({displayName:"layout__MenuArea",componentId:"sc-1n0mp4m-9"})([""]),(0,p.default)(XL).withConfig({displayName:"layout__NavArea",componentId:"sc-1n0mp4m-10"})(["display:flex;align-items:center;justify-content:center;"])),iD=(0,p.default)(lD).attrs({area:"b"}).withConfig({displayName:"layout__NavPrevArea",componentId:"sc-1n0mp4m-11"})([""]),sD=(0,p.default)(lD).attrs({area:"f"}).withConfig({displayName:"layout__NavNextArea",componentId:"sc-1n0mp4m-12"})([""]),cD=p.default.div.withConfig({displayName:"layout__PageMenuArea",componentId:"sc-1n0mp4m-13"})(["grid-area:p;position:absolute;right:calc(-24px + var(--page-padding-px));top:calc(0.5 * var(--page-padding-px));min-height:calc(100% - var(--page-padding-px));"]),dD=(0,p.default)(XL).attrs({area:"w",showOverflow:!0}).withConfig({displayName:"layout__FooterArea",componentId:"sc-1n0mp4m-14"})([""]);const uD=(0,u.forwardRef)((function PageArea(e,t){let{children:n,fullbleedRef:r=null,fullBleedContainerLabel:a=(0,d.__)("Fullbleed area","web-stories"),overlay:o=[],background:l,isControlled:i=!1,className:s="",showOverflow:p=!1,isBackgroundSelected:m=!1,pageAreaRef:f=(0,u.createRef)(),withSafezone:g=!0,...h}=e;const b=(0,u.useRef)(),E=r||b,{hasVerticalOverflow:y,hasHorizontalOverflow:_,zoomSetting:v,scrollLeft:w,scrollTop:T}=cs((e=>{let{state:{hasVerticalOverflow:t,hasHorizontalOverflow:n,zoomSetting:r,scrollLeft:a,scrollTop:o}}=e;return{hasVerticalOverflow:t,hasHorizontalOverflow:n,zoomSetting:r,scrollLeft:a,scrollTop:o}})),S=(0,u.useRef)();S.current={top:T,left:w},(0,u.useEffect)((()=>{i||(E.current.scrollTop=S.current.top,E.current.scrollLeft=S.current.left)}),[i,v,E]);const C=(0,u.useRef)(null);return VL({containerRef:C}),c.createElement(QL,$L({showOverflow:p,isControlled:i,hasHorizontalOverflow:_,hasVerticalOverflow:y,className:s,"data-scroll-container":!0},h),c.createElement(tD,{hasHorizontalOverflow:_,hasVerticalOverflow:y},c.createElement(eD,{ref:C},c.createElement(nD,{"aria-label":a,role:"region",ref:E,"data-testid":"fullbleed",background:l,isControlled:i,isBackgroundSelected:m},c.createElement(rD,{ref:f,showOverflow:p},g?c.createElement(aD,{ref:t,"data-testid":"safezone"},n):n,o)))))}));var pD=n(94184),mD=n.n(pD);const fD=function(e){let{canSnap:t,otherNodes:n,snappingOffsetX:r=null,isDragging:a}=e;const o=qs(Ys),l=qs(Zs),i=Vs((e=>{let{state:t}=e;return t.designSpaceGuideline})),{pageWidth:s,pageHeight:c}=cs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),{activeDropTargetId:d,isDropTargetingDisabled:p}=rs((e=>{let{state:t}=e;return{activeDropTargetId:t.activeDropTargetId,isDropTargetingDisabled:t.isDropTargetingDisabled}})),m=function(e){const t=e(Tc),{openToUnreadTip:n=Lt}=wc((e=>{let{actions:t}=e;return{openToUnreadTip:t.openToUnreadTip}})),r=(0,u.useDebouncedCallback)(n,300);return(0,u.useCallback)((()=>{t===Tc.SAFE_ZONE&&r(tc)}),[t,r])}((e=>{let{SAFE_ZONE:t}=e;return t}));t=t&&!p&&!d;const f=(0,u.useCallback)((e=>{let{elements:t}=e;const n=t.flat().some((e=>{let{center:t,element:n}=e;return n===i&&!t}));a&&n&&m()}),[a,i,m]);if(!o||!l)return{};const g=r||o.x,h=Math.ceil(l.x-g),b=Math.floor(l.y-o.y),E=t?[h,h+s/2,h+s]:[],y=(s/ee.FULLBLEED_RATIO-c)/2,_={left:!0,top:!0,right:!0,bottom:!0,center:!0,middle:!0};return{snappable:t,snapGap:t,snapDirections:_,elementSnapDirections:_,isDisplaySnapDigit:!1,onSnap:f,horizontalGuidelines:t?[b-y,b,b+c/2,b+c,b+c+y]:[],verticalGuidelines:E,elementGuidelines:t?[...n,i]:[]}};const gD=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,u.useEffect)((()=>{let t=!0;const n=()=>{t&&e.current?.updateRect?.()};n();const r=setTimeout(n);return()=>{t=!1,clearTimeout(r)}}),t)};const hD=function(e){(0,u.useEffect)((()=>{const t=()=>e.current?.updateRect();return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[e])};const bD=function(e,t){const{left:n,right:r,top:a,bottom:o}=e.getBoundingClientRect(),l=t.getBoundingClientRect();return n>l.right||r<l.left||o<l.top||a>l.bottom};const ED=function(){const{deleteSelectedElements:e}=Ya((e=>({deleteSelectedElements:e.actions.deleteSelectedElements}))),{clearTransforms:t}=(0,I.useTransform)((e=>({clearTransforms:e.actions.clearTransforms}))),{fullbleedContainer:n}=Vs((e=>{let{state:{fullbleedContainer:t}}=e;return{fullbleedContainer:t}}));return{handleElementOutOfCanvas:r=>!!bD(r,n)&&(e(),t(),!0)}};const yD=function(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=zs(0,n.x-2,n.y-2,n.width+4,n.height+4),o=zs(0,r.x,r.y,r.width,r.height),l=new(os().Response);return os().testPolygonPolygon(a,o,l),l.bInA};const _D=function(e){let{selectedElement:t}=e;const[n,r]=(0,u.useState)(Fo.getItemByKey(Bo.BACKGROUND_IS_SET_DIALOG_DISMISSED)),{setBackgroundElement:a,isDefaultBackground:o}=Ya((e=>({setBackgroundElement:e.actions.setBackgroundElement,isDefaultBackground:e.state.currentPage?.elements[0]?.isDefaultBackground}))),{fullbleedContainer:l}=Vs((e=>{let{state:{fullbleedContainer:t}}=e;return{fullbleedContainer:t}})),{showSnackbar:i}=(0,kr.useSnackbar)();return{handleFullbleedMediaAsBackground:e=>{o&&On.MEDIA_ELEMENT_TYPES.includes(t.type)&&yD(e,l)&&(a({elementId:t.id}),n||(i({message:(0,d.__)("Full bleed images and videos are automatically set as background. Double click to scale and position at any time.","web-stories"),dismissible:!0}),Fo.setItemByKey(Bo.BACKGROUND_IS_SET_DIALOG_DISMISSED,!0),r(!0)))}}};const vD=function(e){let{setIsDragging:t,resetMoveable:n,selectedElement:r,setTransformStyle:a,frame:o}=e;const{isDropSource:l,handleDrag:i,handleDrop:s,setDraggingResource:c}=rs((e=>{let{actions:{handleDrag:t,handleDrop:n,isDropSource:r,setDraggingResource:a}}=e;return{handleDrag:t,handleDrop:n,setDraggingResource:a,isDropSource:r}})),{handleElementOutOfCanvas:d}=ED(),{handleFullbleedMediaAsBackground:p}=_D({selectedElement:r}),{updateSelectedElements:m}=Ya((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{editorToDataX:f,editorToDataY:g}=(0,Rc.default)((e=>{let{actions:{editorToDataX:t,editorToDataY:n}}=e;return{editorToDataX:t,editorToDataY:n}})),h=(0,u.useBatchingCallback)((e=>{t(!1),c(null),n(e)}),[t,c,n]);return{onDrag:e=>{let{target:n,beforeTranslate:s,clientX:d,clientY:u}=e;t(!0),l(r.type)&&c(r.resource),o.translate=s,a(n,o),l(r.type)&&i(r.resource,d,u,r.id)},throttleDrag:0,onDragStart:e=>{let{set:t}=e;t(o.translate)},onDragEnd:e=>{let{target:n,isDrag:a}=e;if(!a)return!1;if(d(n))return t(!1),void c(null);const i=e=>Math.abs(e)<=1?0:e,[u,b]=o.translate;if(0!==u||0!==b){const e={x:i(r.x+f(u)),y:i(r.y+g(b))};m({properties:e}),l(r.type)&&s(r.resource,r.id)}h(n),p(n)}}},wD=[],TD=["n","s"],SD=["e","w"],CD=["nw","ne","sw","se"];function ID(e){let{vertical:t,horizontal:n,diagonal:r}=e;return[...t?TD:wD,...n?SD:wD,...r?CD:wD]}const xD=function(e){let{resetMoveable:t,selectedElement:n,setTransformStyle:r,frame:a,isEditMode:o,pushTransform:l,classNames:i,forceLockRatio:s}=e;const{updateSelectedElements:c}=Ya((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{handleElementOutOfCanvas:d}=ED(),{handleFullbleedMediaAsBackground:p}=_D({selectedElement:n}),{editorToDataX:m,editorToDataY:f,dataToEditorY:g,dataToEditorX:h}=(0,Rc.default)((e=>{let{actions:{editorToDataX:t,editorToDataY:n,dataToEditorY:r,dataToEditorX:a}}=e;return{editorToDataX:t,editorToDataY:n,dataToEditorY:r,dataToEditorX:a}})),{lockAspectRatio:b,type:E}=n,y="text"===E,[_,v]=(0,u.useState)(!0),w=!y&&(s||b)||y&&_,{resizeRules:T,updateForResizeEvent:S}=(0,On.getDefinitionForType)(E),C=h(T.minWidth),I=g(T.minHeight),x=n.width/n.height,A=n.width<=T.minWidth||n.height<=T.minHeight;return{onResize:e=>{let{target:t,direction:o,width:l,height:i,drag:s}=e,c=l,d=i,u=null;w?(c<C&&(c=C,d=c/x),d<I&&(d=I,c=I*x)):(d=Math.max(d,I),c=Math.max(c,C)),S&&(u=S(n,o,m(c,!1),f(d,!1))),u&&u.height&&(d=g(u.height)),u&&u.marginOffset&&(t.querySelector(".syncMargin").style.margin=-g(u.marginOffset)/2+"px 0"),t.style.width=`${c}px`,t.style.height=`${d}px`,a.direction=o,a.resize=[c,d],a.translate=s.beforeTranslate,a.updates=u,r(t,a)},onResizeStart:e=>{let{setOrigin:t,dragStart:r,direction:i}=e;t(["%","%"]),r&&r.set(a.translate);const s=0!==i[0]&&0!==i[1];_!==s&&y&&v(s),o&&l(n.id,a)},onResizeEnd:e=>{let{target:r}=e;if(d(r))return;const[o,l]=a.resize;if(0!==o&&0!==l){const{direction:e}=a,[t,r]=a.translate,i=m(o),s=f(l),d={width:i,height:s,x:n.x+m(t),y:n.y+f(r)};S&&Object.assign(d,S(n,e,i,s)),c({properties:d})}v(!0),t(r),p(r)},keepRatio:w,renderDirections:ID(T),className:mD()(i,{"visually-hide-handles":A})}};const utils_normalizeRotationDegrees=function(e){return(e%360+360)%360};const AD=function(e){let{selectedElement:t,isEditMode:n,pushTransform:r,frame:a,setTransformStyle:o,resetMoveable:l,throttleRotation:i}=e;const{updateSelectedElements:s}=Ya((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{handleElementOutOfCanvas:c}=ED();return{throttleRotate:i?30:0,onRotate:e=>{let{target:t,beforeRotate:n}=e;a.rotate=utils_normalizeRotationDegrees(n),o(t,a)},onRotateEnd:e=>{let{target:t}=e;if(c(t))return;const n={rotationAngle:Math.round(a.rotate)};s({properties:n}),l(t)},onRotateStart:e=>{let{set:o}=e;n&&r(t.id,a),o(a.rotate)}}};function kD(){return kD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kD.apply(this,arguments)}const OD=(0,u.forwardRef)((function SingleSelectionMoveable(e,t){let{selectedElement:n,targetEl:r,pushEvent:a,isEditMode:o,...l}=e;const i=(0,u.useRef)(null),[s,d]=(0,u.useState)(!1),p=Vs((e=>{let{state:t}=e;return t.nodesById})),m=(0,Rc.default)((e=>{let{actions:t}=e;return t.getBox})),f=(0,I.useTransform)((e=>{let{actions:t}=e;return t.pushTransform})),{zoomSetting:g,scrollLeft:h,scrollTop:b}=cs((e=>{let{state:t}=e;return{zoomSetting:t.zoomSetting,scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}})),{isLocked:E}=n,y=!n.isBackground&&!E,_=(0,u.useRef)(),v=Ya((e=>{let{state:t}=e;return t.currentPage?.elements[0]?.id})),w=(0,fr.useGlobalIsKeyPressed)("shift");hD(i),(0,u.useEffect)((()=>{_.current=a}),[a]),(0,u.useEffect)((()=>{i.current&&i.current.updateRect()}),[h,b]),gD(i,[g]),(0,u.useEffect)((()=>{i.current&&(_.current&&r.contains(_.current.target)&&y&&i.current.moveable.dragStart(_.current),i.current.updateRect())}),[r,i,y]),(0,u.useEffect)((()=>{i.current&&i.current.updateRect()}));const T=m(n),S=(0,u.useMemo)((()=>({translate:[0,0],rotate:T.rotationAngle,resize:[0,0],updates:null})),[T.rotationAngle]),C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;S.translate=t.translate,S.direction=t.direction,S.resize=t.resize,S.updates=t.updates,S.rotate=t.rotate,e.style.transform=`translate(${S.translate[0]}px, ${S.translate[1]}px) rotate(${S.rotate}deg)`,S.resize[0]&&(e.style.width=`${S.resize[0]}px`),S.resize[1]&&(e.style.height=`${S.resize[1]}px`),f(n.id,S)},A=(0,u.useBatchingCallback)((e=>{i.current&&(S.direction=[0,0],S.translate=[0,0],S.resize=[0,0],S.updates=null,f(n.id,null),e.style.transform="",e.style.width="",e.style.height="",i.current.updateRect())}),[S,f,n.id]),k=!o,O=s,P=mD()("default-moveable",{"hide-handles":O,"type-text":"text"===n.type,immoveable:E}),N=vD({setIsDragging:d,resetMoveable:A,selectedElement:n,setTransformStyle:C,frame:S}),R=o?{onDrag:()=>!1,onDragEnd:()=>!1,onDragStart:()=>!1}:N,M=xD({resetMoveable:A,selectedElement:n,setTransformStyle:C,frame:S,isEditMode:o,pushTransform:f,classNames:P,forceLockRatio:w}),L=AD({selectedElement:n,isEditMode:o,pushTransform:f,frame:S,setTransformStyle:C,resetMoveable:A,throttleRotation:w}),D=Object.values(bn(p,[n.id,v])),B=fD({otherNodes:D,canSnap:k&&y,isDragging:s}),F=y&&!O&&!0!==n.lockDimensions,H=y&&!O&&!1!==n.supportsRotation;return c.createElement(x.Moveable,kD({},l,{className:P,zIndex:0,ref:(0,u.useCombinedRefs)(i,t),target:r,edge:!0,draggable:y,resizable:F,rotatable:H},R,M,L,B,{origin:!1,pinchable:!0}))})),PD=(0,x.withOverlay)((0,p.default)(JL).withConfig({displayName:"editLayer__LayerWithGrayout",componentId:"sc-1j9iuj3-0"})(["background-color:",";"],(e=>{let{grayout:t,theme:n}=e;return t?n.colors.opacity.overlayDark:"transparent"}))),ND=(0,x.withOverlay)(uD);function EditLayerForElement(e){let{element:t,showOverflow:n}=e;const r=(0,u.useRef)(null),a=(0,u.useRef)(null),{editModeGrayout:o}=(0,On.getDefinitionForType)(t.type),{isTrimMode:l}=UM((e=>{let{state:{isTrimMode:t}}=e;return{isTrimMode:t}})),{clearEditing:i,onMoveableMount:s}=Vs((e=>({clearEditing:e.actions.clearEditing,onMoveableMount:e.state.onMoveableMount}))),p=ws(),[m,f]=(0,u.useState)(null);(0,fr.useKeyDownEffect)(r,{key:"esc",editable:!0},(()=>i()),[i]),(0,u.useEffect)((()=>()=>p(!1)),[p]);const g=(0,u.useRef)(null),h=(0,u.useCallback)((e=>{g.current=e,s?.(e)}),[s]),b=(0,u.useCallback)((()=>{g.current&&g.current.updateRect()}),[]),{hasEditModeMoveable:E}=(0,On.getDefinitionForType)(t.type);return c.createElement(PD,{ref:r,"aria-label":(0,d._x)("Edit layer","compound noun","web-stories"),"data-testid":"editLayer",grayout:o,zIndex:3,onPointerDown:e=>{e.target!==r.current&&e.target!==a.current||i()}},c.createElement(ND,{ref:a,fullBleedContainerLabel:(0,d.__)("Fullbleed area (Edit layer)","web-stories"),isControlled:!0,showOverflow:n,overflow:n?"visible":"hidden"},c.createElement(UL,{editWrapper:E&&m,onResize:b,element:t,ref:f})),E&&m&&c.createElement(OD,{selectedElement:t,targetEl:m,isEditMode:!0,ref:h}),l&&c.createElement(dD,{showOverflow:!0},c.createElement(LL,null)))}const RD=(0,u.memo)((function EditLayer(){const{currentPage:e}=Ya((e=>({currentPage:e.state.currentPage}))),{editingElement:t,showOverflow:n=!0}=Vs((e=>{let{state:{editingElement:t,editingElementState:{showOverflow:n}={}}}=e;return{editingElement:t,showOverflow:n}})),r=t&&e&&e.elements.find((e=>e.id===t));return r?c.createElement(EditLayerForElement,{element:r,showOverflow:n}):null}));const MD=function(){const{pageAttachmentContainer:e}=Vs((e=>({pageAttachmentContainer:e.state.pageAttachmentContainer}))),{hasLinksInAttachmentArea:t,hasInvalidLinkSelected:n,hasPageAttachment:r,hasElementsInAttachmentArea:a}=Ya((t=>{let{state:n}=t;const r=e=>{let{link:t}=e;return t?.url?.length},a=n.currentPage.elements.filter(r),o=Boolean(n.currentPage?.pageAttachment?.url?.length);return{hasInvalidLinkSelected:Boolean(e&&o&&n.selectedElements.filter(r).some(On.isElementBelowLimit)),hasLinksInAttachmentArea:Boolean(e&&a.some((e=>(0,On.isElementBelowLimit)(e,!0)))),hasElementsInAttachmentArea:Boolean(e&&o&&n.selectedElements.some((e=>(0,On.isElementBelowLimit)(e,!1)))),hasPageAttachment:o}}));return{hasLinksInAttachmentArea:t,hasInvalidLinkSelected:n,isElementInAttachmentArea:(0,u.useCallback)((t=>!!e&&(!!r&&(0,On.isElementBelowLimit)(t,!1))),[e,r]),hasElementsInAttachmentArea:a}};var LD,DD;function BD(){return BD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BD.apply(this,arguments)}const SvgDefaultIcon=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",BD({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,LD||(LD=c.createElement("path",{fillOpacity:.1,d:"M12 0c6.6 0 12 5.4 12 12s-5.4 12-12 12S0 18.6 0 12 5.4 0 12 0z"})),DD||(DD=c.createElement("path",{d:"M13.8 14.6c.1.1.2.3.2.5s-.1.3-.2.5L12.3 17c-.7.7-1.7 1.1-2.7 1.1-1 0-1.9-.4-2.7-1.1-.7-.7-1.1-1.7-1.1-2.7 0-1 .4-1.9 1.1-2.7l1.5-1.5c.2 0 .3-.1.5-.1s.3.1.5.2c.1.1.2.3.2.5s-.1.4-.2.5l-1.5 1.5c-.5.5-.7 1.1-.7 1.7 0 .6.3 1.3.7 1.7.5.5 1.1.7 1.7.7s1.3-.3 1.7-.7l1.5-1.5c.3-.3.7-.3 1 0zM17 7c-.7-.7-1.7-1.1-2.7-1.1-1 0-1.9.4-2.7 1.1l-1.5 1.5c0 .1-.1.3-.1.4 0 .2.1.3.2.5.1.1.3.2.5.2s.3-.1.5-.2l1.5-1.5c.5-.5 1.1-.7 1.7-.7.6 0 1.3.3 1.7.7.5.5.7 1.1.7 1.7 0 .6-.3 1.3-.7 1.7l-1.5 1.5c-.1.1-.2.3-.2.5s.1.3.2.5c.1.1.3.2.5.2s.3-.1.5-.2l1.5-1.5c.7-.7 1.1-1.7 1.1-2.7-.1-1-.5-1.9-1.2-2.6zm-7.9 7.2c0 .2.1.3.2.5.1.1.3.2.5.2s.4-.1.5-.2l4.5-4.5c.1-.1.2-.3.2-.5s-.1-.4-.2-.5c-.3-.2-.8-.2-1 .1l-4.5 4.5c-.1.1-.2.3-.2.4z"})))},FD=(0,c.memo)(SvgDefaultIcon);var HD;function UD(){return UD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UD.apply(this,arguments)}const SvgArrowBar=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",UD({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 8","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,HD||(HD=c.createElement("path",{d:"M18 7.7c-.2 0-.5-.1-.7-.2l-7.3-4-7.3 4c-.7.4-1.6.2-2-.6-.4-.7-.1-1.6.6-2l8-4.4c.5-.2 1-.2 1.5 0l8 4.4c.7.4 1 1.3.6 2-.4.5-.9.8-1.4.8z"})))},jD=(0,c.memo)(SvgArrowBar),zD=p.default.div.withConfig({displayName:"pageAttachment__Wrapper",componentId:"sc-1bseqmx-0"})(["position:absolute;display:flex;align-items:center;justify-content:flex-end;flex-direction:column;bottom:0;height:20%;width:100%;color:",";z-index:3;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),GD=p.default.div.withConfig({displayName:"pageAttachment__Guideline",componentId:"sc-1bseqmx-1"})(["mix-blend-mode:difference;position:absolute;height:1px;bottom:20%;width:100%;background-image:",";background-position:top;background-size:16px 0.5px;background-repeat:repeat-x;z-index:3;"],(e=>{let{theme:t}=e;return`linear-gradient(to right, ${t.colors.standard.black} 50%, ${t.colors.standard.white} 0%)`})),YD=(0,p.default)(jD).withConfig({displayName:"pageAttachment__ArrowBar",componentId:"sc-1bseqmx-2"})(["display:block;cursor:pointer;margin-bottom:10px;filter:drop-shadow(0px 2px 6px rgba(0,0,0,0.3));width:20px;height:8px;"]),ZD=p.default.div.withConfig({displayName:"pageAttachment__OutlinkChip",componentId:"sc-1bseqmx-3"})(["height:","px;display:flex;position:relative;padding:","px ","px;margin:0 0 20px;max-width:calc(100% - 64px);border-radius:30px;place-items:center;box-shadow:0px 4px 10px rgba(0,0,0,0.15);background:",";"],(e=>{let{$factor:t}=e;return t(36)}),(e=>{let{$factor:t}=e;return t(10)}),(e=>{let{$factor:t}=e;return t(6)}),(e=>{let{bgColor:t}=e;return t})),WD=p.default.span.withConfig({displayName:"pageAttachment__TextWrapper",componentId:"sc-1bseqmx-4"})(["font-family:Roboto,sans-serif;font-size:","px;line-height:18px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;position:relative;padding-inline-start:6px;padding-inline-end:8px;height:16px;letter-spacing:0.3px;font-weight:700;max-width:210px;color:",";"],(e=>{let{$factor:t}=e;return t(16)}),(e=>{let{fgColor:t}=e;return t})),VD=p.default.div.withConfig({displayName:"pageAttachment__Tooltip",componentId:"sc-1bseqmx-5"})(["background-color:",";color:",";width:200px;padding:8px;font-size:14px;border-radius:4px;text-align:center;"],(e=>{let{theme:t}=e;return t.colors.standard.black}),(e=>{let{theme:t}=e;return t.colors.standard.white})),$D=p.default.div.withConfig({displayName:"pageAttachment__LinkImage",componentId:"sc-1bseqmx-6"})(["height:24px;width:24px;vertical-align:middle;background-size:cover;background-repeat:no-repeat;background-position:50%;border-radius:50%;background-image:url('","') !important;"],(e=>{let{icon:t}=e;return t})),qD={x:8},KD="#FFFFFF",XD="#000000";const QD=function PageAttachment(e){let{pageAttachment:t={}}=e;const{displayLinkGuidelines:n,pageAttachmentContainer:r,setPageAttachmentContainer:a}=Vs((e=>({displayLinkGuidelines:e.state.displayLinkGuidelines,pageAttachmentContainer:e.state.pageAttachmentContainer,setPageAttachmentContainer:e.actions.setPageAttachmentContainer}))),{dataToEditorY:o}=(0,Rc.default)((e=>{let{actions:{dataToEditorY:t}}=e;return{dataToEditorY:t}})),{hasInvalidLinkSelected:l}=MD(),{ctaText:i,url:s,icon:u,theme:p}=t,m=p===De?XD:KD,f=p===De?KD:XD;return c.createElement(c.Fragment,null,(n||l)&&c.createElement(GD,null),c.createElement(zD,{role:"presentation",ref:a},s?.length>0&&c.createElement(c.Fragment,null,c.createElement(YD,{fill:m}),c.createElement(ZD,{bgColor:m,$factor:o},u?c.createElement($D,{icon:u}):c.createElement(FD,{fill:f,width:o(24),height:o(24)}),c.createElement(WD,{fgColor:f,$factor:o},i||(0,d.__)("Learn more","web-stories"))),r&&l&&c.createElement(bS.Popup,{anchor:{current:r},isOpen:!0,placement:Bd.PLACEMENT.LEFT,spacing:qD},c.createElement(VD,null,(0,d.__)("Links can not reside below the dashed line when a page attachment is present. Your viewers will not be able to click on the link.","web-stories"))))))};var JD;function eB(){return eB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eB.apply(this,arguments)}const tB=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",eB({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 8","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,JD||(JD=c.createElement("path",{d:"M18 7.7c-.2 0-.5-.1-.7-.2l-7.3-4-7.3 4c-.7.4-1.6.2-2-.6-.4-.7-.1-1.6.6-2l8-4.4c.5-.2 1-.2 1.5 0l8 4.4c.7.4 1 1.3.6 2-.4.5-.9.8-1.4.8z"})))},nB=(0,c.memo)(tB),rB=p.default.div.withConfig({displayName:"shoppingPageAttachment__Wrapper",componentId:"sc-7unzl7-0"})(["position:absolute;display:flex;align-items:center;justify-content:flex-end;flex-direction:column;bottom:0;height:20%;width:100%;color:",";z-index:3;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),aB=p.default.div.withConfig({displayName:"shoppingPageAttachment__InnerWrap",componentId:"sc-7unzl7-1"})(["position:relative;width:100%;height:100%;"]),oB=p.default.div.withConfig({displayName:"shoppingPageAttachment__Inner",componentId:"sc-7unzl7-2"})(["position:absolute;bottom:0;width:100%;",";display:flex;flex-direction:column;align-items:center;"],(e=>{let{$hasGradient:t}=e;return t&&"background: linear-gradient(0, rgba(0, 0, 0, 0.15), transparent) !important"})),lB=p.default.div.withConfig({displayName:"shoppingPageAttachment__ArrowWrap",componentId:"sc-7unzl7-3"})(["width:","px;min-height:","px;border-radius:50%;background:",";display:flex;align-items:center;justify-content:center;"],(e=>{let{$factor:t}=e;return t(32)}),(e=>{let{$factor:t}=e;return t(32)}),(e=>{let{bgColor:t}=e;return t})),iB=(0,p.default)(nB).withConfig({displayName:"shoppingPageAttachment__ArrowBar",componentId:"sc-7unzl7-4"})(["display:block;cursor:pointer;filter:drop-shadow(0px 2px 6px rgba(0,0,0,0.3));width:","px;height:","px;"],(e=>{let{$factor:t}=e;return t(20)}),(e=>{let{$factor:t}=e;return t(8)})),sB=p.default.div.withConfig({displayName:"shoppingPageAttachment__OutlinkChip",componentId:"sc-7unzl7-5"})(["height:","px;display:flex;position:relative;padding:","px ","px;margin:0 0 ","px;max-width:calc(100% - 64px);border-radius:30px;place-items:center;background:",";"],(e=>{let{$factor:t}=e;return t(36)}),(e=>{let{$factor:t}=e;return t(10)}),(e=>{let{$factor:t}=e;return t(6)}),(e=>{let{$factor:t}=e;return t(20)}),(e=>{let{bgColor:t}=e;return t})),cB=p.default.span.withConfig({displayName:"shoppingPageAttachment__TextWrapper",componentId:"sc-7unzl7-6"})(["font-family:Roboto,sans-serif;font-size:","px;line-height:18px;text-overflow:ellipsis;white-space:nowrap;position:relative;padding-inline-start:6px;padding-inline-end:8px;height:","px;letter-spacing:0.3px;font-weight:700;max-width:210px;color:",";"],(e=>{let{$factor:t}=e;return t(16)}),(e=>{let{$factor:t}=e;return t(16)}),(e=>{let{fgColor:t}=e;return t})),dB="#FFFFFF",uB="#000000";const pB=function(e){let{ctaText:t,theme:n}=e;const r=n===De?dB:uB,a=n===De?uB:dB,{dataToEditorY:o}=(0,Rc.default)((e=>{let{actions:{dataToEditorY:t}}=e;return{dataToEditorY:t}}));return c.createElement(rB,{role:"presentation"},c.createElement(aB,null,c.createElement(oB,{$hasGradient:n!==De},c.createElement(lB,{bgColor:a,$factor:o},c.createElement(iB,{fill:r,$factor:o})),c.createElement(sB,{$factor:o},c.createElement(cB,{fgColor:a,$factor:o},t||(0,d.__)("Shop Now","web-stories"))))))};const mB=function(e){const t=/^(?:(\d{2,}):)?(\d{2}):(\d{2})\.(\d{3})$/.exec(e);return t?3600*(t[1]?parseInt(t[1]):0)+60*parseInt(t[2])+parseInt(t[3])+parseInt(t[4])/1e3:null},fB=p.default.span.withConfig({displayName:"cue__CueWrapper",componentId:"sc-h5j1x4-0"})(["text-align:center;height:",";"],(e=>{let{$height:t}=e;return`${t}px`})),gB=p.default.span.withConfig({displayName:"cue__CueEl",componentId:"sc-h5j1x4-1"})(["color:",";"],(e=>{let{$isFutureCue:t,theme:n}=e;return t?n.colors.fg.black:n.colors.fg.white})),hB=p.default.span.withConfig({displayName:"cue__Section",componentId:"sc-h5j1x4-2"})(["margin:0 10px 10px;padding:6px 12px;vertical-align:middle;border-radius:15px;background:rgba(11,11,11,0.6);color:rgba(255,255,255,1);display:inline-block;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen-Sans,Ubuntu,Cantarell,'Helvetica Neue',sans-serif;line-height:1.4;word-break:break-word;word-wrap:break-word;overflow-wrap:break-word;"]);const bB=function Cue(e){let{cue:t,videoTime:n,height:r}=e;const a=t.getCueAsHTML();return c.createElement(fB,{$height:r},c.createElement(hB,null,[...a.childNodes].map((e=>{if("timestamp"===e.target)return null;{let t=null;"timestamp"===e.previousSibling?.target&&(t=mB(e.previousSibling.data));const r=t>n;return e.nodeType===Node.TEXT_NODE?null!==t?c.createElement("span",null,c.createElement(gB,{$isFutureCue:r},e.textContent)):c.createElement(gB,null,e.textContent):null!==t?c.createElement("span",null,c.createElement(gB,{$isFutureCue:r,dangerouslySetInnerHTML:{__html:e.innerHTML}})):c.createElement(gB,{dangerouslySetInnerHTML:{__html:e.innerHTML}})}}))))},EB=p.default.div.withConfig({displayName:"trackRenderer__Track",componentId:"sc-7rx40r-0"})(["width:100%;height:100%;display:grid;align-content:end;font-size:",";"],(e=>{let{$fontSize:t}=e;return`${t}px`}));const yB=function TrackRenderer(e){let{elementId:t,trackIndex:n}=e;const{pageWidth:r,pageHeight:a}=cs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),o=.04*r,l=.2*a,[i,s]=(0,u.useState)(null),[d,p]=(0,u.useState)(0),[m,f]=(0,u.useState)([]),g=(0,u.useCallback)((()=>{const e=i?.activeCues?[...i.activeCues]:[];f(e)}),[i]);return(0,u.useEffect)((()=>{g(),p(0);const e=document.getElementById(t);if(!e)return;const r=e.textTracks?.[n];return r?(r.mode="hidden",g(),s(r),e.addEventListener("timeupdate",(()=>{p(e.currentTime)})),r.addEventListener("cuechange",g),()=>{r.removeEventListener("cuechange",g)}):void 0}),[n,g,t,r,a]),m&&i?c.createElement(EB,{$fontSize:o},m.map(((e,t)=>c.createElement(bB,{key:t,cue:e,videoTime:d,height:l})))):null},_B=(0,p.default)(JL).withConfig({displayName:"mediaCaptionsLayer__CaptionsLayer",componentId:"sc-11mx67a-0"})([""]),vB=(0,p.default)(uD).withConfig({displayName:"mediaCaptionsLayer__CaptionsPageArea",componentId:"sc-11mx67a-1"})(["position:absolute;pointer-events:none;"]),wB=p.default.div.withConfig({displayName:"mediaCaptionsLayer__CaptionsCanvas",componentId:"sc-11mx67a-2"})(["background:transparent;border-radius:5px;position:absolute;z-index:2;transform:translateZ(0);top:0;left:0;bottom:0;right:0;cursor:default;"]);const TB=function MediaCaptionsLayer(){const{isEditing:e}=Vs((e=>{let{state:{isEditing:t}}=e;return{isEditing:t}})),{currentPageId:t,backgroundAudio:n,videoElement:r}=Ya((e=>{let{state:t}=e;const{selectedElements:n,currentPage:r}=t,{backgroundAudio:a}=r;let o=null,l=null;if(1===n.length){const e=n[0],{isBackground:t,type:r,tracks:i}=e;t&&a&&a?.tracks?.length>0&&(o=a),"video"===r&&i?.length>0&&(l=e)}return{currentPageId:r?.id,backgroundAudio:o,videoElement:l}})),[a,o]=(0,u.useState)(0),[l,i]=(0,u.useState)("");return(0,u.useEffect)((()=>{if(o(0),i(""),n)return i(`page-${t}-background-audio`),void o(n?.tracks?.length);!e&&r&&(i(`video-${r.id}`),o(r.tracks.length))}),[r,n,t,e]),a?c.createElement(_B,null,c.createElement(vB,{withSafezone:!1,showOverflow:!0},c.createElement(wB,null,Array.from({length:a}).map(((e,t)=>c.createElement(yB,{key:t,elementId:l,trackIndex:t})))))):null},SB=(0,p.default)(uD).withConfig({displayName:"displayLayer__DisplayPageArea",componentId:"sc-13e1aq-0"})(["position:absolute;"]);function DisplayPage(e){let{pageElements:t,editingElement:n}=e;return t?t.map((e=>{if(n===e.id)return null;const r=t.filter((t=>{let{type:n}=t;return n===e.type})).length-1;return c.createElement(Hc,{key:e.id,element:e,isAnimatable:!0,siblingCount:r})})):null}function DisplayPageAnimationController(e){let{resetAnimationState:t}=e;const{animationState:n,pageId:r}=Ya((e=>{let{state:t}=e;return{animationState:t.animationState,pageId:t.currentPage?.id}})),a=(0,Rn.useStoryAnimationContext)((e=>{let{actions:t}=e;return t.WAAPIAnimationMethods}));return(0,u.useEffect)((()=>{switch(n){case Rn.STORY_ANIMATION_STATE.PLAYING_SELECTED:case Rn.STORY_ANIMATION_STATE.PLAYING:return void a.play();case Rn.STORY_ANIMATION_STATE.RESET:return void a.reset();case Rn.STORY_ANIMATION_STATE.SCRUBBING:case Rn.STORY_ANIMATION_STATE.PAUSED:return void a.pause();default:return}}),[n,a]),(0,u.useEffect)((()=>t),[t,r]),null}function StoryAnimations(e){let{children:t}=e;const{isAnimationPlaying:n,currentPageAnimations:r,currentPageElements:a,selectedElements:o,updateAnimationState:l}=Ya((e=>{let{state:t,actions:n}=e;return{isAnimationPlaying:t.animationState===Rn.STORY_ANIMATION_STATE.PLAYING_SELECTED,currentPageAnimations:t.currentPage?.animations||Ue,currentPageElements:t.currentPage?.elements||Ue,selectedElements:t.selectedElements,updateAnimationState:n.updateAnimationState}})),i=(0,u.useCallback)((()=>{l({animationState:Rn.STORY_ANIMATION_STATE.RESET})}),[l]),s=(0,u.useMemo)((()=>o.map((e=>e.id))),[o]);return c.createElement(Rn.StoryAnimation.Provider,{animations:r,elements:a,onWAAPIFinish:i,selectedElementIds:n?s:Ue},c.createElement(DisplayPageAnimationController,{resetAnimationState:i}),t)}DisplayPageAnimationController.propTypes={resetAnimationState:Ma().func};const CB=(0,u.memo)((function DisplayLayer(){const{backgroundColor:e,isBackgroundSelected:t,pageAttachment:n,shoppingAttachment:r,hasProducts:a}=Ya((e=>{let{state:t}=e;return{hasCurrentPage:Boolean(t.currentPage),backgroundColor:t.currentPage?.backgroundColor,isBackgroundSelected:t.selectedElements?.[0]?.isBackground,pageAttachment:t.currentPage?.pageAttachment||{},shoppingAttachment:t.currentPage?.shoppingAttachment||{},hasProducts:t.currentPage.elements?.some((e=>{let{type:t,product:n}=e;return t===On.ELEMENT_TYPES.PRODUCT&&n?.productId}))}})),o=Ya((e=>{let{state:t}=e;return t.currentPage?.elements||Ue})),l=$s(Zs),{editingElement:i,setPageContainer:s,setFullbleedContainer:p}=Vs((e=>{let{state:{editingElement:t},actions:{setPageContainer:n,setFullbleedContainer:r}}=e;return{editingElement:t,setPageContainer:n,setFullbleedContainer:r}})),m=(0,u.useMemo)((()=>a?c.createElement(pB,r):c.createElement(QD,{pageAttachment:n})),[a,n,r]);return c.createElement(StoryAnimations,null,c.createElement(JL,{"data-testid":"DisplayLayer",pointerEvents:"none","aria-label":(0,d._x)("Display layer","compound noun","web-stories")},c.createElement(SB,{ref:(0,u.useCombinedRefs)(s,l),fullbleedRef:p,background:e,isBackgroundSelected:t,fullBleedContainerLabel:(0,d.__)("Fullbleed area (Display layer)","web-stories"),overlay:m,isControlled:!0},c.createElement(DisplayPage,{pageElements:o,editingElement:i})),c.createElement(TB,null)))}));var IB=n(49640);const xB=function(e){const{selectedElementIds:t,selectedElements:n,arrangeSelection:r,deleteSelectedElements:a,duplicateElementsById:o,updateSelectedElements:l,setSelectedElementsById:i,currentPage:s,currentPageNumber:c,animationState:p,updateAnimationState:m,currentPageProductIds:f}=Ya((e=>{let{state:{selectedElementIds:t,selectedElements:n,currentPage:r,currentPageNumber:a,animationState:o},actions:{arrangeSelection:l,deleteSelectedElements:i,duplicateElementsById:s,updateSelectedElements:c,setSelectedElementsById:d,updateAnimationState:u}}=e;return{currentPage:r,currentPageNumber:a,selectedElementIds:t,selectedElements:n,arrangeSelection:l,deleteSelectedElements:i,duplicateElementsById:s,updateSelectedElements:c,setSelectedElementsById:d,animationState:o,updateAnimationState:u,currentPageProductIds:r?.elements?.filter((e=>{let{type:t}=e;return t===On.ELEMENT_TYPES.PRODUCT})).map((e=>{let{product:t}=e;return t?.productId}))}})),g=(0,kr.useSnackbar)((e=>{let{showSnackbar:t}=e;return t})),{setHighlights:h}=nm((e=>{let{setHighlights:t}=e;return{setHighlights:t}})),{isEditing:b,getNodeForElement:E,setEditingElement:y}=Vs((e=>{let{state:{isEditing:t},actions:{getNodeForElement:n,setEditingElement:r}}=e;return{isEditing:t,getNodeForElement:n,setEditingElement:r}})),_=(0,u.useRef)(null);_.current=t,(0,u.useEffect)((()=>{const t=e.current;if(!t)return;const n=t.ownerDocument,r=()=>{setTimeout((()=>{if(n.activeElement===n.body){const e=_.current,n=1===e?.length?E(e[0]):null;if(""!==window.getSelection().toString())return;n?n.focus({preventScroll:!0}):t.focus({preventScroll:!0})}}),300)};return n.addEventListener("focusout",r,!0),()=>{n.removeEventListener("focusout",r,!0)}}),[e,E]),(0,fr.useGlobalKeyDownEffect)("delete",(()=>a()),[a]),(0,fr.useGlobalKeyDownEffect)({key:["mod+a"]},(()=>{const e=s.elements.map((e=>{let{id:t}=e;return t}));i({elementIds:e})}),[s,i]),(0,fr.useGlobalKeyDownEffect)({key:["up","down","left","right"],shift:!0},(e=>{let{key:t,shiftKey:r}=e;if(b)return;const{isBackground:a,isLocked:o}=n?.[0]||{};if(a||o)return;const{dx:i,dy:s}=(0,IB.default)(t,r);l({properties:e=>{let{x:t,y:n}=e;return{x:t+i,y:n+s}}})}),[l,b,n]),(0,fr.useGlobalKeyDownEffect)({key:["mod+up","mod+down","mod+left","mod+right"],shift:!0},(e=>{const{key:t,shiftKey:n}=e;e.preventDefault();const a=function(e,t){if("ArrowUp"===e)return t?ke:Pe;if("ArrowDown"===e)return t?Oe:Ne;return null}(t,n);a&&r({position:a})}),[r]),(0,fr.useGlobalKeyDownEffect)({key:"enter",clickable:!1},(()=>{if(1!==n.length)return;const{type:e,id:t,isLocked:r}=n[0],{hasEditMode:a,hasEditModeIfLocked:o}=(0,On.getDefinitionForType)(e);!a||!o&&r||y(t)}),[n,y]);const v=(0,u.useCallback)((()=>{if(0!==n.length){for(const{type:e,product:t}of n){const{productId:n,productTitle:r,productImages:a}=t||{};e===On.ELEMENT_TYPES.PRODUCT&&n&&f.includes(n)&&g({message:(0,We.default)(
/* translators: %s: product title. */
(0,d.__)('Product "%s" already exists on the page.',"web-stories"),r),thumbnail:a?.[0]?.url&&{src:a[0].url,alt:a[0].alt}})}o({elementIds:n.map((e=>e.id))})}}),[o,n,f,g]);(0,fr.useGlobalKeyDownEffect)("clone",(()=>v()),[v]);const w=[Rn.STORY_ANIMATION_STATE.PLAYING,Rn.STORY_ANIMATION_STATE.PLAYING_SELECTED].includes(p);(0,fr.useGlobalKeyDownEffect)({key:["mod+enter"]},(e=>{e.preventDefault(),1!==c&&(m({animationState:w?Rn.STORY_ANIMATION_STATE.RESET:Rn.STORY_ANIMATION_STATE.PLAYING}),(0,P.trackEvent)("canvas_play_animations",{status:w?"stop":"play"}))}),[w,m,c]),(0,fr.useGlobalKeyDownEffect)({key:["mod+k"]},(e=>{e.preventDefault(),n.length&&!n?.[0]?.isBackground&&h({elements:n,highlight:df.LINK})}),[h,n])};function AB(){let{url:e="",needsProxy:t=!1,rel:n=[],...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{needsProxy:t,url:e,rel:n,...r}}const kB=(0,p.default)(Tooltip).withConfig({displayName:"frame__StyledTooltip",componentId:"sc-1fjzoyw-0"})(["box-shadow:0px 6px 10px ",";align-items:center;p{display:flex;max-width:100%;}"],(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.standard.black,.1)})),OB=p.default.div.withConfig({displayName:"frame__IconWrapper",componentId:"sc-1fjzoyw-1"})(["background-color:",";width:24px;height:24px;border-radius:50%;margin-right:8px;display:inline-block;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),PB=p.default.img.withConfig({displayName:"frame__BrandIcon",componentId:"sc-1fjzoyw-2"})(["width:100%;height:100%;border:none;"]),NB=p.default.span.withConfig({displayName:"frame__LinkDesc",componentId:"sc-1fjzoyw-3"})(["padding-top:2px;flex:1;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]);const RB=function(e){let{element:t,active:n,children:r,anchorRef:a}=e;const o=function(e){return e.link||null}(t),l=o?.url&&n?c.createElement(c.Fragment,null,c.createElement(OB,null,o?.icon&&c.createElement(PB,{src:o.icon,alt:(0,d.__)("Site Icon","web-stories")})),c.createElement(NB,null,o.desc||o.url)):null;return c.createElement(kB,{forceAnchorRef:a,placement:Bd.PLACEMENT.TOP_START,title:l},r)},MB=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const[r,a]=(0,u.useState)(null),[o,l]=(0,u.useState)(null),i=(0,u.useCallback)((n=>o=>{if(o.stopPropagation(),r!==n)return r&&e(o,r),a(n),void l(o);t(o,r),a(null)}),[e,t,r]);return(0,u.useEffect)((()=>{if(!r)return;const t=setTimeout((()=>{a(null),e(o,r)}),n||LB);return()=>{clearTimeout(t)}}),[r,o,e,n]),i},LB=200;function DB(){return DB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DB.apply(this,arguments)}const BB=p.default.div.withConfig({displayName:"frameElement__Wrapper",componentId:"sc-80q0sm-0"})([""," "," "," outline:1px solid transparent;transition:outline-color 0.5s;&:focus,&:active{outline-color:",";}"," ",""],jn.elementWithPosition,jn.elementWithSize,jn.elementWithRotation,(e=>{let{theme:t,hasMask:n}=e;return n?"transparent":t.colors.border.selection}),(e=>{let{isLocked:t,hasMask:n,theme:r}=e;return!t&&!n&&`\n    &:hover {\n      outline-color: ${r.colors.border.selection};\n    }\n  `}),(e=>{let{isClickable:t}=e;return!t&&"pointer-events: none;"})),FB=p.default.div.withConfig({displayName:"frameElement__EmptyFrame",componentId:"sc-80q0sm-1"})(["position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"]),NOOP=()=>{},HB=(0,We.default)(
/* translators: %s: Ctrl+Alt+P keyboard shortcut. */
(0,d.__)("To exit the canvas area, press Escape. Press Tab to move to the next group or element. To enter floating menu, press %s.","web-stories"),(0,fr.prettifyShortcut)("ctrl+alt+p"));const UB=(0,u.memo)((function FrameElement(e){let{id:t}=e;const n=(0,mk.default)(),{enterFocusGroup:r,setFocusGroupCleanup:a}=aR((e=>{let{enterFocusGroup:t,setFocusGroupCleanup:n}=e;return{enterFocusGroup:t,setFocusGroupCleanup:n}})),[o,l]=(0,u.useState)(!1),i=rR(oR.ELEMENT_SELECTION),{setNodeForElement:s,handleSelectElement:p,isEditing:m,setEditingElement:f,setEditingElementWithState:g}=Vs((e=>{let{state:t,actions:n}=e;return{setNodeForElement:n.setNodeForElement,handleSelectElement:n.handleSelectElement,isEditing:t.isEditing,setEditingElement:n.setEditingElement,setEditingElementWithState:n.setEditingElementWithState}})),{isSelected:h,isOnlySelectedElement:b,isActive:E,isBackground:y,element:_}=Ya((e=>{let{state:n}=e;const r=n.selectedElementIds.includes(t),a=r&&1===n.selectedElementIds.length,l=a&&!o&&!m;return{isSelected:r,isBackground:n.currentPage?.elements[0].id===t,element:n.currentPage?.elements.find((e=>e.id===t)),isOnlySelectedElement:a,isActive:l}})),{type:v,flip:w,isLocked:T}=_,S=!T||h,{Frame:C,isMaskable:x,Controls:A}=(0,On.getDefinitionForType)(v),k=(0,u.useRef)(),O=(0,u.useCombinedRefs)(k,i),[P,N]=(0,u.useState)(!1),{isRTL:R,styleConstants:{topOffset:M}={}}=U(),{draggingResource:L,activeDropTargetId:D,isDropSource:B,registerDropTarget:F,unregisterDropTarget:H}=rs((e=>{let{state:{draggingResource:t,activeDropTargetId:n},actions:{isDropSource:r,registerDropTarget:a,unregisterDropTarget:o}}=e;return{draggingResource:t,activeDropTargetId:n,isDropSource:r,registerDropTarget:a,unregisterDropTarget:o}})),j=(0,I.useTransform)((e=>{let{state:t}=e;return!h&&P&&!t.isAnythingTransforming}))&&!T,z=(0,Rc.default)((e=>{let{actions:t}=e;return t.getBox}));(0,u.useLayoutEffect)((()=>{s(t,k.current)}),[t,s]);const G=z(_);(0,I.useTransformHandler)(t,(e=>{const t=k.current;void 0!==e?.dropTargets?.hover&&(t.style.opacity=e.dropTargets.hover?0:1),l(null!==e)}));const{isMedia:Y}=(0,On.getDefinitionForType)(v),Z=(0,u.useCallback)((e=>{h||p(t,e),f(t)}),[t,f,p,h]),W=MB(NOOP,Z),V=(0,u.useCallback)((e=>{h||p(t,e),y||n(HB)}),[p,t,y,h,n]),{clearTransforms:$}=(0,I.useTransform)((e=>({clearTransforms:e.actions.clearTransforms}))),q=(0,u.useCallback)((e=>{h||(p(t,e),$()),k.current.focus({preventScroll:!0}),y||e.stopPropagation()}),[p,t,y,h,$]);Bm({node:k.current,eventData:{...Te.SELECT_ELEMENT,label:_.type},eventType:"pointerdown"}),(0,fr.useKeyDownEffect)(k,{key:["ctrl+alt+p"]},(()=>{r({groupId:oR.EDIT_ELEMENT})}),[r]),(0,u.useEffect)((()=>{h&&a({groupId:oR.EDIT_ELEMENT,cleanup:()=>k.current?.focus()})}),[a,h]);const K=(0,On.getLayerName)(_),X=_.isLocked?(0,We.default)(// translators: %s: Name of element
(0,d.__)("Locked element: %s","web-stories"),K):(0,We.default)(// translators: %s: Name of element
(0,d.__)("Element: %s","web-stories"),K);return c.createElement(RB,{element:_,active:j,anchorRef:k},A&&c.createElement(A,{isTransforming:o,box:G,elementRef:k,element:_,isRTL:R,topOffset:M,isActive:E}),c.createElement(BB,DB({ref:O,"data-element-id":t},G,{tabIndex:-1,role:"button","aria-label":X,hasMask:x,isClickable:S,"data-testid":"frameElement",onMouseDown:q,onFocus:V,onPointerEnter:()=>N(!0),onPointerLeave:()=>N(!1),onClick:Y?W(t):null}),c.createElement(Un.FrameWithMask,{element:_,fill:!0,flip:w,draggingResource:L,activeDropTargetId:D,isDropSource:B,registerDropTarget:F,unregisterDropTarget:H,isSelected:h},C?c.createElement(C,{wrapperRef:k,element:_,box:G,isOnlySelectedElement:b,setEditingElementWithState:g}):c.createElement(FB,null))))}));const jB=function(e){let{targetList:t,frames:n,setTransformStyle:r,onGroupEventStart:a,onGroupEventEnd:o,isDragging:l,setIsDragging:i}=e;const{draggingResource:s}=rs((e=>{let{state:{draggingResource:t}}=e;return{draggingResource:t}})),{nodesById:c,handleSelectElement:d}=Vs((e=>{let{state:{nodesById:t},actions:{handleSelectElement:n}}=e;return{nodesById:t,handleSelectElement:n}})),p=(0,u.useRef)({}),m=l||Boolean(s);return{onDragGroup:e=>{let{events:a}=e;a.forEach(((e,a)=>{let{target:o,beforeTranslate:l}=e;const i=n[a],{element:s}=t[a];i.translate=l,r(s.id,o,i)}))},onDragGroupEnd:e=>{let{targets:t,inputEvent:n}=e;i(!1),(e=>{if((0,x.areEventsDragging)(p.current,e))return!1;const t=Object.keys(c).find((t=>c[t].contains(e.target)));return t&&d(t,e),!0})(n)||o({targets:t})},onDragGroupStart:e=>{let{events:t,inputEvent:n}=e;(e=>{const{timeStamp:t,clientX:n,clientY:r}=e;p.current={timeStamp:t,clientX:n,clientY:r}})(n),l||i(!0),a({events:t,isDrag:!0})},className:"default-moveable "+(m?"hide-handles":""),resizable:!m,rotatable:!m}};const zB=function(e){let{onGroupEventEnd:t,targetList:n,setTransformStyle:r,frames:a}=e;const{editorToDataX:o,editorToDataY:l,dataToEditorY:i}=(0,Rc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY,dataToEditorY:e.actions.dataToEditorY})));return{onResizeGroup:e=>{let{events:t}=e;t.forEach(((e,t)=>{let{target:s,direction:c,width:d,height:u,drag:p}=e;const m=a[t],{element:f,updateForResizeEvent:g}=n[t];let h=u;const b=d;let E=null;g&&(E=g(f,c,o(b),l(h))),E&&E.height&&(h=i(E.height)),s.style.width=`${b}px`,s.style.height=`${h}px`,m.direction=c,m.resize=[b,h],m.translate=p.beforeTranslate,m.updates=E,r(f.id,s,m)}))},onResizeGroupStart:e=>{let{events:t}=e;t.forEach(((e,t)=>{const n=a[t];e.setOrigin(["%","%"]),e.dragStart&&e.dragStart.set(n.translate)}))},onResizeGroupEnd:e=>{let{targets:n}=e;t({targets:n,isResize:!0})}}};const GB=function(e){let{onGroupEventStart:t,setTransformStyle:n,onGroupEventEnd:r,targetList:a,frames:o}=e;return{onRotateGroup:e=>{let{events:t}=e;t.forEach(((e,t)=>{let{target:r,beforeRotate:l,drag:i}=e;const s=o[t],{element:c}=a[t];s.rotate=utils_normalizeRotationDegrees(l),s.translate=i.beforeTranslate,n(c.id,r,s)}))},onRotateGroupEnd:e=>{let{targets:t}=e;r({targets:t,isRotate:!0})},onRotateGroupStart:e=>{let{events:n}=e;t({events:n,isRotate:!0})},throttleRotate:(0,fr.useGlobalIsKeyPressed)("shift")?30:0}};function YB(){return YB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YB.apply(this,arguments)}const ZB=["nw","ne","sw","se"],WB=(0,u.forwardRef)((function MultiSelectionMoveable(e,t){let{selectedElements:n,...r}=e;const a=(0,u.useRef)(),[o,l]=(0,u.useState)(!1),i=n.some((e=>e.isLocked)),s=!i,{updateElementsById:d,deleteElementsById:p,backgroundElement:m}=Ya((e=>({updateElementsById:e.actions.updateElementsById,deleteElementsById:e.actions.deleteElementsById,backgroundElement:e.state.currentPage.elements[0]??{}}))),{nodesById:f,fullbleedContainer:g}=Vs((e=>{let{state:{nodesById:t,fullbleedContainer:n}}=e;return{fullbleedContainer:n,nodesById:t}})),{editorToDataX:h,editorToDataY:b}=(0,Rc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY}))),{zoomSetting:E,scrollLeft:y,scrollTop:_}=cs((e=>{let{state:{zoomSetting:t,scrollLeft:n,scrollTop:r}}=e;return{zoomSetting:t,scrollLeft:n,scrollTop:r}})),{actions:{pushTransform:v}}=(0,I.useTransform)();hD(a),(0,u.useEffect)((()=>{a.current&&a.current.updateRect()}),[n,a,f,y,_]),gD(a,[E]);const w=n.map((e=>({element:e,node:f[e.id],updateForResizeEvent:(0,On.getDefinitionForType)(e.type).updateForResizeEvent}))),T=(e,t,n)=>{t.style.transform=`translate(${n.translate[0]}px, ${n.translate[1]}px) rotate(${n.rotate}deg)`,v(e,n)},S=w?w.map((e=>{let{element:t}=e;return{translate:[0,0],rotate:t.rotationAngle,direction:[0,0],resize:[0,0],updates:null}})):[],C=e=>{let{events:t,isDrag:n,isRotate:r}=e;t.forEach(((e,t)=>{const a=S[t];n?e.set(a.translate):r&&e.set(a.rotate)}))},A=e=>{let{targets:t,isRotate:n,isResize:r}=e;const o={},l=[];t.forEach(((e,t)=>{const{element:a,updateForResizeEvent:i}=w[t];if(bD(e,g))return void l.push(a.id);const s=S[t],{direction:c}=s,d=e=>Math.abs(e)<=1?0:e,u={x:d(a.x+h(s.translate[0])),y:d(a.y+b(s.translate[1]))};n&&(u.rotationAngle=s.rotate);const[p,m]=s.resize;if(r&&(0!==p&&0!==m)){const e=h(p),t=b(m);u.width=e,u.height=t,i&&Object.assign(u,i(a,c,e,t))}o[a.id]=u})),d({elementIds:Object.keys(o),properties:e=>o[e.id]}),l.length>0&&p({elementIds:l}),w.forEach(((e,t)=>{let{element:n,node:r}=e;S[t].direction=[0,0],S[t].translate=[0,0],S[t].resize=[0,0],S[t].updates=null,r.style.transform="",r.style.width="",r.style.height="",v(n.id,null)})),a.current&&a.current.updateRect()},k=Object.values(bn(f,[...n.map((e=>e.id)),m.id])),O=fD({canSnap:!0,otherNodes:k}),P=jB({targetList:w,frames:S,setTransformStyle:T,onGroupEventStart:C,onGroupEventEnd:A,isDragging:o,setIsDragging:l}),N=zB({onGroupEventEnd:A,targetList:w,setTransformStyle:T,frames:S}),R=GB({onGroupEventStart:C,setTransformStyle:T,onGroupEventEnd:A,targetList:w,frames:S}),M=(0,u.useCombinedRefs)(a,t);if(w.some((e=>{let{node:t}=e;return void 0===t})))return null;const L=mD()("default-moveable",{"hide-handles":o,immoveable:i});return c.createElement(x.Moveable,YB({},r,{className:L,ref:M,zIndex:0,target:w.map((e=>{let{node:t}=e;return t})),renderDirections:ZB},P,{draggable:s,resizable:s,rotatable:s},R,N,O))})),VB=WB;function $B(){return $B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$B.apply(this,arguments)}const qB=function Selection(e){const t=Ya((e=>{let{state:t}=e;return t.selectedElements[0]?.id===t.currentPage.elements?.[0]?.id})),{selectedElements:n,isAnimating:r}=Ya((e=>({selectedElements:e.state.selectedElements,isAnimating:[Rn.STORY_ANIMATION_STATE.PLAYING,Rn.STORY_ANIMATION_STATE.PLAYING_SELECTED,Rn.STORY_ANIMATION_STATE.SCRUBBING].includes(e.state.animationState)}))),{editingElement:a,lastSelectionEvent:o,nodesById:l,onMoveableMount:i}=Vs((e=>{let{state:{editingElement:t,lastSelectionEvent:n,nodesById:r,onMoveableMount:a}}=e;return{editingElement:t,lastSelectionEvent:n,nodesById:r,onMoveableMount:a}}));if(0===n.length)return null;if(t)return null;const s=n[0]?.resource?.isPlaceholder;if(s)return null;if(a||r)return null;if(1===n.length){const t=n[0],r=l[t.id];return r?c.createElement(OD,$B({selectedElement:t,targetEl:r,pushEvent:o},e,i&&{ref:i})):null}return c.createElement(VB,$B({selectedElements:n},e,i&&{ref:i}))},KB=p.default.div.withConfig({displayName:"pagenav__Wrapper",componentId:"sc-j8q0gt-0"})(["display:flex;align-items:center;color:",";& > *{pointer-events:initial;}"],(e=>{let{theme:t}=e;return t.colors.fg.white})),XB=(0,p.default)(ug.default).withConfig({displayName:"pagenav__FlippableArrow",componentId:"sc-j8q0gt-1"})(["transform:rotate(","turn);"],(e=>{let{$isLeft:t}=e;return t?0:.5}));const QB=function PageNav(e){let{isNext:t=!0}=e;const{pages:n,currentPageIndex:r,setCurrentPage:a}=Ya((e=>{let{state:{pages:t,currentPageIndex:n},actions:{setCurrentPage:r}}=e;return{pages:t,currentPageIndex:n,setCurrentPage:r}})),{isRTL:o}=U(),l=(0,u.useRef)(null),i=(0,u.useCallback)((e=>e.stopPropagation()),[]),s=(0,u.useCallback)((()=>{const e=t?n[r+1]:n[r-1];e&&a({pageId:e.id})}),[a,r,t,n]),{hasPageNavigation:p}=cs((e=>{let{state:{hasPageNavigation:t}}=e;return{hasPageNavigation:t}}));if(Bm({node:l.current,eventData:Te.PAGE_NAVIGATION}),!p)return!1;const g=t&&r<n.length-1||!t&&r>0,h=o===t;return c.createElement(KB,null,c.createElement(m.Button,{ref:l,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.MEDIUM,"aria-disabled":!g,"aria-label":t?(0,d.__)("Next Page","web-stories"):(0,d.__)("Previous Page","web-stories"),onClick:s,onMouseDown:i},c.createElement(XB,{$isLeft:h})))},JB=(0,p.default)(uD).withConfig({displayName:"framesLayer__FramesPageArea",componentId:"sc-5ltl4w-0"})(["pointer-events:initial;"]),eF=48/ee.PAGE_WIDTH*100,tF=p.default.div.withConfig({displayName:"framesLayer__FocusContainer",componentId:"sc-5ltl4w-1"})(["grid-row:2 / -1;grid-column:1 / -1;margin:5px;",";"],tp.focusableOutlineCSS),nF=(0,d.__)("Canvas Area. To navigate into the page, press Enter.","web-stories"),rF=(0,d.__)("To exit the canvas area, press Escape. Press Tab to move to the next group or element.","web-stories"),aF=p.default.div.withConfig({displayName:"framesLayer__DesignSpaceGuidelineBorder",componentId:"sc-5ltl4w-2"})(["border:1px solid ",";left:","%;right:","%;top:0;bottom:0;position:absolute;pointer-events:none;z-index:1;visibility:",";"],(e=>{let{theme:t}=e;return t.colors.border.negativePress}),eF,eF,(e=>{let{isVisible:t}=e;return t?"visible":"hidden"}));function DesignSpaceGuideline(){const e=Vs((e=>{let{actions:t}=e;return t.setDesignSpaceGuideline})),{isAnythingTransforming:t}=(0,I.useTransform)((e=>{let{state:t}=e;return{isAnythingTransforming:t.isAnythingTransforming}}));return c.createElement(aF,{ref:e,isVisible:t})}function FramesNavAndSelection(e){let{children:t}=e;const n=(0,u.useRef)(null),r=Cc((e=>e.onOpenMenu));return(0,fr.useKeyDownEffect)(n,"mod+alt+shift+m",(e=>{document.dispatchEvent(new KeyboardEvent("keydown",{key:"tab"})),r(e)})),c.createElement(JL,{ref:n,"data-testid":"FramesLayer",pointerEvents:"initial",tabIndex:"-1","aria-label":(0,d.__)("Frames layer","web-stories")},t,c.createElement(iD,null,c.createElement(QB,{isNext:!1})),c.createElement(sD,null,c.createElement(QB,null)),c.createElement(qB,{onContextMenu:r}))}function FrameElements(){const e=Ya((e=>{let{state:t}=e;return t.currentPage?.elements?.map((e=>e.id))||Ue})),t=Ya((e=>{let{state:t}=e;return[Rn.STORY_ANIMATION_STATE.PLAYING,Rn.STORY_ANIMATION_STATE.SCRUBBING].includes(t.animationState)})),n=Cc((e=>e.onOpenMenu)),{setScrollOffset:r}=cs((e=>{let{actions:{setScrollOffset:t}}=e;return{setScrollOffset:t}})),a=(0,u.useCallback)((e=>r({left:e.target.scrollLeft,top:e.target.scrollTop})),[r]);return!t&&c.createElement(JB,{fullBleedContainerLabel:(0,d.__)("Fullbleed area (Frames layer)","web-stories"),onContextMenu:n,onScroll:a},e.map((e=>c.createElement(UB,{key:e,id:e}))),c.createElement(DesignSpaceGuideline,null))}const oF=(0,u.memo)((function FramesLayer(){const e=(0,u.useRef)(),t=(0,mk.default)(),{enterFocusGroup:n,setFocusGroupCleanup:r}=aR((e=>{let{enterFocusGroup:t,setFocusGroupCleanup:n}=e;return{enterFocusGroup:t,setFocusGroupCleanup:n}}));return(0,fr.useGlobalKeyDownEffect)({key:"mod+option+2",editable:!0},(()=>{n({groupId:oR.ELEMENT_SELECTION})}),[n]),xB(e),(0,fr.useKeyDownEffect)(e,{key:["enter"]},(()=>{n({groupId:oR.ELEMENT_SELECTION}),t(rF)}),[n,t]),(0,c.useEffect)((()=>{r({groupId:oR.ELEMENT_SELECTION,cleanup:()=>e.current?.focus()})}),[r]),c.createElement(FramesNavAndSelection,null,c.createElement(tF,{role:"region","data-testid":"canvas-focus-container",ref:e,"aria-label":nF,tabIndex:0}),c.createElement(FrameElements,null))})),lF=(0,u.createContext)({state:{},actions:{}}),iF=e=>{let{children:t}=e;const[n,r]=(0,u.useState)(!1),a=(0,u.useCallback)((e=>{e.preventDefault(),(0,P.trackEvent)("shortcuts_menu_toggled",{status:n?"closed":"open"}),r((e=>!e))}),[n]),o=(0,u.useCallback)((()=>{n&&((0,P.trackEvent)("shortcuts_menu_toggled",{status:"closed"}),r(!1))}),[n]),l=(0,u.useMemo)((()=>({state:{isOpen:n},actions:{toggle:a,close:o}})),[o,n,a]);return c.createElement(lF.Provider,{value:l},t)};function sF(e){return(0,u.useContextSelector)(lF,e??u.identity)}const cF=(0,u.createContext)({state:{},actions:{}});const dF=function(e){return(0,u.useContextSelector)(cF,e??u.identity)},uF=(0,p.default)(lg).withConfig({displayName:"carouselScroll__FlippableArrow",componentId:"sc-1npfzcu-0"})(["transform:rotate(","turn);"],(e=>{let{$isLeft:t}=e;return t?0:.5}));function CarouselScrollButton(e){let{isNext:t=!1}=e;const{hasOverflow:n,canScrollBack:r,canScrollForward:a,scrollBack:o,scrollForward:l}=dF((e=>{let{state:{hasOverflow:t,canScrollBack:n,canScrollForward:r},actions:{scrollBack:a,scrollForward:o}}=e;return{hasOverflow:t,canScrollBack:n,canScrollForward:r,scrollBack:a,scrollForward:o}})),{isRTL:i}=U();if(!n)return null;const s=t?a:r,u=t?l:o,p=t?(0,d.__)("Scroll Forward","web-stories"):(0,d.__)("Scroll Back","web-stories"),g=i===t;return c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!s,onClick:u,"aria-label":p},c.createElement(uF,{$isLeft:g}))}function CarouselScrollForward(){return c.createElement(CarouselScrollButton,{isNext:!0})}function CarouselScrollBack(){return c.createElement(CarouselScrollButton,null)}const pF=(0,u.createContext)({state:{},actions:{}});const mF=function(e,t){const[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(null),[l,i]=(0,u.useState)(null),[s,c]=(0,u.useState)(null),p=(0,mk.default)("assertive"),m=(0,u.useCallback)((e=>{let{position:t,data:n={},onStartReordering:r=(()=>{})}=e;return e=>{const a=e.shiftKey||e.metaKey||e.ctrlKey||e.altKey,o=0===e.button;!a&&o&&(r(),i({position:t,data:n}),c(e.target))}}),[]),f=(0,u.useRef)(null);return(0,u.useEffect)((()=>{f.current=a}),[a]),(0,u.useEffect)((()=>{if(!s)return;const t=t=>{if(t.preventDefault(),null!==f.current){const n=f.current,r=n.position>l.position?n.position-1:n.position;e(l,{...f.current,position:r},t)}c(null)},n=()=>r(!0),a=e=>{"Escape"===e.key&&(c(null),e.stopPropagation())};return s.ownerDocument.addEventListener("pointerup",t),s.ownerDocument.addEventListener("keydown",a,!0),s.addEventListener("pointermove",n),()=>{o(null),r(!1),s.removeEventListener("pointermove",n),s.ownerDocument.removeEventListener("pointerup",t),s.ownerDocument.removeEventListener("keydown",a,!0)}}),[s,l,o,r,e]),(0,u.useEffect)((()=>{if(n&&a){const e=t-a.position,n=(0,We.default)(
/* translators: %d: new position. */
(0,d.__)("Reordering. Press Escape to abort. Release mouse to drop in position %d.","web-stories"),e);p(n)}}),[n,a,t,p]),{isReordering:n,currentSeparator:a,setCurrentSeparator:o,handleStartReordering:m}},fF=p.default.div.withConfig({displayName:"reorderableScroller__Scroller",componentId:"sc-lvxibs-0"})(["z-index:3;opacity:0;position:sticky;"]),gF=(0,p.default)(fF).withConfig({displayName:"reorderableScroller__HorizontalScroller",componentId:"sc-lvxibs-1"})(["padding-left:","px;height:100%;",""],(e=>{let{size:t}=e;return t}),(e=>{let{direction:t,size:n}=e;return-1===t?`\n        left: 0px;\n        margin-right: -${n}px;\n        `:`\n        right: 0px;\n        margin-left: -${n}px;\n        `})),hF=(0,p.default)(fF).withConfig({displayName:"reorderableScroller__VerticalScroller",componentId:"sc-lvxibs-2"})(["padding-top:","px;width:100%;",""],(e=>{let{size:t}=e;return t}),(e=>{let{direction:t,size:n}=e;return-1===t?`\n        top: 0px;\n        margin-bottom: -${n}px;\n        `:`\n        bottom: 0px;\n        margin-top: -${n}px;\n        `}));const bF=(0,u.memo)((function ReorderableScroller(e){let{direction:t,size:n}=e;const{state:{canScrollEnd:r,canScrollStart:a,mode:o},actions:{startScroll:l}}=(0,u.useContext)(pF),[i,s]=(0,u.useState)(!1),d=(0,u.useCallback)((()=>s(!0)),[]),p=(0,u.useCallback)((()=>s(!1)),[]);(0,u.useEffect)((()=>{if(i)return l(t)}),[t,l,i]);const m=-1===t&&a||1===t&&r;if((0,u.useEffect)((()=>{m||s(!1)}),[m]),!m)return null;const f="horizontal"===o?gF:hF;return c.createElement(f,{size:n,direction:t,onPointerEnter:d,onPointerLeave:p,mode:o})}));const EF=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const[a,o]=(0,u.useState)(!1),[l,i]=(0,u.useState)(!1),[s,c]=(0,u.useState)(0),d=(0,u.useBatchingCallback)((()=>{const t=n.current;if(t)if("horizontal"===e){const e=t.scrollWidth-t.clientWidth;e<=0?(o(!1),i(!1)):(o(t.scrollLeft>0),i(t.scrollLeft<e))}else{const e=t.scrollHeight-t.clientHeight;e<=0?(o(!1),i(!1)):(o(t.scrollTop>0),i(t.scrollTop<e))}}),[e,n]),p=(0,u.useCallback)((e=>(c(e),()=>c(0))),[c]),m=t&&a,f=t&&l;return(0,u.useEffect)((()=>{if(0===s||!(m&&s<0||f&&s>0))return;let t=!0;const a=()=>{const o=Math.max(Math.min(.2*r,10),0);"horizontal"===e?n.current.scrollLeft+=s*o:n.current.scrollTop+=s*o,d(),t&&window.requestAnimationFrame(a)};return a(),()=>{t=!1}}),[s,d,m,f,r,e,n]),(0,u.useEffect)((()=>d()),[t,d]),{startScroll:p,canScrollEnd:f,canScrollStart:m}};function yF(){return yF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yF.apply(this,arguments)}const _F=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"reorderable__ReorderableContainer",componentId:"sc-plmujd-0"})(["display:flex;"]),vF=(0,u.forwardRef)((function Reorderable(e,t){let{children:n,onPositionChange:r,getItemSize:a,scrollSize:o=null,mode:l="horizontal",...i}=e;const s=(0,u.useRef)(null),d=t||s,{isReordering:p,currentSeparator:m,setCurrentSeparator:f,handleStartReordering:g}=mF(r,n.length),{startScroll:h,canScrollEnd:b,canScrollStart:E}=EF(l,p,d,a()),y={state:{isReordering:p,currentSeparator:m,containerRef:d,mode:l,canScrollEnd:b,canScrollStart:E},actions:{setCurrentSeparator:f,handleStartReordering:g,startScroll:h}},_=o||a();return c.createElement(pF.Provider,{value:y},c.createElement(_F,yF({ref:d},i),c.createElement(bF,{direction:-1,size:_}),n,c.createElement(bF,{direction:1,size:_})))}));const wF=function(e){return(0,u.useContextSelector)(pF,e??u.identity)};function TF(){return TF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TF.apply(this,arguments)}const SF=p.default.div.withConfig({displayName:"reorderableItem__Container",componentId:"sc-5aswet-0"})(["z-index:1;"]);const CF=function ReorderableItem(e){let{children:t,position:n,onStartReordering:r,disabled:a,data:o,...l}=e;const i=wF((e=>{let{actions:t}=e;return t.handleStartReordering}));return c.createElement(SF,TF({},a?null:{onPointerDown:i({position:n,onStartReordering:r,data:o})},l),t)},IF=35;function xF(){return xF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xF.apply(this,arguments)}const AF=p.default.div.withConfig({displayName:"reorderableSeparator__Wrapper",componentId:"sc-1tnz6qo-0"})(["opacity:0;position:relative;z-index:",";&:hover{opacity:",";}"],(e=>{let{isReordering:t,isNested:n}=e;return t?n?3:2:-1}),(e=>{let{isReordering:t}=e;return t?1:0})),kF=p.default.div.withConfig({displayName:"reorderableSeparator__Line",componentId:"sc-1tnz6qo-1"})(["height:4px;margin:0 0 -4px;background:",";width:100%;"," width:",""],(e=>{let{theme:t}=e;return t.colors.accent.secondary}),(e=>{let{isNested:t}=e;return t&&"margin-left: 30px;"}),(e=>{let{isNested:t}=e;return t?"calc(100% - 30px)":"100%"}));const OF=function ReorderableSeparator(e){let{position:t,groupId:n=null,isNested:r=!1,nestedOffset:a=!1,nestedOffsetCalcFunc:o=(()=>{}),children:l=null,...i}=e;const s=(0,u.useRef)(null),[d,p]=(0,u.useState)(!1),{isReordering:m,setCurrentSeparator:f}=wF((e=>{let{state:t,actions:n}=e;return{isReordering:t.isReordering,setCurrentSeparator:n.setCurrentSeparator}})),g=(0,u.useCallback)((()=>{m&&f({position:t,data:{groupId:n}})}),[f,m,t,n]);return null===l&&(l=c.createElement(kF,{isNested:r||d})),c.createElement(AF,xF({onPointerOver:g,onPointerMove:e=>{a&&p(o(e.nativeEvent))},ref:s,isReordering:m,isNested:r||d},i),l)},PF=p.default.div.withConfig({displayName:"carouselPage__Line",componentId:"sc-mvqls9-0"})(["background:",";height:","px;width:","px;margin:0px;"],(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{height:t}=e;return t}),4),NF=p.default.li.attrs({role:"presentation"}).withConfig({displayName:"carouselPage__ItemContainer",componentId:"sc-mvqls9-1"})(["display:flex;position:relative;margin:0;padding:0;"]),RF=(0,p.default)(OF).withConfig({displayName:"carouselPage__PageSeparator",componentId:"sc-mvqls9-2"})(["position:absolute;bottom:0;left:","px;width:","px;height:","px;display:flex;justify-content:center;",":first-of-type &:first-of-type,",":last-of-type &:last-of-type{width:","px;}",":first-of-type &:first-of-type{left:","px;justify-content:flex-start;}",":first-of-type &:last-of-type{left:","px;}",":last-of-type &:last-of-type{justify-content:flex-end;}"],(e=>{let{width:t}=e;return t/2}),(e=>{let{width:t,margin:n}=e;return t+n}),(e=>{let{height:t}=e;return t}),NF,NF,(e=>{let{width:t,margin:n}=e;return(t+n+4)/2}),NF,(e=>{let{margin:t}=e;return(t-4)/2}),NF,(e=>{let{width:t,margin:n}=e;return n+t/2}),NF),MF=(0,p.default)(CF).withConfig({displayName:"carouselPage__ReorderablePage",componentId:"sc-mvqls9-3"})(["display:flex;z-index:1;margin-right:","px;margin-left:","px;"],(e=>{let{margin:t}=e;return t}),(e=>{let{margin:t,position:n}=e;return 0===n?t:0}));const LF=function CarouselPage(e){let{pageId:t,index:n}=e;const{pageThumbWidth:r,pageThumbHeight:a,pageThumbMargin:o,clickPage:l,setPageRef:i,page:s,isCurrentPage:u,hasMultiplePages:p}=dF((e=>{let{state:{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,numPages:o,pages:l,currentPageId:i},actions:{clickPage:s,setPageRef:c}}=e;return{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,clickPage:s,setPageRef:c,page:l.find((e=>{let{id:n}=e;return n===t})),isCurrentPage:t===i,hasMultiplePages:o>1}}));return s&&s.id?c.createElement(NF,{ref:e=>i(s,e),"data-testid":`carousel-page-preview-${t}`},0===n&&c.createElement(RF,{position:0,width:r,height:a,margin:o},c.createElement(PF,{height:a})),c.createElement(MF,{position:n,margin:o},c.createElement(sw,{tabIndex:u&&p?0:-1,onClick:()=>l(s),role:"option","data-page-id":s.id,label:u?(0,We.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s (current page)","web-stories"),n+1):(0,We.default)(
/* translators: %s: page number. */
(0,d.__)("Go to page %s","web-stories"),n+1),isActive:u,page:s,width:r,height:a,isInteractive:p})),c.createElement(RF,{position:n+1,width:r,height:a,margin:o},c.createElement(PF,{height:a}))):null};var DF=n(78559);const BF=p.default.li.attrs({role:"presentation"}).withConfig({displayName:"skeletonPage__EmptyPage",componentId:"sc-szsuww-0"})(["display:block;position:relative;flex:0 0;margin:0;padding:0;border-radius:4px;"]);const FF=function SkeletonPage(e){let{pageId:t,index:n}=e;const{pageThumbWidth:r,pageThumbHeight:a,pageThumbMargin:o,page:l}=dF((e=>{let{state:{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,pages:o}}=e;return{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,page:o.find((e=>{let{id:n}=e;return n===t}))}}));if(!l||!l.id)return null;const i=l.elements[0],{isMedia:s}=(0,On.getDefinitionForType)(i.type),d=s&&Mr(i.resource?.baseColor)?(0,DF.default)(i.resource.baseColor.replace("#","")):l.backgroundColor;return c.createElement(BF,{style:{flexBasis:`${r}px`,height:`${a}px`,marginLeft:`${0===n?o:0}px`,marginRight:`${o}px`,...(0,Yr.default)(d)},"data-testid":`carousel-page-preview-skeleton-${t}`})},HF=(0,p.default)(vF).attrs({role:"listbox","aria-orientation":"horizontal",mode:"horizontal"}).withConfig({displayName:"carouselList__PageList",componentId:"sc-1oa14z5-0"})(["grid-area:carousel;flex-direction:row;align-items:center;justify-content:center;overflow-x:hidden;overflow-y:hidden;width:","px;list-style:none;padding:4px 0;margin:-4px 0;",";::-webkit-scrollbar-thumb{border:6px solid transparent !important;}"],(e=>{let{width:t}=e;return t}),(e=>{let{hasOverflow:t}=e;return t&&(0,p.css)(["overflow-x:visible;overflow-x:overlay;justify-content:flex-start;"])}));const UF=function CarouselList(){const{pageThumbWidth:e,carouselWidth:t,hasOverflow:n,pageIds:r,rearrangePages:a,setListRef:o,showSkeleton:l}=dF((e=>{let{state:{pageThumbWidth:t,carouselWidth:n,hasOverflow:r,pageIds:a,showSkeleton:o},actions:{rearrangePages:l,setListRef:i}}=e;return{pageThumbWidth:t,carouselWidth:n,hasOverflow:r,pageIds:a,rearrangePages:l,setListRef:i,showSkeleton:o}})),i=l?FF:LF;return c.createElement(HF,{mode:"horizontal",width:t,ref:o,hasOverflow:n,"aria-label":(0,d.__)("Pages List","web-stories"),onPositionChange:a,getItemSize:()=>e},r.map(((e,t)=>c.createElement(i,{key:e,pageId:e,index:t}))))},jF=(0,p.css)(["width:32px;margin:-8px;"]),zF=(0,p.default)(fp.default).withConfig({displayName:"carouselDrawerIcon__IconDown",componentId:"sc-b03fdn-0"})(["",""],jF),GF=(0,p.default)(dh).withConfig({displayName:"carouselDrawerIcon__IconUp",componentId:"sc-b03fdn-1"})(["",""],jF);const YF=function CarouselDrawerIcon(e){let{state:t}=e;return[Ce.OPEN,Ce.CLOSING].includes(t)?c.createElement(zF,null):c.createElement(GF,null)},ZF=p.default.div.withConfig({displayName:"carouselDrawer__Wrapper",componentId:"sc-1dxh28m-0"})(["display:flex;justify-content:center;"]),WF=(0,p.default)(m.Button).withConfig({displayName:"carouselDrawer__StyledButton",componentId:"sc-1dxh28m-1"})(["white-space:nowrap;gap:8px;"]);const VF=function CarouselDrawer(){const{carouselState:e,openCarousel:t,closeCarousel:n}=cs((e=>{let{state:{carouselState:t},actions:{openCarousel:n,closeCarousel:r}}=e;return{carouselState:t,openCarousel:n,closeCarousel:r}})),{currentPageNumber:r,pageCount:a}=Ya((e=>{let{state:{currentPageNumber:t,pages:n}}=e;return{currentPageNumber:t,pageCount:n.length}})),o=(0,u.useCallback)((()=>{e===Ce.OPEN?n():e===Ce.CLOSED&&t()}),[e,t,n]);return c.createElement(ZF,null,c.createElement(WF,{"aria-label":(0,d.__)("Toggle page carousel","web-stories"),onClick:o,variant:f.BUTTON_VARIANTS.RECTANGLE,size:f.BUTTON_SIZES.SMALL,type:f.BUTTON_TYPES.TERTIARY},(0,We.default)(
/* translators: 1: current page number. 2: total page count. */
(0,d._n)("%1$d of %2$d page","%1$d of %2$d pages",a,"web-stories"),r,a),c.createElement(YF,{state:e})))},$F=p.default.section.withConfig({displayName:"carouselLayout__Wrapper",componentId:"sc-iaovfa-0"})(["position:relative;display:grid;grid:'. d d d d d .' 32px '. . . . . . .' ","px '. p . c . n .' auto / 1fr ","px ","px auto ","px ","px 1fr;width:100%;height:auto;z-index:",";&.carousel-enter{top:","px;&.carousel-enter-active{top:0;transition:","ms ease-out;transition-property:top;}}&.carousel-exit{top:0;&.carousel-exit-active{top:","px;transition:","ms ease-out;transition-property:top;}}"],(e=>{let{isCollapsed:t}=e;return t?2:8}),jL,8,8,jL,3,(e=>{let{thumbHeight:t}=e;return t+6}),Ie,(e=>{let{thumbHeight:t}=e;return t+6}),Ie),qF=p.default.div.withConfig({displayName:"carouselLayout__Area",componentId:"sc-iaovfa-1"})(["grid-area:",";display:flex;align-items:center;justify-content:center;flex-direction:column;"],(e=>{let{area:t}=e;return t}));const KF=function CarouselLayout(){const{carouselState:e}=cs((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}})),{numPages:t,pageThumbHeight:n}=dF((e=>{let{state:{numPages:t,pageThumbHeight:n}}=e;return{numPages:t,pageThumbHeight:n}})),r=(0,u.useRef)();if(t<=0)return null;const a=e===Ce.CLOSED,o=[Ce.OPEN,Ce.OPENING].includes(e);return c.createElement(Cv.default,{in:o,classNames:"carousel",containerRef:!0,nodeRef:r,timeout:Ie},c.createElement($F,{ref:r,"aria-label":(0,d.__)("Page Carousel","web-stories"),isCollapsed:a,thumbHeight:n},c.createElement(qF,{area:"d"},c.createElement(VF,null)),!a&&c.createElement(c.Fragment,null,c.createElement(qF,{area:"p"},c.createElement(CarouselScrollBack,null)),c.createElement(qF,{area:"c"},c.createElement(UF,null)),c.createElement(qF,{area:"n"},c.createElement(CarouselScrollForward,null)))))};const XF=function(e){let{availableSpace:t,numPages:n}=e;return(0,u.useMemo)((()=>{const e=t>=400,r=t-2*zL,a=e?40:36,o=e?60:54,l=a+16,i=Math.floor((r-16)/l),s=i<n;return{pageThumbWidth:a,pageThumbHeight:o,pageThumbMargin:16,carouselWidth:Math.min(i,n)*(a+16)+16,showablePages:i,hasOverflow:s}}),[t,n])};const QF=function(e){let{listElement:t,carouselWidth:n,hasOverflow:r,showablePages:a,pageThumbWidth:o,pageThumbMargin:l}=e;const[i,s]=(0,u.useState)(0),{isRTL:c}=U(),{carouselState:d}=cs((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}})),{currentPageIndex:p}=Ya((e=>{let{state:{currentPageId:t,pages:n}}=e;return{currentPageIndex:n.findIndex((e=>{let{id:n}=e;return n===t}))}})),m=(0,u.useCallback)((e=>{c&&(e*=-1),t.scrollBy?t.scrollBy({left:e,behavior:"smooth"}):t.scrollLeft+=e}),[t,c]),f=n,g=r&&!(c?1===i:0===i),h=r&&!(c?0===i:1===i),b=(0,u.useCallback)((()=>m(f)),[m,f]),E=(0,u.useCallback)((()=>m(-f)),[m,f]);(0,u.useLayoutEffect)((()=>{if(!r||!t)return;const e=()=>{const{offsetWidth:e,scrollLeft:n,scrollWidth:r}=t;s(n/(r-e))};return t.addEventListener("scroll",e,{passive:!0}),()=>t.removeEventListener("scroll",e)}),[t,r]);const y=(0,u.useCallback)((e=>(o+l)*e),[o,l]),_=(0,u.useRef)(!0);return(0,u.useEffect)((()=>{d===Ce.CLOSED&&(_.current=!0)}),[d]),(0,u.useLayoutEffect)((()=>{if(!r||!t)return;const{scrollLeft:e}=t,n=Math.max(0,p-a+1),o=p,l=y(n),i=y(o);if(e>=l&&e<=i)return;const s=e<l?l:i,c=setInterval((()=>{if(t.scrollWidth-t.offsetWidth<s)return;const e=_.current?"instant":"smooth";_.current=!1,t.scrollTo({left:s,top:0,behavior:e}),clearInterval(c)}),100);return()=>clearInterval(c)}),[t,r,p,a,y]),{canScrollBack:g,canScrollForward:h,scrollForward:b,scrollBack:E}};function JF(e,t,n,r){const a=r?-1:1;return e===t?a:e===n?-a:0}const eH=function(e){let{listElement:t,pageRefs:n}=e;const{isRTL:r}=U(),{addPageAt:a,arrangePage:o,currentPage:l,currentPageId:i,deletePage:s,pages:c,setCurrentPage:d}=Ya((e=>{let{state:{pages:t,currentPage:n,currentPageId:r},actions:{addPageAt:a,arrangePage:o,deletePage:l,setCurrentPage:i}}=e;return{addPageAt:a,arrangePage:o,currentPage:n,currentPageId:r,deletePage:l,pages:t,setCurrentPage:i}})),p=(0,u.useMemo)((()=>c.map((e=>{let{id:t}=e;return t}))),[c]);(0,fr.useEscapeToBlurEffect)(t,[t]),(0,fr.useKeyDownEffect)(t,{key:["up","down","left","right"]},(e=>{let{key:t}=e;const a=JF(t,"ArrowRight","ArrowLeft",r);if(0===a)return;const o=p.indexOf(i)+a;if(o>=0&&o<p.length){const e=p[o];d({pageId:e});const t=(n.current&&n.current[e])?.querySelector("button");t&&t.focus()}}),[i,r,p,d,n,t]),(0,fr.useKeyDownEffect)(t,{key:["mod+up","mod+down","mod+left","mod+right"],shift:!0},(e=>{const{key:t,shiftKey:n}=e;e.preventDefault();const a=JF(t,"ArrowRight","ArrowLeft",r);if(0===a)return;const l=p.indexOf(i);let s=l+a;n&&(s=a<0?0:p.length-1),s!==l&&s>=0&&s<p.length&&o({pageId:i,position:s})}),[o,i,r,p,d]),(0,fr.useKeyDownEffect)(t,"delete",(()=>{s({pageId:i});const e=document.activeElement,n=()=>{if(document.activeElement!==e){const e=t.querySelector('[role="option"][tabindex="0"]');if(e)return void e.focus()}setTimeout(n,100)};n()}),[i,s,t]),(0,fr.useKeyDownEffect)(t,"clone",(()=>{const e=p.indexOf(l.id);a({page:(0,On.duplicatePage)(l),position:e+1})}),[a,l,p])};const tH=function CarouselProvider(e){let{availableSpace:t,children:n}=e;const{pages:r,currentPageId:a,setCurrentPage:o,arrangePage:l}=Ya((e=>{let{state:{pages:t,currentPageId:n},actions:{setCurrentPage:r,arrangePage:a}}=e;return{pages:t,currentPageId:n,setCurrentPage:r,arrangePage:a}})),[i,s]=(0,u.useState)(null),d=(0,u.useRef)([]),p=r.length,m=(0,u.useMemo)((()=>r.map((e=>{let{id:t}=e;return t}))),[r]),[f,g]=(0,u.useState)(!0);(0,u.useEffect)((()=>{const e=Oc((()=>g(!1)),{timeout:5e3});return()=>Pc(e)}),[]);const{pageThumbWidth:h,pageThumbHeight:b,pageThumbMargin:E,carouselWidth:y,hasOverflow:_,showablePages:v}=XF({availableSpace:t,numPages:p}),{canScrollBack:w,canScrollForward:T,scrollBack:S,scrollForward:C}=QF({listElement:i,carouselWidth:y,hasOverflow:_,showablePages:v,pageThumbWidth:h,pageThumbMargin:E});eH({listElement:i,pageRefs:d});const I=(0,u.useCallback)(((e,t)=>{d.current[e.id]=t}),[]),x=(0,u.useCallback)((e=>o({pageId:e.id})),[o]),A=(0,u.useCallback)(((e,t)=>{let{position:n}=e,{position:r}=t;const a=m[n];l({pageId:a,position:r}),o({pageId:a})}),[m,l,o]),k={state:{pageThumbWidth:h,pageThumbHeight:b,pageThumbMargin:E,carouselWidth:y,hasOverflow:_,pages:r,pageIds:m,numPages:p,currentPageId:a,canScrollBack:w,canScrollForward:T,showSkeleton:f},actions:{scrollBack:S,scrollForward:C,clickPage:x,rearrangePages:A,setListRef:s,setPageRef:I}};return c.createElement(cF.Provider,{value:k},n)},nH=p.default.div.withConfig({displayName:"carouselContainer__Wrapper",componentId:"sc-1dsu28u-0"})(["height:auto;width:100%;align-self:flex-end;"]);const rH=(0,u.memo)((function CarouselContainer(){const e=(0,u.useRef)(),[t,n]=(0,u.useState)(0);return(0,u.useResizeEffect)(e,(e=>{let{width:t}=e;return n(t)}),[]),c.createElement(tH,{availableSpace:t},c.createElement(nH,{ref:e},c.createElement(KF,null)))})),aH=(0,p.css)(["height:36px;padding:8px;background-color:",";span{padding:0;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary})),oH=[{label:(0,d._x)("100%","zoom level","web-stories"),value:1},{label:(0,d._x)("200%","zoom level","web-stories"),value:2},{label:(0,d._x)("Fill","zoom level","web-stories"),value:Se.FILL},{label:(0,d._x)("Fit","zoom level","web-stories"),value:Se.FIT}];const lH=function ZoomSelector(){const{zoomSetting:e,zoomLevel:t,setZoomSetting:n,setZoomLevel:r}=cs((e=>{let{state:{zoomSetting:t,zoomLevel:n},actions:{setZoomSetting:r,setZoomLevel:a}}=e;return{zoomSetting:t,zoomLevel:n,setZoomSetting:r,setZoomLevel:a}})),a=(0,u.useMemo)((()=>{const n=oH.find((n=>{let{value:r}=n;return e===Se.FIXED?r===t:r===e}));return n?n.label:(0,We.default)(
/* translators: %d: zoom level percentage value. */
(0,d._x)("%d%%","zoom level","web-stories"),Math.round(100*t))}),[e,t]),o=(0,u.useCallback)(((e,t)=>{Object.prototype.hasOwnProperty.call(Se,t)?n(t):r(t)}),[n,r]);return c.createElement(ok.DropDown,{ariaLabel:(0,d.__)("Zoom Level","web-stories"),placeholder:a,options:oH,placement:Bd.PLACEMENT.TOP_START,onMenuItemClick:o,selectedValue:e,popupFillWidth:!1,selectButtonStylesOverride:aH})};var iH=n(93401),sH=n(21193);const cH=p.default.section.withConfig({displayName:"gridView__Container",componentId:"sc-ytsaos-0"})(["display:flex;flex-direction:column;height:100%;width:100%;padding:32px;"]),dH=p.default.header.withConfig({displayName:"gridView__TopRow",componentId:"sc-ytsaos-1"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:36px;@media ","{margin-bottom:72px;}@media ","{margin-bottom:112px;}"],(e=>{let{theme:t}=e;return t.breakpoint.desktop}),(e=>{let{theme:t}=e;return t.breakpoint.wide})),uH=(0,p.default)(vF).withConfig({displayName:"gridView__Wrapper",componentId:"sc-ytsaos-2"})(["position:relative;overflow-y:auto;overflow-y:overlay;overflow-x:hidden;flex-grow:1;display:flex;flex-direction:column;pointer-events:all;padding:4px;"]),pH=p.default.div.withConfig({displayName:"gridView__Grid",componentId:"sc-ytsaos-3"})(["position:relative;display:grid;grid-template-columns:",";grid-template-rows:repeat(auto-fill,","px);grid-gap:","px;justify-content:center;align-items:flex-start;flex-grow:1;"],(e=>{let{pageWidth:t}=e;return`repeat(auto-fit, minmax(${t}px, max-content))`}),(e=>{let{pageHeight:t}=e;return t}),(e=>{let{gapWidth:t}=e;return t})),mH=p.default.div.withConfig({displayName:"gridView__NoButton",componentId:"sc-ytsaos-4"})(["flex:0 0 56px;"]),fH=(0,p.default)(m.Button).withConfig({displayName:"gridView__ClickableButton",componentId:"sc-ytsaos-5"})(["pointer-events:all;"]),gH=(0,p.default)(iH.Slider).withConfig({displayName:"gridView__ClickableSlider",componentId:"sc-ytsaos-6"})(["pointer-events:all;width:366px;"]),hH=(0,p.default)(OF).withConfig({displayName:"gridView__PageSeparator",componentId:"sc-ytsaos-7"})(["position:absolute;bottom:0;left:","px;width:","px;height:","px;display:flex;justify-content:center;align-items:center;",""],(e=>{let{width:t}=e;return t/2}),(e=>{let{width:t,margin:n}=e;return t+n}),(e=>{let{height:t}=e;return t}),(e=>{let{before:t,width:n,margin:r}=e;return t&&`\n      left: -${(n+2*r)/2}px;\n    `})),bH=p.default.div.withConfig({displayName:"gridView__Line",componentId:"sc-ytsaos-8"})(["background:",";height:","px;width:2px;margin:0px;"],(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{height:t}=e;return t})),EH=p.default.div.withConfig({displayName:"gridView__ItemContainer",componentId:"sc-ytsaos-9"})(["display:flex;flex-direction:row;position:relative;"]);const yH=function GridView(e){let{onClose:t}=e;const{pages:n,currentPageId:r,currentPageIndex:a,setCurrentPage:o,arrangePage:l}=Ya((e=>{let{state:{pages:t,currentPageIndex:n,currentPageId:r},actions:{setCurrentPage:a,arrangePage:o}}=e;return{pages:t,currentPageIndex:n,currentPageId:r,setCurrentPage:a,arrangePage:o}})),{isRTL:i}=U(),[s,p]=(0,u.useState)(4),[m,g]=(0,u.useState)(null),h=(0,u.useRef)();(0,u.useResizeEffect)(h,(e=>{let{width:t}=e;return g(t)}),[]);const b=(m-20*(s-1))/s,E=12*Math.floor(b/12),y=E*s,_=Math.floor((m-y)/(s-1)),v=E/ee.PAGE_RATIO,w=e=>()=>o({pageId:e.id}),T=(0,u.useRef)(),S=(0,u.useRef)({}),C=(0,u.useCallback)(((e,t)=>{l({pageId:e,position:t})}),[l]);(0,sH.default)({containerRef:h,gridRef:T,itemRefs:S,isRTL:i,currentItemId:r,items:n,arrangeItem:C});const I=Math.min(v-24,64);return c.createElement(cH,{"aria-label":(0,d.__)("Grid View","web-stories")},c.createElement(dH,null,c.createElement(fH,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.MEDIUM,onClick:t,"aria-label":(0,d.__)("Close","web-stories")},c.createElement(Ju.default,null)),c.createElement(gH,{min:4,max:12,majorStep:1,minorStep:1,value:s,handleChange:e=>p(e),"aria-label":(0,d.__)("Pages per row","web-stories"),popupZIndexOverride:11}),c.createElement(mH,null)),c.createElement(uH,{"aria-label":(0,d.__)("Grid View Pages List","web-stories"),ref:h,onPositionChange:(e,t)=>{let{position:r}=e,{position:a}=t;const i=n[r].id;l({pageId:i,position:a}),o({pageId:i})},mode:"grid",getItemSize:()=>v,scrollSize:64},c.createElement(pH,{pageWidth:E,pageHeight:v,gapWidth:_,ref:T},n.map(((e,t)=>{const r=t===a,o=n.length>1;return c.createElement(EH,{key:e.id,ref:t=>{S.current[e.id]=t}},c.createElement(hH,{position:t,width:E,height:v,margin:_,before:!0},c.createElement(bH,{height:I})),c.createElement(CF,{position:t},c.createElement(sw,{key:e.id,label:r?(0,We.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s (current page)","web-stories"),t+1):(0,We.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s","web-stories"),t+1),tabIndex:r&&o?0:-1,isActive:r&&o,page:e,width:E,height:v,onClick:w(e),isInteractive:o,gridRef:T,role:"option"})),c.createElement(hH,{position:t+1,width:E,height:v,margin:_},c.createElement(bH,{height:I})))})))))},_H=p.default.div.withConfig({displayName:"gridViewButton__Box",componentId:"sc-1gc0r0y-0"})(["width:32px;height:32px;display:flex;justify-content:center;align-items:center;"]);const vH=function GridViewButton(){const[e,t]=(0,u.useState)(!1),n=(0,u.useCallback)((()=>{t((e=>{const t=!e;return(0,P.trackEvent)("grid_view_toggled",{status:t?"open":"closed"}),t}))}),[t]);return c.createElement(c.Fragment,null,c.createElement(_H,null,c.createElement(Tooltip,{title:(0,d.__)("Grid View","web-stories"),placement:Bd.PLACEMENT.TOP,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:n,"aria-label":(0,d.__)("Grid View","web-stories")},c.createElement(Bg.default,null)))),c.createElement(S.Modal,{isOpen:e,onClose:n,contentLabel:(0,d.__)("Grid View","web-stories"),overlayStyles:{alignItems:"stretch",backgroundColor:"#131516"},contentStyles:{pointerEvents:"none",flex:1}},c.createElement(yH,{onClose:n})))},wH=p.default.div.withConfig({displayName:"warning__WarningContainer",componentId:"sc-16blgsz-0"})(["display:flex;gap:8px;margin:14px auto;border:1px solid ",";border-radius:",";padding:8px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),(e=>{let{theme:t}=e;return t.borders.radius.small})),TH=(0,p.default)(Kh).withConfig({displayName:"warning__WarningIcon",componentId:"sc-16blgsz-1"})(["width:32px;height:100%;color:",";"],(e=>{let{theme:t}=e;return t.colors.status.warning})),SH=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"warning__Message",componentId:"sc-16blgsz-2"})(["max-width:calc(100% - 40px);"]);const CH=function Warning(e){let{message:t}=e;const n=(0,mk.default)("assertive");return(0,u.useEffect)((()=>{n(t)}),[t,n]),c.createElement(wH,{"data-testid":"warningContainer"},c.createElement(TH,{title:hu.lowContrast.warningIcon}),c.createElement(SH,null,t))};function IH(){return IH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IH.apply(this,arguments)}const xH=(0,p.default)(m.Button).withConfig({displayName:"directionRadioInput__StyledButton",componentId:"sc-1g0wivz-0"})(["z-index:0;width:28px;height:28px;"," svg{transform-origin:50% 50%;transform:",";}"],(e=>{let{selected:t,disabled:n,theme:r}=e;return t&&!n&&(0,p.css)(["background-color:",";"],r.colors.interactiveBg.secondaryPress)}),(e=>{let{direction:t}=e;switch(t){case Rn.DIRECTION.RIGHT_TO_LEFT:return"rotate(270deg)";case Rn.DIRECTION.TOP_TO_BOTTOM:return"rotate(180deg)";case Rn.DIRECTION.LEFT_TO_RIGHT:return"rotate(90deg)";case Rn.ROTATION.COUNTER_CLOCKWISE:return"rotateX(180deg) rotateZ(90deg)";case Rn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:return"rotate(-135deg)";case Rn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:return"rotate(135deg)";case Rn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return"rotate(-315deg)";case Rn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return"rotate(315deg)";default:return"rotate(0deg)"}})),AH=(0,p.default)((e=>{let{className:t,direction:n,...r}=e;return c.createElement(xH,IH({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,className:t,direction:n},r),[...Object.values(Rn.DIRECTION),...Object.values(Rn.SCALE_DIRECTION)].includes(n)&&c.createElement(Tg,null))})).withConfig({displayName:"directionRadioInput__DirectionIndicator",componentId:"sc-1g0wivz-1"})([""]),kH=p.default.fieldset.withConfig({displayName:"directionRadioInput__Fieldset",componentId:"sc-1g0wivz-2"})(["position:relative;height:91px;width:88px;margin-top:1px;border-right:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),OH=p.default.div.withConfig({displayName:"directionRadioInput__Figure",componentId:"sc-1g0wivz-3"})(["position:absolute;top:50%;left:50%;width:8px;height:8px;background-color:",";border-radius:2px;transform:translate(-50%,-50%);"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),PH=p.default.label.withConfig({displayName:"directionRadioInput__Label",componentId:"sc-1g0wivz-4"})(["position:absolute;cursor:",";",""],(e=>{let{disabled:t}=e;return t?"default":"pointer"}),(e=>{let{direction:t}=e;switch(t){case Rn.DIRECTION.RIGHT_TO_LEFT:return(0,p.css)(["top:50%;right:","px;transform:translateY(-50%);"],3);case Rn.DIRECTION.TOP_TO_BOTTOM:return(0,p.css)(["top:","px;left:50%;transform:translateX(-50%);"],3);case Rn.DIRECTION.LEFT_TO_RIGHT:return(0,p.css)(["top:50%;left:","px;transform:translateY(-50%);"],3);case Rn.ROTATION.COUNTER_CLOCKWISE:return(0,p.css)(["bottom:","px;right:","px;transform:translate(-10%,-10%);"],3,3);case Rn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:return(0,p.css)(["bottom:","px;left:","px;"],3,3);case Rn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:return(0,p.css)(["top:","px;left:","px;"],3,3);case Rn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return(0,p.css)(["top:","px;right:","px;"],3,3);case Rn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return(0,p.css)(["bottom:","px;right:","px;"],3,3);default:return(0,p.css)(["bottom:","px;left:50%;transform:translateX(-50%);"],3)}})),NH=p.default.legend.withConfig({displayName:"directionRadioInput__HiddenLegend",componentId:"sc-1g0wivz-5"})(["position:absolute;opacity:0;clip-path:polygon(0 0);cursor:pointer;"]),RH=p.default.div.withConfig({displayName:"directionRadioInput__RadioGroup",componentId:"sc-1g0wivz-6"})(["position:absolute;top:0;right:0;bottom:0;left:0;"]),MH={[Rn.DIRECTION.RIGHT_TO_LEFT]:(0,d._x)("right to left","animation direction","web-stories"),[Rn.DIRECTION.LEFT_TO_RIGHT]:(0,d._x)("left to right","animation direction","web-stories"),[Rn.DIRECTION.TOP_TO_BOTTOM]:(0,d._x)("top to bottom","animation direction","web-stories"),[Rn.DIRECTION.BOTTOM_TO_TOP]:(0,d._x)("bottom to top","animation direction","web-stories"),[Rn.ROTATION.CLOCKWISE]:(0,d._x)("clockwise","rotation direction","web-stories"),[Rn.ROTATION.COUNTER_CLOCKWISE]:(0,d._x)("counterclockwise","rotation direction","web-stories"),[Rn.SCALE_DIRECTION.SCALE_IN]:(0,d._x)("scale in","scale direction","web-stories"),[Rn.SCALE_DIRECTION.SCALE_OUT]:(0,d._x)("scale out","scale direction","web-stories")},LH=e=>{switch(e){case Rn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:case Rn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return Rn.SCALE_DIRECTION.SCALE_IN;case Rn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:case Rn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return Rn.SCALE_DIRECTION.SCALE_OUT;default:return e}},DH=e=>[...Rn.SCALE_DIRECTION_MAP.SCALE_IN,...Rn.SCALE_DIRECTION_MAP.SCALE_OUT].includes(e),BH=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?.replace(/([a-z])([A-Z])/g,"$1 $2")?.toLocaleLowerCase()?.split(" ")||[]},FH=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return BH(e)?.[0]},HH=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=BH(e);return t[t.length-1]},UH=[Rn.DIRECTION.TOP_TO_BOTTOM,Rn.DIRECTION.RIGHT_TO_LEFT,Rn.DIRECTION.BOTTOM_TO_TOP,Rn.DIRECTION.LEFT_TO_RIGHT],jH=[Rn.SCALE_DIRECTION.SCALE_IN_TOP_LEFT,Rn.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT,Rn.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT,Rn.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT],zH=(e,t,n)=>{const r=n?t.reverse():t;return e.sort(((e,t)=>r.indexOf(e)-r.indexOf(t)))},DirectionRadioInput=e=>{let{value:t,directions:n=[],onChange:r,disabled:a=[],tooltip:o}=e;const l=(0,u.useRef)(),{isRTL:i}=U(),s=(0,u.useMemo)((()=>{const e=[];if(n.includes(Rn.SCALE_DIRECTION.SCALE_OUT)||n.includes(Rn.SCALE_DIRECTION.SCALE_IN)){const t=[];n.includes(Rn.SCALE_DIRECTION.SCALE_OUT)&&t.push(...Rn.SCALE_DIRECTION_MAP.SCALE_OUT),n.includes(Rn.SCALE_DIRECTION.SCALE_IN)&&t.push(...Rn.SCALE_DIRECTION_MAP.SCALE_IN),e.push(...zH(t,jH,i))}else e.push(...zH(n,UH,i));return e}),[n,i]);return ak(l),c.createElement(kH,null,c.createElement(OH,null),c.createElement(NH,null,(0,d.__)("Which Direction?","web-stories")),c.createElement(RH,{ref:l},s.map((e=>{const n=a?.includes(LH(e));return c.createElement(PH,{key:e,"aria-label":MH[e],htmlFor:e,direction:e,disabled:n},c.createElement(Tooltip,{title:n?o:"",placement:DH(e)?HH(e):FH(e)},c.createElement(AH,{direction:e,selected:t===e||e?.includes(t),disabled:n,onClick:()=>r(LH(e))})))}))))},GH=(0,p.css)(["border-radius:0;border-color:"," transparent transparent transparent;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),YH=(0,p.default)(ex).withConfig({displayName:"effectInput__StyledInput",componentId:"sc-1gnssiy-0"})(["height:","px;div{height:calc(100% + 1px);"," &:focus-within{border-radius:",";}}"],45,GH,(e=>{let{theme:t}=e;return t.borders.radius.small})),ZH=(0,p.default)(ok.DropDown).withConfig({displayName:"effectInput__StyledDropDown",componentId:"sc-1gnssiy-1"})(["button{height:46px;"," &:hover{","}&.",",&[","]{border-radius:",";}}"],GH,GH,hp.FOCUS_VISIBLE_SELECTOR,hp.FOCUS_VISIBLE_DATA_ATTRIBUTE,(e=>{let{theme:t}=e;return t.borders.radius.small})),WH=[...Object.values(Rn.DIRECTION),...Object.values(Rn.ROTATION),...Object.values(Rn.SCALE_DIRECTION)];const VH=function EffectInput(e){let{effectProps:t,effectConfig:n,field:r,onChange:a,disabledOptions:o,disabled:l=!1,tooltip:i}=e;const s=(0,u.useCallback)((e=>a(e,!0)),[a]),p=(0,u.useMemo)((()=>l?WH:o),[o,l]),m=n[r]??t[r].defaultValue,f=t[r].type===Rn.FIELD_TYPES.FLOAT;switch(t[r].type){case Rn.FIELD_TYPES.DROPDOWN:return c.createElement(ZH,{options:(t[r].values||[]).map((e=>{let{name:t,...n}=e;return{...n,label:t,disabled:l||o.includes(n.value)}})),placeholder:(0,d.__)("Select a value","web-stories"),ariaLabel:(0,d.__)("Select effect value","web-stories"),isKeepMenuOpenOnSelection:!1,selectedValue:m,onMenuItemClick:e=>a(e.target.value,!0),disabled:l});case Rn.FIELD_TYPES.DIRECTION_PICKER:return c.createElement(DirectionRadioInput,{value:m,directions:t[r].values,onChange:s,disabled:p,tooltip:i});default:return c.createElement(YH,{"aria-label":t[r].label,suffix:t[r].label,unit:t[r].unit,value:m,min:0,onChange:e=>a(f?parseFloat(e.target.value):parseInt(e.target.value),!0),isFloat:f,containerStyleOverride:rp,disabled:l})}};function $H(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(!e.zoomDirection||!e.panDir)&&(e.zoomDirection?e.zoomDirection:e.scaleDirection?e.scaleDirection:e.flyInDir?e.flyInDir:e.rotateInDir?e.rotateInDir:e.whooshInDir?e.whooshInDir:!!e.panDir&&e.panDir)}const qH=p.default.div.withConfig({displayName:"effectPanel__AnimationGrid",componentId:"sc-s89nzp-0"})(["display:grid;grid-template-columns:auto auto;"]),KH=p.default.div.withConfig({displayName:"effectPanel__AnimationGridField",componentId:"sc-s89nzp-1"})((e=>{let{isRotationComponent:t,isHalfWidthField:n}=e;return[{gridColumn:"1/3"},t&&{gridRow:"1/3",gridColumn:"auto"},n&&{gridColumn:"auto"}]}));const XH=function EffectPanel(e){let{animation:{id:t,type:n,...r},onChange:a,disabledTypeOptionsMap:o,disabled:l=!1}=e;const{props:i}=(0,Rn.getAnimationEffectProps)(n),s=(0,u.useCallback)(((e,o)=>{a({id:t,type:n,...r,...e},o)}),[t,n,r,a]),d=(0,u.useMemo)((()=>Object.keys(i).reduce(((e,t)=>i[t].type===Rn.FIELD_TYPES.DIRECTION_PICKER||i[t].type===Rn.FIELD_TYPES.ROTATION_PICKER||e),!1)),[i]),p=Object.keys(i).map(((e,t)=>c.createElement(KH,{key:e,isRotationComponent:d&&0===t,isHalfWidthField:d&&(1===t||2===t)},c.createElement(VH,{effectProps:i,effectConfig:r,field:e,onChange:(t,n)=>s({[e]:Math.max(t,0)},n),disabledOptions:o[n]?.options||[],disabled:l,tooltip:o[n]?.tooltip}))));return c.createElement(qH,null,p)},QH=p.default.div.withConfig({displayName:"effectChooserElements__BaseAnimationCell",componentId:"sc-13qk6mh-0"})(["display:none;transform-origin:50% 50%;"]),JH=(0,p.keyframes)(["0%{transform:translateY(-100%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}15%{transform:translateY(0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}26%{transform:translateY(-62%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}37%{transform:translateY(-0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}41.5%{transform:translateY(-30%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}50%,100%{transform:translateY(0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}"]),eU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__DropAnimation",componentId:"sc-13qk6mh-1"})(["animation:"," 3.2s linear infinite;"],JH),tU=(0,p.keyframes)(["0%{opacity:0;}50%,100%{opacity:1;}"]),nU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__FadeInAnimation",componentId:"sc-13qk6mh-2"})(["animation:"," 2.5s linear infinite;"],tU),rU=(0,p.keyframes)(["0%{transform:translateX(-100%);}50%,100%{transform:translateX(0%);}"]),aU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__FlyInLeftAnimation",componentId:"sc-13qk6mh-3"})(["animation:"," 2s linear infinite;"],rU),oU=(0,p.keyframes)(["0%{transform:translateX(100%);}50%,100%{transform:translateX(0%);}"]),lU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__FlyInRightAnimation",componentId:"sc-13qk6mh-4"})(["animation:"," 2s linear infinite;"],oU),iU=(0,p.keyframes)(["0%{transform:translateY(-100%);}50%,100%{transform:translateY(0%);}"]),sU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__FlyInTopAnimation",componentId:"sc-13qk6mh-5"})(["animation:"," 2s linear infinite;"],iU),cU=(0,p.keyframes)(["0%{transform:translateY(100%);}50%,100%{transform:translateY(0%);}"]),dU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__FlyInBottomAnimation",componentId:"sc-13qk6mh-6"})(["animation:"," 2s linear infinite;"],cU),uU=(0,p.keyframes)(["0%{transform:scale(1);}12.5%{transform:scale(0.75);}37.5%{transform:scale(1.25);}50%,100%{transform:scale(1);}"]),pU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__PulseAnimation",componentId:"sc-13qk6mh-7"})(["animation:"," 2s cubic-bezier(0.4,0,0.2,1) infinite;"],uU),mU=(0,p.keyframes)(["0%{transform:translateX(-100%) rotate(-360deg);}50%,100%{transform:translateX(0%);}"]),fU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__RotateInLeftAnimation",componentId:"sc-13qk6mh-8"})(["animation:"," 2s linear infinite;"],mU),gU=(0,p.keyframes)(["0%{transform:translateX(100%) rotate(360deg);}50%,100%{transform:translateX(0%);}"]),hU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__RotateInRightAnimation",componentId:"sc-13qk6mh-9"})(["animation:"," 2s linear infinite;"],gU),bU=(0,p.keyframes)(["0%{transform:rotate(-540deg) scale(0.1);opacity:0;}50%,100%{transform:none;opacity:1;}"]),EU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__TwirlInAnimation",componentId:"sc-13qk6mh-10"})(["animation:"," 2s cubic-bezier(0.2,0.75,0.4,1) infinite;"],bU),yU=(0,p.keyframes)(["0%{transform:translateX(-100%);opacity:0;}50%,100%{transform:translateX(0%);opacity:1;}"]),_U=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__WhooshInLeftAnimation",componentId:"sc-13qk6mh-11"})(["animation:"," 2s cubic-bezier(0,0,0.2,1) infinite;"],yU),vU=(0,p.keyframes)(["0%{transform:translateX(100%);opacity:0;}50%,100%{transform:translateX(0%);opacity:1;}"]),wU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__WhooshInRightAnimation",componentId:"sc-13qk6mh-12"})(["animation:"," 2s cubic-bezier(0,0,0.2,1) infinite;"],vU),TU=(0,p.keyframes)(["0%{transform:translateX(-100%) scale(1.5);}50%,100%{transform:translateX(200%) scale(1.5);}"]),SU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__PanLeftAnimation",componentId:"sc-13qk6mh-13"})(["animation:"," 3s linear infinite;"],TU),CU=(0,p.keyframes)(["0%{transform:translateX(100%) scale(1.5);}50%,100%{transform:translateX(-200%) scale(1.5);}"]),IU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__PanRightAnimation",componentId:"sc-13qk6mh-14"})(["animation:"," 3s linear infinite;"],CU),xU=(0,p.keyframes)(["0%{transform:translateY(-100%) scale(1.5);}50%,100%{transform:translateY(200%) scale(1.5);}"]),AU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__PanTopAnimation",componentId:"sc-13qk6mh-15"})(["animation:"," 3s linear infinite;"],xU),kU=(0,p.keyframes)(["0%{transform:translateY(100%) scale(1.5);}50%,100%{transform:translateY(-200%) scale(1.5);}"]),OU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__PanBottomAnimation",componentId:"sc-13qk6mh-16"})(["animation:"," 3s linear infinite;"],kU),PU=(0,p.keyframes)(["0%{opacity:0;transform:scale(0);}50%,100%{opacity:1;transform:scale(1);}"]),NU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__ZoomInAnimation",componentId:"sc-13qk6mh-17"})(["animation:"," 2s linear infinite;"],PU),RU=(0,p.keyframes)(["0%{opacity:0;transform:scale(2);}50%,100%{opacity:1;transform:scale(1);}"]),MU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__ZoomOutAnimation",componentId:"sc-13qk6mh-18"})(["animation:"," 2s linear infinite;"],RU),LU=(0,p.keyframes)(["0%{opacity:0;transform:translate3d(-50%,0,0) scale(2);}50%,100%{opacity:1;transform:none;}"]),DU=(0,p.default)(QH).withConfig({displayName:"effectChooserElements__PanAndZoomAnimation",componentId:"sc-13qk6mh-19"})(["animation:"," 2s linear infinite;"],LU),BU=(e,t)=>zU.includes(e)?e:t?`${e} ${t}`.trim():e,FU="none",HU="dynamicPropertyValue",UU={HALF:"half",QUARTER:"quarter"},jU=[],zU=[Rn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value],GU={NO_ANIMATION:{value:FU,label:(0,d._x)("None","animation effect","web-stories")},[BU(Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Rn.DIRECTION.LEFT_TO_RIGHT)]:{value:BU(Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Rn.DIRECTION.LEFT_TO_RIGHT),label:(0,d._x)("Pan Left","animation effect","web-stories"),animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Left","animation effect","web-stories")),value:Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Rn.DIRECTION.LEFT_TO_RIGHT,gridSpace:UU.QUARTER,Effect:SU,size:16}},[BU(Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Rn.DIRECTION.RIGHT_TO_LEFT)]:{value:BU(Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Rn.DIRECTION.RIGHT_TO_LEFT),label:(0,d._x)("Pan Right","animation effect","web-stories"),animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Right","animation effect","web-stories")),value:Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Rn.DIRECTION.RIGHT_TO_LEFT,gridSpace:UU.QUARTER,Effect:IU,size:16}},[BU(Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Rn.DIRECTION.BOTTOM_TO_TOP)]:{value:BU(Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Rn.DIRECTION.BOTTOM_TO_TOP),label:(0,d._x)("Pan Up","animation effect","web-stories"),animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Up","animation effect","web-stories")),value:Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Rn.DIRECTION.BOTTOM_TO_TOP,gridSpace:UU.QUARTER,Effect:OU,size:16}},[BU(Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Rn.DIRECTION.TOP_TO_BOTTOM)]:{value:BU(Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Rn.DIRECTION.TOP_TO_BOTTOM),label:(0,d._x)("Pan Down","animation effect","web-stories"),animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Down","animation effect","web-stories")),value:Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Rn.DIRECTION.TOP_TO_BOTTOM,gridSpace:UU.QUARTER,Effect:AU,size:16}},[BU(Rn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Rn.SCALE_DIRECTION.SCALE_IN)]:{value:BU(Rn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Rn.SCALE_DIRECTION.SCALE_IN),label:(0,d._x)("Zoom In","animation effect","web-stories"),animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Zoom In","animation effect","web-stories")),value:Rn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,zoomDirection:Rn.SCALE_DIRECTION.SCALE_IN,gridSpace:UU.HALF,Effect:NU,size:14}},[BU(Rn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Rn.SCALE_DIRECTION.SCALE_OUT)]:{value:BU(Rn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Rn.SCALE_DIRECTION.SCALE_OUT),label:(0,d._x)("Zoom Out","animation effect","web-stories"),animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Zoom Out","animation effect","web-stories")),value:Rn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,zoomDirection:Rn.SCALE_DIRECTION.SCALE_OUT,gridSpace:UU.HALF,Effect:MU,size:20}},[Rn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:{value:Rn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value,label:Rn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.name,animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Rn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.name),value:Rn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value,zoomDirection:HU,Effect:DU,size:26}}},YU={NO_ANIMATION:{value:FU,label:(0,d._x)("None","animation effect","web-stories")},[Rn.ANIMATION_EFFECTS.DROP.value]:{value:Rn.ANIMATION_EFFECTS.DROP.value,label:Rn.ANIMATION_EFFECTS.DROP.name,animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Rn.ANIMATION_EFFECTS.DROP.name),value:Rn.ANIMATION_EFFECTS.DROP.value,Effect:eU}},[Rn.ANIMATION_EFFECTS.FADE_IN.value]:{value:Rn.ANIMATION_EFFECTS.FADE_IN.value,label:Rn.ANIMATION_EFFECTS.FADE_IN.name,animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Rn.ANIMATION_EFFECTS.FADE_IN.name),value:Rn.ANIMATION_EFFECTS.FADE_IN.value,Effect:nU}},[BU(Rn.ANIMATION_EFFECTS.FLY_IN.value,Rn.DIRECTION.LEFT_TO_RIGHT)]:{value:BU(Rn.ANIMATION_EFFECTS.FLY_IN.value,Rn.DIRECTION.LEFT_TO_RIGHT),label:Rn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Left","animation effect","web-stories")),value:Rn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Rn.DIRECTION.LEFT_TO_RIGHT,gridSpace:UU.QUARTER,Effect:aU,size:16}},[BU(Rn.ANIMATION_EFFECTS.FLY_IN.value,Rn.DIRECTION.TOP_TO_BOTTOM)]:{value:BU(Rn.ANIMATION_EFFECTS.FLY_IN.value,Rn.DIRECTION.TOP_TO_BOTTOM),label:Rn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Top","animation effect","web-stories")),value:Rn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Rn.DIRECTION.TOP_TO_BOTTOM,gridSpace:UU.QUARTER,Effect:sU,size:16}},[BU(Rn.ANIMATION_EFFECTS.FLY_IN.value,Rn.DIRECTION.BOTTOM_TO_TOP)]:{value:BU(Rn.ANIMATION_EFFECTS.FLY_IN.value,Rn.DIRECTION.BOTTOM_TO_TOP),label:Rn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Bottom","animation effect","web-stories")),value:Rn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Rn.DIRECTION.BOTTOM_TO_TOP,gridSpace:UU.QUARTER,Effect:dU,size:16}},[BU(Rn.ANIMATION_EFFECTS.FLY_IN.value,Rn.DIRECTION.RIGHT_TO_LEFT)]:{value:BU(Rn.ANIMATION_EFFECTS.FLY_IN.value,Rn.DIRECTION.RIGHT_TO_LEFT),label:Rn.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Right","animation effect","web-stories")),value:Rn.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Rn.DIRECTION.RIGHT_TO_LEFT,gridSpace:UU.QUARTER,Effect:lU,size:16}},[Rn.ANIMATION_EFFECTS.PULSE.value]:{value:Rn.ANIMATION_EFFECTS.PULSE.value,label:Rn.ANIMATION_EFFECTS.PULSE.name,animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Rn.ANIMATION_EFFECTS.PULSE.name),value:Rn.ANIMATION_EFFECTS.PULSE.value,Effect:pU}},[BU(Rn.ANIMATION_EFFECTS.ROTATE_IN.value,Rn.DIRECTION.LEFT_TO_RIGHT)]:{value:BU(Rn.ANIMATION_EFFECTS.ROTATE_IN.value,Rn.DIRECTION.LEFT_TO_RIGHT),label:(0,d._x)("Rotate","animation effect","web-stories"),animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Rotate In from Left","animation effect","web-stories")),value:Rn.ANIMATION_EFFECTS.ROTATE_IN.value,rotateInDirection:Rn.DIRECTION.LEFT_TO_RIGHT,gridSpace:UU.HALF,Effect:fU,size:18}},[BU(Rn.ANIMATION_EFFECTS.ROTATE_IN.value,Rn.DIRECTION.RIGHT_TO_LEFT)]:{value:BU(Rn.ANIMATION_EFFECTS.ROTATE_IN.value,Rn.DIRECTION.RIGHT_TO_LEFT),label:(0,d._x)("Rotate","animation effect","web-stories"),animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Rotate In from Right","animation effect","web-stories")),value:Rn.ANIMATION_EFFECTS.ROTATE_IN.value,rotateInDirection:Rn.DIRECTION.RIGHT_TO_LEFT,gridSpace:UU.HALF,Effect:hU,size:18}},[Rn.ANIMATION_EFFECTS.TWIRL_IN.value]:{value:Rn.ANIMATION_EFFECTS.TWIRL_IN.value,label:Rn.ANIMATION_EFFECTS.TWIRL_IN.name,animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Rn.ANIMATION_EFFECTS.TWIRL_IN.name),value:Rn.ANIMATION_EFFECTS.TWIRL_IN.value,Effect:EU,size:26}},[BU(Rn.ANIMATION_EFFECTS.WHOOSH_IN.value,Rn.DIRECTION.LEFT_TO_RIGHT)]:{value:BU(Rn.ANIMATION_EFFECTS.WHOOSH_IN.value,Rn.DIRECTION.LEFT_TO_RIGHT),label:Rn.ANIMATION_EFFECTS.WHOOSH_IN.name,animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Whoosh In from Left","animation effect","web-stories")),value:Rn.ANIMATION_EFFECTS.WHOOSH_IN.value,whooshInDirection:Rn.DIRECTION.LEFT_TO_RIGHT,gridSpace:UU.HALF,Effect:_U,size:20}},[BU(Rn.ANIMATION_EFFECTS.WHOOSH_IN.value,Rn.DIRECTION.RIGHT_TO_LEFT)]:{value:BU(Rn.ANIMATION_EFFECTS.WHOOSH_IN.value,Rn.DIRECTION.RIGHT_TO_LEFT),label:Rn.ANIMATION_EFFECTS.WHOOSH_IN.name,animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Whoosh In from Right","animation effect","web-stories")),value:Rn.ANIMATION_EFFECTS.WHOOSH_IN.value,whooshInDirection:Rn.DIRECTION.RIGHT_TO_LEFT,gridSpace:UU.HALF,Effect:wU,size:20}},[BU(Rn.ANIMATION_EFFECTS.ZOOM.value,Rn.SCALE_DIRECTION.SCALE_IN)]:{value:BU(Rn.ANIMATION_EFFECTS.ZOOM.value,Rn.SCALE_DIRECTION.SCALE_IN),label:(0,d._x)("Scale In","animation effect","web-stories"),animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Scale In","animation effect","web-stories")),value:Rn.ANIMATION_EFFECTS.ZOOM.value,scaleDirection:Rn.SCALE_DIRECTION.SCALE_IN,gridSpace:UU.HALF,Effect:NU,size:14}},[BU(Rn.ANIMATION_EFFECTS.ZOOM.value,Rn.SCALE_DIRECTION.SCALE_OUT)]:{value:BU(Rn.ANIMATION_EFFECTS.ZOOM.value,Rn.SCALE_DIRECTION.SCALE_OUT),label:(0,d.__)("Scale Out","web-stories"),animation:{ariaLabel:(0,We.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Scale Out","animation effect","web-stories")),value:Rn.ANIMATION_EFFECTS.ZOOM.value,scaleDirection:Rn.SCALE_DIRECTION.SCALE_OUT,gridSpace:UU.HALF,Effect:MU,size:20}}},ZU={ariaLabel:Ma().string,value:Ma().string.isRequired,Effect:Ma().any,gridSpace:Ma().oneOf(Object.values(UU)),size:Ma().number,scaleDirection:Ma().oneOf(Object.values(Rn.SCALE_DIRECTION)),panDirection:Ma().oneOf(Object.values(Rn.DIRECTION)),zoomDirection:Ma().oneOf(Object.values(Rn.SCALE_DIRECTION)),flyInDirection:Ma().oneOf(Object.values(Rn.DIRECTION)),rotateInDirection:Ma().oneOf(Object.values(Rn.DIRECTION)),whooshInDirection:Ma().oneOf(Object.values(Rn.DIRECTION))},WU={value:Ma().string.isRequired,label:Ma().string.isRequired,animation:Ma().shape(ZU)},VU=(Ma().oneOf([...Object.values(Rn.DIRECTION),...Object.values(Rn.SCALE_DIRECTION),!1]),(e,t)=>{const n=Object.entries(t).filter((e=>{let[t]=e;return-1===zU.indexOf(t)})).map((e=>{let[t,n]=e;return[t,n.options]})).reduce(((e,t)=>{let[n,r]=t;return[...e,...(r||[]).map((e=>BU(n,e)))]}),[]);return Object.keys(e).filter((e=>n.includes(e)))}),$U=e=>Object.values(e).includes(HU),qU=e=>{let{animation:t,disabledOptions:n=[]}=e;const r=t.panDirection&&!n.includes(t.panDirection)?t.panDirection:Object.values(Rn.DIRECTION).filter((e=>!n.includes(e)))?.[0]||void 0;return t.value===Rn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value?{...t,zoomDirection:n.includes(Rn.SCALE_DIRECTION.SCALE_IN)?Rn.SCALE_DIRECTION.SCALE_OUT:Rn.SCALE_DIRECTION.SCALE_IN,panDirection:r}:t},KU=e=>{let{animation:t,disabledTypeOptionsMap:n}=e;return $U(t)?qU({animation:t,disabledOptions:n[t.value]?.options}):t},XU=p.default.div.withConfig({displayName:"styles__ContentWrapper",componentId:"sc-1d71y2l-0"})(["display:inline-block;"]),QU=p.default.li.withConfig({displayName:"styles__AnimationListItem",componentId:"sc-1d71y2l-1"})(["border:none;background:",";border-radius:",";height:","px;position:relative;grid-column-start:",";overflow:hidden;font-family:'Teko',sans-serif;font-size:","px;line-height:1;color:",";text-transform:uppercase;transition:background 0.1s linear;margin:0;& > div{height:100%;display:flex;align-items:center;justify-content:center;text-align:center;}&[aria-disabled='true']{background:",";}&:hover:not([aria-disabled='true']){cursor:pointer;}&:hover:not([aria-disabled='true']),&:focus:not([aria-disabled='true']){background:",";","{display:inline-block;}","{display:none;}}"," ",";"],(e=>{let{active:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryPress:n.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),56,(e=>{let{gridSpace:t}=e;return(e=>{switch(e){case UU.HALF:return"span 2";case UU.QUARTER:return"span 1";default:return"span 4"}})(t)}),(e=>{let{size:t=28}=e;return t}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.disable}),(e=>{let{active:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryPress:n.colors.interactiveBg.secondaryHover}),QH,XU,(e=>{let{noEffect:t}=e;return t&&(0,p.css)(["height:36px;font-size:14px;text-transform:none;","{display:inline-block !important;}"],XU)}),np),JU=(0,p.css)(["display:inline-block;margin-top:0;padding:16px 4px 16px 16px;ul{display:grid;justify-content:center;gap:12px 4px;grid-template-columns:repeat(4,1fr);position:relative;}"]),ej=e=>{let{theme:t}=e;return(0,p.css)(["margin:-1px -1px 0 -1px;width:calc(100% + 2px);border-color:transparent transparent "," transparent;height:","px;&:hover{border-color:transparent transparent "," transparent;}",""],t.colors.border.defaultNormal,45,t.colors.border.defaultNormal,np)};function tj(){return tj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tj.apply(this,arguments)}const nj=(0,u.forwardRef)(((e,t)=>{let{option:n,...r}=e;return c.createElement(QU,tj({ref:t,"aria-label":n.animation?.ariaLabel||n.label,disabled:n.disabled,"aria-disabled":n.disabled,size:n.animation?.size,gridSpace:n.animation?.gridSpace,noEffect:!n.animation?.Effect},r),c.createElement(Tooltip,{title:n?.tooltip||""},c.createElement(XU,null,n.label),n.animation?.Effect&&c.createElement(n.animation.Effect,null,n.label)))})),rj=nj;nj.displayName="DropDownItem",nj.propTypes={option:Ma().shape(WU)};const aj=(0,u.forwardRef)((function EffectChooserDropdown(e,t){let{onAnimationSelected:n,onNoEffectSelected:r,isBackgroundEffects:a=!1,selectedEffectType:o,disabledTypeOptionsMap:l,direction:i,selectButtonStylesOverride:s,disabled:m=!1}=e;const{enableExperimentalAnimationEffects:f}=(0,C.useFeatures)(),g=(0,u.useMemo)((()=>BU(o,i)),[o,i]),h=(0,u.useMemo)((()=>a&&VU(GU,l)),[l,a]),b=a?Bd.PLACEMENT.BOTTOM:Bd.PLACEMENT.TOP,E=a?GU:YU,y=(0,u.useMemo)((()=>f?Object.values(E):Object.values(E).filter((e=>{let{value:t}=e;return-1===jU.indexOf(t)}))),[E,f]),_=(0,u.useMemo)((()=>y?.map((e=>{const t=a&&h.includes(e.value);return{...e,disabled:t,tooltip:t&&l[e.animation?.value]?.tooltip}}))),[y,a,h,l]),v=(0,u.useCallback)(((e,t)=>{if(e.preventDefault(),t===FU)return void(Boolean(g)&&r());const a=E[t]?.animation,o=KU({animation:a,disabledTypeOptionsMap:l});n({animation:o.value,panDir:o?.panDirection,zoomDirection:o?.zoomDirection,flyInDir:o?.flyInDirection,rotateInDir:o?.rotateInDirection,whooshInDir:o?.whooshInDirection,scaleDirection:o?.scaleDirection})}),[E,l,n,g,r]),w=g&&g!==FU?ej:np,T=(0,p.css)([""," ",""],w,void 0!==s&&s);return c.createElement(ok.DropDown,{ref:t,options:_,placeholder:(0,d._x)("None","animation effect","web-stories"),selectedValue:g,ariaLabel:(0,d.__)("Animation: Effect Chooser","web-stories"),menuStylesOverride:JU,renderItem:rj,onMenuItemClick:v,placement:b,isKeepMenuOpenOnSelection:!0,selectButtonStylesOverride:T,disabled:m})})),oj=aj,lj="animation",ij=(0,p.default)(Jx).withConfig({displayName:"animation__StyledRow",componentId:"sc-1j3eshx-0"})(["margin-bottom:-1px;"]),sj=p.default.div.withConfig({displayName:"animation__GroupWrapper",componentId:"sc-1j3eshx-1"})([""," margin-bottom:16px;"],(e=>{let{hasAnimation:t,theme:n}=e;return t&&`\n    border: 1px solid ${n.colors.border.defaultNormal};\n    border-radius: ${n.borders.radius.small};\n  `})),cj=(0,d.__)("The background image is too small to animate. Double click on the bg & scale the image before applying the animation.","web-stories");const dj=function AnimationPanel(e){let{selectedElements:t,selectedElementAnimations:n,pushUpdateForObject:r,updateAnimationState:a}=e;const o=Ya((e=>{let{state:{currentPageNumber:t}}=e;return 1===t})),l=(0,u.useRef)(!1),{highlight:i,resetHighlight:s}=nm((e=>({highlight:e[df.ANIMATION],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),p=1===t.length&&t[0].isBackground,m=(0,u.useMemo)((()=>{const e=t.map((e=>e.animation)).filter(Boolean);return n.map((t=>({...e.find((e=>e.id===t.id))||t}))).filter((e=>!e.delete))}),[t,n]),f=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,u.shallowEqual)(e,m[0])||(r(lj,e,null,t),l.current=!0)}),[r,m]),g=(0,u.useCallback)((e=>{let{animation:t,...a}=e;if(!t)return;const o=n[0]?.id||(0,pe.default)(),i=(0,Rn.getAnimationEffectDefaults)(t),s=n[0]?.type===t?{duration:n[0]?.duration,delay:n[0]?.delay}:{};r(lj,{id:o,type:t,...i,...s,...a},null,!0),l.current=!0}),[n,r]),h=document.activeElement,b=(0,u.useDebouncedCallback)((()=>{l.current&&(a({animationState:Rn.STORY_ANIMATION_STATE.PLAYING_SELECTED}),l.current=!1)}),300);(0,u.useEffect)(b,[n,a,h,b]);const E=(0,u.useCallback)((()=>{r(lj,{...m[0],delete:!0},null,!0)}),[r,m]),y=(0,u.useMemo)((()=>{if(t[0]?.isBackground){const e=["media","image","video","gif"].includes(t[0].type)&&(0,Rn.hasOffsets)({element:t[0]}),n=(0,Ks.progress)(t[0]?.scale||0,{MIN:Rn.BG_MIN_SCALE,MAX:Rn.BG_MAX_SCALE});return{[Rn.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:{tooltip:cj,options:[!e.bottom&&Rn.DIRECTION.TOP_TO_BOTTOM,!e.left&&Rn.DIRECTION.RIGHT_TO_LEFT,!e.top&&Rn.DIRECTION.BOTTOM_TO_TOP,!e.right&&Rn.DIRECTION.LEFT_TO_RIGHT].filter(Boolean)},[Rn.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:{tooltip:cj,options:[n<=.01&&Rn.SCALE_DIRECTION.SCALE_IN,n>=.99&&Rn.SCALE_DIRECTION.SCALE_OUT].filter(Boolean)},[Rn.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:{tooltip:cj,options:[!e.bottom&&Rn.DIRECTION.TOP_TO_BOTTOM,!e.left&&Rn.DIRECTION.RIGHT_TO_LEFT,!e.top&&Rn.DIRECTION.BOTTOM_TO_TOP,!e.right&&Rn.DIRECTION.LEFT_TO_RIGHT,n<=.01&&Rn.SCALE_DIRECTION.SCALE_IN,n>=.99&&Rn.SCALE_DIRECTION.SCALE_OUT].filter(Boolean)}}}return{}}),[t]),_=(v=m[0]?.type,[...Object.values(Rn.ANIMATION_EFFECTS),...Object.values(Rn.ANIMATION_PARTS),...Object.values(Rn.BACKGROUND_ANIMATION_EFFECTS)].find((e=>e.value===v))?.name||"");var v;return t.length>1?null:c.createElement(uj,{name:"animation",title:(0,d.__)("Animation","web-stories"),onAnimationEnd:()=>s(),isPersistable:!i,$_css:i?.showEffect&&uv.FLASH},c.createElement(sj,{hasAnimation:_},c.createElement(ij,null,c.createElement(oj,{ref:e=>{e&&i?.focus&&i?.showEffect&&e.focus()},onAnimationSelected:g,onNoEffectSelected:E,isBackgroundEffects:p,disabledTypeOptionsMap:y,direction:$H(m[0]),selectedEffectType:m[0]?.type,selectButtonStylesOverride:i?.focus&&uv.OUTLINE,disabled:o})),m[0]&&c.createElement(XH,{animation:m[0],onChange:f,disabledTypeOptionsMap:y,disabled:o})),o&&c.createElement(CH,{message:bu.firstPageAnimation.animationPanel}))};var uj=(0,p.default)(iO).withConfig({displayName:"animation___StyledSimplePanel",componentId:"sc-1j3eshx-2"})(["",""],(e=>e.$_css));function pj(){return pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pj.apply(this,arguments)}const mj=p.default.div.withConfig({displayName:"borderWidth__BorderInputsFlexContainer",componentId:"sc-tay5fw-0"})(["display:flex;gap:7px;margin-bottom:16px;"]),fj=(0,p.default)(LockToggle).withConfig({displayName:"borderWidth__StyledLockToggle",componentId:"sc-tay5fw-1"})(["",";"],np),gj=p.default.div.withConfig({displayName:"borderWidth__ToggleWrapper",componentId:"sc-tay5fw-2"})(["padding-top:2px;"," align-self:stretch;"],(e=>{let{locked:t}=e;return t&&"\n    padding-left: 8px;\n  "})),hj=(0,p.default)(kg).withConfig({displayName:"borderWidth__BorderTop",componentId:"sc-tay5fw-3"})(["transform:rotate(90deg);"]),bj=(0,p.default)(kg).withConfig({displayName:"borderWidth__BorderBottom",componentId:"sc-tay5fw-4"})(["transform:rotate(-90deg);"]),Ej=(0,p.default)(kg).withConfig({displayName:"borderWidth__BorderRight",componentId:"sc-tay5fw-5"})(["transform:scaleX(-1);"]);const yj=function WidthControls(e){let{selectedElements:t,pushUpdateForObject:n}=e;const r=YN(t,"border",cR),a=t.every(Un.canSupportMultiBorder),o=!0===r.lockedWidth||!a,l=(0,u.useCallback)((e=>(t,r)=>{n("border",o?{left:r,top:r,right:r,bottom:r}:{[e]:r},cR,!0)}),[n,o]),i=(0,u.useCallback)((e=>{n("border",e,cR,!0)}),[n]),s=o?(0,d.__)("Border","web-stories"):(0,d.__)("Left border","web-stories"),p=(0,u.useCallback)((e=>({isIndeterminate:ve===e,placeholder:ve===e?we:null})),[]);return c.createElement(mj,null,c.createElement(zR,{locked:o},c.createElement(UR,pj({value:r.left,onChange:l("left"),"aria-label":s,suffix:!o&&c.createElement(kg,null)},p(r.left))),!o&&c.createElement(c.Fragment,null,c.createElement(UR,pj({value:r.top,onChange:l("top"),"aria-label":(0,d.__)("Top border","web-stories"),labelText:(0,d.__)("Top","web-stories"),suffix:c.createElement(hj,null)},p(r.top))),c.createElement(UR,pj({value:r.right,onChange:l("right"),"aria-label":(0,d.__)("Right border","web-stories"),labelText:(0,d.__)("Right","web-stories"),suffix:c.createElement(Ej,null)},p(r.right))),c.createElement(UR,pj({value:r.bottom,onChange:l("bottom"),"aria-label":(0,d.__)("Bottom border","web-stories"),labelText:(0,d.__)("Bottom","web-stories"),suffix:c.createElement(bj,null)},p(r.bottom))))),a&&c.createElement(gj,{locked:o},c.createElement(Tooltip,{title:(0,d.__)("Toggle consistent border","web-stories")},c.createElement(fj,{isLocked:o,onClick:()=>{let e={lockedWidth:!o};o||(e={...e,top:r.left,right:r.left,bottom:r.left}),i(e)},"aria-label":(0,d.__)("Toggle consistent border","web-stories")}))))};const _j=function BorderStylePanel(e){const{selectedElements:t,pushUpdate:n}=e,r=YN(t,"border",cR),{color:a,left:o,top:l,right:i,bottom:s}=r,p=t.every((e=>(0,Un.canMaskHaveBorder)(e))),m=(0,u.useCallback)(((e,t)=>n({border:{...r,[t]:e}},!0)),[r,n]);if(!p)return null;const f=t.every(Un.canSupportMultiBorder),g=[o,l,i,s].some((e=>e>0));return c.createElement(iO,{name:"borderStyle",title:(0,d.__)("Border","web-stories")},c.createElement(yj,e),g&&c.createElement(Jx,null,c.createElement(bx,{value:a,onChange:e=>{m(e,"color")},label:(0,d.__)("Border color","web-stories"),hasEyedropper:!0,allowsOpacity:f})))},vj=(0,p.default)(m.Button).withConfig({displayName:"captions__StyledButton",componentId:"sc-17zds0n-0"})(["",";"],(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),wj=(0,p.default)(vj).withConfig({displayName:"captions__UploadButton",componentId:"sc-17zds0n-1"})(["padding:12px 8px;"]);var Tj=(0,p.default)(wj).withConfig({displayName:"captions___StyledUploadButton",componentId:"sc-17zds0n-2"})(["",""],(e=>e.$_css));const Sj={MAX:1e3};const Cj=function CaptionsPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=jN(t,"tracks",[]),a=r===ve,o=(0,C.useFeature)("captionHotlinking"),{capabilities:{hasUploadMediaAction:l}}=U();wA((e=>{let{resource:t}=e;return{resource:{...t,alt:t.alt?.slice(0,Sj.MAX)}}}),[]);const i=(0,u.useCallback)((e=>{let t=[];if(e){const n=r.findIndex((t=>{let{id:n}=t;return n===e}));t=[...r.slice(0,n),...r.slice(n+1)]}n({tracks:t},!0)}),[r,n]),s=(0,u.useCallback)((e=>{let{src:t="",id:r,needsProxy:a=!1}=e;const o={track:t,trackId:r,id:(0,pe.default)(),kind:"captions",srclang:"",label:"",needsProxy:a};n({tracks:[o]},!0)}),[n]),{highlight:p,resetHighlight:m}=nm((e=>({highlight:e[df.CAPTIONS],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),g=(0,u.useCallback)((e=>c.createElement(Tj,{onAnimationEnd:()=>m(),ref:e=>{e&&p?.focus&&p?.showEffect&&e.focus()},onClick:e,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE,$_css:p?.showEffect&&uv.OUTLINE},(0,d.__)("Upload a file","web-stories"))),[m,p?.focus,p?.showEffect]);return l||o||r.length?c.createElement(Ij,{onAnimationEnd:()=>m(),name:"caption",title:(0,d.__)("Caption and Subtitles","web-stories"),isPersistable:!p,$_css2:p?.showEffect&&uv.FLASH},c.createElement(CP,{isIndeterminate:a,tracks:a?[]:r,handleChangeTrack:s,handleRemoveTrack:i,renderUploadButton:g})):null};var Ij=(0,p.default)(iO).withConfig({displayName:"captions___StyledSimplePanel",componentId:"sc-17zds0n-3"})(["",""],(e=>e.$_css2));const xj=p.default.div.withConfig({displayName:"alignment__ElementRow",componentId:"sc-812g1l-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;padding:16px;overflow:auto;overflow:overlay;"]),Aj=["distributeHorizontally","distributeVertically","alignLeft","alignCenter","alignRight","alignTop","alignMiddle","alignBottom"],kj=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"alignment__AlignmentButton",componentId:"sc-812g1l-1"})(["position:relative;:focus{z-index:1;}",";"],(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus,"#1d1f20")})),Oj=(0,p.default)(Nk).withConfig({displayName:"alignment__StyledPanel",componentId:"sc-812g1l-2"})(["background-color:",";border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.opacity.black24}),(e=>{let{theme:t}=e;return t.colors.divider.secondary}));const Pj=function ElementAlignmentPanel(e){let{selectedElements:t,pushUpdate:n}=e;const{isRTL:r}=U(),{isDistributionEnabled:a,handleAlignLeft:o,handleAlignCenter:l,handleAlignRight:i,handleAlignTop:s,handleAlignMiddle:p,handleAlignBottom:m,handleHorizontalDistribution:f,handleVerticalDistribution:g}=oM({selectedElements:t,updateElements:e=>n(e,!0)}),h=(0,u.useRef)(),[b,E]=(0,u.useState)(null),y=(0,u.useCallback)((e=>()=>{const t=Aj.findIndex((e=>e===b)),n=Aj[t+e];n&&(E(n),h.current.querySelector(`#${n}`).focus())}),[b,E]),_=r?-1:1;return(0,fr.useKeyDownEffect)(h,"left",(()=>y(_)),[y,_]),(0,fr.useKeyDownEffect)(h,"right",(()=>y(-_)),[y,_]),c.createElement(Oj,{name:"alignment",canCollapse:!1,ariaLabel:(0,d.__)("Alignment","web-stories")},c.createElement(xj,{ref:h},c.createElement(Tooltip,{title:(0,d.__)("Distribute horizontally","web-stories")},c.createElement(kj,{disabled:!a,onClick:f,"aria-label":(0,d.__)("Distribute horizontally","web-stories"),id:Aj[0],onFocus:()=>E(Aj[0])},c.createElement(Ph,null))),c.createElement(Tooltip,{title:(0,d.__)("Distribute vertically","web-stories")},c.createElement(kj,{disabled:!a,onClick:g,"aria-label":(0,d.__)("Distribute vertically","web-stories"),id:Aj[1],onFocus:()=>E(Aj[1])},c.createElement(Lh,null))),c.createElement(Tooltip,{title:(0,d.__)("Align left","web-stories")},c.createElement(kj,{onClick:o,"aria-label":(0,d.__)("Align left","web-stories"),id:Aj[2],onFocus:()=>E(Aj[2])},c.createElement(kf,null))),c.createElement(Tooltip,{title:(0,d.__)("Align center","web-stories")},c.createElement(kj,{onClick:l,"aria-label":(0,d.__)("Align center","web-stories"),id:Aj[3],onFocus:()=>E(Aj[3])},c.createElement(Cf,null))),c.createElement(Tooltip,{title:(0,d.__)("Align right","web-stories")},c.createElement(kj,{onClick:i,"aria-label":(0,d.__)("Align right","web-stories"),id:Aj[4],onFocus:()=>E(Aj[4])},c.createElement(Bf,null))),c.createElement(Tooltip,{title:(0,d.__)("Align top","web-stories")},c.createElement(kj,{onClick:s,"aria-label":(0,d.__)("Align top","web-stories"),id:Aj[5],onFocus:()=>E(Aj[5])},c.createElement(Jf,null))),c.createElement(Tooltip,{title:(0,d.__)("Align vertical center","web-stories")},c.createElement(kj,{onClick:p,"aria-label":(0,d.__)("Align vertical center","web-stories"),id:Aj[6],onFocus:()=>E(Aj[6])},c.createElement(Rf,null))),c.createElement(Tooltip,{title:(0,d.__)("Align bottom","web-stories")},c.createElement(kj,{onClick:m,"aria-label":(0,d.__)("Align bottom","web-stories"),id:Aj[7],onFocus:()=>E(Aj[7])},c.createElement(vf,null)))))};const Nj=function(e,t,n){switch(n){case On.OverlayType.NONE:return null;case On.OverlayType.SOLID:return function(e,t){switch(t){case On.OverlayType.NONE:return{color:{r:0,g:0,b:0,a:.5}};case On.OverlayType.LINEAR:case On.OverlayType.RADIAL:{const{stops:t}=e,n=t.slice().sort(((e,t)=>(t.color.a??1)-(e.color.a??1))),{color:{r,g:a,b:o}}=n[0];return{color:{r,g:a,b:o,a:.5}}}default:return e}}(e,t);case On.OverlayType.LINEAR:return function(e,t){switch(t){case On.OverlayType.NONE:return{type:"linear",rotation:0,stops:[{color:{r:0,g:0,b:0,a:0},position:0},{color:{r:0,g:0,b:0,a:1},position:1}],alpha:.7};case On.OverlayType.SOLID:{const{color:{r:t,g:n,b:r,a}}=e;return{type:"linear",rotation:0,stops:[{color:{r:t,g:n,b:r,a:0},position:.4},{color:{r:t,g:n,b:r,a:1},position:1}],alpha:a}}case On.OverlayType.RADIAL:{const{stops:t,alpha:n}=e;return{type:"linear",rotation:0,stops:t,alpha:n}}default:return e}}(e,t);case On.OverlayType.RADIAL:return function(e,t){switch(t){case On.OverlayType.NONE:return{type:"radial",size:{w:.67,h:.67},stops:[{color:{r:0,g:0,b:0,a:0},position:0},{color:{r:0,g:0,b:0,a:1},position:1}],alpha:.7};case On.OverlayType.SOLID:{const{color:{r:t,g:n,b:r,a}}=e;return{type:"radial",size:{w:.67,h:.67},stops:[{color:{r:t,g:n,b:r,a:0},position:0},{color:{r:t,g:n,b:r,a:1},position:1}],alpha:a}}case On.OverlayType.LINEAR:{const{stops:t,alpha:n}=e;return{type:"radial",size:{w:.67,h:.67},stops:t,alpha:n}}default:return e}}(e,t);default:return e}},Rj={[On.OverlayType.NONE]:{label:(0,d._x)("None","overlay","web-stories")},[On.OverlayType.SOLID]:{label:(0,d.__)("Tint","web-stories")},[On.OverlayType.LINEAR]:{label:(0,d.__)("Linear","web-stories")},[On.OverlayType.RADIAL]:{label:(0,d.__)("Vignette","web-stories")}};const Mj=function FilterPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=GN(t,"overlay"),a=r===ve,o=r?r.type||On.OverlayType.SOLID:On.OverlayType.NONE,{getProxiedUrl:l}=Zo(),{isDefaultBackground:i}=t[0],s=Ya((e=>!i||e.state.currentPage?.backgroundColor)),p=(0,u.useCallback)((e=>n({overlay:e},!0)),[n]),m=o!==On.OverlayType.RADIAL&&o!==On.OverlayType.LINEAR,{LayerIcon:f}=(0,On.getDefinitionForType)(t[0].type);return c.createElement(iO,{name:"filter",title:(0,d.__)("Filters","web-stories")},!a&&c.createElement(Jx,null,Object.keys(Rj).map((e=>{const{label:n}=Rj[e];return c.createElement(Cx,{key:e,element:t[0],label:n,isToggled:o===e,onClick:()=>p(Nj(r,o,e)),filter:Nj(r,On.OverlayType.NONE,e),"aria-label":(0,We.default)(
/* translators: %s: Filter type */
(0,d.__)("Filter: %s","web-stories"),n)},c.createElement(f,{element:t[0],getProxiedUrl:l,currentPageBackgroundColor:s}))}))),o!==On.OverlayType.NONE&&c.createElement(Jx,null,c.createElement(bx,{label:(0,d.__)("Color","web-stories"),value:r,onChange:p,allowsGradient:!0,hasEyedropper:m})))},Lj=(0,p.default)($e.Text).withConfig({displayName:"imageAccessibility__StyledText",componentId:"sc-147toy8-0"})(["color:",";margin-bottom:10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Dj={alt:null},Bj={MAX:1e3};const Fj=function ImageAccessibilityPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=YN(t,"resource",Dj),a=jN(t,"alt",r.alt),{highlight:o,resetHighlight:l,cancelHighlight:i}=nm((e=>({highlight:e[df.ASSISTIVE_TEXT],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(Hj,{onAnimationEnd:()=>l(),name:"imageAccessibility",title:(0,d.__)("Accessibility","web-stories"),isPersistable:!o,$_css:o&&uv.FLASH},c.createElement(Lj,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add a brief description of the image.","web-stories")),c.createElement(Jx,null,c.createElement(yA,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",i,{once:!0}),e.focus())},placeholder:a===ve?we:"",value:a||"",onChange:e=>n({alt:e?.target?.value?.trim()||null},!0),"aria-label":(0,d.__)("Assistive text","web-stories"),maxLength:Bj.MAX,rows:2,isIndeterminate:a===ve})))};var Hj=(0,p.default)(iO).withConfig({displayName:"imageAccessibility___StyledSimplePanel",componentId:"sc-147toy8-1"})(["",""],(e=>e.$_css));const Uj=e=>{const{updateElementById:t}=Ya((e=>{let{actions:t}=e;return{updateElementById:t.updateElementById,combineElements:t.combineElements}})),n=Ts(),{isMedia:r}=(0,On.getDefinitionForType)(e.type);return{hasShapeMask:r&&e?.mask?.type!==Un.MaskTypes.RECTANGLE,removeShapeMask:(0,u.useCallback)((()=>{if(!e)return;const r=Wn(e,["x","y","width","height","scale","rotationAngle"]);n("shape",{...r,mask:{type:e.mask.type}}),t({elementId:e.id,properties:{mask:{type:Un.MaskTypes.RECTANGLE}}})}),[e,n,t])}};const jj=function(e){const{id:t}=e,{isSelected:n,toggleLayer:r}=Ya((e=>{let{state:n,actions:r}=e;return{isSelected:n.selectedElementIds.includes(t),toggleLayer:r.toggleLayer}})),a=Vs((e=>{let{actions:t}=e;return t.setRenamableLayer}));return{isSelected:n,handleClick:(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),r({elementId:t,metaKey:e.metaKey,shiftKey:e.shiftKey,withLinked:!1});2===e.detail&&a({elementId:t})}),[r,t,a])}},zj=p.default.div.withConfig({displayName:"shapeMaskWrapper__MaskedIconWrapper",componentId:"sc-1vpcle0-0"})(["position:relative;clip-path:url(#",");"],(e=>{let{maskId:t}=e;return t}));const Gj=function ShapeMaskWrapper(e){let{element:t,children:n}=e;const{hasShapeMask:r}=Uj(t);return r?c.createElement(zj,{maskId:(0,Un.generateMaskId)(t,"frame")},n):n},Yj=(0,p.css)(["background-color:var(--background-color);::before{position:absolute;content:'';width:32px;height:100%;top:0;left:0;transform:translateX(-100%);background:linear-gradient( to right,var(--background-color-opaque),var(--background-color) );pointer-events:none;}"]),Zj=p.default.div.withConfig({displayName:"layer__ActionsContainer",componentId:"sc-aphr0z-0"})(["position:absolute;display:none;align-items:center;height:100%;top:0;right:0;padding-right:6px;column-gap:6px;",""],Yj),Wj=p.default.div.attrs({"data-testid":"layer-option"}).withConfig({displayName:"layer__LayerContainer",componentId:"sc-aphr0z-1"})(["position:relative;height:","px;width:100%;overflow:hidden;--background-color:",";--background-color-opaque:",";:is(:hover,:focus-within) ","{display:inline-flex;}"],IF,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.bg.secondary,0)}),Zj),Vj=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN,tabIndex:-1,role:"option"}).withConfig({displayName:"layer__LayerButton",componentId:"sc-aphr0z-2"})(["position:relative;display:grid;grid-template-columns:36px 1fr;border:0;padding:0;background:transparent;height:100%;width:100%;overflow:hidden;align-items:center;user-select:none;border-radius:0;padding-left:","px;transition:revert;"," :hover{background:",";}:hover,:hover + *{--background-color:",";--background-color-opaque:",";}:active{background:",";}:active,:active + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{isNested:t}=e;return t?30:12}),(e=>{let{isSelected:t,theme:n}=e;return t&&(0,p.css)(["background:",";&,& + *{--background-color:",";--background-color-opaque:",";--selected-hover-color:",";}"],n.colors.interactiveBg.tertiaryPress,n.colors.interactiveBg.tertiaryPress,(0,Ve.rgba)(n.colors.interactiveBg.tertiaryPress,0),n.colors.interactiveBg.tertiaryHover)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.interactiveBg.tertiaryHover,0)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.interactiveBg.tertiaryPress,0)})),$j=p.default.div.withConfig({displayName:"layer__LayerInputWrapper",componentId:"sc-aphr0z-3"})(["display:grid;grid-template-columns:23px 1fr;height:100%;width:100%;padding-left:","px;padding-right:10px;:hover{background:",";}:hover,:hover + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{isNested:t}=e;return t?30:12}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.interactiveBg.tertiaryHover,0)})),qj=(0,p.default)(tS).withConfig({displayName:"layer__LayerInput",componentId:"sc-aphr0z-4"})(["overflow:visible;div{height:100%;}"]),Kj=p.default.div.withConfig({displayName:"layer__LayerIconWrapper",componentId:"sc-aphr0z-5"})(["display:flex;align-items:center;justify-content:flex-start;color:",";:hover{background:",";}:hover,:hover + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.interactiveBg.tertiaryHover,0)})),Xj=p.default.div.withConfig({displayName:"layer__LayerDescription",componentId:"sc-aphr0z-6"})(["position:relative;width:100%;overflow:hidden;display:flex;align-items:center;margin-left:0;text-align:left;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),Qj=(0,p.default)(Xj).attrs({as:"form"}).withConfig({displayName:"layer__LayerInputForm",componentId:"sc-aphr0z-7"})(["overflow:visible;"]),Jj=(0,p.default)($e.Text).attrs({forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"layer__LayerText",componentId:"sc-aphr0z-8"})(["color:inherit;white-space:nowrap;text-overflow:' ';overflow:hidden;max-width:100%;"]),ez=p.default.div.withConfig({displayName:"layer__IconWrapper",componentId:"sc-aphr0z-9"})(["display:flex;align-items:center;justify-content:flex-start;position:absolute;right:0;width:32px;aspect-ratio:1;"," svg{position:relative;display:block;width:100%;color:",";}"],Yj,(e=>{let{theme:t}=e;return t.colors.fg.secondary})),tz=p.default.div.withConfig({displayName:"layer__LayerContentContainer",componentId:"sc-aphr0z-10"})(["margin-right:8px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]),nz=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN,tabIndex:-1}).withConfig({displayName:"layer__LayerAction",componentId:"sc-aphr0z-11"})(["position:relative;aspect-ratio:1;width:20px;padding:0;svg{position:absolute;width:32px;height:auto;top:50%;left:50%;transform:translate(-50%,-50%);}&&{transition:revert;background:var(--background-color);}:disabled{color:",";}:hover{color:var( --selected-hover-color,"," );}& + &{margin-left:4px;}*{pointer-events:none;}:focus{","}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus,"var(--background-color)")}));function rz(e){e.stopPropagation(),e.preventDefault()}const az=(0,u.memo)((function(e){let{element:t}=e;const n=(0,On.getLayerName)(t),[r,a]=(0,u.useState)(n),o=(0,C.useFeature)("layerLocking"),{LayerIcon:l,hasDuplicateMenu:i}=(0,On.getDefinitionForType)(t.type),{isSelected:s,handleClick:p}=jj(t),{isDefaultBackground:m}=t,{duplicateElementsById:f,updateElementById:g,deleteElementById:h,currentPageBackgroundColor:b,groups:E}=Ya((e=>{let{actions:t,state:n}=e;return{duplicateElementsById:t.duplicateElementsById,deleteElementById:t.deleteElementById,updateElementById:t.updateElementById,groups:n.currentPage?.groups||{},currentPageBackgroundColor:!m||n.currentPage?.backgroundColor}})),{renamableLayer:y,setRenamableLayer:_}=Vs((e=>{let{state:t,actions:n}=e;return{renamableLayer:t.renamableLayer,setRenamableLayer:n.setRenamableLayer}}));(0,u.useEffect)((()=>{a(n)}),[n]);const{hasShapeMask:v,removeShapeMask:w}=Uj(t),T=(0,d.__)("Unmask","web-stories"),{getProxiedUrl:S}=Zo(),I=(0,u.useRef)(null);Bm({node:I.current,eventData:{...Te.SELECT_ELEMENT,label:t.type}});const x=(0,u.useRef)(null);Bm({node:x.current,eventData:{...Te.DELETE_ELEMENT,label:t.type}});const A=`layer-${t.id}`,k=t.groupId,O=k?t.isLocked?(0,d.__)("Group is Locked","web-stories"):(0,d.__)("Group is Unlocked","web-stories"):t.isLocked?(0,d.__)("Unlock Layer","web-stories"):(0,d.__)("Lock Layer","web-stories"),P=t.isLocked?dE.default:gE,N=()=>{_(null);const e=r.trim();e&&g({elementId:t.id,properties:{layerName:e}})},R=(0,C.useFeature)("layerNaming"),M=y?.elementId===t.id;return E[t.groupId]?.isCollapsed?null:c.createElement(Wj,null,M&&R?c.createElement($j,{isNested:k},c.createElement(Kj,null,c.createElement(Gj,{element:t},c.createElement(l,{element:t,getProxiedUrl:S,currentPageBackgroundColor:b}))),c.createElement(Qj,{onSubmit:e=>{e.preventDefault(),N()}},c.createElement(qj,{tabIndex:-1,"aria-label":(0,d.__)("Layer Name","web-stories"),value:r,onChange:e=>{a(e.target.value)},onKeyDown:e=>{"Escape"===e.key&&(a(n),_(null))},onBlur:N,onPointerDown:e=>e.stopPropagation(),hasFocus:!0}),c.createElement("button",{hidden:!0}))):c.createElement(Vj,{ref:I,id:A,onClick:p,isSelected:s,isNested:k},c.createElement(Kj,null,c.createElement(Gj,{element:t},c.createElement(l,{element:t,getProxiedUrl:S,currentPageBackgroundColor:b}))),c.createElement(Xj,null,c.createElement(tz,null,c.createElement(Jj,null,n)),t.isBackground&&c.createElement(ez,null,c.createElement(pE,null)),t.isLocked&&o&&c.createElement(ez,{"aria-label":(0,d.__)("Locked","web-stories")},k?c.createElement(pE,null):c.createElement(dE.default,null)))),!t.isBackground&&!M&&c.createElement(Zj,null,v&&c.createElement(Tooltip,{title:T,hasTail:!0,isDelayed:!0},c.createElement(nz,{"aria-label":T,"aria-describedby":A,onClick:w},c.createElement(Y_,null))),c.createElement(Tooltip,{title:(0,d.__)("Delete Layer","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(nz,{ref:x,"aria-label":(0,d.__)("Delete","web-stories"),"aria-describedby":A,onPointerDown:rz,onClick:()=>h({elementId:t.id})},c.createElement(O_.default,null))),i&&c.createElement(Tooltip,{title:(0,d.__)("Duplicate Layer","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(nz,{"aria-label":(0,d.__)("Duplicate","web-stories"),"aria-describedby":A,onPointerDown:rz,onClick:()=>f({elementIds:[t.id]})},c.createElement(GE,null))),o&&c.createElement(Tooltip,{title:O,hasTail:!0,isDelayed:!0},c.createElement(nz,{"aria-label":(0,d.__)("Lock/Unlock","web-stories"),"aria-describedby":A,disabled:k,onPointerDown:rz,onClick:()=>g({elementId:t.id,properties:{isLocked:!t.isLocked}})},k?c.createElement(pE,null):c.createElement(P,null)))))}));const oz=function(e){const{toggleLayer:t,groupLayers:n,selectedElementIds:r}=Ya((t=>{let{state:n,actions:r}=t;return{groupLayers:n.currentPage.elements.filter((t=>t.groupId===e)),selectedElementIds:n.selectedElementIds,toggleLayer:r.toggleLayer}})),a=Vs((e=>{let{actions:t}=e;return t.setRenamableLayer}));return{isSelected:n.every((e=>r.includes(e.id))),handleClick:(0,u.useCallback)((r=>{r.preventDefault(),r.stopPropagation(),t({elementId:n[0].id,metaKey:r.metaKey,shiftKey:r.shiftKey,withLinked:!0});2===r.detail&&a({elementId:e})}),[t,n,a,e])}},lz=(0,p.css)(["background-color:var(--background-color);::before{position:absolute;content:'';width:32px;height:100%;top:0;left:0;transform:translateX(-100%);background:linear-gradient( to right,var(--background-color-opaque),var(--background-color) );pointer-events:none;}"]),iz=p.default.div.withConfig({displayName:"group__ActionsContainer",componentId:"sc-3rbihv-0"})(["position:absolute;display:none;align-items:center;height:100%;top:0;right:0;padding-right:6px;column-gap:6px;",""],lz),sz=p.default.div.attrs({"data-testid":"layer-option"}).withConfig({displayName:"group__LayerContainer",componentId:"sc-3rbihv-1"})(["position:relative;height:","px;width:100%;overflow:hidden;--background-color:",";--background-color-opaque:",";:is(:hover,:focus-within) ","{display:inline-flex;}"],IF,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.bg.secondary,0)}),iz),cz=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN,tabIndex:-1,role:"option"}).withConfig({displayName:"group__LayerButton",componentId:"sc-3rbihv-2"})(["position:relative;display:grid;grid-template-columns:36px 1fr;border:0;padding:0;background:transparent;height:100%;width:100%;overflow:hidden;align-items:center;user-select:none;border-radius:0;padding-left:","px;transition:revert;"," :hover{background:",";}:hover,:hover + *{--background-color:",";--background-color-opaque:",";}:active{background:",";}:active,:active + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{isNested:t}=e;return t?30:12}),(e=>{let{isSelected:t,theme:n}=e;return t&&(0,p.css)(["background:",";&,& + *{--background-color:",";--background-color-opaque:",";--selected-hover-color:",";}"],n.colors.interactiveBg.tertiaryPress,n.colors.interactiveBg.tertiaryPress,(0,Ve.rgba)(n.colors.interactiveBg.tertiaryPress,0),n.colors.interactiveBg.tertiaryHover)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.interactiveBg.tertiaryHover,0)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.interactiveBg.tertiaryPress,0)})),dz=p.default.div.withConfig({displayName:"group__GroupIconsWrapper",componentId:"sc-3rbihv-3"})(["display:flex;align-items:center;justify-content:flex-start;width:48px;svg{position:relative;display:block;width:100%;color:",";}transform:translateX(-12px);"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),uz=(0,p.default)(ah.default).withConfig({displayName:"group__ChevronDown",componentId:"sc-3rbihv-4"})(["min-width:32px;min-height:32px;"]),pz=(0,p.default)(ah.default).withConfig({displayName:"group__ChevronRight",componentId:"sc-3rbihv-5"})(["min-width:32px;min-height:32px;transform:rotate(-90deg);"]),mz=p.default.div.withConfig({displayName:"group__LayerDescription",componentId:"sc-3rbihv-6"})(["position:relative;max-width:100%;overflow:hidden;display:flex;align-items:center;margin-left:12px;text-align:left;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),fz=(0,p.default)($e.Text).attrs({forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"group__LayerText",componentId:"sc-3rbihv-7"})(["color:inherit;white-space:nowrap;text-overflow:' ';overflow:hidden;max-width:100%;"]),gz=p.default.div.withConfig({displayName:"group__IconWrapper",componentId:"sc-3rbihv-8"})(["display:flex;align-items:center;justify-content:flex-start;position:absolute;right:0;width:32px;aspect-ratio:1;"," svg{position:relative;display:block;width:100%;color:",";}"],lz,(e=>{let{theme:t}=e;return t.colors.fg.secondary})),hz=p.default.div.withConfig({displayName:"group__LayerContentContainer",componentId:"sc-3rbihv-9"})(["margin-right:8px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]),bz=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN,tabIndex:-1}).withConfig({displayName:"group__LayerAction",componentId:"sc-3rbihv-10"})(["position:relative;aspect-ratio:1;width:20px;padding:0;svg{position:absolute;width:32px;height:auto;top:50%;left:50%;transform:translate(-50%,-50%);}&&{transition:revert;background:var(--background-color);}:disabled{color:",";}:hover{color:var( --selected-hover-color,"," );}& + &{margin-left:4px;}*{pointer-events:none;}:focus{","}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus,"var(--background-color)")})),Ez=p.default.div.withConfig({displayName:"group__LayerInputWrapper",componentId:"sc-3rbihv-11"})(["display:grid;grid-template-columns:23px 1fr;height:100%;width:100%;padding-left:","px;padding-right:10px;:hover{background:",";}:hover,:hover + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{isNested:t}=e;return t?30:12}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.interactiveBg.tertiaryHover,0)})),yz=(0,p.default)(mz).attrs({as:"form"}).withConfig({displayName:"group__LayerInputForm",componentId:"sc-3rbihv-12"})(["overflow:visible;"]),_z=(0,p.default)(tS).withConfig({displayName:"group__LayerInput",componentId:"sc-3rbihv-13"})(["overflow:visible;div{height:100%;}"]);function vz(e){e.stopPropagation(),e.preventDefault()}const wz=(0,u.memo)((function Group(e){let{groupId:t}=e;const n=(0,C.useFeature)("layerLocking"),{groups:r,updateGroupById:a,deleteGroupAndElementsById:o,updateElementsById:l,duplicateGroupById:i,groupLayers:s}=Ya((e=>{let{actions:n,state:r}=e;return{groups:r.currentPage.groups,updateGroupById:n.updateGroupById,deleteGroupAndElementsById:n.deleteGroupAndElementsById,updateElementsById:n.updateElementsById,duplicateGroupById:n.duplicateGroupById,groupLayers:r.currentPage.elements.filter((e=>e.groupId===t))}})),p=r[t],m=(0,u.useRef)(null),f=(0,u.useRef)(null),g=`group-${t}`,h=p.isLocked?(0,d.__)("Unlock Group","web-stories"):(0,d.__)("Lock Group","web-stories"),b=p.isLocked?dE.default:gE,E=p.name,[y,_]=(0,u.useState)(E),{isSelected:v,handleClick:w}=oz(t),T=(0,C.useFeature)("layerNaming"),{renamableLayer:S,setRenamableLayer:I}=Vs((e=>{let{state:t,actions:n}=e;return{renamableLayer:t.renamableLayer,setRenamableLayer:n.setRenamableLayer}})),x=S?.elementId===t,A=()=>{I(null);const e=y.trim();e?a({groupId:t,properties:{name:e}}):_(E)},k=()=>{a({groupId:t,properties:{isCollapsed:!p.isCollapsed}})},O=p.isCollapsed?c.createElement(pz,{onClick:k}):c.createElement(uz,{onClick:k});return c.createElement(sz,null,x&&T?c.createElement(Ez,null,c.createElement(dz,null,O,c.createElement(ib,null)),c.createElement(yz,{onSubmit:e=>{e.preventDefault(),A()}},c.createElement(_z,{tabIndex:-1,"aria-label":(0,d.__)("Layer Name","web-stories"),value:y,onChange:e=>{_(e.target.value)},onKeyDown:e=>{"Escape"===e.key&&(_(E),I(null))},onBlur:A,onPointerDown:e=>e.stopPropagation(),hasFocus:!0}),c.createElement("button",{hidden:!0}))):c.createElement(cz,{ref:m,id:g,onClick:w,isSelected:v},c.createElement(dz,null,O,c.createElement(ib,null)),c.createElement(mz,null,c.createElement(hz,null,c.createElement(fz,null,p.name)),p.isLocked&&n&&c.createElement(gz,{"aria-label":(0,d.__)("Locked","web-stories")},c.createElement(dE.default,null)))),!x&&c.createElement(iz,null,c.createElement(Tooltip,{title:(0,d.__)("Delete Group","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(bz,{ref:f,"aria-label":(0,d.__)("Delete","web-stories"),"aria-describedby":g,onPointerDown:vz,onClick:()=>o({groupId:t})},c.createElement(O_.default,null))),c.createElement(Tooltip,{title:(0,d.__)("Duplicate Group","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(bz,{"aria-label":(0,d.__)("Duplicate","web-stories"),"aria-describedby":g,onPointerDown:vz,onClick:()=>{const e=(0,pe.default)(),n=ys(r,p.name);i({oldGroupId:t,groupId:e,name:n,isLocked:p.isLocked,isCollapsed:p.isCollapsed})}},c.createElement(GE,null))),n&&c.createElement(Tooltip,{title:h,hasTail:!0,isDelayed:!0},c.createElement(bz,{"aria-label":(0,d.__)("Lock/Unlock","web-stories"),"aria-describedby":g,onPointerDown:vz,onClick:()=>{a({groupId:t,properties:{isLocked:!p.isLocked}}),l({elementIds:s.map((e=>e.id)),properties:{isLocked:!p.isLocked}})}},c.createElement(b,null)))))})),Tz=(0,p.default)(OF).withConfig({displayName:"reorderableGroup__LayerSeparator",componentId:"sc-14urilg-0"})(["height:","px;margin:-","px 0;padding:","px 0;"],IF,17.5,17.5),Sz=(0,u.memo)((function ReorderableGroup(e){let{groupId:t,position:n,handleStartReordering:r}=e;return c.createElement(u.Fragment,{key:t},c.createElement(Tz,{groupId:null,position:n+1}),c.createElement(CF,{position:n,data:{group:t},onStartReordering:r({id:t})},c.createElement(wz,{groupId:t})))})),Cz=(0,p.default)(vF).attrs({"aria-orientation":"vertical","aria-label":(0,d.__)("Layers List","web-stories")}).withConfig({displayName:"layerList__LayerList",componentId:"sc-9dcbvm-0"})(["flex-direction:column;width:100%;height:100%;align-items:stretch;user-select:",";overflow-y:auto;padding-bottom:4px;"],(e=>{let{hasUserSelect:t}=e;return t?"none":"initial"})),Iz=(0,p.default)(OF).withConfig({displayName:"layerList__LayerSeparator",componentId:"sc-9dcbvm-1"})(["height:","px;margin:-","px 0;padding:","px 0;"],IF,17.5,17.5),xz=(0,u.memo)((function ReorderableLayer(e){let{id:t,position:n,nestedOffset:r,nestedOffsetCalcFunc:a,handleStartReordering:o}=e;const l=Ya((e=>{let{state:n}=e;return n.currentPage?.elements.find((e=>e.id===t))}));return l?c.createElement(u.Fragment,{key:t},c.createElement(Iz,{groupId:l.groupId,nestedOffset:r,nestedOffsetCalcFunc:a,position:n+1,isNested:l.groupId}),c.createElement(CF,{position:n,onStartReordering:o(l),disabled:l.isBackground},c.createElement(az,{element:l}))):null}));const Az=function LayerPanel(e){let{layers:t}=e;const{arrangeElement:n,arrangeGroup:r,setSelectedElementsById:a}=Ya((e=>{let{actions:t}=e;return{arrangeElement:t.arrangeElement,arrangeGroup:t.arrangeGroup,setSelectedElementsById:t.setSelectedElementsById}})),o=Cc((e=>e.onOpenMenu)),l=t.length,i=ws(),{renamableLayer:s}=Vs((e=>{let{state:t}=e;return{renamableLayer:t.renamableLayer}})),d=(0,u.useCallback)((e=>()=>{a({elementIds:[e.id]}),s&&i()}),[a,i,s]);if(!l)return null;const p=[],m=[];for(const e of t){if(e.groupId&&!m.includes(e.groupId)){const t={groupId:e.groupId,position:e.position,name:e.groupId};p.push({group:t}),m.push(t.groupId)}p.push({layer:e})}const f=e=>e.offsetY<IF/1.7;return c.createElement(Cz,{onContextMenu:o,onPositionChange:(e,a,o)=>{const{position:l}=e,{position:i,data:{groupId:s}}=a,c=f(o),d=t.find((e=>e.position===l)),u=t.find((e=>e.position===(i<=2?1:i+1)));let p=s;c&&u?.groupId&&(p=u.groupId),e.data?.group?a.data?.groupId||r({groupId:e.data.group,position:i}):n({elementId:d.id,position:i,groupId:p})},mode:"vertical",getItemSize:()=>IF},p.map(((e,t)=>{let{layer:n,group:r}=e;if(r)return c.createElement(Sz,{key:r.groupId,groupId:r.groupId,position:r.position,name:r.name,handleStartReordering:d});const a=t>0&&p[t-1].layer?.groupId;return c.createElement(xz,{key:n.id,id:n.id,position:n.position,nestedOffset:a,nestedOffsetCalcFunc:f,handleStartReordering:d})})))};const kz=function(){const e=Ya((e=>{let{state:t}=e;return t.currentPage?.elements?.map((e=>{let{id:t,groupId:n,layerName:r}=e;return{id:t,groupId:n,layerName:r}}))||Ue})),t=e.map(((e,t)=>{let{id:n,groupId:r,layerName:a}=e;return{id:n,groupId:r,layerName:a,position:t}}));return t.reverse(),t},Oz=p.default.div.withConfig({displayName:"layerPanel__Container",componentId:"sc-15wxdbu-0"})(["filter:drop-shadow(0px -4px 8px rgba(0,0,0,0.2));max-height:","px;background-color:",";"],(e=>{let{maxHeight:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.bg.secondary}));const Pz=(0,u.memo)((function(){const e=kz(),t=Zm((e=>{let{state:t}=e;return t.sidebarContentHeight}));return c.createElement(Oz,{maxHeight:t},c.createElement(oO,{padding:"0"},c.createElement(Az,{layers:e})))})),Nz=p.default.div.withConfig({displayName:"link__IconInfo",componentId:"sc-niusn4-0"})(["display:flex;flex-direction:column;margin-left:20px;"]),Rz=(0,p.default)($e.Text).withConfig({displayName:"link__IconText",componentId:"sc-niusn4-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Mz=p.default.span.withConfig({displayName:"link__Error",componentId:"sc-niusn4-2"})(["font-size:12px;line-height:16px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.negative}));const Lz=function LinkPanel(e){let{selectedElements:t,pushUpdateForObject:n}=e;const{clearEditing:r,setDisplayLinkGuidelines:a,displayLinkGuidelines:o}=Vs((e=>({clearEditing:e.actions.clearEditing,setDisplayLinkGuidelines:e.actions.setDisplayLinkGuidelines,displayLinkGuidelines:e.state.displayLinkGuidelines}))),{highlight:l,resetHighlight:i,cancelHighlight:s}=nm((e=>({highlight:e[df.LINK],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),{hasElementsInAttachmentArea:p}=MD(),m=(0,u.useMemo)((()=>AB({icon:null,desc:null})),[]),f=AB(YN(t,"link",m)),{url:g="",desc:h="",icon:b,rel:E=[]}=f,[y,_]=(0,u.useState)(!1),[v,w]=(0,u.useState)(!1),{actions:{getLinkMetadata:T}}=W(),{getProxiedUrl:S,checkResourceAccess:C}=Zo(),I=(0,u.useBatchingCallback)((e=>{let{newUrl:t,newTitle:r,newIcon:a,needsProxy:o}=e;return n("link",(()=>t?AB({url:t,needsProxy:o,desc:r||"",icon:a?$r(t,a):""}):null),m,!0)}),[n,m]),[x,A]=(0,u.useState)(!qr(Kr(g))),k=(0,u.useDebouncedCallback)((0,u.useCallback)((async e=>{if(e.startsWith("http://")||e.startsWith("https://")){_(!0);try{const{title:t,image:n}=T?await T(e):{},r=!!n&&await C(n);I({newUrl:e,newTitle:t,newIcon:n,needsProxy:r})}catch(e){A(!0)}finally{_(!1)}}}),[C,T,I]),1200),O=(0,u.useCallback)(((e,t)=>{if(r(),k.cancel(),e.url){if(ve===e.url)return;const t=Kr(e.url),n=qr(t);A(!n),n&&k(t)}n("link",""!==e.url?{...e}:null,m,t)}),[r,n,m,k]),P=(0,u.useCallback)((e=>{O({icon:e?.src},!0)}),[O]),N=Boolean(g?.length),R=N&&!x;(0,u.useEffect)((()=>{if(v){const e=N&&g!==ve;a(p&&!e)}}),[t,v,p,N,a,g]);const M=b?S(f,b):null,L=ve===g,D=ve===h,B=ve===E,F=(0,u.useCallback)((e=>O({rel:e},!0)),[O]);return c.createElement(Dz,{name:"link",title:(0,d.__)("Link","web-stories"),onAnimationEnd:()=>i(),isPersistable:!l,$_css:l?.showEffect&&uv.FLASH},c.createElement(rA,{ref:e=>{e&&l?.focus&&l?.showEffect&&(e.addEventListener("keydown",s,{once:!0}),e.focus())},onChange:e=>!o&&O({url:e},!e),onBlur:()=>{a(!1),w(!1)},onFocus:()=>{w(!0)},value:g||"",placeholder:L?we:(0,d.__)("Enter an address to apply a link","web-stories"),isIndeterminate:L,"aria-label":(0,d.__)("Element link","web-stories"),hasError:o}),o&&c.createElement(Jx,null,c.createElement(Mz,null,(0,d.__)("Link can not reside below the dashed line when a page attachment is present","web-stories"))),R&&c.createElement(c.Fragment,null,c.createElement(Jx,null,c.createElement(tS,{placeholder:D?we:(0,d.__)("Optional description","web-stories"),onChange:e=>{let{target:t}=e;return O({desc:t.value},!t.value)},value:h,"aria-label":(0,d.__)("Link description","web-stories"),isIndeterminate:D,disabled:y,containerStyleOverride:rp})),c.createElement(Jx,{spaceBetween:!1},c.createElement(Qx,{handleChange:P,icon:M,isLoading:y,disabled:y}),c.createElement(Nz,null,c.createElement(Rz,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Optional brand icon","web-stories")))),!B&&c.createElement(HN,{onChangeRel:F,rel:E})))};var Dz=(0,p.default)(iO).withConfig({displayName:"link___StyledSimplePanel",componentId:"sc-niusn4-3"})(["",""],(e=>e.$_css));const Bz=p.default.label.withConfig({displayName:"shared__Label",componentId:"sc-zfap6q-0"})(["margin-left:12px;"]),Fz=(0,p.default)(gI.Checkbox).withConfig({displayName:"shared__StyledCheckbox",componentId:"sc-zfap6q-1"})(["",""],(e=>{let{theme:t}=e;return`\n    input[type='checkbox']&.${hp.FOCUS_VISIBLE_SELECTOR} ~ div, input[type='checkbox']:focus ~ div {\n      box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;\n    }\n  `})),Hz=(0,p.default)(Jx).withConfig({displayName:"shared__StyledRow",componentId:"sc-zfap6q-2"})(["justify-content:flex-start;"]),Uz=p.default.div.withConfig({displayName:"shared__Space",componentId:"sc-zfap6q-3"})(["width:20px;"]);function CallToActionText(e){let{value:t,defaultValue:n,onChange:r}=e;const[a,o]=(0,u.useState)(t||n),l=(0,u.useDebouncedCallback)(r,300),i=(0,u.useCallback)((e=>{let{target:t}=e;t.value?(l.cancel(),r({ctaText:a||void 0})):(r({ctaText:void 0}),o(n))}),[a,l,n,r]),s=(0,u.useCallback)((e=>{let{target:t}=e;const{value:n}=t;o(n),l({ctaText:n})}),[l]),p=t===n;return c.createElement(Jx,null,c.createElement(tS,{onChange:s,onBlur:i,value:a,"aria-label":(0,d.__)("Call to Action text","web-stories"),suffix:p?(0,d.__)("Default","web-stories"):null}))}function Theme(e){let{theme:t,onChange:n}=e;const r=`cb-${(0,pe.default)()}`,a=(0,u.useCallback)((e=>{n({theme:e.target.checked?De:Be})}),[n]);return c.createElement(Hz,null,c.createElement(Fz,{id:r,checked:t===De,onChange:a}),c.createElement(Bz,{htmlFor:r},c.createElement($e.Text,{as:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Use dark theme","web-stories"))))}function jz(e){let{icon:t,onChange:n,isFetching:r,needsProxy:a}=e;const{getProxiedUrl:o}=Zo(),l=(0,u.useCallback)((e=>{n({icon:e?.src},!0)}),[n]),i=t?o({needsProxy:a},t):null;return c.createElement(Hz,null,c.createElement(Qx,{handleChange:l,icon:i,isLoading:r,disabled:r}),c.createElement(Uz,null),c.createElement($e.Text,{as:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Link icon","web-stories")))}function LinkUrl(e){let{value:t,onChange:n,setIsInvalidUrl:r,setIsFetching:a,onFocus:o,hint:l,hasError:i}=e;const{actions:{getLinkMetadata:s}}=W(),[p,m]=(0,u.useState)(t),f=(0,u.useDebouncedCallback)(n,300),{checkResourceAccess:g}=Zo(),h=(0,u.useDebouncedCallback)((0,u.useCallback)((async e=>{if(e.startsWith("http://")||e.startsWith("https://")){a(!0);try{const{image:t}=s?await s(e):{},r=t?$r(e,t):"",o=!!r&&await g(r);n({url:e,icon:r,needsProxy:o})}catch(t){n({url:e,icon:"",needsProxy:!1}),r(!0)}finally{a(!1)}}}),[g,s,n,a,r]),1200),b=(0,u.useCallback)((e=>{h.cancel(),m(e),r(!1);const t=Kr(e.trim());qr(t)&&h(t)}),[h,r]),E=(0,u.useCallback)((()=>{f.cancel(),n({url:p?.trim().length?Kr(p.trim()):""})}),[p,f,n]);return c.createElement(rA,{onChange:e=>b(e?.trim()),onBlur:E,onFocus:o,value:p,clear:!0,"aria-label":(0,d.__)("Type an address to add a page attachment link","web-stories"),hasError:i,hint:l})}const zz=function(e){let{pageAttachment:t,updatePageAttachment:n}=e;const{setDisplayLinkGuidelines:r}=Vs((e=>({setDisplayLinkGuidelines:e.actions.setDisplayLinkGuidelines}))),{url:a,ctaText:o,icon:l,theme:i,rel:s=[],needsProxy:p}=t,[m,f]=(0,u.useState)(!1),[g,h]=(0,u.useState)(!1),[b,E]=(0,u.useState)(a&&!qr(Kr(a).trim())),y=Boolean(a)&&!b,{hasLinksInAttachmentArea:_}=MD();(0,u.useEffect)((()=>()=>{r(!1)}),[_,r,a]);const v=(0,u.useCallback)((()=>{_&&!a?.length&&(f(!0),r(!0))}),[_,r,a?.length]);(0,u.useEffect)((()=>{m&&a?.length&&f(!1)}),[a,m]);const w=(0,u.useCallback)((e=>n({rel:e},!0)),[n]);let T;const S=m||b;return S&&(T=m?(0,d.__)("Links cannot reside below the dashed line when a page attachment is present. If you add a page attachment, your viewers will not be able to click on the link.","web-stories"):(0,d.__)("Invalid link","web-stories")),c.createElement(c.Fragment,null,c.createElement(LinkUrl,{value:a,onChange:n,isFetching:g,setIsFetching:h,setIsInvalidUrl:E,hint:T,onFocus:v,hasError:S}),y&&c.createElement(c.Fragment,null,c.createElement(CallToActionText,{value:o,defaultValue:(0,d.__)("Learn more","web-stories"),onChange:n}),c.createElement(Theme,{theme:i,onChange:n})),y&&c.createElement(c.Fragment,null,c.createElement(jz,{icon:l,isFetching:g,needsProxy:p,onChange:n}),c.createElement(HN,{onChangeRel:w,rel:s})))},Gz=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"shoppingAttachment__HelperText",componentId:"sc-fsu1pn-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const Yz=function(e){let{shoppingAttachment:t,updateShoppingAttachment:n}=e;const{ctaText:r,theme:a}=t;return c.createElement(c.Fragment,null,c.createElement(Jx,null,c.createElement(Gz,null,(0,d.__)("Since there are products on this page, you cannot add a regular page attachment, but only customize the appearance of the shopping call to action.","web-stories"))),c.createElement(CallToActionText,{value:r,defaultValue:(0,d.__)("Shop Now","web-stories"),onChange:n}),c.createElement(Theme,{theme:a,onChange:n}))};const Zz=function PageAttachmentPanel(){const{pageAttachment:e,shoppingAttachment:t,updateCurrentPageProperties:n,hasProducts:r}=Ya((e=>{let{state:t,actions:n}=e;return{updateCurrentPageProperties:n.updateCurrentPageProperties,currentPage:t.currentPage,pageAttachment:t.currentPage.pageAttachment||{},shoppingAttachment:t.currentPage.shoppingAttachment||{},hasProducts:t.currentPage.elements?.some((e=>{let{type:t,product:n}=e;return t===On.ELEMENT_TYPES.PRODUCT&&n?.productId}))}})),a=(0,u.useCallback)((e=>{n({properties:{shoppingAttachment:{...t,...e}}})}),[n,t]),o=(0,u.useCallback)((t=>{n({properties:{pageAttachment:{...e,...t}}})}),[n,e]);return c.createElement(iO,{name:"pageAttachment",title:(0,d.__)("Call to Action","web-stories"),collapsedByDefault:!1},r&&c.createElement(Yz,{shoppingAttachment:t,updateShoppingAttachment:a}),!r&&c.createElement(zz,{pageAttachment:e,updatePageAttachment:o}))},Wz={horizontal:!1,vertical:!1},Vz=(0,p.default)(Jx).withConfig({displayName:"pageBackground__Row",componentId:"sc-1rac0x7-0"})(["justify-content:flex-start;"]),$z=p.default.div.withConfig({displayName:"pageBackground__SelectedMedia",componentId:"sc-1rac0x7-1"})(["width:128px;height:36px;border-radius:4px;border:1px solid ",";display:flex;justify-content:space-between;margin-right:12px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),qz=p.default.div.withConfig({displayName:"pageBackground__MediaWrapper",componentId:"sc-1rac0x7-2"})(["height:24px;width:24px;border-radius:4px;overflow:hidden;margin:5px;img{object-fit:cover;max-height:100%;max-width:100%;}"]),Kz=(0,p.default)(m.Button).withConfig({displayName:"pageBackground__RemoveButton",componentId:"sc-1rac0x7-3"})(["margin:1px;align-self:center;"]),Xz=(0,p.default)(m.Button).attrs({size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY}).withConfig({displayName:"pageBackground__ReplaceButton",componentId:"sc-1rac0x7-4"})(["margin-right:8px;"]),Qz=(0,p.default)($e.Text).withConfig({displayName:"pageBackground__Text",componentId:"sc-1rac0x7-5"})(["align-self:center;width:55px;"]);const Jz=function PageBackgroundPanel(e){let{selectedElements:t,pushUpdate:n}=e;const{isDefaultBackground:r}=t[0],{combineElements:a,currentPage:o,clearBackgroundElement:l,updateCurrentPageProperties:i,currentPageBackgroundColor:s}=Ya((e=>{let{state:t,actions:n}=e;return{currentPage:t.currentPage,clearBackgroundElement:n.clearBackgroundElement,combineElements:n.combineElements,updateCurrentPageProperties:n.updateCurrentPageProperties,currentPageBackgroundColor:!r||t.currentPage?.backgroundColor}})),{getProxiedUrl:p}=Zo(),{capabilities:{hasUploadMediaAction:m}}=U(),g=cs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),[h,b]=(0,u.useState)(!1),E=(0,u.useCallback)((e=>{i({properties:{backgroundColor:e}})}),[i]),y=(0,u.useCallback)((()=>{n({isBackground:!1,opacity:100},!0),l()}),[n,l]),_=(0,u.useCallback)((e=>{const n=(0,On.createNewElement)(e.type,Ki(e.type,{resource:e}));a({firstElement:n,secondId:t[0].id}),(0,P.trackEvent)("replace_background_media")}),[a,t]),v=(0,u.useCallback)((e=>c.createElement(Xz,{onClick:e,"aria-label":(0,d.__)("Replace","web-stories")},c.createElement(Tm,null))),[]),{highlight:w,resetHighlight:T,cancelHighlight:S}=nm((e=>({highlight:e[df.PAGE_BACKGROUND],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));(0,u.useEffect)((()=>{Fw([o],g).then((e=>{const t=e[0]?.result,n=t?.some((e=>{let{isBackground:t}=e;return t}));b(Boolean(n))})).catch((()=>{}))}),[o,g]);const C=t[0];if(!C||!C.isBackground)return null;const I=C.isBackground&&!r,{backgroundColor:x}=o,{LayerIcon:A}=(0,On.getDefinitionForType)(C.type),k=t[0]?.flip||Wz;return c.createElement(eG,{onAnimationEnd:()=>T(),name:"pageBackground",title:(0,d.__)("Page Background","web-stories"),isPersistable:!w,collapsedByDefault:!1,$_css:w?.showEffect&&uv.FLASH},r&&c.createElement(Vz,null,c.createElement(bx,{ref:e=>{e&&w?.focus&&w?.showEffect&&(e.addEventListener("keydown",S,{once:!0}),e.focus())},allowsGradient:!0,value:x,onChange:E,label:(0,d.__)("Background color","web-stories"),allowsSavedColors:!0,allowsOpacity:!1})),I&&c.createElement(Vz,{expand:!1},c.createElement($z,null,c.createElement(qz,null,c.createElement(A,{element:C,getProxiedUrl:p,currentPageBackgroundColor:s})),c.createElement(Qz,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Media","web-stories")),c.createElement(Kz,{"aria-label":(0,d.__)("Detach background","web-stories"),onClick:y,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY},c.createElement(Ju.default,null))),m&&c.createElement(Tooltip,{title:(0,d.__)("Replace","web-stories")},c.createElement(aA,{buttonInsertText:(0,d.__)("Use as background","web-stories"),onInsert:_,renderButton:v})),c.createElement(MN,{onChange:e=>n({flip:e},!0),value:k})),h&&c.createElement(CH,{message:hu.lowContrast.backgroundPanel}))};var eG=(0,p.default)(iO).withConfig({displayName:"pageBackground___StyledSimplePanel",componentId:"sc-1rac0x7-6"})(["",""],(e=>e.$_css));const tG=function ShapeStylePanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=jN(t,"backgroundColor"),a=(0,u.useCallback)((e=>{n({backgroundColor:e},!0)}),[n]),{highlight:o,resetHighlight:l,cancelHighlight:i}=nm((e=>({highlight:e[df.STYLE],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(nG,{onAnimationEnd:()=>l(),name:"shapeStyle",title:(0,d.__)("Color","web-stories"),isPersistable:!o,"aria-labelledby":null,"aria-label":(0,d.__)("Shape style","web-stories"),$_css:o?.showEffect&&uv.FLASH},c.createElement(Jx,null,c.createElement(bx,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",i,{once:!0}),e.focus())},allowsGradient:!0,value:r,isMultiple:""===r,onChange:a,label:(0,d.__)("Background color","web-stories"),allowsSavedColors:!0})))};var nG=(0,p.default)(iO).withConfig({displayName:"shapeStyle___StyledSimplePanel",componentId:"sc-1ekkvr9-0"})(["",""],(e=>e.$_css));const rG={MIN:-360,MAX:360},aG={MIN:1,MAX:1e3},oG={MIN:1,MAX:1e3},lG={MIN:1,MAX:ee.PAGE_WIDTH-1},iG={MIN:1-Math.floor(ee.DANGER_ZONE_HEIGHT),MAX:ee.PAGE_HEIGHT+Math.floor(ee.DANGER_ZONE_HEIGHT)-1},sG={horizontal:!1,vertical:!1};function cG(e){return"number"==typeof e&&!isNaN(e)}const dG=function(e,t,n){wA(((t,n,r)=>{let{width:a,height:o}=n,{width:l,height:i}=r;const{type:s}=t,c=Boolean(a),d=Boolean(o);if(!c&&!d)return null;const{updateForResizeEvent:u}=(0,On.getDefinitionForType)(s);if(u){return u(t,[c?1:0,d?1:0],(0,Ks.clamp)(a,aG),(0,Ks.clamp)(o,oG))}if(e){const e=l/i;if(!c)return{width:(0,Ks.clamp)((0,Vr.dataPixels)(o*e),aG)};if(!d)return{height:(0,Ks.clamp)((0,Vr.dataPixels)(a/e),oG)}}return null}),[e]),wA((e=>{let{rotationAngle:t}=e;return{rotationAngle:t%360}}),[]),wA((e=>{let{rotationAngle:t,x:n,y:r,width:a,height:o}=e;const l=(0,js.calcRotatedObjectPositionAndSize)(t,n,r,a,o),i=n-l.x,s=r-l.y;return{x:(0,Ks.clamp)(n,{MIN:lG.MIN+i-l.width,MAX:lG.MAX+i}),y:(0,Ks.clamp)(r,{MIN:iG.MIN+s-l.height,MAX:iG.MAX+s})}}),[]);const r=(0,u.useCallback)(((t,n,r)=>e&&t>=r.MAX?(0,Ks.clamp)(r.MAX*n,r):(0,Ks.clamp)(t,r)),[e]);wA(((e,t)=>{let{height:n}=e,{width:a,height:o}=t;const l=o/a;return n=(0,Ks.clamp)(n,oG),cG(l)?{height:r((0,Vr.dataPixels)(n),l,oG)}:{height:(0,Ks.clamp)(n,oG)}}),[t,e]),wA(((e,t)=>{let{width:n}=e,{width:a,height:o}=t;const l=a/o;return n=(0,Ks.clamp)(n,aG),cG(l)?{width:r((0,Vr.dataPixels)(n),l,aG)}:{width:(0,Ks.clamp)(n,aG)}}),[n,e])};function uG(){return uG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uG.apply(this,arguments)}const pG=(0,p.default)(LockToggle).withConfig({displayName:"sizePosition__StyledLockToggle",componentId:"sc-7rw4xb-0"})(["",";"],np);function mG(e){return Zi.default?.[e?.sticker?.type].aspectRatio||1}const fG=(0,p.css)(["grid-template-areas:"," 'x . . . y . .' 'w . d . h . l' 'r . . . o . .' 'c c c c c c c';"],(e=>{let{isSingleMedia:t}=e;return t?"'b b b b b . .'":null})),gG=(0,p.css)(["grid-template-areas:"," 'x . . . y . .' 'w . d . h . l' 'r . . . f . .' ",";"],(e=>{let{isSingleMedia:t}=e;return t?"'b b b b b . .'":null}),(e=>{let{unlockedRadius:t}=e;return t?"\n  'o . . . . . .'\n  'c c c c c c c'\n":"'o . . . c c c'"})),hG=p.default.div.withConfig({displayName:"sizePosition__Grid",componentId:"sc-7rw4xb-1"})(["display:grid;"," grid-template-columns:1fr 4px 8px 4px 1fr 8px 32px;grid-template-rows:repeat(4,36px);row-gap:16px;align-items:center;justify-items:start;margin-bottom:16px;"],(e=>{let{canFlip:t}=e;return t?gG:fG})),bG=p.default.div.withConfig({displayName:"sizePosition__Area",componentId:"sc-7rw4xb-2"})(["grid-area:",";width:100%;"],(e=>{let{area:t}=e;return t})),EG=p.default.div.withConfig({displayName:"sizePosition__Dash",componentId:"sc-7rw4xb-3"})(["height:1px;width:100%;background:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),yG=(0,p.default)(m.Button).withConfig({displayName:"sizePosition__StyledButton",componentId:"sc-7rw4xb-4"})(["padding:10px 16px;width:100%;",";"],np);const _G=function SizePositionPanel(e){const{selectedElements:t,submittedSelectedElements:n,pushUpdate:r,pushUpdateForObject:a}=e,o=jN(t,"x"),l=jN(t,"y"),i=jN(t,"width"),s=jN(t,"height"),p=jN(t,"rotationAngle"),m=YN(t,"flip",sG),g=YN(t,"borderRadius",{locked:!0}),h=(0,u.useMemo)((()=>jN(n,"width")/jN(n,"height")),[n]),b=jN(t,"lockAspectRatio"),E=(0,u.useRef)(null);Bm({node:E.current,eventData:Te.SET_BACKGROUND_MEDIA});const y=b===ve||b,{currentPage:_,combineElements:v}=Ya((e=>({currentPage:e.state.currentPage,combineElements:e.actions.combineElements}))),w=_?.elements[0].id,T=1===t.length,{isMedia:S}=(0,On.getDefinitionForType)(t[0].type),C=t.every((e=>{let{type:t}=e;return(0,On.getDefinitionForType)(t).canFlip})),I=t.some((e=>{let{type:t}=e;return(0,On.getDefinitionForType)(t).isAspectAlwaysLocked})),x=t.some((e=>{let{type:t}=e;return"text"===t})),A=(0,u.useMemo)((()=>T?(0,js.calcRotatedObjectPositionAndSize)(p,o,l,i,s):{}),[p,o,l,i,s,T]),k=o-A.x,O=l-A.y,P=T?{minX:lG.MIN+k-A.width,minY:iG.MIN+O-A.height,maxX:lG.MAX+k,maxY:iG.MAX+O}:function(e){const t=e.map((e=>(0,js.calcRotatedObjectPositionAndSize)(e.rotationAngle,e.x,e.y,e.width,e.height)));return e.reduce(((e,n,r)=>{const a=t[r],o=n.x-a.x,l=n.y-a.y,i=lG.MIN+o-a.width,s=iG.MIN+l-a.height,c=lG.MAX+o,d=iG.MAX+l;return{minX:e.minX?Math.max(e.minX,i):i,minY:e.minY?Math.max(e.minY,s):s,maxX:e.maxX?Math.min(e.maxX,c):c,maxY:e.maxY?Math.min(e.maxY,d):d}}),{})}(t),N=(e,t)=>b===ve?{lockAspectRatio:y,height:t,width:e}:{height:t,width:e};dG(y,s,i);const R=(0,u.useCallback)((()=>{v({firstElement:t[0],secondId:w})}),[t,v,w]),M=!y&&x,L=ve===s?we:null,D=M?(0,d.__)("Auto","web-stories"):L,B=(0,u.useCallback)((e=>({isIndeterminate:ve===e,placeholder:ve===e?we:null})),[]);return c.createElement(iO,{name:"size",title:(0,d.__)("Selection","web-stories")},c.createElement(hG,{isSingleMedia:S&&T,canFlip:C,unlockedRadius:!g.locked},S&&T&&c.createElement(bG,{area:"b"},c.createElement(yG,{ref:E,onClick:R,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Set as background","web-stories"))),c.createElement(bG,{area:"x"},c.createElement(ex,uG({suffix:(0,d._x)("X","Position on X axis","web-stories"),value:o,min:P.minX,max:P.maxX,onChange:(e,t)=>r({x:t},!0),"aria-label":(0,d.__)("X position","web-stories"),canBeNegative:!0},B(o),{containerStyleOverride:rp}))),c.createElement(bG,{area:"y"},c.createElement(ex,uG({suffix:(0,d._x)("Y","Position on Y axis","web-stories"),value:l,min:P.minY,max:P.maxY,onChange:(e,t)=>r({y:t},!0),"aria-label":(0,d.__)("Y position","web-stories"),canBeNegative:!0},B(l),{containerStyleOverride:rp}))),c.createElement(bG,{area:"w"},c.createElement(ex,uG({suffix:(0,d._x)("W","The Width dimension","web-stories"),value:i,min:aG.MIN,max:aG.MAX,onChange:(e,t)=>{const n=t;let a=s;y&&(""===n?a="":cG(n/h)&&(a=(0,Vr.dataPixels)(n/h))),r((e=>{if("sticker"===e?.type){const t=mG(e);return N(n,Math.floor(n/t))}return N(n,a)}),!0)},"aria-label":(0,d.__)("Width","web-stories")},B(i),{containerStyleOverride:rp}))),c.createElement(bG,{area:"d"},c.createElement(EG,null)),c.createElement(bG,{area:"h"},c.createElement(ex,{suffix:(0,d._x)("H","The Height dimension","web-stories"),value:M?"":s,disabled:M,min:oG.MIN,max:oG.MAX,onChange:(e,t)=>{const n=t;let a=i;y&&(""===n?a="":cG(n*h)&&(a=(0,Vr.dataPixels)(n*h))),r((e=>{if("sticker"===e?.type){const t=mG(e);return N(Math.floor(n*t),n)}return N(a,n)}),!0)},"aria-label":(0,d.__)("Height","web-stories"),isIndeterminate:ve===s,placeholder:D,containerStyleOverride:rp})),c.createElement(bG,{area:"l"},c.createElement(Tooltip,{title:(0,d.__)("Lock aspect ratio","web-stories")},c.createElement(pG,{"aria-label":(0,d.__)("Lock aspect ratio","web-stories"),title:(0,d.__)("Lock aspect ratio","web-stories"),isLocked:y||I,disabled:I,onClick:()=>!I&&r({lockAspectRatio:!y},!0)}))),c.createElement(bG,{area:"r"},c.createElement(ex,uG({suffix:c.createElement(ng,null),unit:(0,d._x)("°","Degrees, 0 - 360.","web-stories"),value:p,min:rG.MIN,max:rG.MAX,onChange:(e,t)=>r({rotationAngle:t},!0),"aria-label":(0,d.__)("Rotation","web-stories"),canBeNegative:!0},B(p),{containerStyleOverride:rp}))),C&&c.createElement(bG,{area:"f"},c.createElement(MN,{onChange:e=>a("flip",e,sG,!0),value:m})),c.createElement(bG,{area:"o"},c.createElement(NM,e)),c.createElement(bG,{area:"c"},c.createElement(KR,e))))};function vG(){return vG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vG.apply(this,arguments)}const wG={MIN:.5,MAX:10},TG={MIN:0,MAX:300},SG=(0,p.default)(ex).withConfig({displayName:"style__StyledNumericInput",componentId:"sc-9ups92-0"})(["flex-grow:1;"]),CG=p.default.div.withConfig({displayName:"style__Space",componentId:"sc-9ups92-1"})(["flex:0 0 3px;"]),IG=(0,p.default)(kC).withConfig({displayName:"style__StyledToggle",componentId:"sc-9ups92-2"})(["",";"],np);function xG(e){return c.createElement(IG,vG({size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE},e))}const AG=function StylePanel(e){let{selectedElements:t,pushUpdate:n}=e;const{actions:{maybeEnqueueFontStyle:r}}=No(),a=jN(t,"textAlign"),o=jN(t,"lineHeight"),{textInfo:{isBold:l,isItalic:i,isUnderline:s,isUppercase:p,letterSpacing:m,fontWeight:f},handlers:{handleClickBold:g,handleClickItalic:h,handleClickUnderline:b,handleClickUppercase:E,handleSetLetterSpacing:y}}=OR(t,n),_=(0,u.useCallback)(((e,t)=>y((0,Ks.clamp)(t,TG))),[y]);wA((e=>{let{lineHeight:t}=e;return{lineHeight:(0,Ks.clamp)(t,wG)}}),[]);const v=(0,u.useCallback)((e=>()=>{n({textAlign:a===e?"":e},!0)}),[n,a]),w=!0===l,T=!0===i,S=!0===s,C=!0===p;return c.createElement(c.Fragment,null,c.createElement(Jx,null,c.createElement(SG,{"aria-label":(0,d.__)("Line-height","web-stories"),isFloat:!0,value:o,min:wG.MIN,max:wG.MAX,suffix:c.createElement(Sb,null),onChange:(e,t)=>n({lineHeight:t},!0),allowEmpty:!0,isIndeterminate:ve===o,placeholder:ve===o?we:null,containerStyleOverride:rp}),c.createElement(CG,null),c.createElement(SG,{"aria-label":(0,d.__)("Letter-spacing","web-stories"),value:m,min:TG.MIN,max:TG.MAX,suffix:c.createElement(xb,null),unit:"%",onChange:_,allowEmpty:!0,isIndeterminate:ve===m,placeholder:ve===m?we:null,containerStyleOverride:rp})),c.createElement(Jx,null,c.createElement(xG,{isToggled:"left"===a,onClick:v("left"),"aria-label":(0,d.__)("Align text left","web-stories")},c.createElement(Wf,null)),c.createElement(xG,{isToggled:"center"===a,onClick:v("center"),"aria-label":(0,d.__)("Align text center","web-stories")},c.createElement(Uf,null)),c.createElement(xG,{isToggled:"right"===a,onClick:v("right"),"aria-label":(0,d.__)("Align text right","web-stories")},c.createElement(qf,null)),c.createElement(xG,{isToggled:"justify"===a,onClick:v("justify"),"aria-label":(0,d.__)("Align text justified","web-stories")},c.createElement(Gf,null)),c.createElement(xG,{isToggled:w,onClick:()=>g(!w),"aria-label":(0,d.__)("Bold","web-stories")},c.createElement(Ob,null)),c.createElement(xG,{isToggled:T,onClick:async()=>{await r(t.map((e=>{let{font:t,content:n}=e;return{font:t,fontStyle:T?"normal":"italic",fontWeight:f,content:(0,Or.stripHTML)(n)}}))),h(!T)},"aria-label":(0,d.__)("Italic","web-stories")},c.createElement(Rb,null)),c.createElement(xG,{isToggled:S,onClick:()=>b(!S),"aria-label":(0,d.__)("Underline","web-stories")},c.createElement(oE,null)),c.createElement(xG,{isToggled:C,onClick:()=>E(!C),"aria-label":(0,d.__)("Uppercase","web-stories")},c.createElement(Jb,null))))};const kG=function ColorControls(e){let{selectedElements:t,pushUpdate:n,textColorRef:r}=e;const{textInfo:{color:a},handlers:{handleSetColor:o}}=OR(t,n);return c.createElement(Jx,null,c.createElement(bx,{"data-testid":"text.color",value:a,onChange:o,allowsSavedColors:!0,label:(0,d.__)("Text color","web-stories"),labelId:"text-color-label",changedStyle:"color",ref:r,hasEyedropper:!0}))};var OG=n(56226);function PG(){return PG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PG.apply(this,arguments)}const NG=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"pillGroup__Container",componentId:"sc-1wd98s2-0"})(["display:flex;flex:1;column-gap:4px;"]);const RG=function PillGroup(e){let{options:t,value:n,onSelect:r,...a}=e;return c.createElement(NG,null,t.map((e=>{let{id:t,label:o}=e;return c.createElement(OG.default,PG({key:t,isActive:t===n,onClick:()=>r(t),role:"option"},a),o)})))},MG=(0,p.default)(Jx).withConfig({displayName:"backgroundColor__FillRow",componentId:"sc-2oqmdd-0"})(["align-items:flex-start;justify-content:space-between;button{flex:1;z-index:1;}"]),LG=[{id:On.BACKGROUND_TEXT_MODE.NONE,label:(0,d.__)("None","web-stories")},{id:On.BACKGROUND_TEXT_MODE.FILL,label:(0,d.__)("Fill","web-stories")},{id:On.BACKGROUND_TEXT_MODE.HIGHLIGHT,label:(0,d.__)("Highlight","web-stories")}];const DG=function BackgroundControls(e){let{selectedElements:t,pushUpdate:n}=e;const r=GN(t,"backgroundColor"),a=jN(t,"backgroundTextMode"),o=(0,u.useRef)(),l=(0,u.useCallback)((e=>{n((t=>({backgroundTextMode:e,padding:[On.BACKGROUND_TEXT_MODE.FILL,On.BACKGROUND_TEXT_MODE.HIGHLIGHT].includes(e)?V_(t):$_(t)})),!0)}),[n]),i=(0,u.useCallback)((e=>{l(e)}),[l]);return c.createElement(c.Fragment,null,c.createElement(MG,{ref:o},c.createElement(RG,{value:a,onSelect:i,options:LG,pillStyleOverride:np})),a!==On.BACKGROUND_TEXT_MODE.NONE&&c.createElement(Jx,null,c.createElement(bx,{"data-testid":"text.backgroundColor",allowsGradient:!0,allowsSavedColors:!0,value:r,onChange:e=>n({backgroundColor:e},!0),label:(0,d.__)("Background color","web-stories"),labelId:"background-color-label",changedStyle:"background",hasEyedropper:!0})))};function BG(){return BG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BG.apply(this,arguments)}const FG={horizontal:0,vertical:0,locked:!0,hasHiddenPadding:!1},HG={MIN:0,MAX:300},UG=p.default.div.withConfig({displayName:"padding__Space",componentId:"sc-17x5rfj-0"})(["flex:0 0 8px;"]),jG=(0,p.default)(LockToggle).withConfig({displayName:"padding__LockToggle",componentId:"sc-17x5rfj-1"})([""," ",";"],(e=>{let{isLocked:t}=e;return!t&&"\n    position: absolute;\n    right: 0;\n    top: calc(100% - 8px);\n  "}),np),zG=(0,p.default)(Jx).withConfig({displayName:"padding__Row",componentId:"sc-17x5rfj-2"})(["position:relative;"]),GG=p.default.div.withConfig({displayName:"padding__IconWrapper",componentId:"sc-17x5rfj-3"})(["width:44px;margin-left:6px;color:",";"," svg{width:22px;}"],(e=>{let{theme:t}=e;return t.colors.divider.primary}),(e=>{let{reverse:t}=e;return t&&"transform: scaleY(-1);"}));const YG=function PaddingControls(e){let{selectedElements:t,pushUpdateForObject:n,pushUpdate:r}=e;const a=YN(t.map((e=>({...e,padding:$_(e)}))),"padding",FG),o=!0===a.locked,l=(0,u.useCallback)((e=>{r((t=>{const{x:n,y:r,width:a,height:o}=t,l=e(t);return function(e){let{currentPadding:t,newPadding:n,x:r,y:a,width:o,height:l}=e;const i={};return"horizontal"in n&&(i.x=r-(n.horizontal-(t.horizontal||0)),i.width=o+2*(n.horizontal-(t.horizontal||0))),"vertical"in n&&(i.y=a-(n.vertical-(t.vertical||0)),i.height=l+2*(n.vertical-(t.vertical||0))),i}({x:n,y:r,height:o,width:a,currentPadding:t.padding,newPadding:l})})),n("padding",(t=>e({padding:t})),FG,!0)}),[r,n]);wA((e=>{let{padding:{horizontal:t,vertical:n,...r}}=e;return{padding:{...r,horizontal:(0,Ks.clamp)(t,HG),vertical:(0,Ks.clamp)(n,HG)}}}),[]);const i=o?{suffix:(0,d.__)("Padding","web-stories"),"aria-label":(0,d.__)("Padding","web-stories"),onChange:(e,t)=>{l((e=>({horizontal:t+q_(e,"horizontal"),vertical:t+q_(e,"vertical")})))},stretch:!0}:{suffix:(0,d.__)("Horizontal padding","web-stories"),"aria-label":(0,d.__)("Horizontal padding","web-stories"),onChange:(e,t)=>{l((e=>({horizontal:t+q_(e,"horizontal")})))}};return c.createElement(c.Fragment,null,c.createElement(zG,null,c.createElement(ex,BG({value:a.horizontal,isIndeterminate:a.horizontal===ve,placeholder:a.horizontal===ve?we:null},i,{containerStyleOverride:rp})),o&&c.createElement(UG,null),c.createElement(jG,{isLocked:o,onClick:()=>l((e=>o?{locked:!1}:{locked:!0,horizontal:e.padding.horizontal,vertical:e.padding.horizontal+q_(e,"vertical")-q_(e,"horizontal")})),"aria-label":(0,d.__)("Toggle padding ratio lock","web-stories")}),!o&&c.createElement(GG,{reverse:!0},c.createElement(L_,null))),!o&&c.createElement(zG,null,c.createElement(ex,{isIndeterminate:a.vertical===ve,placeholder:a.vertical===ve?we:null,suffix:(0,d.__)("Vertical padding","web-stories"),value:a.vertical,onChange:(e,t)=>{l((e=>({vertical:Number(t)+q_(e,"vertical")})))},"aria-label":(0,d.__)("Vertical padding","web-stories"),containerStyleOverride:rp}),c.createElement(GG,null,c.createElement(L_,null))))},ZG=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"panelHeader__AutoStyleButton",componentId:"sc-1sprex4-0"})(["",";"],(e=>{let{theme:t}=e;return tp.focusableOutlineCSS(t.colors.border.focus,"#1d1f20")}));const WG=function PanelHeader(e){let{selectedElements:t,pushUpdate:n}=e;const{state:{isCollapsed:r}}=(0,u.useContext)(Ak),a=K_(t[0],(e=>{n(e,!0),(0,P.trackEvent)("auto_style_text")})),o=(0,d.__)("Text","web-stories");return c.createElement(tO,{ariaLabel:o,secondaryAction:r?null:c.createElement(Tooltip,{title:(0,d.__)("Adaptive text colors","web-stories")},c.createElement(ZG,{"aria-label":(0,d.__)("Adaptive text colors","web-stories"),onClick:a,disabled:t?.length>1},c.createElement(yh,null)))},o)};const VG=function(e){let{activeIndex:t,setActiveIndex:n,groupRef:r}=e;(0,fr.useKeyDownEffect)(r,{key:["up","down","left","right"]},(e=>{let{key:a}=e;if(r.current){const e=((e,t)=>{switch(e){case"ArrowUp":return-t;case"ArrowDown":return t;case"ArrowLeft":return-1;case"ArrowRight":return 1;default:return 0}})(a,2),o=r.current.querySelectorAll("button:not([disabled])"),l=o.length-1,i=(t??0)+e,s=Math.max(0,Math.min(l,i));n(s),o[s]&&o[s].focus()}}),[t,n,r])},$G=p.default.button.withConfig({displayName:"styleItem__PresetButton",componentId:"sc-157dmik-0"})(["background-color:",";border-color:transparent;position:relative;cursor:pointer;border-width:0;border-radius:4px;padding:3px;height:100%;width:100%;display:flex;justify-content:center;align-items:center;> svg{width:","px;height:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);color:",";filter:drop-shadow(0px 0px 4px rgba(0,0,0,0.4));}",""],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),32,32,16,16,(e=>{let{theme:t}=e;return t.colors.fg.primary}),np),qG=p.default.span.withConfig({displayName:"styleItem__HighLight",componentId:"sc-157dmik-1"})(["padding:0 2px;"," box-decoration-break:clone;"],(e=>{let{background:t}=e;return(0,Yr.default)(t)})),KG=p.default.div.withConfig({displayName:"styleItem__TextWrapper",componentId:"sc-157dmik-2"})(["position:relative;display:inline-block;line-height:","px;max-height:","px;overflow:hidden;border-radius:4px;padding:3px;max-width:100%;"," font-size:12px;",""],20,43,(e=>{let{styles:t}=e;return t}),(e=>{let{background:t}=e;return t?(0,Yr.default)(t):null}));const XG=function StyleItem(e){let{style:t,i:n,activeIndex:r,handleOnClick:a,isEditMode:o,activeItemOverlay:l,applyLabel:i=(0,d.__)("Apply style","web-stories")}=e;const s=Ya((e=>{let{state:t}=e;return t.selectedElements})),[p,m]=(0,u.useState)(!1),f=()=>{l&&m(!0)},g=()=>{l&&m(!1)};if(!t)return null;const h=s[0]?.content?(0,Or.stripHTML)(s[0].content):(0,d.__)("Lorem ipsum dolor sit amet","web-stories");return c.createElement($G,{tabIndex:r===n?0:-1,style:t,onClick:()=>a(t),onPointerEnter:f,onFocus:f,onPointerLeave:g,onBlur:g,"aria-label":o?(0,d.__)("Delete style","web-stories"):i},(()=>{const e=t.backgroundTextMode===On.BACKGROUND_TEXT_MODE.HIGHLIGHT,n=t.backgroundTextMode===On.BACKGROUND_TEXT_MODE.FILL;return c.createElement(KG,{styles:JC(t,!0),background:n?t.backgroundColor:null},e?c.createElement(qG,{background:t.backgroundColor},h):h)})(),o&&c.createElement(Ju.default,null),!o&&p&&l)};function QG(){return QG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QG.apply(this,arguments)}const JG=p.default.div.withConfig({displayName:"styleGroup__Group",componentId:"sc-1cojpnq-0"})(["display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:20px;grid-row-gap:16px;"]),eY=p.default.div.withConfig({displayName:"styleGroup__ButtonWrapper",componentId:"sc-1cojpnq-1"})(["height:","px;width:","px;"],64,(e=>{let{width:t}=e;return t}));const tY=function StyleGroup(e){let{styles:t,isEditMode:n=!1,handleClick:r,buttonWidth:a=128,...o}=e;const[l,i]=(0,u.useState)(0),s=(0,u.useRef)(null);return VG({activeIndex:l,setActiveIndex:i,groupRef:s,type:Fe}),c.createElement(JG,{ref:s},t.map(((e,t)=>c.createElement(eY,{key:JSON.stringify(e),width:a},c.createElement(XG,QG({style:e,i:t,activeIndex:l,handleOnClick:r,isEditMode:n},o))))))};function nY(){return nY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nY.apply(this,arguments)}const rY=p.default.div.withConfig({displayName:"header__Wrapper",componentId:"sc-10q8amw-0"})(["display:flex;justify-content:space-between;align-items:center;height:","px;padding:4px 8px 4px 8px;position:relative;border-bottom:1px solid ",";"],44,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),aY=p.default.div.withConfig({displayName:"header__Actions",componentId:"sc-10q8amw-1"})(["display:flex;margin-left:auto;"]),oY=(0,p.default)(m.Button).withConfig({displayName:"header__StyledButton",componentId:"sc-10q8amw-2"})(["margin-left:8px;",";"],np);const lY=function(e){let{children:t,handleClose:n,isEditMode:r=!1,setIsEditMode:a=(()=>{})}=e;const o=(0,u.useRef)();(0,u.useEffect)((()=>{o.current?.focus()}),[]);const l={type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:e=>{e.stopPropagation(),a(!r)},isEditMode:r};return c.createElement(rY,null,t,c.createElement(aY,null,c.createElement(oY,nY({},l,{"aria-label":r?(0,d.__)("Exit edit mode","web-stories"):(0,d.__)("Edit styles","web-stories")}),r?(0,d.__)("Done","web-stories"):c.createElement(dy.default,null)),c.createElement(oY,{"aria-label":(0,d.__)("Close","web-stories"),onClick:n,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,ref:o},c.createElement(Ju.default,null))))};const iY=function(e){let{onEmpty:t}=e;const{globalStoryStyles:n,updateStory:r}=Ya((e=>{let{state:{story:{globalStoryStyles:t}},actions:{updateStory:n}}=e;return{globalStoryStyles:t,updateStory:n}})),{textStyles:a}=n||{},o=(0,u.useCallback)((e=>{const o=a.filter((t=>t!==e));r({properties:{globalStoryStyles:{...n,textStyles:o}}}),0===o.length&&t()}),[a,r,n,t]);return o},sY="DELETE_STYLE_PRESET_DIALOG_DISMISSED",cY=p.default.label.withConfig({displayName:"confirmationDialog__Label",componentId:"sc-ezab89-0"})(["margin-left:12px;"]),dY=p.default.footer.withConfig({displayName:"confirmationDialog__CheckboxWrapper",componentId:"sc-ezab89-1"})(["display:flex;margin-top:12px;padding:14px 0 0 9px;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary}));const uY=function(e){let{onClose:t,onPrimary:n}=e;const[r,a]=(0,u.useState)(Fo.getItemByKey(Bo[sY])),o=(0,d.__)("This is a global style. Deleting this style will remove it from the Saved Styles across all stories and the style will no longer be available to any other users on the site.","web-stories"),l=`cb-${(0,pe.default)()}`;return c.createElement(y,{isOpen:!0,onClose:t,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:n,primaryText:(0,d.__)("Delete","web-stories")},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o),c.createElement(dY,null,c.createElement(gI.Checkbox,{id:l,checked:r,onChange:()=>{Fo.setItemByKey(Bo[sY],!r),a(!r)}}),c.createElement(cY,{htmlFor:l},c.createElement($e.Text,{as:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Don't ask for confirmation again.","web-stories")))))};function pY(){return pY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pY.apply(this,arguments)}const mY=p.default.div.withConfig({displayName:"styleManager__Container",componentId:"sc-4hlmhs-0"})(["border-radius:8px;background:",";width:256px;user-select:none;display:flex;flex-direction:column;align-items:stretch;overflow:hidden;&.style-manager-appear{opacity:0.01;margin-top:-10px;&.style-manager-appear-active{opacity:1;margin-top:0;transition:300ms ease-out;transition-property:opacity,margin-top;}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),fY=p.default.div.withConfig({displayName:"styleManager__Body",componentId:"sc-4hlmhs-1"})(["display:flex;margin:8px 12px 16px;"]),gY=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"styleManager__StyledText",componentId:"sc-4hlmhs-2"})(["margin:0 0 0 8px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const hY=function StyleManager(e){let{styles:t,onClose:n,applyStyle:r,...a}=e;const[o,l]=(0,u.useState)(!1),[i,s]=(0,u.useState)(!1),[p,m]=(0,u.useState)(null),f=(0,u.useRef)(null),g=(0,u.useRef)(document.activeElement),h=(0,u.useCallback)((e=>{g.current&&g.current.focus(),n(e)}),[n]);(0,fr.useKeyDownEffect)(f,"esc",h);const b=iY({onEmpty:h});return(0,u.useFocusOut)(f,(()=>{i||n()}),[i]),vS({ref:f}),c.createElement(Cv.default,{nodeRef:f,in:!0,appear:!0,classNames:"style-manager",timeout:300},c.createElement(mY,{role:"dialog","aria-label":(0,d.__)("Style presets manager","web-stories"),ref:f},c.createElement(lY,{handleClose:h,isEditMode:o,setIsEditMode:l},c.createElement(gY,null,(0,d.__)("Saved Styles","web-stories"))),c.createElement(fY,null,c.createElement(tY,pY({styles:[...t].reverse(),handleClick:e=>{if(!o)return void r(e);Fo.getItemByKey(Bo[sY])?b(e):(s(!0),m(e))},isEditMode:o,buttonWidth:106},a))),i&&c.createElement(uY,{onClose:()=>s(!1),onPrimary:()=>{b(p),m(null),s(!1)}})))},bY=p.default.div.withConfig({displayName:"components__NoStylesWrapper",componentId:"sc-1u9p583-0"})(["display:flex;justify-content:center;align-items:center;width:calc(100% + 32px);margin:0 0 -8px -16px;background-color:",";height:64px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black24})),EY=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE}).withConfig({displayName:"components__MoreButton",componentId:"sc-1u9p583-1"})(["",";margin:12px 0;padding:0 16px;justify-content:center;align-self:center;width:100%;svg{transform:rotate(-90deg);height:32px;width:32px;margin-left:-4px;}"],np);const yY=function(e){let{pushUpdate:t}=e;wA(uM,[]);const n=Ya((e=>{let{state:{selectedElements:t}}=e;return t?t?.filter((e=>{let{type:t}=e;return"text"===t})):Ue})),r=(0,u.useRef)(null),a=(0,u.useCallback)((e=>{t((t=>({...e(t),...r.current})),!0),r.current=null}),[t]),{handlers:{handleSetColor:o,handleSetLetterSpacing:l,handleClickUnderline:i,handleClickItalic:s,handleSelectFontWeight:c}}=OR(n,a),d=(0,u.useCallback)((e=>{const{color:t,fontWeight:n,isItalic:a,isUnderline:d,letterSpacing:u,...p}=e;r.current=p,o(t),l(u),c(n),i(d),s(a)}),[o,l,i,s,c]);return d},_Y=p.default.div.withConfig({displayName:"stylePresets__PresetsHeader",componentId:"sc-8grd53-0"})(["display:flex;padding:8px 0;justify-content:space-between;"]),vY=p.default.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-8grd53-1"})([""]),wY=(0,p.default)($e.Text).withConfig({displayName:"stylePresets__SubHeading",componentId:"sc-8grd53-2"})(["color:",";margin:6px 0;font-weight:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.typography.weight.bold})),TY=(0,p.default)(m.Button).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-8grd53-3"})(["margin-left:auto;"]),SY=(0,p.default)($e.Text).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-8grd53-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),CY={x:12};const IY=function PresetPanel(e){let{pushUpdate:t}=e;const n=Ya((e=>{let{state:t}=e;return t.story.globalStoryStyles.textStyles})),{refs:{sidebar:r}}=Zm(),a=(0,u.useRef)(null),[o,l]=(0,u.useState)(!1),i=n.length>0,s=yY({pushUpdate:t}),{addGlobalPreset:p}=oI({presetType:Fe}),m=e=>{s(e)};return c.createElement(c.Fragment,null,c.createElement(_Y,null,c.createElement(wY,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Recently Saved Styles","web-stories")),c.createElement(TY,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:p,"aria-label":(0,d.__)("Add style","web-stories")},c.createElement(Dy,null))),i&&c.createElement(c.Fragment,null,c.createElement(vY,null,c.createElement(tY,{styles:[...n].reverse().slice(0,2),handleClick:m})),c.createElement(EY,{ref:a,onClick:()=>l(!0),"aria-haspopup":"dialog","aria-expanded":o},(0,d.__)("More styles","web-stories"),c.createElement(fp.default,null)),c.createElement(bS.Popup,{anchor:a,dock:r,isOpen:o,placement:Bd.PLACEMENT.RIGHT_START,spacing:CY,renderContents:()=>c.createElement(hY,{styles:n,applyStyle:m,onClose:()=>l(!1)})})),!i&&c.createElement(bY,null,c.createElement(SY,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("No Styles Saved","web-stories"))))};function xY(){return xY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xY.apply(this,arguments)}const AY=p.default.section.withConfig({displayName:"textStyle__SubSection",componentId:"sc-1al6pl8-0"})(["border-top:1px solid ",";display:flex;flex-direction:column;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),kY=(0,p.default)($e.Text).withConfig({displayName:"textStyle__SubHeading",componentId:"sc-1al6pl8-1"})(["color:",";margin:14px 0;font-weight:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.typography.weight.bold}));const OY=function(e){const{dropdownHighlight:t,colorHighlight:n,resetHighlight:r,cancelHighlight:a}=nm((e=>({dropdownHighlight:e[df.FONT],colorHighlight:e[df.TEXT_COLOR],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),[o,l]=(0,u.useState)(!1),[i,s]=(0,u.useState)([]),{selectedElements:p}=e;wA(uM,[]);const{currentPage:m}=Ya((e=>{let{state:{currentPage:t}}=e;return{currentPage:t}})),f=cs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),g=p.map((e=>e.id)),h=i?.some((e=>{let{id:t}=e;return g.includes(t)}));return(0,u.useEffect)((()=>{Fw([m],f).then((e=>{const t=e[0]?.result;s(t)})).catch((()=>{}))}),[m,f]),c.createElement(PY,{name:"textStyle",onAnimationEnd:()=>r(),isPersistable:!1,$_css:(t?.showEffect||n?.showEffect)&&uv.FLASH},c.createElement(WG,e),c.createElement(oO,null,c.createElement(IM,xY({},e,{fontDropdownRef:e=>{e&&t?.focus&&t?.showEffect&&(e.focus(),l(!0))},highlightStylesOverride:o?uv.OUTLINE:[]})),c.createElement(AG,e),c.createElement(kG,xY({},e,{textColorRef:e=>{e&&n?.focus&&n?.showEffect&&(e.addEventListener("keydown",a,{once:!0}),e.focus(),l(!1))}})),h&&c.createElement(CH,{message:hu.lowContrast.textPanel}),c.createElement(AY,null,c.createElement(kY,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Text Box","web-stories")),c.createElement(DG,e),c.createElement(YG,e)),c.createElement(AY,null,c.createElement(IY,e))))};var PY=(0,p.default)(Nk).withConfig({displayName:"textStyle___StyledPanel",componentId:"sc-1al6pl8-2"})(["",""],(e=>e.$_css));const NY={alt:null,poster:null,height:0,width:0},RY={MAX:1e3},MY=(0,p.default)(qx).withConfig({displayName:"videoAccessibility__StyledMedia",componentId:"sc-1uodz5m-0"})(["height:114px;width:64px;"]),LY=p.default.div.withConfig({displayName:"videoAccessibility__InputsWrapper",componentId:"sc-1uodz5m-1"})(["align-self:flex-start;margin-left:16px;"]),DY=(0,p.default)($e.Text).withConfig({displayName:"videoAccessibility__StyledText",componentId:"sc-1uodz5m-2"})(["color:",";margin-bottom:10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const BY=function VideoAccessibilityPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=YN(t,"resource",NY),a=jN(t,"alt",r.alt),{height:o,width:l}=r,i=jN(t,"poster"),s=jN(t,"poster",r.poster),{allowedMimeTypes:{image:p},capabilities:{hasUploadMediaAction:m}}=U(),f=(0,u.useMemo)((()=>p.map((e=>Pt(e))).flat()),[p]),g=(0,u.useCallback)((e=>{e?.src!==i&&n({poster:e?.src},!0)}),[n,i]),h=(0,u.useMemo)((()=>{let e=(0,d.__)("No file types are currently supported.","web-stories");return f.length&&(e=(0,We.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories"),(0,xt.default)(f))),e}),[f]),{highlightInput:b,highlightMediaPicker:E,resetHighlight:y,cancelHighlight:_}=nm((e=>({highlightInput:e[df.ASSISTIVE_TEXT],highlightMediaPicker:e[df.VIDEO_A11Y_POSTER],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));let v=null;return o&&o!==ve&&l&&l!==ve&&(v={height:o,width:l}),c.createElement(FY,{onAnimationEnd:()=>y(),name:"videoAccessibility",title:(0,d.__)("Accessibility","web-stories"),isPersistable:!b&&!E,$_css:(b||E)&&uv.FLASH},c.createElement(Jx,null,c.createElement(MY,{ref:e=>{e&&E?.focus&&E?.showEffect&&e.focus()},value:s,cropParams:v,onChange:g,onChangeErrorText:h,title:(0,d.__)("Select as video poster","web-stories"),buttonInsertText:(0,d.__)("Set as video poster","web-stories"),alt:(0,d.__)("Preview poster image","web-stories"),type:p,ariaLabel:(0,d.__)("Video poster","web-stories"),menuOptions:["edit","reset"],imgProps:v,canUpload:m}),c.createElement(LY,null,c.createElement(DY,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add a brief description of the video.","web-stories")),c.createElement(yA,{ref:e=>{e&&b?.focus&&b?.showEffect&&(e.addEventListener("keydown",_,{once:!0}),e.focus())},placeholder:a===ve?we:"",value:a||"",onChange:e=>n({alt:e?.target?.value?.trim()||null},!0),"aria-label":(0,d.__)("Assistive text","web-stories"),maxLength:RY.MAX,rows:2,isIndeterminate:a===ve}))))};var FY=(0,p.default)(iO).withConfig({displayName:"videoAccessibility___StyledSimplePanel",componentId:"sc-1uodz5m-3"})(["",""],(e=>e.$_css));const HY=(0,p.default)(Jx).withConfig({displayName:"videoOptions__Row",componentId:"sc-csxmtu-0"})(["margin-top:2px;"]),UY=(0,p.default)(m.Button).withConfig({displayName:"videoOptions__StyledButton",componentId:"sc-csxmtu-1"})(["padding:12px 8px;"]),jY=(0,p.default)(UY).withConfig({displayName:"videoOptions__TrimButton",componentId:"sc-csxmtu-2"})(["margin-left:20px;"]),zY=p.default.div.withConfig({displayName:"videoOptions__TrimWrapper",componentId:"sc-csxmtu-3"})(["position:relative;display:flex;"]),GY=p.default.div.withConfig({displayName:"videoOptions__Spinner",componentId:"sc-csxmtu-4"})(["margin-left:4px;margin-top:4px;"]),YY=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"videoOptions__HelperText",componentId:"sc-csxmtu-5"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}));const ZY=function VideoOptionsPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=jN(t,"resource"),a=jN(t,"id"),o=jN(t,"loop"),l=1===t.length,{state:{canTrim:i,canMute:s,isTrimming:p,isMuting:m,isDisabled:g},actions:{handleMute:h,handleTrim:b}}=jM({resource:r,elementId:a,isSingleElement:l}),E=m?(0,d.__)("Removing audio…","web-stories"):(0,d.__)("Remove audio","web-stories"),y=p?(0,d.__)("Trimming…","web-stories"):(0,d.__)("Trim","web-stories"),_=(0,mk.default)();(0,u.useEffect)((()=>{m&&_(E)}),[m,E,_]),(0,u.useEffect)((()=>{p&&_(y)}),[p,y,_]);const Processing=()=>c.createElement(GY,null,c.createElement(TS.default,{size:24}));return c.createElement(iO,{name:"videoOptions",title:(0,d.__)("Video Settings","web-stories")},c.createElement(HY,{spaceBetween:!1},c.createElement(kP,{loop:o,onChange:e=>n({loop:e.target.checked},!0)}),i&&c.createElement(zY,null,c.createElement(jY,{disabled:g,variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:b},y),p&&c.createElement(Processing,null))),s&&c.createElement(c.Fragment,null,c.createElement(HY,{spaceBetween:!1},c.createElement(UY,{disabled:g,variant:f.BUTTON_VARIANTS.RECTANGLE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:h},E),m&&c.createElement(Processing,null)),c.createElement(HY,null,c.createElement(YY,null,(0,d.__)("Removing the audio from this video will upload a new muted version of it to the media library. This might take a couple of seconds.","web-stories")))))},WY=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"backgroundAudio__HelperText",componentId:"sc-qyqy4a-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const VY=function PageBackgroundAudioPanel(){const{capabilities:{hasUploadMediaAction:e}}=U(),t=(0,C.useFeature)("audioHotlinking"),{backgroundAudio:n,currentPageId:r,updateCurrentPageProperties:a}=Ya((e=>({updateCurrentPageProperties:e.actions.updateCurrentPageProperties,backgroundAudio:e.state.currentPage?.backgroundAudio,currentPageId:e.state.currentPage?.id}))),o=(0,u.useCallback)((e=>{a({properties:{backgroundAudio:e}})}),[a]);return n||e||t?c.createElement(iO,{name:"pageBackgroundAudio",title:(0,d.__)("Page Background Audio","web-stories"),collapsedByDefault:!1},c.createElement(Jx,null,c.createElement(WY,null,(0,d.__)("Select an audio file that plays while this page is in view.","web-stories"))),c.createElement(jP,{backgroundAudio:n,updateBackgroundAudio:o,showCaptions:!0,showLoopControl:!0,audioId:`page-${r}-background-audio`})):null};const $Y=function ProductPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=jN(t,"product",[])===ve,a=(0,u.useCallback)((e=>n({product:e})),[n]);return c.createElement(iO,{name:"product",title:(0,d.__)("Product","web-stories"),collapsedByDefault:!1},c.createElement(Jx,null,r&&c.createElement(tS,{onChange:Lt,disabled:!0,value:we,"aria-label":(0,d.__)("Product","web-stories")}),!r&&c.createElement(sL,{product:t[0].product,setProduct:a})))},qY=p.default.div.withConfig({displayName:"layers__Container",componentId:"sc-12gh0kb-0"})(["background-color:",";overflow:auto;z-index:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),3),KY=(0,p.default)(Xu).withConfig({displayName:"layers__StyledNavigationWrapper",componentId:"sc-12gh0kb-1"})(["width:260px;"]);const XY=function Layers(){const e=kz().length,[t,n]=(0,u.useState)(!1),r=(0,u.useRef)(),{renamableLayer:a}=Vs((e=>{let{state:t}=e;return{renamableLayer:t.renamableLayer}}));return(0,u.useEffect)((()=>{a&&n(!0)}),[a]),c.createElement(c.Fragment,null,c.createElement(mp,{isOpen:t,placement:Bd.PLACEMENT.RIGHT,ariaLabel:(0,d.__)("Layers Panel","web-stories")},c.createElement(KY,{alignRight:!0,ref:r,isOpen:t},c.createElement(qY,null,c.createElement(Pz,null)))),c.createElement(Dp,{isOpen:t,notificationCount:e,copy:(0,d.__)("Layers","web-stories"),onClick:()=>n((e=>!e)),"aria-label":(0,We.default)(
/* translators: %d: number of layers */
(0,d.__)("Layers (%d)","web-stories"),e)}))},QY=p.default.div.withConfig({displayName:"primaryMenu__Wrapper",componentId:"sc-1n6k8y9-0"})(["display:flex;align-items:flex-end;justify-content:flex-end;width:100%;height:100%;z-index:",";"],3),JY=p.default.div.withConfig({displayName:"primaryMenu__MenuItems",componentId:"sc-1n6k8y9-1"})(["position:relative;display:flex;flex-direction:row;align-items:center;margin-right:","px;gap:","px;"],16,8);const eZ=function PrimaryMenu(){return c.createElement(QY,null,c.createElement(JY,{id:"primary-menu-items"},c.createElement(lH,null),c.createElement(vH,null),c.createElement(XY,null)))};function tZ(){return tZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tZ.apply(this,arguments)}const nZ=(0,fr.isPlatformMacOS)(),LargeKey=e=>c.createElement("kbd",tZ({className:"large-key"},e)),ShiftKeyWrapper=e=>nZ?c.createElement("kbd",e):c.createElement(LargeKey,e),rZ={header:{label:(0,d.__)("Keyboard Shortcuts","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"/"))},landmarks:[{label:(0,d.__)("Element","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,fr.prettifyShortcut)("alt")),c.createElement("kbd",null,"1"))},{label:(0,d.__)("Workspace","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,fr.prettifyShortcut)("alt")),c.createElement("kbd",null,"2"))},{label:(0,d.__)("Design panels","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,fr.prettifyShortcut)("alt")),c.createElement("kbd",null,"3"))}],sections:[{title:(0,d.__)("Basics","web-stories"),commands:[{label:(0,d.__)("Undo","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"Z"))},{label:(0,d.__)("Redo","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement(ShiftKeyWrapper,null,(0,fr.prettifyShortcut)("shift")),c.createElement("kbd",null,"Z"))},{label:(0,d.__)("Save","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"S"))},{label:(0,d.__)("Play / Stop","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,fr.prettifyShortcut)("enter")))}]},{title:(0,d.__)("Text","web-stories"),commands:[{label:(0,d.__)("Insert/edit link","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"K"))},{label:(0,d.__)("Bold","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"B"))},{label:(0,d.__)("Italic","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"I"))},{label:(0,d.__)("Underline","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"U"))}]},{title:(0,d.__)("Element","web-stories"),commands:[{label:(0,d.__)("Copy","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"C"))},{label:(0,d.__)("Cut","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"X"))},{label:(0,d.__)("Duplicate","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"D"))},{label:(0,d.__)("Paste","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"V"))},{label:(0,d.__)("Copy Styles","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,fr.prettifyShortcut)("alt")),c.createElement("kbd",null,"O"))},{label:(0,d.__)("Paste Styles","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,fr.prettifyShortcut)("alt")),c.createElement("kbd",null,"P"))},{label:(0,d.__)("Select all","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"A"))},{label:(0,d.__)("Select multiple","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(ou.default,{mapping:{lkbd:c.createElement(LargeKey,null),shortcut:c.createElement(fr.Shortcut,{shortcut:"shift"})}},(0,We.default)(
/* translators: 1: Shift key. */
(0,d.__)("<lkbd>%s</lkbd> <span>+ click</span>","web-stories"),(0,fr.prettifyShortcut)("shift"))))},{label:(0,d.__)("Move forward or back","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(ou.default,{mapping:{kbd:c.createElement("kbd",null),lkbd:c.createElement(LargeKey,null)}},(0,We.default)(
/* translators: 1: Cmd/Ctrl key. 2: Up key. 3: Down key. */
(0,d.__)("<lkbd>%1$s</lkbd> <kbd>%2$s</kbd> <span>or</span> <kbd>%3$s</kbd>","web-stories"),(0,fr.prettifyShortcut)("mod"),(0,fr.prettifyShortcut)("up"),(0,fr.prettifyShortcut)("down"))))},{label:(0,d.__)("Move to front or back","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(ou.default,{mapping:{kbd:c.createElement("kbd",null),lkbd:c.createElement(LargeKey,null)}},(0,We.default)(
/* translators: 1: Cmd/Ctrl key. 2: Shift key. 3: Up key. 4: Down key. */
(0,d.__)("<lkbd>%1$s</lkbd> <lkbd>%2$s</lkbd> <kbd>%3$s</kbd> <span>or</span> <kbd>%4$s</kbd>","web-stories"),(0,fr.prettifyShortcut)("mod"),(0,fr.prettifyShortcut)("shift"),(0,fr.prettifyShortcut)("up"),(0,fr.prettifyShortcut)("down"))))},{label:(0,d.__)("Enter crop/edit mode","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(ou.default,{mapping:{kbd:c.createElement("kbd",null)}},(0,We.default)(
/* translators: %s: Enter key. */
(0,d.__)("<kbd>%s</kbd> <span>or double-click</span>","web-stories"),(0,fr.prettifyShortcut)("enter"))))},{label:(0,d.__)("Delete","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("delete")))},{disabled:!0,label:(0,d.__)("Insert/edit link","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",null,"A"))},{label:(0,d.__)("Disable snapping and drop targeting","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(ou.default,{mapping:{lkbd:c.createElement(LargeKey,null)}},(0,We.default)(
/* translators: %s: Cmd/Ctrl key. */
(0,d.__)("<span>Hold</span> <lkbd>%s</lkbd>","web-stories"),(0,fr.prettifyShortcut)("mod"))))},{label:(0,d.__)("Access floating toolbar","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("ctrl")),c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("alt")),c.createElement("kbd",null,"P"))},{label:(0,d.__)("Open context menu","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("mod")),c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("alt")),c.createElement("kbd",{className:"large-key"},(0,fr.prettifyShortcut)("shift")),c.createElement("kbd",null,"M"))},{label:(0,d.__)("Move element 1px","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(ou.default,{mapping:{lkbd:c.createElement(LargeKey,null),shortcut:c.createElement(fr.Shortcut,{shortcut:"shift"})}},(0,We.default)(
/* translators: 1: Shift key. */
(0,d.__)("<lkbd>%s</lkbd> <span>+ arrow keys</span>","web-stories"),(0,fr.prettifyShortcut)("shift"))))}]}]},aZ=rZ.header,oZ=rZ.landmarks.filter((e=>!e.disabled)),lZ=rZ.sections.map((e=>({...e,commands:e.commands.filter((e=>!e.disabled))})));function iZ(){return iZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iZ.apply(this,arguments)}const sZ=p.default.dd.withConfig({displayName:"shortcutLabel__Wrapper",componentId:"sc-6tlmvo-0"})(["display:block;margin:0;kbd{"," display:flex;justify-content:",";align-items:center;margin:0;padding:0;color:",";background-color:transparent;& > kbd{display:flex;justify-content:center;align-items:center;padding:0 5px;height:24px;width:24px;border-radius:",";border:1px solid ",";color:",";}& > kbd.large-key{width:auto;}kbd + kbd{margin-left:2px;}kbd + span{margin-left:4px;}span + kbd{margin-left:4px;}}"],ep.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{X_SMALL:r}=t;return n[r]})),(e=>{let{alignment:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.fg.primary}));const cZ=function ShortCutLabel(e){let{keys:t,alignment:n="center",...r}=e;return c.createElement(sZ,iZ({alignment:n},r),t)};function dZ(){return dZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dZ.apply(this,arguments)}const uZ=p.default.dl.withConfig({displayName:"headerShortcut__List",componentId:"sc-1egg06k-0"})(["margin:24px;display:flex;flex-shrink:0;"]),pZ=p.default.dt.withConfig({displayName:"headerShortcut__Item",componentId:"sc-1egg06k-1"})(["margin:0 12px 0 0;"]);const mZ=function HeaderShortcut(e){const{label:t,shortcut:n}=aZ;return c.createElement(uZ,null,c.createElement(pZ,null,c.createElement(Qu.Headline,dZ({as:"h2",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},e),t)),c.createElement(cZ,{keys:n}))},fZ=p.default.dl.withConfig({displayName:"landmarkShortcuts__LandmarksWrapper",componentId:"sc-k7r8e2-0"})(["background-color:",";margin:0;padding:16px 24px;display:flex;justify-content:space-between;user-select:text;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),gZ=p.default.div.withConfig({displayName:"landmarkShortcuts__Landmark",componentId:"sc-k7r8e2-1"})(["display:flex;flex-direction:column;"]),hZ=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,forwardedAs:"span"}).withConfig({displayName:"landmarkShortcuts__Label",componentId:"sc-k7r8e2-2"})(["text-align:center;margin-top:8px;white-space:nowrap;display:inline-block;"]);const bZ=function LandmarkShortcuts(){return c.createElement(fZ,null,oZ.map((e=>{let{label:t,shortcut:n}=e;return c.createElement(gZ,{key:t},c.createElement(cZ,{keys:n}),c.createElement("dt",null,c.createElement(hZ,null,t)))})))},EZ=(0,p.default)(Qu.Headline).attrs({as:"h3",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}).withConfig({displayName:"shortcutMenuSection__Header",componentId:"sc-xssjcb-0"})(["margin-top:24px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),yZ=p.default.dl.withConfig({displayName:"shortcutMenuSection__List",componentId:"sc-xssjcb-1"})(["display:grid;grid-template-columns:1fr;row-gap:12px;align-items:center;margin:12px 0 0;"]),_Z=p.default.div.withConfig({displayName:"shortcutMenuSection__ListRow",componentId:"sc-xssjcb-2"})(["display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;column-gap:5px;align-items:center;dd{grid-column:1;grid-row:1;}dt{grid-column:2;grid-row:1;}"]),vZ=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,forwardedAs:"span"}).withConfig({displayName:"shortcutMenuSection__Label",componentId:"sc-xssjcb-3"})(["display:inline-block;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const wZ=function ShortcutMenuSection(e){let{title:t,commands:n}=e;const r=`header-${(0,pe.default)()}`;return c.createElement(c.Fragment,null,c.createElement(EZ,{id:r},t),c.createElement(yZ,{title:t},n.map((e=>{let{label:t,shortcut:n}=e;return c.createElement(_Z,{key:t},c.createElement(cZ,{keys:n,alignment:"left"}),c.createElement("dt",null,c.createElement(vZ,null,t)))}))))},TZ=p.default.div.withConfig({displayName:"regularShortcuts__ContentWrapper",componentId:"sc-fl8s7-0"})(["display:flex;flex-direction:column;margin:0 24px 24px;*{user-select:text;}"]);const SZ=function RegularShortcuts(){return c.createElement(TZ,null,lZ.map((e=>{let{title:t,commands:n}=e;return c.createElement(wZ,{key:t,title:t,commands:n})})))},CZ="mod+/",IZ=p.default.div.withConfig({displayName:"shortcutMenu__Container",componentId:"sc-m0xcqa-0"})(["position:absolute;left:0;bottom:0;width:352px;border-radius:",";background-color:",";border:","px solid ",";"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),1,(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),xZ=p.default.div.withConfig({displayName:"shortcutMenu__FlexContent",componentId:"sc-m0xcqa-1"})(["display:flex;flex-direction:column;max-height:calc( 100vh - ","px - ","px );"],110,(e=>{let{bottomOffset:t}=e;return t})),AZ=p.default.div.withConfig({displayName:"shortcutMenu__CloseContainer",componentId:"sc-m0xcqa-2"})(["position:absolute;right:4px;top:4px;"]),kZ=p.default.div.withConfig({displayName:"shortcutMenu__ScrollableContent",componentId:"sc-m0xcqa-3"})(["overflow:auto;flex-shrink:1;",";"],tp.focusableOutlineCSS),OZ=`kb-header-${(0,pe.default)()}`;const PZ=function ShortcutMenu(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{close:n,toggleMenu:r,isOpen:a}=sF((e=>{let{actions:t,state:n}=e;return{toggleMenu:t.toggleMenu,close:t.close,isOpen:n.isOpen}})),[o,l]=(0,u.useState)(0);return(0,u.useLayoutEffect)((()=>{const e=t.current;if(!e)return;const n=()=>{const t=e.getBoundingClientRect(),n=e.ownerDocument.documentElement.getBoundingClientRect();l(n.height-t.y-t.height)};return n(),setTimeout(n),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)}),[]),(0,u.useEffect)((()=>{a&&e.current&&e.current.focus()}),[a]),(0,fr.useKeyDownEffect)(t,CZ,r,[r]),(0,fr.useKeyDownEffect)(t,"esc",n),c.createElement(IZ,{ref:t},c.createElement(AZ,null,c.createElement(m.Button,{ref:e,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.CIRCLE,onClick:n,"aria-label":(0,d.__)("Close Menu","web-stories")},c.createElement(Ju.default,null))),c.createElement(xZ,{bottomOffset:o},c.createElement(mZ,{id:OZ}),c.createElement(kZ,{role:"presentation",tabIndex:0},c.createElement(bZ,null),c.createElement(SZ,null))))},NZ=(0,p.default)(Dp).withConfig({displayName:"keyboardShortcutsMenu__StyledToggleButton",componentId:"sc-1nngfyy-0"})(["padding-left:","px;padding-right:","px;width:auto;display:block;background-color:",";"],3,3,(e=>{let{theme:t}=e;return t.colors.bg.primary})),RZ=p.default.div.withConfig({displayName:"keyboardShortcutsMenu__Wrapper",componentId:"sc-1nngfyy-1"})(["z-index:",";"],3),MZ=(0,p.default)(_b).withConfig({displayName:"keyboardShortcutsMenu__MainIcon",componentId:"sc-1nngfyy-2"})(["height:32px;width:auto;display:block;"]);const LZ=function KeyboardShortcutsMenu(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{close:n,toggle:r,isOpen:a}=sF((e=>{let{actions:{close:t,toggle:n},state:{isOpen:r}}=e;return{close:t,toggle:n,isOpen:r}}));return(0,u.useEffect)((()=>{document.body.classList.contains(_d)&&!a&&e?.current?.focus?.()}),[a]),(0,fr.useGlobalKeyDownEffect)(CZ,r,[r]),(0,u.useFocusOut)(t,n,[n]),c.createElement(Uu,null,c.createElement(RZ,{ref:t},c.createElement(mp,{popupId:"keyboard_shortcut_menu",isOpen:a,ariaLabel:(0,d.__)("Keyboard Shortcuts","web-stories")},c.createElement(PZ,{toggleMenu:r})),c.createElement(NZ,{ref:e,isOpen:a,"aria-owns":"keyboard_shortcut_menu",onClick:r,"aria-label":(0,d.__)("Keyboard Shortcuts","web-stories"),label:(0,d.__)("Keyboard Shortcuts","web-stories"),MainIcon:MZ,shortcut:"mod+/"})))};var DZ=n(11443);function BZ(){document.querySelector(pc)?.focus()}const FZ=(0,p.css)(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),HZ=(0,p.default)(ap).withConfig({displayName:"bottomNavigation__BottomNavBar",componentId:"sc-yk08yc-0"})(["position:absolute;bottom:0;transition:transform ","ms ",";z-index:2;",""],sc,qe.BEZIER.default,(e=>{let{isHidden:t}=e;return t&&(0,p.css)(["transform:translateY(100%);"])})),UZ=p.default.div.withConfig({displayName:"bottomNavigation__BottomNavButtons",componentId:"sc-yk08yc-1"})(["display:flex;padding:0 16px;white-space:nowrap;"]),jZ=p.default.div.withConfig({displayName:"bottomNavigation__ArrowWrap",componentId:"sc-yk08yc-2"})([""," margin:-5px -16px;"," svg{display:block;}"],FZ,(e=>{let{$isRTL:t}=e;return t&&(0,p.css)(["transform:rotate(180deg);"])}));function BottomNavigation(e){let{onAllTips:t,onPrev:n,onNext:r,hasBottomNavigation:a,isNextDisabled:o,isPrevDisabled:l}=e;const{isRTL:i}=U(),s=(0,u.useRef)(null),p=(0,u.useRef)(null),[m,g]=(0,u.useState)({isPrevDisabled:l,isNextDisabled:o});return(0,u.useEffect)((()=>{[l&&document.activeElement===s.current,o&&document.activeElement===p.current].forEach((e=>(e=>t=>{e&&t()})(e)(BZ))),g({isPrevDisabled:l,isNextDisabled:o})}),[l,o]),c.createElement(HZ,{"aria-hidden":!a,isHidden:!a},c.createElement(UZ,null,c.createElement(op,{onClick:()=>{BZ(),t()},type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!a},c.createElement(jZ,{$isRTL:i},c.createElement(lg,null)),c.createElement(zZ,null,(0,d.__)("All Tips","web-stories")))),c.createElement(UZ,null,c.createElement(op,{ref:s,onClick:n,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!a||m.isPrevDisabled},(0,d.__)("Previous","web-stories")),c.createElement(op,{ref:p,onClick:r,type:f.BUTTON_TYPES.PLAIN,size:f.BUTTON_SIZES.SMALL,disabled:!a||m.isNextDisabled},(0,d.__)("Next","web-stories"))))}var zZ=(0,p.default)("span").withConfig({displayName:"bottomNavigation___StyledSpan",componentId:"sc-yk08yc-3"})(["",""],FZ);const GZ=p.default.div.withConfig({displayName:"navigator__Layout",componentId:"sc-3xgugm-0"})([""," contain:content;"],Rk.fullSizeRelative),YZ=p.default.div.withConfig({displayName:"navigator__Content",componentId:"sc-3xgugm-1"})([""]),ZZ=p.default.div.withConfig({displayName:"navigator__ContentInner",componentId:"sc-3xgugm-2"})(["position:relative;"]);const WZ=(0,u.memo)((function Navigator(e){let{children:t,isOpen:n,onClose:r,onNext:a,onPrev:o,onAllTips:l,hasBottomNavigation:i,isNextDisabled:s,isPrevDisabled:p}=e;const m=(0,u.useRef)(null),f=(0,u.useRef)(null);return(0,u.useEffect)((()=>function(e,t){if(!e||!t)return()=>{};const{height:n}=e.getBoundingClientRect();t.style.height=`${n}px`,e.style.position="absolute",e.style.bottom=0,e.style.content="contain";let r=requestAnimationFrame((()=>{r=requestAnimationFrame((()=>{t.style.transition=`height 500ms ${qe.BEZIER.default}`}))}));return()=>cancelAnimationFrame(r)}(m.current,f.current)),[]),(0,u.useResizeEffect)(m,(e=>{let{height:t}=e;f.current&&(f.current.style.height=`${t}px`)}),[]),c.createElement(Xu,{isOpen:n},c.createElement(sp,{onClose:r,label:(0,d.__)("Quick Tips","web-stories"),popupId:uc}),c.createElement(GZ,{ref:f},c.createElement(YZ,{ref:m},c.createElement(ZZ,null,t))),c.createElement(BottomNavigation,{onNext:a,onPrev:o,onAllTips:l,hasBottomNavigation:i,isNextDisabled:s,isPrevDisabled:p}))}));var VZ=n(94537);const $Z=p.default.div.withConfig({displayName:"header__Panel",componentId:"sc-1aci6do-0"})(["padding:24px 0 16px 0;border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary})),qZ=p.default.h1.withConfig({displayName:"header__Heading",componentId:"sc-1aci6do-1"})([""," color:",";line-height:32px;margin:0 0 8px 0;"],ep.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.fg.primary}));function KZ(){return c.createElement($Z,null,c.createElement(qZ,{as:"h2"},(0,d.__)("Web Stories Help Center","web-stories")),c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Discover tips & resources to help you get the most out of your Web Stories.","web-stories")))}const XZ=p.default.div.withConfig({displayName:"tips__Panel",componentId:"sc-1bvshes-0"})(["padding:24px 0;"]),QZ=(0,p.default)(m.Button).withConfig({displayName:"tips__StyledButton",componentId:"sc-1bvshes-1"})([""," display:flex;justify-content:space-between;width:100%;padding:6px 0;"],ep.expandTextPreset(((e,t)=>{let{label:n}=e,{SMALL:r}=t;return n[r]}))),JZ=p.default.span.withConfig({displayName:"tips__ButtonText",componentId:"sc-1bvshes-2"})(["vertical-align:middle;text-align:left;",""],(e=>{let{unread:t,theme:n}=e;return t&&(0,p.css)(["&::before{content:' ';display:inline-block;height:10px;width:10px;margin-right:16px;border-radius:",";background-color:",";}"],n.borders.radius.round,n.colors.accent.primary)})),eW=p.default.div.withConfig({displayName:"tips__ArrowWrap",componentId:"sc-1bvshes-3"})(["width:32px;margin:-9px;transform-origin:50% 50%;transform:",";"],(e=>{let{$isRTL:t}=e;return t?"none":"rotate(180deg)"})),tW=(0,p.default)(lg).withConfig({displayName:"tips__StyledArrow",componentId:"sc-1bvshes-4"})(["width:100%;"]);function Tip(e){let{children:t,onClick:n,unread:r=!0}=e;const{isRTL:a}=U();return c.createElement(QZ,{size:f.BUTTON_SIZES.SMALL,onClick:n},c.createElement(JZ,{unread:r},t),c.createElement(eW,{$isRTL:a},c.createElement(tW,null)))}function Tips(e){let{onTipSelect:t=(()=>{}),readTips:n}=e;const{state:{tips:r}}=wc(),a=Object.entries(r);return c.createElement(XZ,null,a.map((e=>{let[r,a]=e;return c.createElement(Tip,{unread:!n[r],key:r,onClick:()=>{BZ(),t(r)}},a.title)})))}function nW(){return nW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nW.apply(this,arguments)}const rW=(0,p.css)(["opacity:1;transform:none;"]),aW=(0,p.css)(["position:absolute;bottom:0;opacity:0.6;transform:scale(0.96);"]),oW={entering:rW,entered:rW,exiting:aW,exited:aW},lW=p.default.div.withConfig({displayName:"transitioner__Manager",componentId:"sc-aat78p-0"})(["position:relative;color:",";opacity:0.6;transform-origin:50% 50%;transform:scale(0.96);transition:transform ","ms ",",opacity ","ms ",";z-index:",";",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),600,qe.BEZIER.default,600,qe.BEZIER.default,cc,(e=>{let{state:t}=e;return oW[t]}));function Transitioner(e){let{children:t,...n}=e;return c.createElement(ScheduledTransition,nW({},n,{timeout:600,mountOnEnter:!0,unmountOnExit:!0}),(e=>c.createElement(lW,{state:e},t)))}const iW=p.default.div.withConfig({displayName:"menu__Container",componentId:"sc-ztoh5v-0"})(["padding:0 ","px;max-height:60vh;overflow-y:scroll;*{user-select:text;}"],24);function sW(e){let{onTipSelect:t=Lt,readTips:n,components:r,...a}=e;const o=r?.Footer;return c.createElement(Transitioner,a,c.createElement(iW,{"data-testid":"help_center_container"},c.createElement(KZ,null),c.createElement(Tips,{readTips:n,onTipSelect:t}),o&&c.createElement(o,null)))}function cW(){return cW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cW.apply(this,arguments)}const dW=420,uW=p.default.div.withConfig({displayName:"transitioner__Opacity",componentId:"sc-cc5d3w-0"})([""]),pW=()=>(0,p.css)(["transition-delay:","ms;transform:none;","{opacity:1;}"],80,uW),mW=e=>{let{isLeftToRightTransition:t}=e;return(0,p.css)(["position:absolute;bottom:0;","{opacity:0;}",""],uW,t?(0,p.css)(["transform:translateX(-100%);"]):(0,p.css)(["transform:translateX(100%);"]))},fW={entering:pW,entered:pW,exiting:mW,exited:mW},gW=p.default.div.withConfig({displayName:"transitioner__Manager",componentId:"sc-cc5d3w-1"})(["position:relative;color:",";background-color:",";transition:transform ","ms ",";transform-origin:50% 50%;z-index:",";"," ","{opacity:0.6;transition:opacity ","ms ",";}",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),dW,qe.BEZIER.default,dc,(e=>{let{isLeftToRightTransition:t}=e;return t?(0,p.css)(["transform:translateX(100%);"]):(0,p.css)(["transform:translateX(-100%);"])}),uW,dW,qe.BEZIER.default,(e=>{let{state:t,...n}=e;return fW[t]?.(n)}));function hW(e){let{children:t,isLeftToRightTransition:n,...r}=e;return c.createElement(ScheduledTransition,cW({},r,{timeout:{enter:500,exit:dW},mountOnEnter:!0,unmountOnExit:!0}),(e=>c.createElement(gW,{state:e,isLeftToRightTransition:n},c.createElement(uW,null,t))))}var bW,EW,yW;function _W(){return _W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_W.apply(this,arguments)}const SvgDoneCheckmark=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",_W({viewBox:"0 0 135 136",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,bW||(bW=c.createElement("circle",{cx:67.5,cy:68.5,r:67.5,fill:"currentColor"})),EW||(EW=c.createElement("path",{d:"M67.5 93.146c13.889 0 25.148-11.259 25.148-25.147 0-13.889-11.26-25.147-25.147-25.147-13.889 0-25.148 11.258-25.148 25.147 0 13.888 11.26 25.147 25.148 25.147Z",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})),yW||(yW=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M81.698 57.64a1.5 1.5 0 0 1 .037 2.12l-17.93 18.563a1.5 1.5 0 0 1-2.157 0l-7.383-7.643a1.5 1.5 0 1 1 2.158-2.084l6.304 6.526 16.85-17.445a1.5 1.5 0 0 1 2.121-.037Z",fill:"currentColor"})))},vW=(0,c.memo)(SvgDoneCheckmark);function wW(){return wW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wW.apply(this,arguments)}const TW=p.default.div.withConfig({displayName:"quickTip__Panel",componentId:"sc-1kyj87z-0"})(["width:100%;padding-bottom:","px;*{user-select:text;}"],48),SW=p.default.div.withConfig({displayName:"quickTip__Overflow",componentId:"sc-1kyj87z-1"})(["position:relative;width:100%;max-height:70vh;padding:","px;strong{font-weight:700;}"],24),CW=p.default.video.withConfig({displayName:"quickTip__Video",componentId:"sc-1kyj87z-2"})(["height:180px;margin-bottom:","px;max-width:100%;"],24),IW=p.default.h1.withConfig({displayName:"quickTip__Title",componentId:"sc-1kyj87z-3"})([""," color:",";line-height:32px;margin:0 0 8px 0;"],ep.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.fg.primary})),xW=(0,p.default)($e.Text).withConfig({displayName:"quickTip__Paragraph",componentId:"sc-1kyj87z-4"})(["& + &{margin-top:8px;}"]),AW=p.default.div.withConfig({displayName:"quickTip__DoneContainer",componentId:"sc-1kyj87z-5"})([""," height:180px;margin-bottom:","px;color:#f4f2ef;svg{display:block;path{color:#4285f4;}}"],Mk.centerContent,24);function QuickTip(e){let{title:t,description:n,isLeftToRightTransition:r=!0,figureSrc:a,figureSrcImg:o,figureAlt:l,href:i,isDone:s=!1,...d}=e;const{cdnURL:u}=U();return c.createElement(hW,wW({},d,{isLeftToRightTransition:r}),c.createElement(TW,null,c.createElement(SW,null,Boolean(a)&&c.createElement(CW,{controls:!1,autoPlay:!0,loop:!0,muted:!0,noControls:!0,preload:"true",crossOrigin:"anonymous"},c.createElement("source",{src:`${u}${a}.webm`,type:"video/webm"}),c.createElement("source",{src:`${u}${a}.mp4`,type:"video/mp4"})),o&&c.createElement(CW,{as:"img",alt:l,src:`${u}${o}.png`,crossOrigin:"anonymous"}),s&&c.createElement(AW,null,c.createElement(vW,{height:135,width:135})),c.createElement(IW,null,t),n.map(((e,n)=>c.createElement(xW,{key:`${t}-${n}`,size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(ou.default,{mapping:{a:c.createElement(lu.Link,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,rel:"noreferrer noopener",target:"_blank",href:i}),screenreader:c.createElement(pR.VisuallyHidden,null)}},e)))))))}function kW(){return kW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kW.apply(this,arguments)}const OW=(0,u.memo)((function Companion(e){let{tipKey:t,onTipSelect:n,isLeftToRightTransition:r,readTips:a,components:o}=e;const{state:{tips:l}}=wc(),i={...l,[ic[0]]:ic[1]},s=t&&i[t];return c.createElement(VZ.default,null,s?c.createElement(QuickTip,kW({key:t,isDone:t===ic[0],transitionKey:t,isLeftToRightTransition:r},s)):c.createElement(sW,{key:"menu",readTips:a,onTipSelect:n,components:o}))})),PW=(0,p.default)(Wy).withConfig({displayName:"toggle__MainIcon",componentId:"sc-12rmkcw-0"})(["height:32px;width:auto;display:block;"]),NW=(0,p.default)(Dp).withConfig({displayName:"toggle__StyledToggleButton",componentId:"sc-12rmkcw-1"})(["padding-left:3px;padding-right:3px;display:block;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));function RW(e){let{isOpen:t=!1,popupId:n="",onClick:r=(()=>{}),notificationCount:a=0}=e;return c.createElement(NW,{"aria-owns":n,"aria-label":a>0?(0,We.default)(
/* translators: %s:  number of unread notifications. */
(0,d._n)("Help Center: %s unread notification","Help Center: %s unread notifications",a,"web-stories"),a):(0,d.__)("Help Center","web-stories"),onClick:r,isOpen:t,label:(0,d.__)("Help","web-stories"),MainIcon:PW,notificationCount:a})}const MW=p.default.div.withConfig({displayName:"helpCenter__Wrapper",componentId:"sc-12zoy5g-0"})(["z-index:",";"],3),HelpCenter=e=>{let{components:t}=e;const n=(0,u.useRef)(null),{state:r,actions:a}=wc();return(0,u.useEffect)((()=>{r.isOpen&&BZ()}),[r.isOpen]),za(La.onReplaceBackgroundMedia,(0,u.useCallback)((()=>{a.openToUnreadTip(Qs)}),[a])),za(La.onReplaceForegroundMedia,(0,u.useCallback)((()=>{a.openToUnreadTip(Js)}),[a])),c.createElement(Uu,null,c.createElement(c.Fragment,null,c.createElement(DZ.Styles,null),c.createElement(MW,{ref:n},c.createElement(mp,{popupId:uc,isOpen:r.isOpen,ariaLabel:(0,d.__)("Help Center","web-stories")},c.createElement(WZ,{isOpen:r.isOpen,onNext:a.goToNext,onPrev:a.goToPrev,onAllTips:a.goToMenu,onClose:a.close,hasBottomNavigation:r.hasBottomNavigation,isNextDisabled:r.isNextDisabled,isPrevDisabled:r.isPrevDisabled},c.createElement(OW,{readTips:r.readTips,tipKey:r.navigationFlow[r.navigationIndex],onTipSelect:a.goToTip,isLeftToRightTransition:r.isLeftToRightTransition,components:t}))),c.createElement(RW,{isOpen:r.isOpen,onClick:a.toggle,notificationCount:r.unreadTipsCount,popupId:uc}))))},LW=p.default.div.withConfig({displayName:"secondaryMenu__Wrapper",componentId:"sc-4921wn-0"})(["display:flex;align-items:flex-end;justify-content:flex-start;width:100%;height:100%;"]),DW=p.default.div.withConfig({displayName:"secondaryMenu__MenuItems",componentId:"sc-4921wn-1"})(["position:relative;display:flex;flex-direction:row;align-items:center;margin-left:","px;gap:","px;"],16,8),BW="help_center",FW="checklist",HW="keyboard_shortcuts";const UW=function SecondaryMenu(e){let{menu:t}=e;const n=(0,u.useRef)(""),{close:r,isHelpCenterOpen:a}=wc((e=>{let{actions:{close:t},state:{isOpen:n}}=e;return{close:t,isHelpCenterOpen:n}})),{close:o,open:l,isChecklistOpen:i}=au((e=>{let{actions:{close:t,open:n},state:{isOpen:r}}=e;return{close:t,open:n,isChecklistOpen:r}})),{close:s,isKeyboardShortcutsMenuOpen:d}=sF((e=>{let{actions:{close:t},state:{isOpen:n}}=e;return{close:t,isKeyboardShortcutsMenuOpen:n}})),{handleResetReviewChecklist:p,reviewChecklistRequested:m}=Nu((e=>{let{actions:{handleResetReviewChecklist:t},state:{reviewChecklistRequested:n}}=e;return{reviewChecklistRequested:n,handleResetReviewChecklist:t}})),f=Vs((e=>{let{state:{editingElementState:{isTrimMode:t},isEditing:n}}=e;return t||n})),g=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.current=e}),[]);return(0,u.useEffect)((()=>{i&&n.current!==FW&&(r(),s(),g(FW))}),[r,s,i,g]),(0,u.useEffect)((()=>{a&&n.current!==BW&&(o(),s(),g(BW))}),[o,s,a,g]),(0,u.useEffect)((()=>{d&&n.current!==HW&&(o(),r(),g(HW))}),[o,r,d,g]),(0,u.useEffect)((()=>{m&&(g(),p(),l())}),[m,p,l,g]),(0,u.useEffect)((()=>{f&&n.current&&(g(),o(),r())}),[o,r,f,g]),c.createElement(LW,null,c.createElement(DW,null,c.createElement(HelpCenter,{components:t?.helpCenter}),t?.checklist&&c.createElement(Checklist,{items:t.checklist}),c.createElement(LZ,null)))},jW=p.default.section.withConfig({displayName:"footerLayout__Wrapper",componentId:"sc-gme2s1-0"})(["position:relative;display:grid;grid:'secondary carousel primary' auto / ","px minmax(auto,calc(100% - ","px)) ","px;width:100%;max-width:100%;height:100%;"],YL,2*YL,YL),zW=p.default.div.withConfig({displayName:"footerLayout__Area",componentId:"sc-gme2s1-1"})(["grid-area:",";display:flex;align-items:flex-end;justify-content:center;z-index:",";"],(e=>{let{area:t}=e;return t}),(e=>{let{zIndex:t="auto"}=e;return t}));const GW=function FooterLayout(e){let{footer:t,zIndex:n}=e;return c.createElement(Uu,null,c.createElement(jW,{"aria-label":(0,d.__)("Workspace Footer","web-stories")},c.createElement(zW,{area:"carousel"},c.createElement(rH,null)),c.createElement(zW,{area:"primary",zIndex:n},c.createElement(eZ,null)),c.createElement(zW,{area:"secondary",zIndex:n},c.createElement(UW,{menu:t?.secondaryMenu}))))},YW=p.default.section.withConfig({displayName:"footer__Outer",componentId:"sc-124zhi3-0"})(["height:100%;"]),ZW=(0,p.default)(YW).withConfig({displayName:"footer__Inner",componentId:"sc-124zhi3-1"})(["margin-right:","px;"],(e=>{let{marginRight:t}=e;return t}));const WW=(0,u.memo)((function(e){let{footer:t,zIndex:n}=e;const r=(0,u.useRef)(),[a,o]=(0,u.useState)(0);(0,u.useResizeEffect)(r,(e=>{let{width:t}=e;return o(t)}),[]);const l=(0,u.useMemo)((()=>a>=1e3?8:0),[a]);return c.createElement(ru,null,c.createElement(iF,null,c.createElement(YW,{ref:r},c.createElement(ZW,{marginRight:l},c.createElement(GW,{footer:t,zIndex:n})))))}));function VW(){return VW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VW.apply(this,arguments)}const $W=(0,p.default)(m.Button).withConfig({displayName:"pageMenuButton__StyledButton",componentId:"sc-x8fz92-0"})(["margin-top:12px;"]);const qW=(0,u.forwardRef)((function PageMenuButtonWithRef(e,t){let{children:n,title:r,shortcut:a,...o}=e;return c.createElement(Tooltip,{title:r,shortcut:a,placement:Bd.PLACEMENT.RIGHT,hasTail:!0},c.createElement($W,VW({variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,ref:t},o),n))}));qW.propTypes={children:Ma().node,title:Ma().string,shortcut:Ma().string};const KW=qW;const XW=function AnimationToggle(){const{animationState:e,updateAnimationState:t,isFirstPage:n}=Ya((e=>{let{state:{animationState:t,currentPageNumber:n},actions:{updateAnimationState:r}}=e;return{animationState:t,updateAnimationState:r,isFirstPage:1===n}})),r=[Rn.STORY_ANIMATION_STATE.PLAYING,Rn.STORY_ANIMATION_STATE.PLAYING_SELECTED].includes(e),a=n?(0,d.__)("Animations Disabled","web-stories"):r?(0,d.__)("Stop","web-stories"):(0,d.__)("Play","web-stories"),o=n?(0,d.__)("Page Animations Disabled","web-stories"):r?(0,d.__)("Stop Page Animations","web-stories"):(0,d.__)("Play Page Animations","web-stories"),l=n?null:"mod+enter",i=r?v_:Ry,s=(0,u.useCallback)((()=>{t({animationState:r?Rn.STORY_ANIMATION_STATE.RESET:Rn.STORY_ANIMATION_STATE.PLAYING}),(0,P.trackEvent)("canvas_play_animations",{status:r?"stop":"play"})}),[r,t]);return c.createElement(KW,{title:a,shortcut:l,onClick:s,"aria-label":o,disabled:n},c.createElement(i,null))},QW=p.default.div.withConfig({displayName:"pageMenu__Wrapper",componentId:"sc-m9u2n8-0"})(["margin-top:auto;padding:0 4px;pointer-events:all;"]);const JW=(0,u.memo)((function PageMenu(){const{currentPage:e,numberOfPages:t,deleteCurrentPage:n,addPage:r,hasAnimations:a}=Ya((e=>{let{state:{currentPage:t,pages:n},actions:{deleteCurrentPage:r,addPage:a}}=e;return{currentPage:t,numberOfPages:n.length,deleteCurrentPage:r,addPage:a,hasAnimations:t?.animations?.length>0}})),o=(0,u.useRef)(null),l=(0,u.useRef)(null);Bm({node:o.current,eventData:Te.PAGE_ADD}),Bm({node:l.current,eventData:Te.PAGE_DELETE});const i=(0,u.useCallback)((()=>n()),[n]),s=(0,u.useCallback)((()=>r({page:(0,On.createPage)()})),[r]),p=(0,u.useCallback)((()=>r({page:(0,On.duplicatePage)(e)})),[r,e]),m=t<=1;return e?c.createElement(QW,{role:"group","aria-label":(0,d.__)("Page actions","web-stories")},a&&c.createElement(XW,null),c.createElement(KW,{ref:o,title:(0,d.__)("New Page","web-stories"),onClick:s,"aria-label":(0,d.__)("Add New Page","web-stories")},c.createElement(zy,null)),c.createElement(KW,{title:(0,d.__)("Duplicate Page","web-stories"),onClick:p,"aria-label":(0,d.__)("Duplicate Page","web-stories")},c.createElement(GE,null)),c.createElement(KW,{ref:l,title:(0,d.__)("Delete Page","web-stories"),disabled:m,onClick:i,"aria-label":(0,d.__)("Delete Page","web-stories")},c.createElement(O_.default,null))):null}));function eV(){return eV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eV.apply(this,arguments)}const tV=p.default.section.withConfig({displayName:"pageSideMenu__MenusWrapper",componentId:"sc-sll2i1-0"})(["position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:space-between;z-index:",";pointer-events:auto;min-height:100%;pointer-events:none;",""],3,(e=>{let{isZoomed:t,theme:n}=e;return t&&`\n    min-height: initial;\n    background-color: ${(0,Ve.rgba)(n.colors.standard.black,.45)};\n    border-radius: ${n.borders.radius.small};\n    padding: 8px;\n    margin-left: -24px;\n  `})),nV=p.default.div.withConfig({displayName:"pageSideMenu__Divider",componentId:"sc-sll2i1-1"})(["width:20px;height:1px;margin:13px auto 1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),rV=(0,p.default)(XN.default).withConfig({displayName:"pageSideMenu__StyledContextMenu",componentId:"sc-sll2i1-2"})(["pointer-events:all;"]);const aV=function PageSideMenu(){const{zoomSetting:e}=cs((e=>{let{state:{zoomSetting:t}}=e;return{zoomSetting:t}})),t=dv(),n=e!==Se.FIT;return c.createElement(tV,{"aria-label":(0,d.__)("Page side menu","web-stories"),isZoomed:n},t.length?c.createElement(rV,{isInline:!0,isAlwaysVisible:!0,isIconMenu:!0,disableControlledTabNavigation:!0,"data-testid":"Element quick actions","aria-label":(0,d.__)("Group of available options for selected element","web-stories"),onMouseDown:e=>{e.stopPropagation()}},t.map((e=>{let{Icon:t,label:n,onClick:r,separator:a,tooltipPlacement:o,wrapWithMediaPicker:l,...i}=e;const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aP.noop;return c.createElement(u.Fragment,{key:n},"top"===a&&c.createElement(TR.default,null),c.createElement(Tooltip,{placement:o,title:n},c.createElement(hR.default,eV({"aria-label":n,onClick:t=>{r(t),e(t)}},i),c.createElement(gR,{title:n},c.createElement(t,null)))),"bottom"===a&&c.createElement(TR.default,null))};return l?c.createElement(MediaPicker,{key:n,render:e=>{let{onClick:t}=e;return s(t)}}):s()}))):null,n&&c.createElement(nV,null),c.createElement(JW,null))};const oV=(0,u.memo)((function NavLayer(e){let{header:t,footer:n}=e;return c.createElement(ChecklistCountProvider,{hasChecklist:Boolean(n?.secondaryMenu?.checklist)},c.createElement(JL,{pointerEvents:"none",onMouseDown:e=>e.stopPropagation()},c.createElement(oD,{pointerEvents:"initial",zIndex:5},t),c.createElement(Uu,null,c.createElement(cD,null,c.createElement(aV,null))),c.createElement(dD,{pointerEvents:"initial"},c.createElement(WW,{footer:n,zIndex:5}))))})),lV=0,iV=1,sV=2,cV=(0,x.withOverlay)(p.default.div.withConfig({displayName:"selectionCanvas__Container",componentId:"sc-qsqc5z-0"})(["position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;user-select:none;"])),dV=p.default.div.withConfig({displayName:"selectionCanvas__Lasso",componentId:"sc-qsqc5z-1"})(["display:none;position:absolute;border:1px dotted ",";z-index:1;"],(e=>{let{theme:t}=e;return t.colors.border.selection}));const uV=function SelectionCanvas(e){let{children:t}=e;const n=Ya((e=>{let{state:t}=e;return t.currentPage?.elements||Ue})),{selectedElements:r,clearSelection:a}=Ya((e=>{let{state:{selectedElements:t},actions:{clearSelection:n}}=e;return{selectedElements:t,clearSelection:n}})),{fullbleedContainer:o,isEditing:l,nodesById:i,clearEditing:s,selectIntersection:d}=Vs((e=>{let{state:{fullbleedContainer:t,isEditing:n,nodesById:r},actions:{clearEditing:a,selectIntersection:o}}=e;return{fullbleedContainer:t,isEditing:n,nodesById:r,clearEditing:a,selectIntersection:o}})),p=(0,u.useMemo)((()=>o?.closest("[data-scroll-container]")),[o]),{editorToDataX:m,editorToDataY:f}=(0,Rc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY}))),g=(0,u.useRef)(null),h=(0,u.useRef)(null),b=(0,u.useRef)([0,0]),E=(0,u.useRef)([0,0]),y=(0,u.useRef)([0,0]),_=(0,u.useRef)(lV),v=(0,u.useCallback)((()=>{const[e,t]=E.current,[n,r]=y.current;return[Math.min(e,n),Math.min(t,r),Math.abs(e-n),Math.abs(t-r)]}),[]),w=(0,u.useCallback)((()=>{const e=h.current;if(!e)return;const t=_.current,[n,r,a,o]=v();e.style.left=`${n}px`,e.style.top=`${r}px`,e.style.width=`${a}px`,e.style.height=`${o}px`,e.style.display=t===iV?"block":"none"}),[v]),T=(0,u.useCallback)((e=>{i[n[0].id].contains(e.target)||(r.length&&a(),l&&s());let t=0,o=0;for(let e=g.current;e;e=e.offsetParent)t+=e.offsetLeft,o+=e.offsetTop;const c=e.pageX-t,d=e.pageY-o;b.current=[t,o],E.current=[c,d],y.current=[c,d],_.current=sV,w()}),[s,a,n,l,i,r.length,w]),S=(0,u.useCallback)((e=>{if(_.current===lV)return;const[t,n]=E.current,[r,a]=b.current,o=e.pageX-r,l=e.pageY-a;y.current[0]=o,y.current[1]=l,w(),Math.abs(t-o)+Math.abs(n-l)>10&&(_.current=iV)}),[w]),C=(0,u.useCallback)((()=>{if(_.current===iV){const[e,t,n,r]=v(),{offsetLeft:l,offsetTop:i,offsetHeight:c,offsetWidth:u}=o,{offsetLeft:g,offsetTop:h}=p,b=l+g,E=i+h+(c-u/ee.PAGE_RATIO)/2,y=m(e-b),_=f(t-E),w=m(n),T=f(r);a(),s(),d({x:y,y:_,width:w,height:T})}_.current=lV,w()}),[s,a,m,f,o,v,p,d,w]);return(0,u.useEffect)((()=>(document.addEventListener("mouseup",C),()=>{document.removeEventListener("mouseup",C)})),[C]),(0,u.useEffect)(w),c.createElement(cV,{onMouseDown:T,onMouseMove:S,"data-fix-caret":!0},t,c.createElement(x.InOverlay,{ref:g},c.createElement(dV,{ref:h})))},pV="edit-story-canvas-upload-message";const mV=function CanvasUploadDropTarget(e){let{children:t}=e;const n=Ss(),r=(0,u.useCallback)((e=>{e&&e.length>0&&n(e)}),[n]);return c.createElement(_m,{onDrop:r,labelledBy:pV},t,c.createElement(xm,null,c.createElement(JL,null,c.createElement(uD,{overlay:c.createElement(Nm,{id:pV,message:(0,d.__)("Upload to media library and add to the page.","web-stories")})}))))},fV=p.default.div.withConfig({displayName:"canvasElementDropzone__Container",componentId:"sc-8cm35g-0"})(["width:100%;height:100%;"]);const gV=function CanvasElementDropzone(e){let{children:t}=e;const n=Ts(),{activeDropTargetId:r}=rs((e=>({activeDropTargetId:e.state.activeDropTargetId}))),{pageContainer:a}=Vs((e=>({pageContainer:e.state.pageContainer}))),{editorToDataX:o,editorToDataY:l}=(0,Rc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY}))),i=(0,u.useCallback)((e=>{if(fm(e,"resource/media")&&!r){const{resource:t,offset:{x:r,y:i,w:s,h:c}}=JSON.parse(e.dataTransfer.getData("resource/media")),{x:d,y:u}=a.getBoundingClientRect();n(t.type,{resource:t,x:o(e.clientX-d-r),y:l(e.clientY-u-i),width:o(s),height:l(c)}),e.stopPropagation(),e.preventDefault()}}),[r,a,n,o,l]),s=(0,u.useCallback)((e=>{fm(e,"resource/media")&&!r&&(e.stopPropagation(),e.preventDefault())}),[r]);return c.createElement(fV,{onDrop:i,onDragOver:s},t)};const hV=function(e,t,n,r){const a=((e,t,n)=>{const r=4*(Math.floor(t)*n+Math.floor(e));return[r,r+1,r+2,r+3]})(t,n,r),[o,l,i,s]=a;return{r:e[o],g:e[l],b:e[i],a:e[s]/255}},bV=200,EV=bV/7,yV=(0,p.default)(JL).withConfig({displayName:"eyedropperLayer__EyedropperBackground",componentId:"sc-nf74gq-0"})(["background:",";cursor:not-allowed;z-index:2;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),_V=(0,p.default)(uD).withConfig({displayName:"eyedropperLayer__DisplayPageArea",componentId:"sc-nf74gq-1"})(["position:absolute;"]),vV=p.default.div.withConfig({displayName:"eyedropperLayer__EyedropperCanvas",componentId:"sc-nf74gq-2"})(["background:transparent;border-radius:5px;position:absolute;z-index:2;transform:translateZ(0);top:0;left:0;bottom:0;right:0;cursor:default;"]),wV=p.default.div.withConfig({displayName:"eyedropperLayer__ColorInfo",componentId:"sc-nf74gq-3"})(["text-transform:uppercase;margin-top:30px;padding:9px;min-width:102px;text-align:center;"]),TV=p.default.div.withConfig({displayName:"eyedropperLayer__Circle",componentId:"sc-nf74gq-4"})(["transform:translateY(20px);background:",";border:2px solid black;border-radius:50%;overflow:hidden;width:","px;height:","px;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),198,bV),SV=p.default.div.withConfig({displayName:"eyedropperLayer__Magnifier",componentId:"sc-nf74gq-5"})(["position:absolute;top:0;left:0;transform:translateY(-2000px);pointer-events:none;"]),CV=p.default.div.withConfig({displayName:"eyedropperLayer__Center",componentId:"sc-nf74gq-6"})(["position:absolute;top:0;left:0;right:0;bottom:0;z-index:3;background:",";cursor:not-allowed;display:flex;justify-content:center;align-items:center;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),IV=p.default.img.withConfig({displayName:"eyedropperLayer__CanvasImage",componentId:"sc-nf74gq-7"})(["width:100%;"]);const xV=function EyedropperLayer(){const{fullbleedContainer:e,isEyedropperActive:t,eyedropperCallback:n,eyedropperImg:r,eyedropperPixelData:a,setIsEyedropperActive:o,setEyedropperImg:l,setEyedropperPixelData:i}=Vs((e=>{let{state:{fullbleedContainer:t,isEyedropperActive:n,eyedropperCallback:r,eyedropperImg:a,eyedropperPixelData:o},actions:{setIsEyedropperActive:l,setEyedropperImg:i,setEyedropperPixelData:s}}=e;return{fullbleedContainer:t,isEyedropperActive:n,eyedropperCallback:r,eyedropperImg:a,eyedropperPixelData:o,setIsEyedropperActive:l,setEyedropperImg:i,setEyedropperPixelData:s}})),{pageWidth:s}=cs((e=>{let{state:{pageWidth:t}}=e;return{pageWidth:t}})),d=s/ee.FULLBLEED_RATIO,p=r,m=(0,u.useRef)(),f=(0,u.useRef)(),g=(0,u.useRef)(),h=(0,u.useRef)(),b=(0,u.useRef)(),E=()=>{o(!1),l(null),i(null)};return(0,u.useFocusOut)(b,E,[t,p]),(0,fr.useGlobalKeyDownEffect)("esc",E),t&&!p?c.createElement(c.Fragment,null,c.createElement(CV,{onClick:E},c.createElement(TS.default,null))):t&&p?c.createElement(yV,{"data-testid":"eyedropperLayer",onMouseMove:t=>{const{left:n,top:r,width:o,height:l}=e.getBoundingClientRect(),i=(t.clientX-n)*(s/o),c=(t.clientY-r)*(d/l);if(i<0||c<0||i>o||c>l)return void(g.current.style.display="none");g.current.style.display="block",g.current.style.transform=`translate(${i-100}px, ${c}px)`,function(e,t){const n=f.current;if(n){const r=n.getContext("2d");r.imageSmoothingEnabled=!1,r.mozImageSmoothingEnabled=!1,r.webkitImageSmoothingEnabled=!1,r.msImageSmoothingEnabled=!1,r.clearRect(0,0,bV,bV),r.drawImage(m.current,Math.round(e-3.5),Math.round(t-3.5),7,7,0,0,bV,bV),r.beginPath(),r.rect(Math.round(100)-14.285714285714286,Math.round(100)-14.285714285714286,EV,EV),r.stroke()}}(i,c);const u=hV(a,i,c,o),{r:p,g:b,b:E,a:y}=u,_=(0,Ve.rgba)(p,b,E,y);h.current.style.background=`rgba(${p},${b},${E},${y})`,h.current.style.color=(0,Ve.readableColor)(_,"#333","#EDEDED",!1),h.current.innerText=_}},c.createElement(_V,{withSafezone:!1,showOverflow:!0},c.createElement(vV,{ref:b,onClick:t=>{const{left:r,top:o,width:l,height:i}=e.getBoundingClientRect(),c=(t.clientX-r)*(s/l),u=(t.clientY-o)*(d/i),p=hV(a,c,u,s);n(p)}},c.createElement(IV,{ref:m,src:p,alt:""}),c.createElement(SV,{ref:g},c.createElement(TV,null,c.createElement("canvas",{ref:f,width:bV,height:bV})),c.createElement(wV,{ref:h}))))):null};var AV=n(52589);const kV=e=>{if(!(1===e.length))return!1;if(!(1===e[0].elements?.length))return!1;if(!e[0].elements[0].isDefaultBackground)return!1;const t=e[0].pageAttachment?.url;if(t)return!1;return!!(0,u.shallowEqual)(On.DEFAULT_PAGE_BACKGROUND_COLOR.color,e[0].backgroundColor.color)},OV=(0,p.default)(uD).withConfig({displayName:"emptyStateLayer__DisplayPageArea",componentId:"sc-1ypjr32-0"})(["position:absolute;z-index:1;"]),PV=p.default.div.withConfig({displayName:"emptyStateLayer__EmptyStateMessage",componentId:"sc-1ypjr32-1"})(["display:flex;flex-direction:column;align-items:center;padding:20px;text-align:center;svg{pointer-events:none;}p{margin-top:14px;}"]),NV=(0,p.default)(m.Button).withConfig({displayName:"emptyStateLayer__StyledButton",componentId:"sc-1ypjr32-2"})(["pointer-events:initial;"]);const RV=function EmptyStateLayer(){const{isRTL:e}=U(),{isMenuOpen:t,onOpenMenu:n}=Cc((e=>{let{isMenuOpen:t,onOpenMenu:n}=e;return{isMenuOpen:t,onOpenMenu:n}})),{pages:r}=Ya((e=>{let{state:{pages:t}}=e;return{pages:t}})),{isAnythingTransforming:a}=(0,I.useTransform)((e=>({isAnythingTransforming:e.state.isAnythingTransforming})));return!kV(r)||a?null:c.createElement(JL,{onContextMenu:n,pointerEvents:"none","aria-label":(0,d.__)("Empty state layer","web-stories")},c.createElement(OV,{withSafezone:!1},c.createElement(PV,null,c.createElement(NV,{type:f.BUTTON_TYPES.SECONDARY,variant:f.BUTTON_VARIANTS.CIRCLE,onClick:t=>{const r=t.target.getBoundingClientRect();t.clientX=r.left-(e?-1:1)*AV.CONTEXT_MENU_MIN_WIDTH/2+r.width/2;t.clientY=r.top-132+r.height,n(t)},"aria-haspopup":"true","aria-label":(0,d.__)("Add content","web-stories"),"aria-describedby":"emptystate-message","aria-expanded":t},c.createElement(_E,null)),c.createElement(p.ThemeProvider,{theme:{...g.theme,colors:h.light}},c.createElement($e.Text,{id:"emptystate-message",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add an image, video or template to get started","web-stories"))))))},MV=p.default.section.attrs({"aria-label":(0,d.__)("Canvas","web-stories"),"data-fix-caret":!0}).withConfig({displayName:"canvasLayout__Background",componentId:"sc-1ciyn0c-0"})(["background-color:",";width:100%;height:100%;position:relative;user-select:none;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));const LV=(0,u.memo)((function CanvasLayout(e){let{header:t,footer:n}=e;const r=$s(Ys),a=Vs((e=>e.actions.setCanvasContainer)),o=(0,u.useRef)(null),l=(0,u.useCombinedRefs)(o,a,r);!function(e){const{setWorkspaceSize:t}=cs((e=>{let{actions:{setWorkspaceSize:t}}=e;return{setWorkspaceSize:t}})),n=ZL();(0,u.useResizeEffect)(e,(e=>{let{width:r,height:a}=e;t({width:r,height:a,availableHeight:a-64-16-n-16})}),[t,n])}(o);const i=function(){const{pageWidth:e,pageHeight:t,pagePadding:n,viewportWidth:r,viewportHeight:a,hasPageNavigation:o,hasVerticalOverflow:l,hasHorizontalOverflow:i,scrollLeft:s,scrollTop:c}=cs((e=>{let{state:{pageWidth:t,pageHeight:n,pagePadding:r,viewportWidth:a,viewportHeight:o,hasPageNavigation:l,hasVerticalOverflow:i,hasHorizontalOverflow:s,scrollLeft:c,scrollTop:d}}=e;return{pageWidth:t,pageHeight:n,pagePadding:r,viewportWidth:a,viewportHeight:o,hasPageNavigation:l,hasVerticalOverflow:i,hasHorizontalOverflow:s,scrollLeft:c,scrollTop:d}})),d=e/ee.FULLBLEED_RATIO;return{"--page-nav-width":`${o?qL:0}px`,"--page-nav-gap":(o?20:0)+"px","--page-width-px":`${e}px`,"--page-height-px":`${t}px`,"--page-padding-px":`${n}px`,"--fullbleed-height-px":`${d}px`,"--viewport-width-px":`${r}px`,"--viewport-height-px":`${a}px`,"--overflow-x":i?"scroll":"visible","--overflow-y":l?"scroll":"visible","--scroll-left-px":-s+"px","--scroll-top-px":-c+"px"}}(),{pageWidth:s,pageHeight:d}=cs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),m=(0,C.useFeature)("floatingMenu"),f=0!==s&&0!==d;return c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(nR,null,c.createElement(MV,{ref:l,style:i},c.createElement(mV,null,c.createElement(gV,null,c.createElement(uV,null,f&&c.createElement(CB,null),f&&c.createElement(oF,null),c.createElement(oV,{header:t,footer:n})),c.createElement(RD,null),c.createElement(xV,null),c.createElement(RV,null),m&&c.createElement(bL,null))))))}));const DV=function Canvas(e){let{header:t,footer:n}=e;return c.createElement(LV,{header:t,footer:n})},BV=24;const FV=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Ts(),n=sd(),{setSelectedElementsById:r}=Ya((e=>{let{actions:{setSelectedElementsById:t}}=e;return{setSelectedElementsById:t}})),a=(0,u.useBatchingCallback)((async function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;const l=(0,Hr.getHTMLFormatters)(),{setColor:i}=l,s=[],c=a.some((e=>e.content?.includes("color:")));let d=[],u=null;const p={r:255,g:255,b:255},m={r:0,g:0,b:0},f={...p,a:.3},g={...m,a:.3};let h,b,E;if(o&&!c){d=await Promise.all(a.map((e=>"text"===e.type?n(e):null))),u=d.find((e=>e));const e=d.every((e=>null===e||e.color?.r===u.color?.r&&e.color?.g===u.color?.g&&e.color?.b===u.color?.b&&e.color?.a===u.color?.a));b=d.reduce(((e,t)=>t?.backgroundColor?e+1:e),0);const r=d.reduce(((e,t)=>0===t?.backgroundColor?.r&&0===t?.backgroundColor?.g&&0===t?.backgroundColor?.b?e+1:e),0);if(h=b-r>0?g:f,E=b>0||!1===e,E){const{textSetHeight:e,textSetWidth:n}=a[0],r=e=>Math.min.apply(null,a.map((t=>t[e]))),o=r("x"),l=r("y"),i={x:o-BV,y:l-BV,width:n+48,height:e+48,backgroundColor:{color:h},type:"shape"};s.push(t(On.ELEMENT_TYPES.SHAPE,i))}}a.forEach(((e,n)=>{const r=bn(e,["id","normalizedOffsetX","normalizedOffsetY","textSetWidth","textSetHeight"]);if(o&&!c){const t=0===h.r?p:m,a=E?{color:t}:d[n];"text"===e.type&&a.color&&(r.content=i(r.content,a)),"shape"===e.type&&u.color&&(e.border?r.border.color=u:r.backgroundColor=u)}s.push(t(e.type,r))})),r({elementIds:s.map((e=>{let{id:t}=e;return t}))})}),[n,e,t,r]),o=(0,u.useCallback)(((e,t)=>{let{offsetX:n,offsetY:r}=t;if(!e.length)return;const o=e.map((e=>{const t=e.normalizedOffsetX+n,a=e.normalizedOffsetY+r,{width:o,height:l}=e;return t>ee.PAGE_WIDTH||t+o<0||a>ee.FULLBLEED_HEIGHT||a+l<-ee.DANGER_ZONE_HEIGHT?null:{...e,x:t,y:a}})).filter((e=>e));a(o,!1)}),[a]);return{insertTextSet:a,insertTextSetByOffset:o}};const HV=function(e){if(!e)return"00:00:00";let t=e/1e3;const n=parseInt(t/3600);t%=3600;const r=parseInt(t/60);return t%=60,`${ae(n)}:${ae(r)}:${ae(t)}`};const UV=function(e){if(!e)return 0;const t=e.split(":");if(3!==t.length)return 0;const n=parseFloat(t[2])+60*parseInt(t[1])+3600*parseInt(t[0]);return Math.round(1e3*n)};const jV=function(){const{isEditing:e,isTrimMode:t,setEditingElementWithState:n,clearEditing:r}=Vs((e=>{let{state:{isEditing:t,editingElementState:{isTrimMode:n}={}},actions:{setEditingElementWithState:r,clearEditing:a}}=e;return{isEditing:t,isTrimMode:n,setEditingElementWithState:r,clearEditing:a}})),{selectedElement:a}=Ya((e=>{let{state:{selectedElements:t}}=e;return{selectedElement:1===t.length?t[0]:null}})),{actions:{getMediaById:o}}=W(),[l,i]=(0,u.useState)(null),{isCurrentResourceUploading:s}=Bi((e=>{let{state:{isCurrentResourceUploading:t}}=e;return{isCurrentResourceUploading:t}})),c=(0,u.useCallback)((()=>{const{resource:e}=a,{trimData:t}=e,n={element:a,resource:e,start:0,end:null};o&&t?.original?(i(null),o(t.original).then((e=>({element:a,resource:e,start:UV(t.start),end:UV(t.end)})),(()=>n)).then((e=>i(e)))):i(n)}),[o,a]),d=(0,u.useCallback)((()=>{e?r():(n(a.id,{isTrimMode:!0,hasEditMenu:!0,showOverflow:!1}),c()),(0,P.trackEvent)("video_trim_mode_toggled",{status:e?"closed":"open"})}),[e,r,n,a,c]),{isTranscodingEnabled:p}=Ja(),m=(0,u.useMemo)((()=>{if("video"!==a?.type||!a?.resource)return!1;const{id:e,isExternal:t}=a.resource;return p&&!t&&!s(e)}),[a,p,s]);return{isTrimMode:Boolean(e&&t),hasTrimMode:m,toggleTrimMode:d,videoData:l}};const zV=function(e){const[t,n]=(0,u.useState)(null),[r,a]=(0,u.useState)(null),[o,l]=(0,u.useState)(null),[i,s]=(0,u.useState)(null),[c,d]=(0,u.useState)(null),[p,m]=(0,u.useState)(null),[f,g]=(0,u.useState)(null),[h,b]=(0,u.useState)(!1),E=(0,u.useRef)(!1);(0,u.useEffect)((()=>{f&&(E.current||(h?f.pause():(f.currentTime=r/1e3,f.play())))}),[f,h,r]);const y=f?f.paused:null;(0,u.useEffect)((()=>{h||(E.current=y)}),[y,h]),(0,u.useEffect)((()=>{if(f&&e)return f.addEventListener("timeupdate",c),f.addEventListener("loadedmetadata",o),()=>{f.removeEventListener("timeupdate",c),f.removeEventListener("loadedmetadata",o)};function t(e){f.currentTime=e/1e3,f.play()}function o(r){const o=Math.floor(1e3*r.target.duration);a(e.start),l(e.start),n(e.start),s(e.end??o),d(e.end??o),m(o),t(e.start)}function c(e){const a=Math.floor(1e3*e.target.currentTime);n(Math.min(a,i)),a>i&&!E.current&&t(r)}}),[r,i,e,f]);const _=(0,u.useCallback)((e=>{e=Math.min(i-100,e),e=Math.max(0,e),a(e),f.currentTime=e/1e3}),[f,i]),v=(0,u.useCallback)((e=>{e=Math.max(r+100,e),e=Math.min(p,e),s(e),f.currentTime=e/1e3}),[f,r,p]);return{hasChanged:(0,u.useMemo)((()=>r!==o||i!==c),[r,o,i,c]),currentTime:t,startOffset:r,endOffset:i,maxOffset:p,setStartOffset:_,setEndOffset:v,setVideoNode:g,setIsDraggingHandles:b}};const GV=function VideoTrimProvider(e){let{children:t}=e;const{trimExistingVideo:n}=Bi((e=>{let{actions:{trimExistingVideo:t}}=e;return{trimExistingVideo:t}})),{isTrimMode:r,hasTrimMode:a,toggleTrimMode:o,videoData:l}=jV(),{hasChanged:i,currentTime:s,startOffset:d,endOffset:p,maxOffset:m,setStartOffset:f,setEndOffset:g,setVideoNode:h,setIsDraggingHandles:b}=zV(l),E=(0,u.useCallback)((()=>{const{resource:e,element:t}=l;if(!e)return;const r=Math.round(p/1e3-d/1e3);n({resource:{...e,length:r,lengthFormatted:oe(r)},canvasResourceId:t.resource.id,elementId:t.id,start:HV(d),end:HV(p)}),(0,P.trackEvent)("video_trim",{original_length:e.length,new_length:r,start_offset:d,end_offset:p}),o()}),[p,d,n,o,l]),y={state:{videoData:l,hasChanged:i,isTrimMode:r,hasTrimMode:a,currentTime:s,startOffset:d,endOffset:p,maxOffset:m},actions:{performTrim:E,toggleTrimMode:o,setVideoNode:h,setStartOffset:f,setEndOffset:g,setIsDraggingHandles:b}};return c.createElement(HM.Provider,{value:y},t)},YV=p.default.div.withConfig({displayName:"layout__Area",componentId:"sc-1encx56-0"})(["grid-area:",";position:relative;overflow:hidden;z-index:",";"],(e=>{let{area:t}=e;return t}),(e=>{let{zIndex:t}=e;return t})),ZV=(0,p.default)(YV).attrs({area:"canv",zIndex:1}).withConfig({displayName:"layout__CanvasArea",componentId:"sc-1encx56-1"})([""]),WV=(0,p.default)(YV).attrs({area:"sidebar",zIndex:2}).withConfig({displayName:"layout__SidebarArea",componentId:"sc-1encx56-2"})([""]);const VV=function Workspace(e){let{header:t,footer:n}=e;const{editingElementState:r}=Vs((e=>({editingElementState:e.state.editingElementState})));return c.createElement(GV,null,c.createElement(Hr.RichTextProvider,{editingState:r},c.createElement(WV,null,c.createElement(B,null,c.createElement(ef,null))),c.createElement(ZV,null,c.createElement(B,null,c.createElement(DV,{header:t,footer:n})))))},$V="OPEN_MENU",qV="CLOSE_MENU",KV="RESET",XV={isMenuOpen:!1,menuPosition:{x:0,y:0}};const QV=function(e,t){switch(t.type){case qV:return{...e,isMenuOpen:!1,menuPosition:XV.menuPosition};case $V:return{...e,isMenuOpen:!0,menuPosition:t.payload};case KV:return{...XV};default:return e}},JV=(0,We.default)(
/* translators: %s: Ctrl/Cmd + Z keyboard shortcut */
(0,d.__)("Press %s to undo the last change","web-stories"),(0,fr.prettifyShortcut)("mod+z"));const e$=()=>{const e=Cr((e=>{let{actions:t}=e;return t.undo})),{addAnimations:t,copySelectedElement:n,copiedElementState:r,selectedElement:a,selectedElementType:o,selectedElementAnimations:l,updateSelectedElements:i,isSelectedElementBackground:s}=Ya((e=>{let{state:t,actions:n}=e;return{addAnimations:n.addAnimations,copiedElementState:t.copiedElementState,copySelectedElement:n.copySelectedElement,selectedElement:t.selectedElements?.[0],selectedElementType:t.selectedElements?.[0]?.type,isSelectedElementBackground:t.selectedElements?.[0]?.isBackground,selectedElementAnimations:t.selectedElementAnimations,updateSelectedElements:n.updateSelectedElements}})),c=(0,kr.useSnackbar)((e=>e.showSnackbar)),p=(0,u.useRef)(e);p.current=e;const m=(0,u.useCallback)((()=>{n(),c({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Copied style.","web-stories"),onAction:()=>{p.current(),(0,P.trackEvent)("context_menu_action",{name:"undo_copy_styles",element:o,isBackground:s})},actionHelpText:JV}),(0,P.trackEvent)("context_menu_action",{name:"copy_styles",element:o,isBackground:s})}),[n,c,o,s]),f=(0,u.useCallback)(((e,t)=>{i({properties:n=>{const r=W_(n,e,t),a=uM({...n,...r});return{...r,...a}}})}),[i]),g=yY({pushUpdate:f}),h=(0,u.useCallback)((()=>{const e=a?.id;if(!e||o!==r.type)return;const n=l.length?{...l[0],delete:!0}:void 0,u=r.animations.map((e=>({...e,id:(0,pe.default)(),targets:[a.id]})));if(t({animations:u}),"text"===r.type&&r.styles.content){const e=function(e,t){const{textStyles:n}=nI([e.styles],{textStyles:[],colors:[]},Fe),{colors:r}=nI([e.styles],{textStyles:[],colors:[]},He),{content:a,...o}=e.styles;return{...o,...n[0],...r[0].color,animation:t,border:o.border||null}}(r,n);g(e)}else i({properties:e=>W_(e,{...r.styles,animation:n},!0)});c({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Pasted style.","web-stories"),onAction:()=>{p.current(),(0,P.trackEvent)("context_menu_action",{name:"undo_paste_styles",element:o,isBackground:s})},actionHelpText:JV}),(0,P.trackEvent)("context_menu_action",{name:"paste_styles",element:o,isBackground:s})}),[t,r,g,a,l,c,i,o,s]);return{copiedElementType:r?.type,handleCopyStyles:m,handlePasteStyles:h}},t$=()=>{const{clearBackgroundElement:e,duplicateElementsById:t,selectedElements:n,setBackgroundElement:r,updateElementsById:a,deleteGroupById:o,addGroup:l,groups:i,elements:s,arrangeElement:c}=Ya((e=>{let{state:t,actions:n}=e;return{clearBackgroundElement:n.clearBackgroundElement,duplicateElementsById:n.duplicateElementsById,selectedElements:t.selectedElements,setBackgroundElement:n.setBackgroundElement,updateElementsById:n.updateElementsById,addGroup:n.addGroup,deleteGroupById:n.deleteGroupById,groups:t.currentPage.groups,elements:t.currentPage?.elements||[],arrangeElement:n.arrangeElement}})),p=(0,kr.useSnackbar)((e=>e.showSnackbar)),m=Vs((e=>{let{actions:t}=e;return t.setEditingElement})),f=Cr((e=>{let{actions:t}=e;return t.undo})),g=(0,u.useRef)(f);g.current=f;return{handleDuplicateSelectedElements:(0,u.useCallback)((()=>{n.length&&(t({elementIds:n.map((e=>{let{id:t}=e;return t}))}),p({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Duplicated elements.","web-stories"),onAction:()=>{g.current(),(0,P.trackEvent)("context_menu_action",{name:"undo_duplicate_elements",elements:n.map((e=>e.type))})},actionHelpText:JV}),(0,P.trackEvent)("context_menu_action",{name:"duplicate_elements",elements:n.map((e=>e.type))}))}),[t,n,p]),handleGroupSelectedElements:(0,u.useCallback)((()=>{if(!n.length)return;const e=(0,pe.default)(),t=ys(i);l({groupId:e,name:t}),a({elementIds:n.map((e=>{let{id:t}=e;return t})),properties:t=>W_(t,{groupId:e},!0)});const r=Math.max(...n.map((e=>s.findIndex((t=>{let{id:n}=t;return n===e?.id})))));for(const[e,t]of n.reverse().entries()){if(s.findIndex((e=>{let{id:n}=e;return n===t?.id}))!==r){const n=r-e;c({elementId:t.id,position:n})}}}),[n,a,l,i,c,s]),handleUngroupSelectedElements:(0,u.useCallback)((()=>{n.length&&(o({groupId:n[0]?.groupId}),a({elementIds:n.map((e=>{let{id:t}=e;return t})),properties:e=>W_(e,{groupId:null},!0)}))}),[n,a,o]),handleOpenScaleAndCrop:(0,u.useCallback)((e=>{const t=n?.[0];t&&(m(t.id,e),(0,P.trackEvent)("context_menu_action",{name:"open_scale_and_crop",element:t.type,isBackground:t.isBackground}))}),[n,m]),handleSetPageBackground:(0,u.useCallback)((()=>{const e=n?.[0];e&&!e.isBackground&&(r({elementId:e.id}),p({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Set page background.","web-stories"),onAction:()=>{g.current(),(0,P.trackEvent)("context_menu_action",{name:"undo_set_page_background",element:e.type,isBackground:e.isBackground})},actionHelpText:JV}),(0,P.trackEvent)("context_menu_action",{name:"set_as_page_background",element:e.type,isBackground:e.isBackground}))}),[n,r,p]),handleRemovePageBackground:(0,u.useCallback)((()=>{const t=n?.[0];t&&t.isBackground&&(a({elementIds:[t.id],properties:e=>W_(e,{isBackground:!1,opacity:100,overlay:null},!0)}),e(),p({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Removed page background.","web-stories"),onAction:()=>{g.current(),(0,P.trackEvent)("context_menu_action",{name:"undo_remove_page_background",elements:t.type,isBackground:t.isBackground})},actionHelpText:JV}),(0,P.trackEvent)("context_menu_action",{name:"remove_media_from_background",element:t.type,isBackground:t.isBackground}))}),[e,n,p,a])}},n$=()=>{const{arrangeElement:e,elements:t,selectedElement:n}=Ya((e=>{let{state:t,actions:n}=e;return{arrangeElement:n.arrangeElement,elements:t.currentPage?.elements||[],selectedElement:t.selectedElements?.[0]}})),r=t.findIndex((e=>{let{id:t}=e;return t===n?.id})),a=n&&!n.isBackground&&r>1,o=n&&!n.isBackground&&r<t.length-1,l=(0,u.useCallback)((()=>{if(!a)return;const o=t.findLastIndex(((e,t)=>t<r&&!e.groupId)),l=1===r?r:o;e({elementId:n.id,position:l}),(0,P.trackEvent)("context_menu_action",{name:"send_backward",element:n.type,isBackground:n.isBackground})}),[e,a,r,n,t]),i=(0,u.useCallback)((()=>{a&&(e({elementId:n.id,position:1}),(0,P.trackEvent)("context_menu_action",{name:"send_to_back",element:n.type}))}),[e,a,n]),s=(0,u.useCallback)((()=>{if(!o)return;const a=t.findIndex(((e,n)=>n>r&&!e.groupId||n===t.length-1)),l=r>=t.length-1?r:a;e({elementId:n.id,position:l}),(0,P.trackEvent)("context_menu_action",{name:"bring_forward",element:n.type})}),[e,o,r,t,n]),c=(0,u.useCallback)((()=>{o&&(e({elementId:n.id,position:t.length-1}),(0,P.trackEvent)("context_menu_action",{name:"bring_to_front",element:n.type}))}),[e,o,t,n]);return{canElementMoveBackwards:a,canElementMoveForwards:o,handleBringForward:s,handleBringToFront:c,handleSendBackward:l,handleSendToBack:i}},r$=()=>{const{addPageAt:e,currentPage:t,deleteCurrentPage:n,isSelectedElementBackground:r,pageLength:a,selectedElementType:o}=Ya((e=>{let{state:t,actions:n}=e;return{addPageAt:n.addPageAt,currentPage:t.currentPage,deleteCurrentPage:n.deleteCurrentPage,isSelectedElementBackground:t.selectedElements?.[0]?.background||!1,pageLength:t.pages?.length||1,selectedElementType:t.selectedElements?.[0]?.type||null}}));return{handleAddPageAtPosition:(0,u.useCallback)((t=>{let n=Boolean(t)||0===t?t:a-1;n=n>a?a-1:n,n=n<0?0:n,e({page:(0,On.createPage)(),position:n}),(0,P.trackEvent)("context_menu_action",{name:"page_added",element:o,isBackground:r})}),[e,r,a,o]),handleDuplicatePage:(0,u.useCallback)((()=>{e({page:(0,On.duplicatePage)(t),position:null})}),[e,t]),handleDeletePage:(0,u.useCallback)((()=>{n(),(0,P.trackEvent)("context_menu_action",{name:"page_deleted",element:o,isBackground:r})}),[n,r,o])}},a$=()=>{const{addGlobalPreset:e}=oI({presetType:Fe}),{addGlobalPreset:t}=oI({presetType:He}),n=iY({onEmpty:Lt}),{deleteGlobalColor:r}=yI({onEmpty:Lt}),a=Ya((e=>{let{state:t}=e;return t.selectedElements?.[0]})),o=(0,kr.useSnackbar)((e=>e.showSnackbar)),l=Cr((e=>{let{actions:t}=e;return t.undo}));(0,u.useRef)(l).current=l;return{handleAddTextPreset:(0,u.useCallback)((t=>{const r=e(t);o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)('Saved style to "Saved Styles".',"web-stories"),onAction:()=>{n(r),(0,P.trackEvent)("context_menu_action",{name:"remove_text_preset",element:a?.type})},actionHelpText:JV}),(0,P.trackEvent)("context_menu_action",{name:"add_text_preset",element:a?.type})}),[e,n,a?.type,o]),handleAddColorPreset:(0,u.useCallback)((e=>{const n=t(e);o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)('Added color to "Saved Colors".',"web-stories"),onAction:()=>{r(n),(0,P.trackEvent)("context_menu_action",{name:"remove_color_preset",element:a?.type})},actionHelpText:JV}),(0,P.trackEvent)("context_menu_action",{name:"add_color_preset",element:a?.type})}),[t,r,a?.type,o])}};const o$=function RightClickMenuProvider(e){let{children:t}=e;const[{isMenuOpen:n,menuPosition:r},a]=(0,u.useReducer)(QV,XV),{handleCopyStyles:o,handlePasteStyles:l}=e$(),i=(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation();let t=e?.clientX,n=e?.clientY;if(!t&&!n){const r=e.target.getBoundingClientRect();t=r.x,n=r.y}a({type:$V,payload:{x:t,y:n}}),(0,P.trackEvent)("context_menu_action",{name:"context_menu_opened"})}),[]),s=(0,u.useCallback)((()=>{n&&a({type:qV})}),[n]);(0,fr.useGlobalKeyDownEffect)({key:["mod+alt+o"]},(e=>{e.preventDefault(),o()}),[o]),(0,fr.useGlobalKeyDownEffect)({key:["mod+alt+p"]},(e=>{e.preventDefault(),l()}),[l]);const d=(0,u.useMemo)((()=>({isMenuOpen:n,menuPosition:r,onCloseMenu:s,onOpenMenu:i})),[s,i,n,r]);return c.createElement(Sc.Provider,{value:d},t)};var l$=n(8682);const i$=(0,p.default)($e.Text).attrs({forwardedAs:"kbd",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"shortcut__StyledText",componentId:"sc-74dfi9-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const s$=function Shortcut(e){return c.createElement(i$,e)},c$=p.default.div.withConfig({displayName:"suffix__Suffix",componentId:"sc-1l1uahg-0"})(["position:relative;svg{width:32px;color:",";position:absolute;right:-14px;top:-16px;}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),d$=c$;function u$(){return u$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u$.apply(this,arguments)}const p$=(0,p.default)(hR.default).withConfig({displayName:"item__StyledButton",componentId:"sc-p2jje0-0"})(["",""],(e=>{let{supportsIcon:t}=e;return t&&"\n    svg {\n      width: 32px;\n      position: absolute;\n      margin-left: -12px;\n    }\n    span {\n      padding-left: 18px;\n      font-size: 12px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  "}));const m$=(0,u.forwardRef)((function MenuItemWithRef(e,t){let{label:n,shortcut:r,icon:a,SuffixIcon:o,...l}=e;return c.createElement(p$,u$({ref:t},l),a,n,r&&c.createElement(s$,null,r.display),o&&c.createElement(d$,null,c.createElement(o,null)))}));m$.propTypes={label:Ma().oneOfType([Ma().string,Ma().object]),shortcut:Ma().shape({display:Ma().object.isRequired,title:Ma().string}),icon:Ma().node,SuffixIcon:Ma().object};const f$=m$;function g$(){return g$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g$.apply(this,arguments)}const h$=function SubMenuTrigger(e){let{openSubMenu:t,closeSubMenu:n,isSubMenuOpen:r,isRTL:a=!1,subMenuRef:o,parentMenuRef:l,...i}=e;const s=(0,u.useRef)(),d=(0,u.useRef)({}),{setFocusedId:p}=(0,l$.default)((e=>{let{actions:t}=e;return{setFocusedId:t.setFocusedId}})),m=e=>{const{x:t,y:n,width:r,height:a}=e.getBoundingClientRect(),{x:o,y:l}=d.current;if(void 0===o||void 0===l)return!0;return o<t-2||o>t+r+2||l<n-2||l>n+a+2},f=(0,u.useDebouncedCallback)((()=>{s.current&&o.current?.firstChild&&m(s.current)&&m(o.current.firstChild)&&n()}),200);(0,u.useEffect)((()=>{if(r&&o.current){const t=(e=o.current,Array.from(e.querySelectorAll(Xs.FOCUSABLE_SELECTORS.join(", "))));t[0].focus(),p(t[0].id)}var e}),[r,o,p]),(0,u.useEffect)((()=>{const e=l.current?.querySelector('[role="dialog"]');if(!r||!e)return;const t=e=>{d.current.x=e.clientX,d.current.y=e.clientY,f()};return e.addEventListener("pointermove",t),()=>{e.removeEventListener("pointermove",t)}}),[r,l,f]);const g=(0,u.useCallback)((e=>{const{code:o}=e;[Xs.KEYS.SPACE,Xs.KEYS.ENTER].includes(o)?r?n():t():(!a&&Xs.KEYS.RIGHT===o||(a&&Xs.KEYS.LEFT)===o)&&(r||t())}),[t,n,r,a]);return(0,fr.useKeyDownEffect)(s,{key:["enter","space","left","right"]},g,[g]),c.createElement(f$,g$({},i,{ref:s,onPointerEnter:t,onPointerLeave:()=>{d.current={},f()},onClick:e=>e.preventDefault(),"aria-haspopup":!0,"aria-expanded":r,dismissOnClick:!1}))},b$={ADD_NEW_PAGE_AFTER:(0,d.__)("Add New Page After","web-stories"),ADD_NEW_PAGE_BEFORE:(0,d.__)("Add New Page Before","web-stories"),ADD_TO_COLOR_PRESETS:(0,d.__)("Add Color to “Saved Colors”","web-stories"),ADD_TO_TEXT_PRESETS:(0,d.__)("Add Style to “Saved Styles”","web-stories"),BRING_FORWARD:(0,d.__)("Bring Forward","web-stories"),BRING_TO_FRONT:(0,d.__)("Bring to Front","web-stories"),BROWSE_STOCK_IMAGES_AND_VIDEO:(0,d.__)("Browse Stock Images and Video","web-stories"),BROWSE_PAGE_TEMPLATES:(0,d.__)("Browse Page Templates","web-stories"),CLEAR_IMAGE_STYLES:(0,d.__)("Clear Image Styles","web-stories"),CLEAR_SHAPE_STYLES:(0,d.__)("Clear Shape Styles","web-stories"),CLEAR_VIDEO_STYLES:(0,d.__)("Clear Video Styles","web-stories"),CLEAR_STYLES:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,d._n)("Clear style","Clear styles",e,"web-stories")},CHOOSE_IMAGE_OR_VIDEO:(0,d.__)("Choose Image or Video","web-stories"),COPY_IMAGE_STYLES:(0,d.__)("Copy Image Styles","web-stories"),COPY_SHAPE_STYLES:(0,d.__)("Copy Shape Styles","web-stories"),COPY_VIDEO_STYLES:(0,d.__)("Copy Video Styles","web-stories"),COPY_STYLES:(0,d.__)("Copy Style","web-stories"),DELETE_PAGE:(0,d.__)("Delete Page","web-stories"),DETACH_IMAGE_FROM_BACKGROUND:(0,d.__)("Detach Image From Background","web-stories"),DETACH_VIDEO_FROM_BACKGROUND:(0,d.__)("Detach Video From Background","web-stories"),DUPLICATE_PAGE:(0,d.__)("Duplicate Page","web-stories"),DUPLICATE_ELEMENTS:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,d._n)("Duplicate Element","Duplicate Elements",e,"web-stories")},GROUP_LAYERS:(0,d.__)("Group Layers","web-stories"),UNGROUP_LAYERS:(0,d.__)("Ungroup Layers","web-stories"),UNGROUP_LAYER:(0,d.__)("Remove from Group","web-stories"),LOCK_UNLOCK:(0,d.__)("Lock/Unlock","web-stories"),RENAME_LAYER:(0,d.__)("Rename Layer","web-stories"),PASTE_IMAGE_STYLES:(0,d.__)("Paste Image Styles","web-stories"),PASTE_SHAPE_STYLES:(0,d.__)("Paste Shape Styles","web-stories"),PASTE_VIDEO_STYLES:(0,d.__)("Paste Video Styles","web-stories"),PASTE_STYLES:(0,d.__)("Paste Style","web-stories"),SCALE_AND_CROP_BACKGROUND_IMAGE:(0,d.__)("Scale & Crop Background Image","web-stories"),SCALE_AND_CROP_BACKGROUND_VIDEO:(0,d.__)("Scale & Crop Background Video","web-stories"),SCALE_AND_CROP_IMAGE:(0,d.__)("Scale & Crop Image","web-stories"),SCALE_AND_CROP_VIDEO:(0,d.__)("Scale & Crop Video","web-stories"),SEND_BACKWARD:(0,d.__)("Send Backward","web-stories"),SEND_TO_BACK:(0,d.__)("Send to Back","web-stories"),SET_AS_PAGE_BACKGROUND:(0,d.__)("Set as Page Background","web-stories"),TRIM_VIDEO:(0,d.__)("Trim Video","web-stories"),UPLOAD_IMAGE_OR_VIDEO:(0,d.__)("Upload Image or Video","web-stories"),USE_SHAPE_AS_MASK:(0,d.__)("Use Shape as a Mask","web-stories"),REMOVE_MASK:(0,d.__)("Unmask","web-stories")},E$=(0,p.default)($e.Text).attrs({forwardedAs:"kbd",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"constants__StyledKbd",componentId:"sc-m1qol5-0"})(["color:inherit;:not(:last-child){margin-right:4px;}"]),y$={SEND_BACKWARD:{display:c.createElement(fr.Shortcut,{shortcut:"mod down",component:E$}),title:(0,fr.createShortcutAriaLabel)("mod down")},SEND_TO_BACK:{display:c.createElement(fr.Shortcut,{shortcut:"mod shift down",component:E$}),title:(0,fr.createShortcutAriaLabel)("mod shift down")},BRING_FORWARD:{display:c.createElement(fr.Shortcut,{shortcut:"mod up",component:E$}),title:(0,fr.createShortcutAriaLabel)("mod up")},BRING_TO_FRONT:{display:c.createElement(fr.Shortcut,{shortcut:"mod shift up",component:E$}),title:(0,fr.createShortcutAriaLabel)("mod shift up")},DELETE:{display:c.createElement(fr.Shortcut,{shortcut:"delete",component:E$}),title:(0,fr.createShortcutAriaLabel)("delete")},COPY_STYLES:{display:c.createElement(fr.Shortcut,{shortcut:"alt mod O",component:E$}),title:(0,fr.createShortcutAriaLabel)("alt mod O")},PASTE_STYLES:{display:c.createElement(fr.Shortcut,{shortcut:"alt mod P",component:E$}),title:(0,fr.createShortcutAriaLabel)("alt mod P")}},_$=(0,p.default)(lh).withConfig({displayName:"useLayerSelect__ReversedIcon",componentId:"sc-169lxcx-0"})(["transform:rotate(180deg);"]);const v$=function(e){let{menuItemProps:t,menuPosition:n,isMenuOpen:r}=e;const{isRTL:a}=U(),[o,l]=(0,u.useState)(!1),i=Vs((e=>{let{state:{nodesById:t}}=e;return t})),{currentPage:s,selectedElements:p,setSelectedElementsById:m}=Ya((e=>{let{state:{currentPage:t,selectedElements:n},actions:{setSelectedElementsById:r}}=e;return{currentPage:t,selectedElements:n,setSelectedElementsById:r}})),f=(0,Rc.default)((e=>{let{actions:{getBox:t}}=e;return t}));(0,u.useEffect)((()=>{r||l(!1)}),[r]);const{x:g,y:h}=n,b=(0,u.useCallback)((()=>{if(!s?.elements?.length||!Object.keys(i)?.length)return[];const e=new(os().Vector)(g,h),t=s.elements.find((e=>{let{isBackground:t}=e;return t})),n=i[t.id],{x:r,y:a,width:o,height:l}=n.getBoundingClientRect(),c=new(os().Box)(new(os().Vector)(r,a),o,l).toPolygon(),d=-f(t).y,u=s.elements.map((e=>{if(e.isBackground)return{element:e,polygon:c};const{id:t,rotationAngle:n}=e;if(!i[t])return null;const r=f(e),a=new(os().Vector)(c.pos.x+r.x+r.width/2,c.pos.y+d+r.y+r.height/2),o=new(os().Box)(a,r.width,r.height).toPolygon(),l=new(os().Vector)(-r.width/2,-r.height/2);return o.setOffset(l),o.setAngle(n*Math.PI/180),{element:e,polygon:o}})).map((t=>{let{element:n,polygon:r}=t;return os().pointInPolygon(e,r)?n:null})).filter(Boolean);return u.reverse(),u}),[s,f,g,h,i]),E=(0,u.useMemo)((()=>{if(!r||0===p.length)return[];const e=b();return 1===e.length&&e[0].id===p[0].id?[]:e.map((e=>{const{id:n,isBackground:r,type:a}=e;return{key:n,supportsIcon:!0,icon:p[0].id===n?c.createElement(rh.default,null):null,label:c.createElement("span",null,(0,On.getLayerName)(e)),onClick:()=>{m({elementIds:[n]}),(0,P.trackEvent)("context_menu_action",{name:"layer_selected",element:a,isBackground:r})},...t}}))}),[b,r,t,m,p]);return E.length>0?{label:(0,d.__)("Select Layer","web-stories"),openSubMenu:()=>l(!0),closeSubMenu:()=>l(!1),isSubMenuOpen:o,subMenuItems:o?E:[],SuffixIcon:a?_$:lh,...t}:null};const w$=function LayerLock(){const e=Ya((e=>e.actions.updateSelectedElements)),t=(0,u.useCallback)((()=>e({properties:e=>({...e,isLocked:!e.isLocked})})),[e]);return(0,C.useFeature)("layerLocking")?c.createElement(hR.default,{onClick:t},b$.LOCK_UNLOCK):null};const T$=function LayerName(){const{selectedElementIds:e}=Ya((e=>{let{state:t}=e;return{selectedElementIds:t.selectedElementIds}})),{setRenamableLayer:t}=Vs((e=>{let{state:t,actions:n}=e;return{setRenamableLayer:n.setRenamableLayer,renamableLayer:t.renamableLayer}})),n=(0,u.useCallback)((()=>{t({elementId:e[0]})}),[t,e]);return(0,C.useFeature)("layerNaming")?c.createElement(c.Fragment,null,c.createElement(TR.default,null),c.createElement(hR.default,{onClick:n},b$.RENAME_LAYER)):null};const S$=function LayerUngroup(){const{updateSelectedElements:e,selectedElements:t}=Ya((e=>{let{state:t,actions:n}=e;return{updateSelectedElements:n.updateSelectedElements,selectedElements:t.selectedElements}})),n=(0,u.useCallback)((()=>e({properties:e=>({...e,groupId:null})})),[e]),r=(0,C.useFeature)("layerGrouping"),a=t.some((e=>e.groupId));return r&&a?c.createElement(hR.default,{onClick:n},b$.UNGROUP_LAYER):null},C$=p.default.div.withConfig({displayName:"shared__SubMenuContainer",componentId:"sc-anftx6-0"})(["position:absolute;top:","px;left:","px;z-index:9999;"],(e=>{let{position:t}=e;return t?.y??0}),(e=>{let{position:t}=e;return t?.x??0}));C$.propTypes={position:Ma().shape({x:Ma().number,y:Ma().number})};const I$=210,x$=(0,d.__)("Select a layer","web-stories");Ma().oneOfType([Ma().func,Ma().shape({current:Ma().instanceOf(Element)})]).isRequired;function A$(){return A$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A$.apply(this,arguments)}const k$=function ForegroundMediaMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElement:r}=Ya((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElement:t.selectedElements?.[0]}})),{handleCopyStyles:a,handlePasteStyles:o}=e$(),{handleDuplicateSelectedElements:l,handleOpenScaleAndCrop:i,handleSetPageBackground:s}=t$(),{canElementMoveBackwards:d,canElementMoveForwards:p,handleSendBackward:m,handleSendToBack:f,handleBringForward:g,handleBringToFront:h}=n$(),{hasShapeMask:b,removeShapeMask:E}=Uj(r),y=Bi((e=>e.state.canTranscodeResource)),{hasTrimMode:_,toggleTrimMode:v}=UM((e=>{let{state:t,actions:n}=e;return{hasTrimMode:t.hasTrimMode,toggleTrimMode:n.toggleTrimMode}})),w=(0,u.useRef)(),{menuPosition:T,onCloseMenu:S}=Cc(),C=v$({menuPosition:T,isMenuOpen:!0}),{closeSubMenu:I,isSubMenuOpen:x,subMenuItems:A,...k}=C||{},O="video"===r?.type,P=O?b$.SCALE_AND_CROP_VIDEO:b$.SCALE_AND_CROP_IMAGE,N=O?b$.COPY_VIDEO_STYLES:b$.COPY_IMAGE_STYLES,R=O?b$.PASTE_VIDEO_STYLES:b$.PASTE_IMAGE_STYLES,M=O&&_;return c.createElement(c.Fragment,null,C&&c.createElement(c.Fragment,null,c.createElement(h$,A$({closeSubMenu:I,parentMenuRef:t,subMenuRef:w,isSubMenuOpen:x},k)),c.createElement(C$,{ref:w,position:{x:(t.current.firstChild?.offsetWidth||I$)+2,y:0}},c.createElement(XN.default,{onDismiss:S,isOpen:x,onCloseSubMenu:I,"aria-label":x$,isSubMenu:!0,parentMenuRef:t},A.map((e=>{let{key:t,...n}=e;return c.createElement(f$,A$({key:t},n))})))),c.createElement(TR.default,null)),c.createElement(hR.default,{onClick:l},b$.DUPLICATE_ELEMENTS(1)),b&&c.createElement(hR.default,{onClick:E},b$.REMOVE_MASK),c.createElement(TR.default,null),c.createElement(hR.default,{disabled:!d,onClick:m},b$.SEND_BACKWARD,c.createElement(s$,null,y$.SEND_BACKWARD.display)),c.createElement(hR.default,{disabled:!d,onClick:f},b$.SEND_TO_BACK,c.createElement(s$,null,y$.SEND_TO_BACK.display)),c.createElement(hR.default,{disabled:!p,onClick:g},b$.BRING_FORWARD,c.createElement(s$,null,y$.BRING_FORWARD.display)),c.createElement(hR.default,{disabled:!p,onClick:h},b$.BRING_TO_FRONT,c.createElement(s$,null,y$.BRING_TO_FRONT.display)),c.createElement(T$,null),c.createElement(w$,null),c.createElement(S$,null),c.createElement(TR.default,null),c.createElement(hR.default,{onClick:s},b$.SET_AS_PAGE_BACKGROUND),c.createElement(hR.default,{onClick:i},P),M&&c.createElement(hR.default,{disabled:!y(r?.resource),onClick:v},b$.TRIM_VIDEO),c.createElement(hR.default,{onClick:a},N,c.createElement(s$,null,y$.COPY_STYLES.display)),c.createElement(hR.default,{disabled:n!==r?.type,onClick:o},R,c.createElement(s$,null,y$.PASTE_STYLES.display)))},O$=()=>{const{selectedElements:e,combineElements:t}=Ya((e=>{let{state:t,actions:n}=e;return{selectedElements:t.selectedElements,combineElements:n.combineElements}})),[n,r]=(0,u.useState)({}),[a,o]=(0,u.useState)(!1);(0,u.useEffect)((()=>{if(e?.length>2)return void o(!1);let t,n;if(e.forEach((e=>{const{isMedia:r}=(0,On.getDefinitionForType)(e.type);"shape"===e.type&&(n=e),r&&(t=e)})),n&&t)return o(!0),void r({shape:n,target:t});o(!1)}),[e]);return{canMergeIntoMask:a,mergeIntoMask:()=>{const{target:e,shape:r}=n;e&&r&&t({firstElement:e,secondId:r.id})}}};const P$=function MultipleElementsMenu(){const{handleDuplicateSelectedElements:e,handleGroupSelectedElements:t,handleUngroupSelectedElements:n}=t$(),{canMergeIntoMask:r,mergeIntoMask:a}=O$(),o=(0,C.useFeature)("layerGrouping"),{selectedElements:l}=Ya((e=>{let{state:t}=e;return{selectedElements:t.selectedElements}})),i=l.some((e=>e.groupId)),s=l.every((e=>e.groupId&&e.groupId===l[0].groupId));return c.createElement(c.Fragment,null,c.createElement(hR.default,{onClick:e},b$.DUPLICATE_ELEMENTS(2)),r&&c.createElement(hR.default,{onClick:a},b$.USE_SHAPE_AS_MASK),o&&!s&&c.createElement(hR.default,{onClick:t},b$.GROUP_LAYERS),o&&i&&c.createElement(hR.default,{onClick:n},b$.UNGROUP_LAYERS))};function N$(){return N$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N$.apply(this,arguments)}const R$=function(e){let{parentMenuRef:t}=e;const{currentPageIndex:n,canDeletePage:r,selectedElement:a}=Ya((e=>{let{state:t}=e;return{currentPageIndex:t.currentPageIndex,canDeletePage:t.pages.length>1,selectedElement:t.selectedElements?.[0]}})),{handleOpenScaleAndCrop:o,handleRemovePageBackground:l}=t$(),{handleAddPageAtPosition:i,handleDeletePage:s,handleDuplicatePage:d}=r$(),p=Bi((e=>e.state.canTranscodeResource)),{hasTrimMode:m,toggleTrimMode:f}=UM((e=>{let{state:t,actions:n}=e;return{hasTrimMode:t.hasTrimMode,toggleTrimMode:n.toggleTrimMode}})),g=(0,u.useRef)(),{menuPosition:h,onCloseMenu:b}=Cc(),E=v$({menuPosition:h,isMenuOpen:!0}),{closeSubMenu:y,isSubMenuOpen:_,subMenuItems:v,...w}=E||{},T=a?.isDefaultBackground,S="video"===a?.type,C=S?b$.DETACH_VIDEO_FROM_BACKGROUND:b$.DETACH_IMAGE_FROM_BACKGROUND,I=S?b$.SCALE_AND_CROP_BACKGROUND_VIDEO:b$.SCALE_AND_CROP_BACKGROUND_IMAGE,x=S&&m;return c.createElement(c.Fragment,null,E&&c.createElement(c.Fragment,null,c.createElement(h$,N$({closeSubMenu:y,parentMenuRef:t,subMenuRef:g,isSubMenuOpen:_},w)),c.createElement(C$,{ref:g,position:{x:(t.current.firstChild?.offsetWidth||I$)+2,y:0}},c.createElement(XN.default,{onDismiss:b,isOpen:_,onCloseSubMenu:y,"aria-label":x$,isSubMenu:!0,parentMenuRef:t},v.map((e=>{let{key:t,...n}=e;return c.createElement(f$,N$({key:t},n))})))),c.createElement(TR.default,null)),c.createElement(hR.default,{disabled:T,onClick:l},C),c.createElement(hR.default,{disabled:T,onClick:o},I),c.createElement(TR.default,null),x&&c.createElement(c.Fragment,null,c.createElement(hR.default,{disabled:!p(a?.resource),onClick:f},C),c.createElement(TR.default,null)),c.createElement(hR.default,{onClick:()=>i(n+1)},b$.ADD_NEW_PAGE_AFTER),c.createElement(hR.default,{onClick:()=>i(n)},b$.ADD_NEW_PAGE_BEFORE),c.createElement(hR.default,{onClick:d},b$.DUPLICATE_PAGE),c.createElement(hR.default,{disabled:!r,onClick:s},b$.DELETE_PAGE))};function M$(){return M$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M$.apply(this,arguments)}const L$=function ShapeMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElementType:r}=Ya((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElementType:t.selectedElements?.[0].type}})),{handleCopyStyles:a,handlePasteStyles:o}=e$(),{handleDuplicateSelectedElements:l}=t$(),{canElementMoveBackwards:i,canElementMoveForwards:s,handleSendBackward:d,handleSendToBack:p,handleBringForward:m,handleBringToFront:f}=n$(),{handleAddColorPreset:g}=a$(),h=(0,u.useRef)(),{menuPosition:b,onCloseMenu:E}=Cc(),y=v$({menuPosition:b,isMenuOpen:!0}),{closeSubMenu:_,isSubMenuOpen:v,subMenuItems:w,...T}=y||{};return c.createElement(c.Fragment,null,y&&c.createElement(c.Fragment,null,c.createElement(h$,M$({closeSubMenu:_,parentMenuRef:t,subMenuRef:h,isSubMenuOpen:v},T)),c.createElement(C$,{ref:h,position:{x:(t.current.firstChild?.offsetWidth||I$)+2,y:0}},c.createElement(XN.default,{onDismiss:E,isOpen:v,onCloseSubMenu:_,"aria-label":x$,isSubMenu:!0,parentMenuRef:t},w.map((e=>{let{key:t,...n}=e;return c.createElement(f$,M$({key:t},n))})))),c.createElement(TR.default,null)),c.createElement(hR.default,{onClick:l},b$.DUPLICATE_ELEMENTS(1)),c.createElement(TR.default,null),c.createElement(hR.default,{disabled:!i,onClick:d},b$.SEND_BACKWARD,c.createElement(s$,null,y$.SEND_BACKWARD.display)),c.createElement(hR.default,{disabled:!i,onClick:p},b$.SEND_TO_BACK,c.createElement(s$,null,y$.SEND_TO_BACK.display)),c.createElement(hR.default,{disabled:!s,onClick:m},b$.BRING_FORWARD,c.createElement(s$,null,y$.BRING_FORWARD.display)),c.createElement(hR.default,{disabled:!s,onClick:f},b$.BRING_TO_FRONT,c.createElement(s$,null,y$.BRING_TO_FRONT.display)),c.createElement(T$,null),c.createElement(w$,null),c.createElement(S$,null),c.createElement(TR.default,null),c.createElement(hR.default,{onClick:a},b$.COPY_SHAPE_STYLES,c.createElement(s$,null,y$.COPY_STYLES.display)),c.createElement(hR.default,{disabled:n!==r,onClick:o},b$.PASTE_SHAPE_STYLES,c.createElement(s$,null,y$.PASTE_STYLES.display)),c.createElement(hR.default,{onClick:g},b$.ADD_TO_COLOR_PRESETS))};function D$(){return D$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D$.apply(this,arguments)}const B$=function StickerMenu(e){let{parentMenuRef:t}=e;const{handleDuplicateSelectedElements:n}=t$(),{canElementMoveBackwards:r,canElementMoveForwards:a,handleSendBackward:o,handleSendToBack:l,handleBringForward:i,handleBringToFront:s}=n$(),d=(0,u.useRef)(),{menuPosition:p,onCloseMenu:m}=Cc(),f=v$({menuPosition:p,isMenuOpen:!0}),{closeSubMenu:g,isSubMenuOpen:h,subMenuItems:b,...E}=f||{};return c.createElement(c.Fragment,null,f&&c.createElement(c.Fragment,null,c.createElement(h$,D$({closeSubMenu:g,parentMenuRef:t,subMenuRef:d,isSubMenuOpen:h},E)),c.createElement(C$,{ref:d,position:{x:(t.current.firstChild?.offsetWidth||I$)+2,y:0}},c.createElement(XN.default,{onDismiss:m,isOpen:h,onCloseSubMenu:g,"aria-label":x$,isSubMenu:!0,parentMenuRef:t},b.map((e=>{let{key:t,...n}=e;return c.createElement(f$,D$({key:t},n))})))),c.createElement(TR.default,null)),c.createElement(hR.default,{onClick:n},b$.DUPLICATE_ELEMENTS(1)),c.createElement(TR.default,null),c.createElement(hR.default,{disabled:!r,onClick:o},b$.SEND_BACKWARD,c.createElement(s$,null,y$.SEND_BACKWARD.display)),c.createElement(hR.default,{disabled:!r,onClick:l},b$.SEND_TO_BACK,c.createElement(s$,null,y$.SEND_TO_BACK.display)),c.createElement(hR.default,{disabled:!a,onClick:i},b$.BRING_FORWARD,c.createElement(s$,null,y$.BRING_FORWARD.display)),c.createElement(hR.default,{disabled:!a,onClick:s},b$.BRING_TO_FRONT,c.createElement(s$,null,y$.BRING_TO_FRONT.display)),c.createElement(T$,null),c.createElement(w$,null),c.createElement(S$,null))};function F$(){return F$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F$.apply(this,arguments)}const H$=function TextMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElementType:r}=Ya((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElementType:t.selectedElements?.[0].type}})),{handleCopyStyles:a,handlePasteStyles:o}=e$(),{handleDuplicateSelectedElements:l}=t$(),{canElementMoveBackwards:i,canElementMoveForwards:s,handleSendBackward:d,handleSendToBack:p,handleBringForward:m,handleBringToFront:f}=n$(),{handleAddColorPreset:g,handleAddTextPreset:h}=a$(),b=(0,u.useRef)(),{menuPosition:E,onCloseMenu:y}=Cc(),_=v$({menuPosition:E,isMenuOpen:!0}),{closeSubMenu:v,isSubMenuOpen:w,subMenuItems:T,...S}=_||{};return c.createElement(c.Fragment,null,_&&c.createElement(c.Fragment,null,c.createElement(h$,F$({closeSubMenu:v,parentMenuRef:t,subMenuRef:b,isSubMenuOpen:w},S)),c.createElement(C$,{ref:b,position:{x:(t.current.firstChild?.offsetWidth||I$)+2,y:0}},c.createElement(XN.default,{onDismiss:y,isOpen:w,onCloseSubMenu:v,"aria-label":x$,isSubMenu:!0,parentMenuRef:t},T.map((e=>{let{key:t,...n}=e;return c.createElement(f$,F$({key:t},n))})))),c.createElement(TR.default,null)),c.createElement(hR.default,{onClick:l},b$.DUPLICATE_ELEMENTS(1)),c.createElement(TR.default,null),c.createElement(hR.default,{disabled:!i,onClick:d},b$.SEND_BACKWARD,c.createElement(s$,null,y$.SEND_BACKWARD.display)),c.createElement(hR.default,{disabled:!i,onClick:p},b$.SEND_TO_BACK,c.createElement(s$,null,y$.SEND_TO_BACK.display)),c.createElement(hR.default,{disabled:!s,onClick:m},b$.BRING_FORWARD,c.createElement(s$,null,y$.BRING_FORWARD.display)),c.createElement(hR.default,{disabled:!s,onClick:f},b$.BRING_TO_FRONT,c.createElement(s$,null,y$.BRING_TO_FRONT.display)),c.createElement(T$,null),c.createElement(w$,null),c.createElement(S$,null),c.createElement(TR.default,null),c.createElement(hR.default,{onClick:a},b$.COPY_STYLES,c.createElement(s$,null,y$.COPY_STYLES.display)),c.createElement(hR.default,{disabled:n!==r,onClick:o},b$.PASTE_STYLES,c.createElement(s$,null,y$.PASTE_STYLES.display)),c.createElement(hR.default,{onClick:h},b$.ADD_TO_TEXT_PRESETS),c.createElement(hR.default,{onClick:g},b$.ADD_TO_COLOR_PRESETS))};function U$(){return U$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U$.apply(this,arguments)}const j$=function ProductMenu(e){let{parentMenuRef:t}=e;const{canElementMoveBackwards:n,canElementMoveForwards:r,handleSendBackward:a,handleSendToBack:o,handleBringForward:l,handleBringToFront:i}=n$(),s=(0,u.useRef)(),{menuPosition:d,onCloseMenu:p}=Cc(),m=v$({menuPosition:d,isMenuOpen:!0}),{closeSubMenu:f,isSubMenuOpen:g,subMenuItems:h,...b}=m||{};return c.createElement(c.Fragment,null,m&&c.createElement(c.Fragment,null,c.createElement(h$,U$({closeSubMenu:f,parentMenuRef:t,subMenuRef:s,isSubMenuOpen:g},b)),c.createElement(C$,{ref:s,position:{x:(t.current.firstChild?.offsetWidth||I$)+2,y:0}},c.createElement(XN.default,{onDismiss:p,isOpen:g,onCloseSubMenu:f,"aria-label":x$,isSubMenu:!0,parentMenuRef:t},h.map((e=>{let{key:t,...n}=e;return c.createElement(f$,U$({key:t},n))})))),c.createElement(TR.default,null)),c.createElement(hR.default,{disabled:!n,onClick:a},b$.SEND_BACKWARD,c.createElement(s$,null,y$.SEND_BACKWARD.display)),c.createElement(hR.default,{disabled:!n,onClick:o},b$.SEND_TO_BACK,c.createElement(s$,null,y$.SEND_TO_BACK.display)),c.createElement(hR.default,{disabled:!r,onClick:l},b$.BRING_FORWARD,c.createElement(s$,null,y$.BRING_FORWARD.display)),c.createElement(hR.default,{disabled:!r,onClick:i},b$.BRING_TO_FRONT,c.createElement(s$,null,y$.BRING_TO_FRONT.display)),c.createElement(T$,null),c.createElement(w$,null),c.createElement(S$,null))},z$=(0,u.createContext)({tabs:{}});const G$=function(e){return(0,u.useContextSelector)(z$,e??u.identity)};const Y$=function(){const{insertElement:e}=G$((e=>({insertElement:e.actions.insertElement}))),t=(0,u.useCallback)(((t,n)=>{Z_.default.set(t.id,{url:n,type:"cached"}),e(t.type,{resource:t})}),[e]),n=(0,u.useCallback)((e=>{t(e,e.sizes?.medium?.source_url||e.src)}),[t]);return{insertMediaElement:t,onSelect:n}};async function Z$(e){const t=await n(38803)(`./${e}.json`);return(0,mr.migrate)(t.default,t.default.version).pages.reduce(((t,n)=>{const r={minX:1/0,maxX:0,minY:1/0,maxY:0},a=n.elements.filter((e=>!e.isBackground&&Boolean(function(e,t){return e.minX=Math.min(e.minX,t.x),e.maxX=Math.max(e.maxX,t.x+t.width),e.minY=Math.min(e.minY,t.y),e.maxY=Math.max(e.maxY,t.y+t.height),e}(r,e))));return[...t,{textSetFonts:n.fonts,id:n.id,textSetCategory:e,elements:a.map((e=>({...e,normalizedOffsetX:e.x-r.minX,normalizedOffsetY:e.y-r.minY,textSetWidth:r.maxX-r.minX,textSetHeight:r.maxY-r.minY})))}]}),[])}var W$=n(52829),V$=n(65727);const $$=(0,p.default)(V$.default).withConfig({displayName:"searchInput__StyledSearchInput",componentId:"sc-145nauf-0"})(["input{",";}"],np);const q$=function WrappedSearchInput(e){let{initialValue:t,placeholder:n,onSearch:r,disabled:a=!1,incremental:o=!1,delayMs:l=500}=e;const[i,s]=(0,u.useState)(t),p=(0,u.useDebouncedCallback)((()=>{r(i)}),l),m=(0,u.useCallback)((e=>{o&&l?p():r(e)}),[p,r,l,o]),f=(0,u.useCallback)((e=>{const t=e.target.value;s(t),(o||""===t)&&m(t)}),[m,o]),g=(0,u.useCallback)((()=>{s(""),m("")}),[m]),h=(0,u.useCallback)((e=>{e.preventDefault(),m(i)}),[m,i]),b=i.length>0;return c.createElement("form",{onSubmit:h},c.createElement($$,{inputValue:i,placeholder:n,onChange:f,handleClearInput:g,disabled:a,ariaClearLabel:(0,d.__)("Clear Search","web-stories"),isOpen:b,"aria-label":(0,d.__)("Search","web-stories")}))},K$=p.default.div.withConfig({displayName:"section__Container",componentId:"sc-emh1dh-0"})(["position:relative;margin-top:28px;margin-bottom:28px;&:first-child{margin-top:0px;}"]),X$=(0,p.default)(Qu.Headline).attrs({as:"h2",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"section__Title",componentId:"sc-emh1dh-1"})(["flex:1 1 auto;color:",";margin-bottom:28px;"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));function Q$(e){let{title:t,children:n,...r}=e;return c.createElement(K$,r,c.createElement(X$,null,t),n)}p.default.h3.withConfig({displayName:"common__Title",componentId:"sc-q5ifvb-0"})(["color:",";margin:0;font-size:19px;line-height:1.4;flex:3 0 0;display:flex;align-items:center;padding:2px 0;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),p.default.div.withConfig({displayName:"common__Header",componentId:"sc-q5ifvb-1"})(["display:flex;margin:0 0 25px;"]);var J$=n(32214);const eq=function(e){let{sectionRef:t,innerContainerRef:n,isExpanded:r,setFocusedRowOffset:a,collapsedHeight:o,bottomMargin:l,topMargin:i}=e;(0,u.useLayoutEffect)((()=>{if(!t.current||!n.current)return;let e;e=r?`${n.current.offsetHeight+i+l}px`:`${o}px`,t.current.style.height=e,t.current.style.minHeight=e,a(0)}),[l,o,n,r,t,a,i])};const tq=function(e){let{innerContainerRef:t,isExpanded:n,setFocusedRowOffset:r,selectedItemId:a,itemRefs:o,offsetSpacing:l=0}=e;(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=o.current?.[a]?o.current[a]:null;!n&&e&&r(e?.offsetTop-l||0)}),[t,n,o,l,a,r]),(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=o.current?.[a]?o.current[a]:null,r=e?.offsetTop||0;for(const t of o.current){if(!t)continue;const a=e&&t.offsetTop===r;!e||a||n?t.classList.remove("invisible"):t.classList.add("invisible")}}),[t,n,a,o])},nq=p.default.div.withConfig({displayName:"chipGroup__Section",componentId:"sc-emvo4b-0"})(["height:","px;min-height:","px;background-color:",";display:flex;flex-direction:column;align-items:flex-start;flex:0 1 auto;position:relative;transition:height 0.2s,min-height 0.2s;"],80,80,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),rq=p.default.div.withConfig({displayName:"chipGroup__Container",componentId:"sc-emvo4b-1"})(["overflow:hidden;margin:","px 12px ","px 24px;"],16,20),aq=p.default.div.withConfig({displayName:"chipGroup__InnerContainer",componentId:"sc-emvo4b-2"})(["display:flex;justify-content:center;flex-wrap:wrap;position:relative;padding:4px 0;transition:transform 0.2s;column-gap:8px;row-gap:14px;"]),oq=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.CIRCLE}).withConfig({displayName:"chipGroup__ExpandButton",componentId:"sc-emvo4b-3"})(["display:flex;position:absolute;bottom:-24px;background:",";max-height:none;width:32px;height:32px;"," visibility:inherit;align-self:center;justify-content:center;align-items:center;"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary}),(e=>{let{isExpanded:t}=e;return t&&"transform: scaleY(-1);"})),lq=e=>{let{items:t,selectedItemId:n,selectItem:r,deselectItem:a,ariaLabel:o}=e;const[l,i]=(0,u.useState)(!1),s=(0,u.useRef)(),p=(0,u.useRef)(),m=(0,u.useRef)([]),[f,g]=(0,u.useState)(0),h=(0,u.useCallback)(((e,t)=>{e&&null!==t?a():(i(!1),r(t))}),[a,r]),b=(0,u.useCallback)((()=>i((e=>!e))),[]);eq({sectionRef:s,innerContainerRef:p,isExpanded:l,setFocusedRowOffset:g,collapsedHeight:80,bottomMargin:20,topMargin:16}),tq({isExpanded:l,innerContainerRef:p,selectedItemId:n,setFocusedRowOffset:g,itemRefs:m,offsetSpacing:4});const E=t.length>0;$C({ref:s},[l]),(0,fr.useKeyDownEffect)(s,l?"":"down",(()=>E&&i(!0)),[l,E]);const y=(0,u.useMemo)((()=>`pill-group-${(0,pe.default)()}`),[]);return c.createElement(nq,{ref:s},E&&c.createElement(c.Fragment,null,c.createElement(rq,{id:y,isExpanded:l,role:"listbox","aria-label":o||(0,d.__)("List of filtering options","web-stories")},c.createElement(aq,{role:"presentation",ref:p,style:{transform:`translateY(-${f}px`}},t.map(((e,t)=>{const{id:r,label:a}=e,o=r===n,l=o||!o&&0===t?0:-1;return c.createElement(J$.Chip,{key:r,role:"option",ref:e=>{m.current[r]=e},active:o,"aria-selected":o,onClick:()=>h(o,r),tabIndex:l},a)})))),c.createElement(oq,{onClick:b,isExpanded:l,"aria-controls":y,"aria-expanded":l,"aria-label":(0,d.__)("Expand","web-stories")},c.createElement(sh.default,null))))},iq="1em",sq=p.default.section.attrs((e=>{let{isActive:t}=e;return{role:"tabpanel","aria-expanded":t,hidden:!t}})).withConfig({displayName:"shared__Pane",componentId:"sc-10fhorr-0"})(["padding:1.5em ",";",""],iq,(e=>{let{isOverflowScrollable:t=!1}=e;return t&&(0,p.css)(["overflow-y:scroll;height:100%;"])}));function cq(e){return`library-pane-${e}`}function dq(e){return`library-tab-${e}`}const uq=p.default.div.withConfig({displayName:"shared__LoadingContainer",componentId:"sc-10fhorr-1"})(["display:flex;justify-content:center;margin-top:18px;"]),pq=(0,p.default)(m.Button).attrs({variant:f.BUTTON_VARIANTS.ICON}).withConfig({displayName:"shared__ActionButton",componentId:"sc-10fhorr-2"})(["display:flex;align-items:center;position:absolute;top:calc(50% - ","px);right:calc(50% - ","px);color:",";border-radius:",";width:","px;height:","px;opacity:",";"],8,8,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.round}),16,16,(e=>{let{$display:t}=e;return t?"1":"0"})),mq=p.default.div.withConfig({displayName:"shared__PageTemplateTitleContainer",componentId:"sc-10fhorr-3"})(["position:absolute;bottom:0;width:100%;padding:8px;background-color:",";opacity:",";"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{isActive:t}=e;return t?1:0})),fq=p.default.div.withConfig({displayName:"styles__PaneInner",componentId:"sc-18rwr03-0"})(["height:100%;display:flex;flex-direction:column;"]),gq=p.default.div.withConfig({displayName:"styles__PaneHeader",componentId:"sc-18rwr03-1"})(["padding-top:24px;flex:0 1 auto;"]),hq=p.default.div.withConfig({displayName:"styles__GalleryContainer",componentId:"sc-18rwr03-2"})(["display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;"]),bq=p.default.div.withConfig({displayName:"styles__MediaGalleryContainer",componentId:"sc-18rwr03-3"})(["overflow-y:scroll;overflow-x:hidden;padding:0 ",";margin-top:1em;position:relative;width:100%;flex:1 1 auto;min-height:100px;"],iq),Eq=p.default.div.withConfig({displayName:"styles__MediaGalleryInnerContainer",componentId:"sc-18rwr03-4"})(["width:calc(100% + ","px);"],A.SCROLLBAR_WIDTH),yq=p.default.div.withConfig({displayName:"styles__MediaGalleryLoadingPill",componentId:"sc-18rwr03-5"})(["display:block;position:absolute;bottom:20px;left:60px;right:60px;width:240px;text-align:center;padding:8px 80px;background-color:",";border-radius:100px;"],(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.standard.black,.4)})),_q=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"styles__MediaGalleryMessage",componentId:"sc-18rwr03-6"})(["color:",";padding:1em;text-align:center;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),vq=(0,p.default)(sq).withConfig({displayName:"styles__StyledPane",componentId:"sc-18rwr03-7"})(["height:100%;padding:0;overflow:hidden;"]),wq=p.default.div.withConfig({displayName:"styles__SearchInputContainer",componentId:"sc-18rwr03-8"})(["padding:0 ",";"],iq);var Tq=n(63240),Sq=n(38823);const Cq=function DeleteDialog(e){let{mediaId:t,type:n,onClose:r}=e;const{actions:{deleteMedia:a}}=W(),{showSnackbar:o}=(0,kr.useSnackbar)(),{deleteMediaElement:l}=Bi((e=>{let{actions:{deleteMediaElement:t}}=e;return{deleteMediaElement:t}})),{deleteElementsByResourceId:i}=Ya((e=>({deleteElementsByResourceId:e.actions.deleteElementsByResourceId}))),s=(0,u.useCallback)((async()=>{r();try{await a(t),l({id:t}),i({id:t})}catch(e){(0,P.trackError)("local_media_deletion",e.message),o({message:(0,d.__)("Failed to delete media item.","web-stories"),dismissible:!0})}}),[a,l,i,t,r,o]),p=(0,d.__)("Delete Image?","web-stories"),m=(0,d.__)("Delete Video?","web-stories"),f=(0,d.__)("You are about to permanently delete this image from your site. The image will appear broken in any content that uses it. ","web-stories"),g=(0,d.__)("You are about to permanently delete this video from your site. The video will appear broken in any content that uses it. ","web-stories");return c.createElement(y,{isOpen:!0,onClose:r,title:"image"===n?p:m,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:s,primaryText:(0,d.__)("Delete","web-stories"),maxWidth:512},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},"image"===n?f:g),c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,d.__)("This action can not be undone.","web-stories")))},Iq=(0,p.css)(["display:flex;width:","px;margin-right:28px;"],152),xq=p.default.img.withConfig({displayName:"mediaEditDialog__Image",componentId:"sc-ctku7j-0"})(["",""],Iq),Aq=p.default.video.withConfig({displayName:"mediaEditDialog__Video",componentId:"sc-ctku7j-1"})(["",""],Iq),kq=p.default.div.withConfig({displayName:"mediaEditDialog__DialogBody",componentId:"sc-ctku7j-2"})(["display:flex;justify-content:left;align-items:flex-start;"]),Oq=p.default.div.withConfig({displayName:"mediaEditDialog__MetadataTextContainer",componentId:"sc-ctku7j-3"})(["display:flex;flex-direction:column;margin:0 4px;"]),Pq=(0,p.default)($e.Text).withConfig({displayName:"mediaEditDialog__DateText",componentId:"sc-ctku7j-4"})(["margin-bottom:8px;"]),Nq=(0,p.default)(UT).withConfig({displayName:"mediaEditDialog__AssistiveTextArea",componentId:"sc-ctku7j-5"})(["margin:20px 0 4px;"]),Rq=(0,d.__)("Edit Image","web-stories"),Mq=(0,d.__)("Edit Video","web-stories"),Lq=(0,d.__)("Assistive text","web-stories"),Dq=(0,d.__)("Video description","web-stories"),Bq=(0,d.__)("Describe the appearance and function of the image. Leave empty if the image is purely decorative.","web-stories"),Fq=(0,d.__)("For indexability and accessibility. Include any burned-in text inside the video.","web-stories");const Hq=function MediaEditDialog(e){let{resource:t,onClose:n}=e;const{id:r,src:a,creationDate:o,width:l,height:i,type:s,alt:p,poster:m,mimeType:f}=t,{actions:{updateMedia:g}}=W(),{updateMediaElement:h}=Bi((e=>{let{actions:{updateMediaElement:t}}=e;return{updateMediaElement:t}})),{showSnackbar:b}=(0,kr.useSnackbar)(),[E,_]=(0,u.useState)(p),v=(0,qd.toDate)(o),w=(0,u.useCallback)((e=>{_(e.target.value)}),[]),T=(0,u.useCallback)((async()=>{try{await g(r,{altText:E}),h({id:r,data:{alt:E}}),n()}catch(e){(0,P.trackError)("local_media_edit",e.message),b({message:(0,d.__)("Failed to update, please try again.","web-stories"),dismissible:!0})}}),[E,r,n,b,g,h]),S="image"===s;return c.createElement(y,{isOpen:!0,onClose:n,title:S?Rq:Mq,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:T,primaryText:(0,d.__)("Save","web-stories")},c.createElement(kq,null,"image"===s?c.createElement(xq,{src:(0,Ro.default)(152,t),alt:p,loading:"lazy",crossOrigin:"anonymous",decoding:"async"}):c.createElement(Aq,{key:a,crossOrigin:"anonymous",poster:m,preload:"metadata",muted:!0},c.createElement("source",{src:a,type:f})),c.createElement(Oq,null,(0,Vd.default)(v)&&c.createElement(Pq,{forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,We.default)(
/* translators: %s: upload date of media item. */
(0,d.__)("Uploaded: %s","web-stories"),(0,Jd.default)(o))),c.createElement($e.Text,{as:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,We.default)(
/* translators: 1: image width. 2: image height. */
(0,d.__)("%1$d x %2$d pixels","web-stories"),l,i)),c.createElement(Nq,{value:E,"aria-label":S?Lq:Dq,type:"text",placeholder:S?Lq:Dq,onChange:w}),c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},S?Bq:Fq))))},Uq=(0,p.default)(pq).withConfig({displayName:"dropDownMenu__MoreButton",componentId:"sc-1eq0xdj-0"})(["top:4px;right:4px;"]),jq=p.default.div.withConfig({displayName:"dropDownMenu__DropDownContainer",componentId:"sc-1eq0xdj-1"})(["margin-top:10px;"]),zq=p.default.div.withConfig({displayName:"dropDownMenu__MenuContainer",componentId:"sc-1eq0xdj-2"})(["z-index:1;"]),Gq=(0,p.css)(["min-width:160px;margin-top:0;li{display:block;}"]),Yq="edit",Zq="delete";const Wq=function(e){let{resource:t,display:n,isMenuOpen:r,onMenuOpen:a,onMenuCancelled:o,onMenuSelected:l,setParentActive:i=aP.noop}=e;const s=[{group:[{label:(0,d.__)("Edit meta data","web-stories"),value:Yq},{label:(0,d.__)("Delete from library","web-stories"),value:Zq}]}],[p,m]=(0,u.useState)(!1),[f,g]=(0,u.useState)(!1),h=(0,u.useRef)(),b=(0,u.useCallback)((()=>{o(),h.current?.focus(),i()}),[o,i]),{canTranscodeResource:E}=Bi((e=>{let{state:{canTranscodeResource:t}}=e;return{canTranscodeResource:t}})),y=(0,u.useCallback)((()=>{m(!1),b()}),[m,b]),_=(0,u.useCallback)((()=>{g(!1),b()}),[g,b]);$C({ref:h.current||null},[],3);const v=ws();(0,fr.useKeyDownEffect)(h.current||null,"tab",v,[v]);const w=(0,u.useMemo)((()=>`list-${(0,pe.default)()}`),[]),T=(0,u.useMemo)((()=>`button-${(0,pe.default)()}`),[]);return E(t)&&c.createElement(zq,null,c.createElement(Uq,{ref:h,onClick:a,"aria-label":(0,d.__)("More","web-stories"),"aria-pressed":r,"aria-haspopup":!0,"aria-expanded":r,"aria-owns":r?w:null,id:T,$display:n,tabIndex:n||r?0:-1},c.createElement(jh,null)),(n||r)&&c.createElement(bS.Popup,{anchor:h,placement:Bd.PLACEMENT.BOTTOM_START,isOpen:r},c.createElement(jq,null,c.createElement(kx.Menu,{parentId:T,listId:w,onMenuItemClick:(e,t)=>{switch(l(),t){case Yq:g(!0);break;case Zq:m(!0)}},options:s,onDismissMenu:b,hasMenuRole:!0,menuStylesOverride:Gq}))),p&&c.createElement(Cq,{mediaId:t.id,type:t.type,onClose:y}),f&&c.createElement(Hq,{resource:t,onClose:_}))},Vq=(0,p.default)($e.Text).withConfig({displayName:"attribution__StyledText",componentId:"sc-dg18hp-0"})(["color:",";"],(e=>{let{theme:t,active:n}=e;return(0,Ve.rgba)(t.colors.standard.white,n?1:.6)})),$q=p.default.a.withConfig({displayName:"attribution__Link",componentId:"sc-dg18hp-1"})(["display:block;position:absolute;left:0;bottom:0;width:100%;padding:8px;background-color:",";text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-decoration:none;"],(e=>{let{theme:t,active:n}=e;return(0,Ve.rgba)(t.colors.bg.primary,n?.8:.6)})),qq=e=>{let{author:t,url:n}=e;const[r,a]=(0,u.useState)(!1),o=()=>a(!0),l=()=>a(!1);return c.createElement($q,{title:t,active:r,onPointerEnter:o,onFocus:o,onPointerLeave:l,onBlur:l,href:n,target:"_blank",rel:"noreferrer"},c.createElement(Vq,{forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},t))};function Kq(){return Kq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kq.apply(this,arguments)}const Xq=p.default.div.withConfig({displayName:"libraryMoveable__TargetBox",componentId:"sc-jgbz52-0"})(["position:absolute;width:100%;height:100%;top:0;z-index:1;cursor:pointer;"]);const Qq=function LibraryMoveable(e){let{type:t,elementProps:n={},handleDrag:r,handleDragEnd:a,onClick:o=Lt,cloneElement:l,cloneProps:i,elements:s=[],active:d=!1}=e;const p=l,[m,f]=(0,u.useState)(!1),[g,h]=(0,u.useState)(!1),[b,E]=(0,u.useState)(!1),y=(0,u.useRef)(null),_=(0,u.useRef)(null),v=(0,u.useRef)(null),w=(0,u.useRef)(null),T=(0,u.useRef)(null),S=cs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),{setZoomSetting:C}=cs((e=>{let{actions:{setZoomSetting:t}}=e;return{setZoomSetting:t}})),A=Ts(),{backgroundElement:k}=Ya((e=>({backgroundElement:e.state.currentPage?.elements?.[0]??{}}))),{fullbleedContainer:O,nodesById:P,pageContainer:N}=Vs((e=>({fullbleedContainer:e.state.fullbleedContainer,pageContainer:e.state.pageContainer,nodesById:e.state.nodesById}))),{activeDropTargetId:R,setDraggingResource:M}=rs((e=>{let{state:{activeDropTargetId:t},actions:{setDraggingResource:n}}=e;return{activeDropTargetId:t,setDraggingResource:n}})),{clearTransforms:L,pushTransform:D}=(0,I.useTransform)((e=>({clearTransforms:e.actions.clearTransforms,pushTransform:e.actions.pushTransform}))),B={translate:[0,0]},{insertTextSetByOffset:F}=FV(),H=(0,u.useRef)({}),U=(0,u.useCallback)((()=>{_.current.style.transform=null,y.current.style.transform=null,y.current.style.opacity=0,f(!1),L(),M(null)}),[M,L]);(0,fr.useKeyDownEffect)(m?document.body:{current:null},"esc",(()=>{h(!0),U()}),[m,U]);const j=(0,u.useCallback)((()=>{let e=0,t=0;for(let n=w.current;n;n=n.offsetParent)e+=n.offsetLeft,t+=n.offsetTop;return{offsetX:e,offsetY:t}}),[w]);Bm({node:_.current,eventData:{...Te.INSERT_ELEMENT,label:t},eventType:"pointerdown"});const{offsetX:z}=j(),G=fD({isDragging:!0,canSnap:!0,otherNodes:Object.values(bn(P,[k.id])),snappingOffsetX:z});return c.createElement(c.Fragment,null,c.createElement(Xq,{ref:_,onPointerOver:()=>E(!0),onPointerOut:()=>E(!1)}),(m||d||b)&&c.createElement(c.Fragment,null,c.createElement(x.InOverlay,{ref:w,zIndex:1,pointerEvents:"none",render:()=>c.createElement(p,Kq({ref:y},i))}),c.createElement(x.Moveable,Kq({ref:T,className:"default-moveable hide-handles",target:_.current,edge:!0,draggable:!0,origin:!1,pinchable:!0,onDragStart:e=>{let{set:t,inputEvent:n}=e;n.stopPropagation(),h(!1),t(B.translate),f(!0),(e=>{const{timeStamp:t,clientX:n,clientY:r}=e;H.current={timeStamp:t,clientX:n,clientY:r}})(n),C(Se.FIT);const{offsetX:r,offsetY:a}=j(),o=_.current.getBoundingClientRect();v.current={width:o.width,height:o.height},_.current.style.width=`${i.width}px`,_.current.style.height=`${i.height}px`;const l=o.left-r,s=o.top-a;y.current.style.left=`${l}px`,y.current.style.top=`${s}px`,T.current&&T.current.updateRect()},onDrag:e=>{let{beforeTranslate:t,inputEvent:n}=e;if(D(null,{drag:t}),g)return!1;B.translate=t,y.current&&(0,x.areEventsDragging)(H.current,n)&&(1===y.current.style.opacity||R?R&&(y.current.style.opacity=0):y.current.style.opacity=1,y.current.style.transform=`translate(${t[0]}px, ${t[1]}px)`,_.current.style.transform=`translate(${t[0]}px, ${t[1]}px)`),r?.(n)},onDragEnd:e=>{let{inputEvent:r}=e;if(g)return!1;if(_.current.style.width=`${v.current.width}px`,_.current.style.height=`${v.current.height}px`,!(0,x.areEventsDragging)(H.current,r))return U(),o(),!1;if(R&&a)a();else if(!bD(y.current,O)){const{x:e,y:r,width:a,height:o}=y.current.getBoundingClientRect(),{x:l,y:i}=N.getBoundingClientRect();"textSet"===t?F(s,{offsetX:(0,Vr.editorToDataX)(e-l,S.width),offsetY:(0,Vr.editorToDataY)(r-i,S.height)}):A(t,{...n,x:(0,Vr.editorToDataX)(e-l,S.width),y:(0,Vr.editorToDataY)(r-i,S.height),width:(0,Vr.editorToDataX)(a,S.width),height:(0,Vr.editorToDataY)(o,S.height)})}U()}},G))))},Jq=p.default.div.withConfig({displayName:"insertionOverlay__IconContainer",componentId:"sc-x3oxxu-0"})(["height:","px;width:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);color:",";border-radius:",";pointer-events:none;svg{position:absolute;top:0;left:0;}"],16,16,8,8,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.round})),eK=p.default.div.withConfig({displayName:"insertionOverlay__Scrim",componentId:"sc-x3oxxu-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;background-color:",";pointer-events:none;"],(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.standard.black,.5)}));const tK=function InsertionOverlay(e){let{showIcon:t=!0}=e;return c.createElement(eK,null,t&&c.createElement(Jq,{role:"presentation"},c.createElement(Oy,null)))};function nK(){return nK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nK.apply(this,arguments)}const rK=(0,p.css)(["width:100%;cursor:pointer;transition:0.2s transform,0.15s opacity;border-radius:4px;opacity:0;"]),aK=p.default.img.withConfig({displayName:"innerElement__Image",componentId:"sc-qkk7ov-0"})(["",""],rK),oK=p.default.video.withConfig({displayName:"innerElement__Video",componentId:"sc-qkk7ov-1"})([""," object-fit:cover;",""],rK,(e=>{let{showWithoutDelay:t}=e;return t?"opacity: 1;":""})),lK=p.default.div.withConfig({displayName:"innerElement__DurationWrapper",componentId:"sc-qkk7ov-2"})(["position:absolute;bottom:8px;left:8px;background:",";border-radius:100px;height:18px;padding:0 6px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),iK=p.default.div.withConfig({displayName:"innerElement__MuteWrapper",componentId:"sc-qkk7ov-3"})(["position:absolute;bottom:8px;right:8px;height:24px;width:24px;background:",";color:",";border-radius:100px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),sK=(0,p.default)($e.Text).attrs({forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"innerElement__Duration",componentId:"sc-qkk7ov-4"})(["color:",";display:block;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),cK=p.default.img.withConfig({displayName:"innerElement__CloneImg",componentId:"sc-qkk7ov-5"})(["opacity:0;width:",";height:",";position:absolute;"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`}));const dK=(0,u.memo)((function InnerElement(e){let{type:t,src:n,resource:r,alt:a,width:o,height:l,onClick:i,onLoad:s=aP.noop,showVideoDetail:d,mediaElement:p,active:m,isMuted:f}=e;const g=(0,u.useRef)(null),h=(0,u.useRef)(null),{handleDrag:b,handleDrop:E}=rs((e=>{let{state:t,actions:n}=e;return{handleDrag:n.handleDrag,handleDrop:n.handleDrop,dropTargets:t.dropTargets,activeDropTargetId:t.activeDropTargetId}}),((e,t)=>{if(h.current)return!1;if(null===h.current)return h.current=!1,!1;if(e?.dropTargets&&t?.dropTargets){const n=Object.keys(e.dropTargets),r=Object.keys(t.dropTargets);if(n.join()!==r.join())return!1}return e?.activeDropTargetId===t?.activeDropTargetId})),{setDraggingResource:y}=rs((e=>{let{actions:{setDraggingResource:t}}=e;return{setDraggingResource:t}}));let _;(0,u.useEffect)((()=>{r.poster&&(g.current=r.poster)}),[r.poster]);const{lengthFormatted:v,poster:w,mimeType:T}=r,S=w??g.current,C=S||(0,Ro.default)(o,r),I={width:o,height:l,alt:a,crossOrigin:"anonymous"},x={...I,onLoad:()=>{p.current&&(p.current.style.opacity=1),s()},loading:"lazy",decoding:"async",draggable:!1},A={...x,onLoad:void 0},k={...x,src:C},O={...I,title:a,alt:null,loop:t===gt.GIF,muted:!0,preload:"metadata",poster:S,showWithoutDelay:m};if(t===gt.IMAGE?(_=c.createElement(aK,nK({key:n},k,{ref:p})),A.src=C):[gt.VIDEO,gt.GIF].includes(t)&&(_=c.createElement(c.Fragment,null,w&&!m?c.createElement(aK,nK({key:n},k,{ref:p})):c.createElement(oK,nK({key:n},O,{ref:p}),t===gt.GIF?r.output.src&&c.createElement("source",{src:r.output.src,type:r.output.mimeType}):c.createElement("source",{src:(0,Ro.default)(o,r),type:T})),t===gt.VIDEO&&d&&v&&c.createElement(lK,null,c.createElement(sK,null,v)),t===gt.VIDEO&&d&&f&&c.createElement(iK,null,c.createElement(BE,null))),A.src=w),!_)throw new Error("Invalid media element type.");const P=t===gt.IMAGE?C:w;return c.createElement(c.Fragment,null,_,m&&c.createElement(tK,{showIcon:!1}),c.createElement(Qq,{active:m,handleDrag:e=>{h.current||(Z_.default.set(r.id,{url:C,type:"cached"}),y(r),h.current=!0),b(r,e.clientX,e.clientY)},handleDragEnd:()=>{E(r),h.current=!1},type:r.type,elementProps:{resource:r},onClick:i(P),cloneElement:cK,cloneProps:A}))})),uK=p.default.div.withConfig({displayName:"insertionMenu__DropDownContainer",componentId:"sc-xjd4tf-0"})(["margin-top:10px;min-width:160px;"]),pK=p.default.div.withConfig({displayName:"insertionMenu__MenuContainer",componentId:"sc-xjd4tf-1"})(["z-index:1;"]),mK=(0,p.css)(["min-width:160px;margin-top:0;li{display:block;}"]),fK="insert",gK="addBackground";const hK=function InsertionMenu(e){let{resource:t,display:n,onInsert:r,width:a,index:o,isLocal:l=!1,setParentActive:i=aP.noop,setParentInactive:s=aP.noop}=e;const p=(0,u.useRef)(),[m,f]=(0,u.useState)(!1),g=(0,u.useCallback)((e=>{e.stopPropagation(),f(!0)}),[]),h=(0,u.useCallback)((()=>{f(!1),p.current?.focus(),i()}),[i]),{currentBackgroundId:b,combineElements:E}=Ya((e=>({currentBackgroundId:e.state.currentPage?.elements?.[0]?.id,combineElements:e.actions.combineElements}))),{type:y,poster:_}=t,v=[{group:[{label:["image","gif"].includes(y)?(0,d.__)("Insert image","web-stories"):(0,d.__)("Insert video","web-stories"),value:fK},{label:(0,d.__)("Add as background","web-stories"),value:gK}]}];$C({ref:p},[],3);const w=ws();(0,fr.useKeyDownEffect)(l?null:p,"tab",w,[w]);const T=(0,u.useMemo)((()=>`list-${(0,pe.default)()}`),[]),S=(0,u.useMemo)((()=>`button-${(0,pe.default)()}`),[]);return c.createElement(pK,null,c.createElement(pq,{ref:p,onClick:g,"aria-label":(0,d.__)("Open insertion menu","web-stories"),"aria-pressed":m,"aria-haspopup":!0,"aria-expanded":m,"aria-owns":m?T:null,id:S,$display:n,tabIndex:0===o?0:-1},c.createElement(Oy,null)),m&&c.createElement(bS.Popup,{anchor:p,placement:Bd.PLACEMENT.BOTTOM_START,isOpen:m},c.createElement(uK,null,c.createElement(kx.Menu,{parentId:S,listId:T,onMenuItemClick:(e,n)=>{const o=_||(0,Ro.default)(a,t),l=Ki(t.type,{resource:t});switch(f(!1),n){case fK:r(t,o);break;case gK:E({firstElement:l,secondId:b})}s()},options:v,onDismissMenu:h,hasMenuRole:!0,menuStylesOverride:mK}))))},bK=p.default.div.attrs((e=>({style:{width:e.width+"px",height:e.height+"px",margin:e.margin,backgroundColor:"transparent",color:"inherit",border:"none",padding:0}}))).withConfig({displayName:"mediaElement__Container",componentId:"sc-n7038j-0"})([""]),EK=p.default.div.withConfig({displayName:"mediaElement__InnerContainer",componentId:"sc-n7038j-1"})(["position:relative;display:flex;margin-bottom:10px;background-color:",";"],(e=>{let{theme:t,$baseColor:n}=e;return n||(0,Ve.rgba)(t.colors.standard.black,.3)})),yK=(0,p.default)(Sq.Blurhash).withConfig({displayName:"mediaElement__BlurhashContainer",componentId:"sc-n7038j-2"})(["position:absolute !important;top:0;left:0;"]);function _K(e){let{index:t,resource:n,width:r,height:a,margin:o,onInsert:l,providerType:i,canEditMedia:s}=e;const{id:p,src:m,type:f,width:g,height:h,alt:b,isMuted:E,baseColor:y,blurHash:_}=n,{isCurrentResourceProcessing:v,isCurrentResourceUploading:w}=Bi((e=>{let{state:t}=e;return{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}})),T=g&&h?g/h:1,S=r||a/T,C=a||S/T,I=(0,u.useRef)(),[x,A]=(0,u.useState)(!0),[k,O]=(0,u.useState)(!1),[P,N]=(0,u.useState)(!1),[R,M]=(0,u.useState)(!1),L=(0,u.useCallback)((()=>O(!0)),[]),D=(0,u.useCallback)((()=>O(!1)),[]),B=(0,u.useCallback)((()=>N(!0)),[]),F=(0,u.useCallback)((()=>N(!1)),[]),H=(0,u.useCallback)((()=>{N(!1),O(!1)}),[]),[U,j]=(0,u.useState)(null),z=(0,u.useRef)(k);z.current=k,(0,u.useEffect)((()=>{if(![gt.VIDEO,gt.GIF].includes(f))return;const e=()=>{null!==U&&(clearTimeout(U),j(null))};if(!P)if(k){if(A(!1),I.current&&null==U){const e=setTimeout((()=>{z.current&&m&&I.current.play().catch((()=>{}))}),600);j(e)}}else A(!0),e(),I.current&&I.current?.pause&&m&&(I.current.pause(),I.current.currentTime=0);return e}),[P,k,f,m,U,j,z]);const G=(0,u.useCallback)((e=>()=>{l(n,e)}),[l,n]),Y=k&&n.attribution?.author?.displayName&&n.attribution?.author?.url&&c.createElement(qq,{author:n.attribution.author.displayName,url:n.attribution.author.url}),Z=(0,u.useRef)(),W=(0,u.useCallback)((()=>M(!0)),[]),V=!R&&!k;return c.createElement(bK,{ref:Z,"data-testid":`mediaElement-${f}`,"data-id":p,className:"mediaElement",width:S,height:C,margin:o,onPointerEnter:L,onFocus:L,onPointerLeave:D,onBlur:D,tabIndex:"-1"},c.createElement(EK,{$baseColor:V&&y},c.createElement(dK,{type:f,src:m,mediaElement:I,resource:n,alt:b,isMuted:E,width:S,height:C,onClick:G,onLoad:W,showVideoDetail:x,active:k}),Y,V&&_&&c.createElement(yK,{hash:_,width:S,height:C,punch:1}),(!m||v(p)||w(p))&&c.createElement(LoadingBar,{loadingMessage:(0,d.__)("Uploading media…","web-stories")}),c.createElement(hK,{resource:n,display:k,onInsert:l,width:S,index:t,isLocal:"local"===i,setParentActive:L,setParentInactive:D}),"local"===i&&s&&c.createElement(Wq,{resource:n,display:k,isMenuOpen:P,onMenuOpen:B,onMenuCancelled:F,onMenuSelected:H,setParentActive:L})))}function MediaElement(e){const{isCurrentResourceProcessing:t,isCurrentResourceUploading:n}=Bi((e=>{let{state:t}=e;return{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}})),{id:r}=e.resource;return t(r)||n(r)?c.createElement(Tooltip,{title:(0,d.__)("Uploading media…","web-stories")},c.createElement(_K,e)):c.createElement(_K,e)}MediaElement.defaultProps={providerType:"local",canEditMedia:!1};const vK=(0,u.memo)(MediaElement),wK={maxPhotos:2},ContainerRenderer=e=>{let{children:t,containerRef:n}=e;return c.createElement(hq,{ref:n},t)},RowRenderer=e=>{let{children:t}=e;return t};function MediaGallery(e){let{resources:t,onInsert:n,providerType:r,canEditMedia:a}=e;const o=t.map(((e,t)=>({index:t,key:e.id,src:e.src,width:e.width,height:e.height}))),l=(0,u.useCallback)((e=>{let{photo:o,layout:l}=e;return c.createElement(vK,{key:o.key,index:o.index,margin:"0px 0px 8px 0px",resource:t[o.index],width:l.width,height:l.height,onInsert:n,providerType:r,canEditMedia:a})}),[r,n,t,a]);return c.createElement("div",null,c.createElement(Tq.default,{layout:"rows",photos:o,renderPhoto:l,renderRowContainer:RowRenderer,renderContainer:ContainerRenderer,targetRowHeight:110,rowConstraints:wK,spacing:8}))}MediaGallery.defaultProps={canEditMedia:!1};const TK=MediaGallery,SK=(0,p.default)($e.Text).withConfig({displayName:"paginatedMediaGallery__StyledText",componentId:"sc-1xn8t7i-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));function PaginatedMediaGallery(e){let{providerType:t,resources:n,searchTerm:r,selectedCategoryId:a,isMediaLoading:o,isMediaLoaded:l,hasMore:i,onInsert:s,setNextPage:p,canEditMedia:m}=e;const f=(0,u.useRef)(),g=(0,u.useCallback)((()=>f.current.clientHeight===f.current.scrollHeight?p():()=>{}),[p]),h=(0,u.useDebouncedCallback)(g,500),b=(0,u.useCallback)((()=>{const e=f.current;if(!n.length||!e||0===e.clientHeight||!i||!l||o)return;if(e.clientHeight===e.scrollHeight)return void h();e.scrollHeight-e.scrollTop<=e.clientHeight+300&&p()}),[n.length,i,l,o,h,p]);(0,u.useEffect)((()=>{f.current?.scrollTo?.(0,0)}),[r,a]);const E=(0,u.useDebouncedCallback)(b,500);(0,u.useLayoutEffect)((()=>{!async function(){var e;await(e=200,new Promise((t=>setTimeout(t,e)))),b()}()}),[b]),(0,u.useEffect)((()=>{const e=f.current;if(e)return e.addEventListener("scroll",E),window.addEventListener("resize",E),()=>{e.removeEventListener("scroll",E),window.removeEventListener("resize",E)}}),[E]);const y=l&&0===n.length?c.createElement(_q,null,(0,d.__)("No media found.","web-stories")):c.createElement("div",{style:{marginBottom:15}},c.createElement(TK,{providerType:t,canEditMedia:m,resources:n,onInsert:s})),[_,v]=(0,u.useState)(!1);(0,u.useEffect)((()=>{if(o&&i){const e=setTimeout((()=>{v(o)}),1e3);return()=>clearTimeout(e)}v(!1)}),[o,i]);const w="local"!==t&&Et[t].attributionComponent&&Et[t].attributionComponent();return c.createElement(c.Fragment,null,c.createElement(bq,{"data-testid":"media-gallery-container",ref:f},c.createElement(Eq,null,y)),_&&c.createElement(yq,{"data-testid":"loading-pill"},c.createElement(SK,{forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Loading…","web-stories"))),!_&&w)}PaginatedMediaGallery.defaultProps={canEditMedia:!1};const CK=PaginatedMediaGallery,IK={INCREMENTAL_SEARCH_DEBOUNCE_MEDIA:"incrementalSearchDebounceMedia"},xK=cq("media"),AK=Bo.VIDEO_OPTIMIZATION_DIALOG_DISMISSED;const kK=function VideoOptimizationDialog(){const{isTranscoding:e}=Bi((e=>{let{state:{isTranscoding:t}}=e;return{isTranscoding:t}})),[t,n]=(0,u.useState)(Boolean(Fo.getItemByKey(AK))),{updateCurrentUser:r}=$a((e=>{let{actions:t}=e;return{updateCurrentUser:t.updateCurrentUser}})),a=(0,u.useCallback)((e=>{n(e),Fo.setItemByKey(AK,e)}),[]),o=(0,u.useCallback)((()=>{r({mediaOptimization:!1}),a(!0)}),[r,a]),l=(0,u.useCallback)((()=>{a(!0)}),[a]),i=(0,d.__)("Video optimization in progress","web-stories"),s=(0,d.__)("This process can’t be stopped once it begins. Optimization is automatically enabled for all videos to ensure smooth playback. You can disable optimization any time in Settings.","web-stories");return c.createElement(y,{isOpen:e&&!t,onClose:l,title:i,onSecondary:o,secondaryText:(0,d.__)("Disable optimization","web-stories"),onPrimary:l,primaryText:(0,d.__)("Sounds good","web-stories")},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},s))};const OK=async function(e){const{src:t,mimeType:n,width:r,height:a,isMuted:o,length:l,lengthFormatted:i,...s}=e,c=Q(n);if(!["image","video"].includes(c))throw new Error("Invalid media type.");const d=r&&a,u={};if("video"===c&&(!d||null===o||null===l||null===i)){const e=await re(t);await ie(e),u.width=e.videoWidth,u.height=e.videoHeight;const n=le(e);u.length=n.length,u.lengthFormatted=n.lengthFormatted,u.isMuted=!se(e)}if("image"===c&&!d){const e=await X(t);u.width=e.width,u.height=e.height}return J({type:c,width:r,height:a,isMuted:o,length:l,lengthFormatted:i,src:t,isExternal:!0,mimeType:n,...s,...u})},PK="hotlink_media";const NK=function(){const[e,t]=(0,u.useState)(!1),{insertElement:n}=G$((e=>({insertElement:e.actions.insertElement}))),{capabilities:{hasUploadMediaAction:r},allowedMimeTypes:{image:a,vector:o,video:l}}=U(),i=(0,u.useMemo)((()=>[...a,...o,...l]),[a,o,l]),s=(0,u.useMemo)((()=>i.map((e=>Pt(e))).flat()),[i]),{updateBaseColor:c}=Wo({}),{uploadVideoPoster:d}=Za({}),{getProxiedUrl:p}=Zo(),m=(0,u.useCallback)((async e=>{let{link:a,hotlinkInfo:o,needsProxy:l}=e;const{ext:i,type:s,mimeType:u,fileName:m}=o,f="video"===s;try{const e=l?p({needsProxy:l},a):a,g={id:(0,pe.default)(),src:e,mimeType:u,needsProxy:l,alt:m};if(f){const t=await re(e);await ie(t),g.width=t.videoWidth,g.height=t.videoHeight;const n=le(t);if(g.length=n.length,g.lengthFormatted=n.lengthFormatted,g.isMuted=!se(t),r)try{const e=je(m.replace(`.${i}`,"")),n=await ue(t),r=await d(0,e,n);g.poster=r.poster,g.posterId=r.posterId}catch{}}const h=await OK(g);h.src=a,n(s,{resource:h}),c(h),(0,P.trackEvent)(PK,{event_label:a,file_size:o.fileSize,file_type:o.mimeType,needs_proxy:l}),t(!1)}catch(e){}}),[p,n,c,r,d]);return{action:{onSelect:m,onError:(0,u.useCallback)((e=>(0,P.trackError)(PK,e?.message)),[]),onClick:()=>t(!0),onClose:()=>t(!1)},state:{allowedFileTypes:s,isOpen:e}}},RK=(0,p.default)(m.Button).withConfig({displayName:"hotlink__Button",componentId:"sc-1njsgyy-0"})(["",";margin:0 10px 0 0;"],np);const MK=function Hotlink(){const e=(0,d.__)("Insert by link","web-stories"),{action:{onSelect:t,onError:n,onClose:r,onClick:a},state:{allowedFileTypes:o,isOpen:l}}=NK();return c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:e},c.createElement(RK,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:a,"aria-label":e},c.createElement(sE,null))),c.createElement(nP,{onClose:r,isOpen:l,onError:n,onSelect:t,allowedFileTypes:o,title:(0,d.__)("Insert external image or video","web-stories")}))};function LK(){return LK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LK.apply(this,arguments)}const DK=p.default.div.withConfig({displayName:"toggle__Wrapper",componentId:"sc-29rl44-0"})(["padding:","px;"],4),BK=p.default.div.withConfig({displayName:"toggle__Background",componentId:"sc-29rl44-1"})((e=>{let{theme:t}=e;return(0,p.css)(["position:absolute;top:-","px;left:-","px;height:","px;width:","px;background-color:transparent;border-radius:",";border:","px solid ",";pointer-events:none;transition:all 0.3s;"],1,1,20,44,t.borders.radius.x_large,1,t.colors.border.defaultNormal)})),FK=p.default.span.withConfig({displayName:"toggle__Circle",componentId:"sc-29rl44-2"})((e=>{let{theme:t}=e;return(0,p.css)(["pointer-events:none;:after{content:'';position:absolute;top:","px;left:","px;height:","px;width:","px;background-color:",";border-radius:",";cursor:pointer;transition:background-color 0.3s,border-color 0.3s,left 0.15s;}"],-5,-5,28,28,t.colors.fg.secondary,t.borders.radius.round)})),HK=p.default.div.withConfig({displayName:"toggle__IconContainer",componentId:"sc-29rl44-3"})((e=>{let{theme:t}=e;return(0,p.css)(["position:absolute;width:","px;top:","px;left:","px;z-index:1;opacity:0;transition:opacity 0.15s;pointer-events:none;svg{color:",";}"],32,-6,19,t.colors.standard.white)})),UK=p.default.div.withConfig({displayName:"toggle__ToggleContainer",componentId:"sc-29rl44-4"})((e=>{let{theme:t}=e;return(0,p.css)(["position:relative;height:","px;width:","px;background-color:transparent;border-radius:",";input[type='checkbox']{position:absolute;top:-","px;left:-","px;height:","px;width:","px;margin:0;opacity:0;cursor:pointer;:disabled{cursor:default;~ ","{border-color:",";}:checked ~ ","{background-color:",";border-color:",";}~ ",":after{background-color:",";}:checked ~ ",":after{background-color:",";}~ "," svg{color:",";}}&.","{~ ","{outline:none;box-shadow:0 0 0 5px ",",0 0 0 7px ",";}}:checked{~ ","{background-color:",";border-color:",";}~ ",":after{left:","px;background-color:",";}~ ","{opacity:1;}}:hover{:not(:disabled) ~ ","{border-color:",";}:checked:not(:disabled) ~ ","{background-color:",";border-color:",";}}:active{~ ","{box-shadow:0 0 0 8px ",";}}}"],20,44,t.borders.radius.x_large,.5,.5,20,44,BK,t.colors.fg.disable,BK,t.colors.fg.disable,t.colors.fg.disable,FK,t.colors.fg.disable,FK,t.colors.bg.secondary,HK,t.colors.fg.disable,hp.FOCUS_VISIBLE_SELECTOR,BK,t.colors.bg.primary,t.colors.border.focus,BK,t.colors.interactiveBg.positivePress,t.colors.interactiveBg.positivePress,FK,21,t.colors.interactiveBg.positiveNormal,HK,BK,t.colors.fg.secondary,BK,t.colors.interactiveBg.positiveHover,t.colors.interactiveBg.positiveHover,BK,t.colors.shadow.active)})),jK=e=>{let{className:t,...n}=e;return c.createElement(DK,{className:t},c.createElement(UK,null,c.createElement("input",LK({type:"checkbox"},n)),c.createElement(BK,null),c.createElement(HK,null,c.createElement(rh.default,null)),c.createElement(FK,null)))};var zK=n(91703),GK=n.n(zK);const YK=p.default.img.withConfig({displayName:"imageCapture__Photo",componentId:"sc-u3jq3q-0"})(["display:block;width:240px;margin:0 auto;"]),ZK=p.default.div.withConfig({displayName:"imageCapture__Actions",componentId:"sc-u3jq3q-1"})(["display:flex;justify-content:center;margin-top:20px;"]),ImageCapture=e=>{let{videoRef:t,onCapture:n,onClear:r}=e;const[a,o]=(0,u.useState)("");return c.createElement(c.Fragment,null,a&&c.createElement(YK,{src:a,alt:(0,d.__)("Image capture","web-stories")}),c.createElement(ZK,null,c.createElement(m.Button,{type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:async()=>{if(!t.current)return;const e=await ue(t.current),r=await(0,q.createBlob)(e);o(r),n(ce(e,"image-capture.jpeg",he))},disabled:null!==r},(0,d.__)("Capture Image","web-stories")),c.createElement(m.Button,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>{o(""),r()},disabled:null===r},(0,d.__)("Clear Image","web-stories"))))},WK=p.default.video.withConfig({displayName:"modal__Video",componentId:"sc-mu21h6-0"})(["width:100%;height:100%;"]),VK=p.default.div.withConfig({displayName:"modal__VideoWrapper",componentId:"sc-mu21h6-1"})(["width:240px;aspect-ratio:9 / 16;background:#000;margin:0 auto;"]);const $K=function Modal(e){let{isOpen:t,onClose:n}=e;const r=(0,u.useRef)(),[a,o]=(0,u.useState)(null),[l,i]=(0,u.useState)(!1),[s,p]=(0,u.useState)(!0),[g,h]=(0,u.useState)(!0),[b,E]=(0,u.useState)(Fo.getItemByKey(Bo.MEDIA_RECORDING_VIDEO_INPUT)),[_,v]=(0,u.useState)(Fo.getItemByKey(Bo.MEDIA_RECORDING_AUDIO_INPUT)),[w,T]=(0,u.useState)([]),S=(0,u.useCallback)((async()=>{try{const e=await navigator.mediaDevices.enumerateDevices();T(e.filter((e=>"audiooutput"!==e.kind)))}catch(e){console.log(e)}}),[]);(0,u.useEffect)((()=>{if(!w.length)return;const e=b&&w.some((e=>e.deviceId===b));b&&e||E(w.find((e=>"videoinput"===e.kind))?.deviceId);const t=_&&w.some((e=>e.deviceId===_));_&&t||v(w.find((e=>"audioinput"===e.kind))?.deviceId)}),[_,w,b]),(0,u.useEffect)((()=>(navigator.mediaDevices.addEventListener("devicechange",S),()=>{navigator.mediaDevices.removeEventListener("devicechange",S)})),[]);const C=w.filter((e=>"videoinput"===e.kind)).map((e=>{let{deviceId:t,label:n}=e;return{value:t,label:n}})),I=w.filter((e=>"audioinput"===e.kind)).map((e=>{let{deviceId:t,label:n}=e;return{value:t,label:n}})),x=(0,u.useCallback)((e=>{const t=ce(e,"test-recording.webm","video/webm");o(t)}),[]),{error:A,status:k,mediaBlob:O,stopRecording:P,startRecording:N,liveStream:R,getMediaStream:M,clearMediaStream:L,clearMediaBlob:D}=GK()({recordScreen:!1,blobOptions:{type:"video/webm"},mediaStreamConstraints:{audio:_&&g?{deviceId:_}:g,video:b&&s?{deviceId:b}:s},onStop:x,onError:e=>{console.log(e)}});(0,u.useEffect)((()=>L),[]);const B=(0,u.usePrevious)(Boolean(R)),F=Boolean(R),H=(0,u.usePrevious)(t),U="recording"===k,j=(0,u.usePrevious)(U);(0,u.useEffect)((()=>{!B||F||l||O||U||j||M()}),[B,F,M,l,O,U,j]),(0,u.useEffect)((()=>{t&&!H&&M()}),[t,H,M]);const z=(0,u.useCallback)(((e,t)=>{E(t),Fo.setItemByKey(Bo.MEDIA_RECORDING_VIDEO_INPUT,t),L(),D(),r.current&&(r.current.srcObject=null),U&&P()}),[P,U,D,L]),G=(0,u.useCallback)(((e,t)=>{v(t),Fo.setItemByKey(Bo.MEDIA_RECORDING_AUDIO_INPUT,t),L(),D(),U&&P()}),[D,L,U,P]);(0,u.useEffect)((()=>{"ready"===k&&S()}),[k,S]);const Y=(0,u.useCallback)((()=>{L(),D(),n(),r.current&&(r.current.srcObject=null),i(!1)}),[D,L,n]),Z=Ss(),W=(0,u.useCallback)((e=>{o(e),i(!0),P()}),[P]),V=(0,u.useCallback)((()=>{i(!1),M()}),[M]),$=(0,u.useCallback)((()=>{Z([a]),n(),U&&(P(),i(!1),o(null))}),[a,Z,n,U,P]);(0,u.useEffect)((()=>{r.current&&R&&(r.current.srcObject=R)}),[R]);const q=(0,u.useMemo)((()=>`toggle_${(0,pe.default)()}`),[]),K=(0,u.useMemo)((()=>`toggle_${(0,pe.default)()}`),[]),X=(0,d.__)("Insert","web-stories");return c.createElement(y,{onClose:Y,isOpen:t,title:(0,d.__)("Record video / audio","web-stories"),onPrimary:$,primaryText:X,secondaryText:(0,d.__)("Cancel","web-stories"),primaryRest:{disabled:"stopped"!==k&&!l}},c.createElement($e.Text,null,(0,d.__)("Record content for your story using your camera / microphone.","web-stories")),c.createElement($e.Text,null,A?`${k} ${A.message}`:k),!l&&c.createElement(VK,null,O&&!R&&c.createElement(WK,{src:URL.createObjectURL(O),autoPlay:!0,controls:!0,muted:!0}),!O&&R&&c.createElement(WK,{ref:r,autoPlay:!0,muted:!0})),(U||l)&&c.createElement(ImageCapture,{videoRef:r,onCapture:W,onClear:l?V:null}),c.createElement($e.Text,{as:"label",htmlFor:q,size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Camera","web-stories")),c.createElement(jK,{id:q,"aria-label":(0,d.__)("Enable camera","web-stories"),name:q,checked:s,onChange:()=>p((e=>!e)),disabled:!b}),c.createElement($e.Text,{as:"label",htmlFor:K,size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Microphone","web-stories")),c.createElement(jK,{id:K,"aria-label":(0,d.__)("Enable microphone","web-stories"),name:K,checked:g,onChange:()=>h((e=>!e)),disabled:!_}),C.length>0&&c.createElement(ok.DropDown,{ariaLabel:(0,d.__)("Video Input","web-stories"),placeholder:(0,d.__)("Select Video Input","web-stories"),options:C,onMenuItemClick:z,selectedValue:b,disabled:!s,popupZIndex:11}),I.length>0&&c.createElement(ok.DropDown,{ariaLabel:(0,d.__)("Audio Input","web-stories"),placeholder:(0,d.__)("Select Audio Input","web-stories"),options:I,onMenuItemClick:G,selectedValue:_,disabled:!g,popupZIndex:11}),c.createElement(m.Button,{type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:U?P:N,disabled:!1},U?(0,d.__)("Stop recording","web-stories"):(0,d.__)("Start recording","web-stories")))},qK=(0,p.default)(m.Button).withConfig({displayName:"mediaRecording__Button",componentId:"sc-zpc7g2-0"})(["",";margin:0 10px 0 0;"],np),KK=(0,p.default)(Vg).withConfig({displayName:"mediaRecording__Camera",componentId:"sc-zpc7g2-1"})(["width:24px !important;height:24px !important;"]);const XK=function MediaRecording(){const[e,t]=(0,u.useState)(!1),n=(0,d.__)("Record audio/video","web-stories");return c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:n},c.createElement(qK,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:()=>t(!0),"aria-label":n},c.createElement(KK,null))),c.createElement($K,{isOpen:e,onClose:()=>t(!1)}))};function QK(){return QK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QK.apply(this,arguments)}const JK=(0,p.default)(m.Button).withConfig({displayName:"mediaPane__Button",componentId:"sc-usipec-0"})(["",";"],np),eX=p.default.div.withConfig({displayName:"mediaPane__FilterArea",componentId:"sc-usipec-1"})(["display:flex;justify-content:space-between;margin-top:24px;padding:0 "," 0 ",";"],iq,iq),tX=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"mediaPane__SearchCount",componentId:"sc-usipec-2"})(["display:flex;align-items:center;justify-content:center;flex-shrink:0;"]),nX=p.default.div.withConfig({displayName:"mediaPane__ButtonsWrapper",componentId:"sc-usipec-3"})(["display:flex;flex:1;justify-content:flex-end;"]),rX=dl,aX=[{value:rX,label:(0,d.__)("All Types","web-stories")},{value:"image",label:(0,d.__)("Images","web-stories")},{value:"video",label:(0,d.__)("Video","web-stories")}];const oX=function MediaPane(e){const{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:l,setNextPage:i,setMediaType:s,setSearchTerm:p,totalItems:m}=Bi((e=>{let{state:{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:l,totalItems:i},actions:{setNextPage:s,setMediaType:c,setSearchTerm:d}}=e;return{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:l,totalItems:i,setNextPage:s,setMediaType:c,setSearchTerm:d}})),g=(0,C.useFeature)("mediaRecording"),{capabilities:{hasUploadMediaAction:h}}=U(),b=l.length>0,E=(0,u.useCallback)(((e,t)=>{s({mediaType:t})}),[s]),{onSelect:y,insertMediaElement:_}=Y$();(0,u.useEffect)((()=>{l.length>0&&(0,P.trackEvent)("search",{search_type:"media",search_term:l,search_filter:o})}),[l,o]);const v=(0,C.useFeature)(IK.INCREMENTAL_SEARCH_DEBOUNCE_MEDIA),w=(0,u.useCallback)((e=>c.createElement(JK,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:e,"aria-label":(0,d.__)("Upload","web-stories")},c.createElement(Tm,null))),[]);return c.createElement(vq,QK({id:xK},e),c.createElement(fq,null,c.createElement(gq,null,c.createElement(wq,null,c.createElement(q$,{initialValue:l,placeholder:(0,d.__)("Search","web-stories"),onSearch:e=>{const t=e.trim();t!==l&&p({searchTerm:t})},incremental:v})),c.createElement(eX,null,c.createElement(pk,{selectedValue:o?.toString()||rX,onMenuItemClick:E,options:aX,placement:Bd.PLACEMENT.BOTTOM_START}),b&&n.length>0&&c.createElement(tX,null,(0,We.default)(
/* translators: %d: number of results. */
(0,d._n)("%s result found.","%s results found.",m,"web-stories"),m)),!b&&c.createElement(nX,null,g&&h&&c.createElement(XK,null),c.createElement(MK,null),h&&c.createElement(Tooltip,{title:(0,d.__)("Upload","web-stories")},c.createElement(aA,{renderButton:w,onInsert:y}))))),a&&!n.length?c.createElement(_q,null,b?(0,d.__)("No results found.","web-stories"):(0,d.__)("No media found.","web-stories")):c.createElement(CK,{providerType:"local",canEditMedia:h,resources:n,isMediaLoading:r,isMediaLoaded:a,hasMore:t,onInsert:_,setNextPage:i,searchTerm:l}),c.createElement(kK,null)))};const lX=function MediaIcon(){return c.createElement(Tm,{title:(0,d.__)("Media Gallery","web-stories")})};const iX=function TermsDialog(){const e=Fo.getItemByKey(Bo.TERMS_MEDIA3P),[t,n]=(0,u.useState)(!e),r=(0,u.useCallback)((()=>{n(!1),Fo.setItemByKey(Bo.TERMS_MEDIA3P,!0),(0,P.trackEvent)("media3p_terms_acknowledged")}),[]);(0,u.useEffect)((()=>{n(!e)}),[e]);const a=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_terms_of_service")}),[]);return e?null:c.createElement(y,{isOpen:t,contentLabel:(0,d.__)("Third party stock content terms","web-stories"),onClose:r,ariaHideApp:!1,onPrimary:r,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(ou.default,{mapping:{a:c.createElement(lu.Link,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:"https://wp.stories.google/docs/terms/",rel:"noreferrer",target:"_blank","aria-label":(0,d.__)("Learn more by visiting Web Stories for WordPress","web-stories"),onClick:a})}},(0,d.__)("Your use of stock content is subject to third party terms. <a>Learn more.</a>","web-stories"))))},sX=cq("media3p");function cX(){return cX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cX.apply(this,arguments)}const dX=(0,p.default)($e.Text).withConfig({displayName:"providerTab__StyledText",componentId:"sc-1muzdn0-0"})(["color:inherit;"]),uX=p.default.button.withConfig({displayName:"providerTab__Tab",componentId:"sc-1muzdn0-1"})(["padding:6px 16px;background:none;border:none;color:",";position:relative;cursor:pointer;:hover{color:",";}border-radius:",";",";",""],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.x_large}),np,(e=>{let{$isActive:t,theme:n}=e;return t&&(0,p.css)(["::after{content:'';position:absolute;background-color:",";height:2px;border-radius:1px;bottom:-17px;left:16px;right:16px;}"],n.colors.border.selection)}));const pX=function ProviderTab(e){let{name:t,isActive:n,...r}=e;return c.createElement(uX,cX({$isActive:n},r),c.createElement(dX,{forwardedAs:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},t))},mX=p.default.div.attrs({role:"tablist"}).withConfig({displayName:"providerTabList__Section",componentId:"sc-19jgogw-0"})(["display:flex;flex-wrap:wrap;margin-top:16px;margin-bottom:16px;padding:0 1em;"]);const fX=function ProviderTabList(e){let{providers:t}=e;const{isRTL:n}=U(),r=(0,u.useRef)(),{selectedProvider:a,setSelectedProvider:o}=Di((e=>{let{media3p:{state:{selectedProvider:t},actions:{setSelectedProvider:n}}}=e;return{selectedProvider:t,setSelectedProvider:n}})),[l,i]=(0,u.useState)(0),s=t.length;(0,u.useEffect)((()=>i(t.indexOf(a))),[t,a]);const d=(0,u.useCallback)((e=>{if(!r.current)return;r.current.children[e].focus()}),[]),p=(0,u.useCallback)((()=>o({provider:t[l]})),[l,o,t]),m=n?-1:1;return(0,fr.useKeyDownEffect)(r,"left",(()=>d((l-m+s)%s)),[d,l,m,s]),(0,fr.useKeyDownEffect)(r,"right",(()=>d((l+m+s)%s)),[d,l,m,s]),(0,fr.useKeyDownEffect)(r,"home",(()=>d(0)),[d]),(0,fr.useKeyDownEffect)(r,"end",(()=>d(s-1)),[d,s]),(0,fr.useKeyDownEffect)(r,["enter","space"],p,[p]),c.createElement(mX,{ref:r},t.map(((e,t)=>c.createElement(pX,{key:e,index:t,name:Et[e].displayName,isActive:a===e,onClick:()=>o({provider:e}),onFocus:()=>i(t),tabIndex:a===e?0:-1,role:"tab",id:`provider-tab-${e}`,"aria-controls":`provider-tabpanel-${e}`}))))};function gX(){return gX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gX.apply(this,arguments)}const hX=(0,p.default)(Qu.Headline).attrs((()=>({as:"h2",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}))).withConfig({displayName:"providerPanel__MediaSubheading",componentId:"sc-1c53rqi-0"})(["margin-top:24px;padding:0 24px;",""],(e=>e.shouldDisplay||"display: none;")),bX=p.default.div.withConfig({displayName:"providerPanel__ProviderWrapper",componentId:"sc-1c53rqi-1"})(["position:relative;display:flex;flex-direction:column;height:100%;min-height:100px;max-width:100%;top:0;left:0;",""],(e=>{let{hidden:t}=e;return t&&(0,p.css)(["position:absolute;visibility:hidden;"])}));const EX=function ProviderPanel(e){let{providerType:t,isActive:n,searchTerm:r,...a}=e;const{insertElement:o}=G$((e=>({insertElement:e.actions.insertElement}))),{actions:{registerUsage:l}}=xo(),{updateBaseColor:i}=Wo({}),s=(0,u.useCallback)((e=>{e?.attribution?.registerUsageUrl&&l({registerUsageUrl:e.attribution.registerUsageUrl})}),[l]),p=(0,u.useCallback)(((e,t)=>{Z_.default.set(e.id,{url:t,type:"cached"}),o(e.type,{resource:e}),s(e),e.baseColor||i(e)}),[o,s,i]),{media3p:m}=Di((e=>{let{media3p:t}=e;return{media3p:t}}));if(!n)return c.createElement(bX,gX({},a,{hidden:!0}));const f=m[t].state,g=m[t].actions,h=f.categories.selectedCategoryId?f.categories.categories.find((e=>e.id===f.categories.selectedCategoryId)).label:(0,d.__)("Trending","web-stories"),b=Boolean(f.media?.length||f.categories.selectedCategoryId),E=(0,d.__)("Search Results","web-stories");return c.createElement(bX,a,Et[t].supportsCategories&&c.createElement(lq,{items:f.categories.categories,selectedItemId:f.categories.selectedCategoryId,selectItem:g.selectCategory,deselectItem:g.deselectCategory}),c.createElement(hX,{"data-testid":"media-subheading",shouldDisplay:b},r.length&&!f.categories.selectedCategoryId?E:h),c.createElement(CK,{providerType:t,resources:f.media,isMediaLoading:f.isMediaLoading,isMediaLoaded:f.isMediaLoaded,hasMore:f.hasMore,setNextPage:g.setNextPage,onInsert:p,searchTerm:r,selectedCategoryId:f.categories.selectedCategoryId}))};function yX(){return yX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yX.apply(this,arguments)}const _X=p.default.div.withConfig({displayName:"media3pPane__PaneBottom",componentId:"sc-1hq1xk8-0"})(["position:relative;height:100%;flex:1 1 auto;min-height:0;"]);const vX=function Media3pPane(e){const{isActive:t}=e,{searchTerm:n,selectedProvider:r,setSelectedProvider:a,setSearchTerm:o,media3p:l}=Di((e=>{let{media3p:{state:{selectedProvider:t,searchTerm:n},actions:{setSelectedProvider:r,setSearchTerm:a}},media3p:o}=e;return{searchTerm:n,selectedProvider:t,setSelectedProvider:r,setSearchTerm:a,media3p:o}}));(0,u.useEffect)((()=>{t&&!r&&a({provider:Object.keys(Et)[0]})}),[t,r,a]);const i=l[r]?.state?.categories?.selectedCategoryId;(0,u.useEffect)((()=>{n.length&&(0,P.trackEvent)("search",{search_type:"media3p",search_term:n,search_filter:r,search_category:i})}),[r,n,i]);const s=(0,u.useCallback)((e=>{const t=e.trim();t!==n&&o({searchTerm:t})}),[n,o]),p=(0,C.useFeature)(IK.INCREMENTAL_SEARCH_DEBOUNCE_MEDIA),m=(0,u.useRef)(),f=(0,C.useFeatures)(),g=(0,u.useMemo)((()=>Object.keys(Et).filter((e=>!Et[e].featureName||f[Et[e].featureName]))),[f]);return c.createElement(c.Fragment,null,t&&c.createElement(iX,null),c.createElement(vq,yX({id:sX},e),c.createElement(fq,null,c.createElement(gq,null,c.createElement(wq,null,c.createElement(q$,{initialValue:n,placeholder:(0,d.__)("Search","web-stories"),onSearch:s,incremental:p,disabled:Boolean(r&&Et[r].supportsCategories&&l[r]?.state.categories.selectedCategoryId)})),c.createElement(fX,{providers:g})),c.createElement(_X,{ref:m},g.map((e=>c.createElement(EX,{key:e,providerType:e,isActive:e===r,searchTerm:n,role:"tabpanel","aria-labelledby":`provider-tab-${e}`,id:`provider-tabpanel-${e}`})))))))};const wX=function Media3pIcon(){return c.createElement(gy,{title:(0,d.__)("Explore Media","web-stories")})},TX=ee.PAGE_WIDTH/3,SX=p.default.button.withConfig({displayName:"shapePreview__Aspect",componentId:"sc-1pj9cm0-0"})(["background:transparent;outline:none;border:0;padding:0;position:relative;border-radius:",";background-color:",";&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.previewOverlay}),hp.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),CX=p.default.div.withConfig({displayName:"shapePreview__AspectInner",componentId:"sc-1pj9cm0-1"})(["position:relative;padding-bottom:95.5%;"]),IX=p.default.div.withConfig({displayName:"shapePreview__ShapePreviewContainer",componentId:"sc-1pj9cm0-2"})(["position:absolute;top:0;left:0;height:100%;width:100%;border-radius:",";display:flex;justify-content:center;align-items:center;svg{display:inline-block;width:36px;height:36px;}"],(e=>{let{theme:t}=e;return t.borders.radius.small})),xX=p.default.div.withConfig({displayName:"shapePreview__ShapeClone",componentId:"sc-1pj9cm0-3"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";svg{display:inline-block;width:100%;height:100%;path{fill:#c4c4c4;}}"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`})),AX=p.default.div.withConfig({displayName:"shapePreview__ShapePreviewSizer",componentId:"sc-1pj9cm0-4"})(["padding-top:100%;"]),kX=p.default.path.withConfig({displayName:"shapePreview__Path",componentId:"sc-1pj9cm0-5"})(["fill:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const OX=function ShapePreview(e){let{mask:t,isPreview:n,index:r}=e;const{insertElement:a}=G$((e=>({insertElement:e.actions.insertElement}))),{dataToEditorX:o,dataToEditorY:l}=(0,Rc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),[i,s]=(0,u.useState)(!1),d=()=>s(!0),p=()=>s(!1),m=(0,u.useRef)(),f=(0,u.createRef)(),g=(0,u.useMemo)((()=>({backgroundColor:(0,Ow.default)("#c4c4c4"),width:TX*t.ratio,height:TX,mask:{type:t.type},lockAspectRatio:Un.MaskTypes.RECTANGLE!==t.type})),[t.ratio,t.type]),h=(0,u.useCallback)((()=>{a("shape",g),(0,P.trackEvent)("insert_shape",{name:t.type})}),[a,g,t.type]),b=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return c.createElement("svg",{viewBox:"0 0 1 "+1/(n&&t.iconRatio?t.iconRatio:t.ratio),width:36*(n&&t.iconRatio?t.iconRatio:t.ratio),height:36},e&&c.createElement("title",null,t.name),c.createElement(kX,{d:n&&t.iconPath?t.iconPath:t.path,ref:f}))};return c.createElement(SX,{ref:m,onClick:h,tabIndex:0===r?0:-1,"aria-label":t.name,onPointerEnter:d,onFocus:d,onPointerLeave:p,onBlur:p},c.createElement(CX,null,c.createElement(IX,{key:t.type},c.createElement(AX,null),b()),i&&c.createElement(tK,null)),c.createElement(Qq,{type:"shape",elementProps:g,cloneElement:xX,cloneProps:{width:o(TX*t.ratio),height:l(TX),children:b(!1)}}))},PX=(0,p.default)(m.Button).attrs({size:f.BUTTON_SIZES.SMALL}).withConfig({displayName:"stickerPreview__StickerButton",componentId:"sc-rjblwe-0"})(["position:relative;padding:0 0 95.5% 0;margin:0;height:60px;background-color:",";&.",",&[data-focus-visible-added] [role='presentation']{box-shadow:none;}&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.previewOverlay}),hp.FOCUS_VISIBLE_SELECTOR,hp.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),NX=p.default.div.withConfig({displayName:"stickerPreview__StickerInner",componentId:"sc-rjblwe-1"})(["position:absolute;top:0;left:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;"]),RX=p.default.div.withConfig({displayName:"stickerPreview__StickerClone",componentId:"sc-rjblwe-2"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`}));const MX=function StickerPreview(e){let{stickerType:t,index:n}=e;const{insertElement:r}=G$((e=>({insertElement:e.actions.insertElement}))),{dataToEditorX:a,dataToEditorY:o}=(0,Rc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),l=Zi.default[t],i=l.aspectRatio,s=(0,u.useMemo)((()=>({width:TX*i,height:TX,sticker:{type:t}})),[i,t]),[d,p]=(0,u.useState)(!1),m=()=>p(!0),f=()=>p(!1),g=l.svg;return c.createElement(PX,{"data-testid":`library-sticker-${t}`,onClick:()=>r("sticker",{width:TX,sticker:{type:t}}),tabIndex:0===n?0:-1,onPointerEnter:m,onFocus:m,onPointerLeave:f,onBlur:f},c.createElement(NX,null,c.createElement(g,{style:{height:i<.955?"60%":"auto",width:i<.955?"auto":"60%"}}),d&&c.createElement(tK,null),c.createElement(Qq,{type:"sticker",elementProps:s,cloneElement:RX,cloneProps:{width:a(TX*(i<1?i:1)),height:o(TX/(i<1?1:i)),children:c.createElement(g,{style:{height:"auto",width:"100%"}})}})))},LX=cq("shapes");function DX(){return DX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DX.apply(this,arguments)}const BX=p.default.div.withConfig({displayName:"shapesPane__SectionContent",componentId:"sc-ffcyax-0"})(["position:relative;display:grid;grid-column-gap:12px;grid-row-gap:24px;@media screen and (min-width:1220px){grid-template-columns:repeat(4,1fr);}@media screen and (min-width:1100px) and (max-width:1220px){grid-template-columns:repeat(3,1fr);}@media screen and (max-width:1100px){grid-template-columns:repeat(2,1fr);}"]),FX=Object.keys(Zi.default);const HX=function ShapesPane(e){const t=(0,u.useRef)();$C({ref:t});const n=(0,u.useRef)(null);return $C({ref:n}),c.createElement(sq,DX({id:LX},e,{isOverflowScrollable:!0}),c.createElement(Q$,{"data-testid":"shapes-library-pane",title:(0,d.__)("Shapes","web-stories")},c.createElement(BX,{ref:t},Un.MASKS.filter((e=>e.showInLibrary)).map(((e,t)=>c.createElement(OX,{mask:e,key:e.type,index:t,isPreview:!0}))))),c.createElement(Q$,{"data-testid":"stickers-library-pane",title:(0,d.__)("Stickers","web-stories")},c.createElement(BX,{ref:n},FX.map(((e,t)=>c.createElement(MX,{key:e,index:t,stickerType:e}))))))};const UX=function ShapesIcon(){return c.createElement(c_,{title:(0,d.__)("Shapes library","web-stories")})};function jX(){return jX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jX.apply(this,arguments)}const zX=p.default.button.withConfig({displayName:"fontPreview__Preview",componentId:"sc-kfwh27-0"})(["position:relative;display:flex;align-items:center;background-color:",";padding:8px 0px;border-radius:",";width:100%;border:none;cursor:pointer;text-align:left;"," &."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{isTextSelected:t}=e;return t?np:"outline: none;"}),hp.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),GX=(0,p.default)($e.Text).attrs({forwardedAs:"span"}).withConfig({displayName:"fontPreview__PreviewText",componentId:"sc-kfwh27-1"})(["color:",";font-size:","px;font-weight:",";font-family:",";line-height:normal;margin:",";"],(e=>{let{theme:t,isClone:n}=e;return n?t.colors.standard.black:t.colors.fg.primary}),(e=>{let{fontSize:t}=e;return t}),(e=>{let{fontWeight:t}=e;return t}),(e=>{let{fontFamily:t}=e;return t}),(e=>{let{isClone:t}=e;return t?0:"0px 16px"})),YX=p.default.div.withConfig({displayName:"fontPreview__DragContainer",componentId:"sc-kfwh27-2"})(["position:absolute;opacity:0;background-color:",";width:","px;line-height:","px;"],(e=>{let{theme:t}=e;return t.colors.opacity.white24}),(e=>{let{width:t}=e;return t}),(e=>{let{lineHeight:t}=e;return t}));const ZX=function FontPreview(e){let{title:t,element:n,insertPreset:r,getPosition:a,index:o}=e;const l=(0,Hr.getHTMLFormatters)(),{font:i,fontSize:s,content:p}=n,{fontWeight:m}=tI(p),{actions:{maybeEnqueueFontStyle:f}}=No(),{dataToEditorX:g,dataToEditorY:h}=(0,Rc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),{shouldUseSmartColor:b}=G$((e=>({shouldUseSmartColor:e.state.shouldUseSmartColor}))),E=sd(),{isTextSelected:y,updateSelectedElements:_}=Ya((e=>{let{state:t,actions:n}=e;return{isTextSelected:aI("text",t.selectedElements),updateSelectedElements:n.updateSelectedElements}})),v=(0,u.useRef)(null);(0,u.useEffect)((()=>{f([{font:i,fontWeight:m,content:(0,Or.stripHTML)(p)}])}),[i,m,p,f]);const w=(0,u.useCallback)(((e,t)=>{let{fontWeight:n,isItalic:r,isUnderline:a,letterSpacing:o}=e;return t=l.setFontWeight(t,n),t=l.toggleItalic(t,r),t=l.toggleUnderline(t,a),t=l.setLetterSpacing(t,o)}),[l]),T=(0,u.useCallback)((async()=>{if(y)return void _({properties:e=>{const t=w(tI(n.content),e.content),r=bn(n,["x","y","content","width"]),a=uM({...e,...r});return{...e,...r,...a,content:t}}});let e=n;const o={isPositioned:!1};if(b){const t=a(n);o.isPositioned=!0,e={...n,...t},o.accessibleColors=await E(e)}r(e,o),(0,P.trackEvent)("insert_text_preset",{name:t})}),[y,a,n,b,r,t,_,w,E]),S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isClone:n}=e;return c.createElement(GX,jX({font:i,fontSize:s,fontWeight:m},e),n?(0,Or.stripHTML)(p):t)};(0,fr.useKeyDownEffect)(v,{key:["enter","space"]},T,[T]),$C({ref:v});const[C,I]=(0,u.useState)(!1),x=()=>I(!0),A=()=>I(!1);return c.createElement(zX,{ref:v,onPointerEnter:x,onFocus:x,onPointerLeave:A,onBlur:A,tabIndex:0===o?0:-1,isTextSelected:y,"aria-label":y?(0,We.default)(
/* translators: %s: preset name */
(0,d.__)("Apply preset: %s","web-stories"),t):null},S(),C&&!y&&c.createElement(tK,null),c.createElement(Qq,{cloneElement:YX,cloneProps:{children:S({fontSize:h(s),isClone:!0}),width:g(n.width),lineHeight:Math.ceil(h(s))},elementProps:n,type:"text",onClick:T}))},WX=cq("text"),VX=(0,Vr.dataFontEm)(1),$X="text";const qX=function(e){let{shouldUseSmartColor:t}=e;const{insertElement:n}=G$((e=>({insertElement:e.actions.insertElement}))),{state:{versionNumber:r}}=Cr(),a=(0,Hr.getHTMLFormatters)(),{setColor:o}=a,[l,i]=(0,u.useState)(null),[s,c]=(0,u.useState)(null),d=(0,u.useRef)(null),p=sd();(0,u.useEffect)((()=>{d.current?.element&&!d.current.versionNumber?d.current.versionNumber=r:d.current?.versionNumber&&(d.current=null)}),[r]);const m=(0,u.useCallback)((e=>{const{y:t}=e;if(!d.current)return t;const{element:{height:n,y:r}}=d.current;let a=r+n+VX;const{width:o,height:l}=$i($X,e.width,e.height,{...e,y:a});return a+l>=ee.PAGE_HEIGHT&&(a=t),{width:o,height:l,y:a}}),[]);(0,u.useEffect)((()=>{if(l&&s){const{content:e}=s,{color:t,backgroundColor:r}=l,a=r?{backgroundColor:{color:r},backgroundTextMode:On.BACKGROUND_TEXT_MODE.HIGHLIGHT,padding:V_(s)}:null,u={...s,content:t?o(e,{color:t}):e,...a},p=n($X,{...u,height:(0,zn.calculateTextHeight)(u,u.width)});d.current={versionNumber:null,element:p},i(null),c(null)}}),[l,s,n,o]);const f=(0,u.useCallback)((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isPositioned:a,accessibleColors:o}=r,l=a?{}:m(e);if(t){if(c({...e,...l}),o)return void i(o);i(await p({...e,...l}))}else{const t=n($X,{...e,...l});d.current={versionNumber:null,element:t}}}),[m,p,t,n]);return{getPosition:m,insertPreset:f}};const KX=function(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return(0,We.default)(
/* translators: %1$s: first item of list. %2$s: second item of list. */
(0,d.__)("%1$s and %2$s","web-stories"),e[0],e[1]);default:return(0,We.default)(
/* translators: %1$s: is a comma separated list. %2$s: last entry in list  */
(0,d.__)("%1$s, and %2$s","web-stories"),e.slice(0,e.length-1).join(
/* translators: delimiter used in a list */
(0,d.__)(", ","web-stories")),e[e.length-1])}},XX=p.default.div.withConfig({displayName:"styles__FullWidthWrapper",componentId:"sc-10l2iqe-0"})(["margin-left:-",";margin-right:-",";"],iq,iq);function QX(e){return Array.from(new Set(e.map((e=>{let{elements:t=[]}=e;return t.map((e=>"text"===e.type&&Boolean(e.font?.family)?e.font?.family:null))})).flat().filter(Boolean)))||[]}const JX=(0,p.css)(["margin-top:38px;padding-top:2px;width:100%;height:100%;"]),eQ=p.default.div.withConfig({displayName:"components__VirtualizedWrapper",componentId:"sc-qhv222-0"})(["height:",";width:100%;position:relative;"],(e=>{let{height:t}=e;return`${t}px`}));eQ.propTypes={height:Ma().number.isRequired};const tQ=p.default.div.withConfig({displayName:"components__VirtualizedContainer",componentId:"sc-qhv222-1"})(["position:absolute;top:0;left:",";display:grid;grid-template-columns:1fr 1fr;grid-template-columns:",";grid-template-rows:",";gap:","px;width:calc(100% - ",");height:100%;margin-top:4px;"],(e=>{let{paneLeft:t}=e;return t}),(e=>{let{columnWidth:t}=e;return`\n    repeat(auto-fill, ${t}px)`}),(e=>{let{rowHeight:t}=e;return`minmax(${t}px, auto)`}),(e=>{let{rowGap:t}=e;return t}),(e=>{let{paneLeft:t}=e;return t}));tQ.propTypes={columnWidth:Ma().number.isRequired,rowHeight:Ma().number.isRequired,rowGap:Ma().number,paneLeft:Ma().oneOfType([Ma().string,Ma().number])},tQ.defaultProps={rowGap:12,paneLeft:0};var nQ,rQ,aQ;function oQ(){return oQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oQ.apply(this,arguments)}const SvgDesertBw=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",oQ({viewBox:"0 0 274 118",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,nQ||(nQ=c.createElement("path",{d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.794-10.544a10.003 10.003 0 0 0 2.525-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675c.436.215.886.397 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a9.985 9.985 0 0 1-2.818-.186Z",fill:"#767E80"})),rQ||(rQ=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4V26ZM120.857 53.178a2.143 2.143 0 0 1 4.286 0v14.25h1.714v-5.357a1.072 1.072 0 0 1 2.143 0V68.5a1.146 1.146 0 0 1-.048.319 1.073 1.073 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714v-12.25ZM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.987 3.987 0 0 1-2.828-1.171A3.988 3.988 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572V8Z",fill:"#ADB1B3"})),aQ||(aQ=c.createElement("circle",{cx:213,cy:72,r:13,fill:"#E4E5E6"})))},lQ=(0,c.memo)(SvgDesertBw),iQ=p.default.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-vwmhk4-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:8vh auto;text-align:center;*{text-align:center;margin:0 auto;}"]),sQ=(0,p.default)(lQ).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-vwmhk4-1"})(["margin-bottom:48px;"]);const cQ=function EmptyContentMessage(e){let{children:t,...n}=e;return c.createElement(iQ,n,c.createElement(sQ,{"aria-hidden":!0,width:274,height:118}),t)};var dQ=n(78720);function uQ(e,t){return e?{content:t?`<span style="color: #fff">${e}<span>`:e}:{}}function TextSetContainer(e){let{pageSize:t,children:n}=e;return t?c.createElement(is,{pageSize:t},n):n}const pQ=function TextSetElements(e){let{elements:t,isForDisplay:n,pageSize:r}=e;const{textSetHeight:a,textSetWidth:o}=t[0],l=n?(ee.PAGE_WIDTH-o)/2:0,i=n?(ee.PAGE_WIDTH-a)/2:0;return c.createElement(TextSetContainer,{pageSize:r},t.map((e=>{let{id:t,content:r,normalizedOffsetX:a,normalizedOffsetY:o,...s}=e;return c.createElement(Hc,{previewMode:!0,key:t,element:{id:t,...uQ(r,n),...s,x:a+l,y:o+i}})})))};function mQ(){return mQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mQ.apply(this,arguments)}const fQ=p.default.button.withConfig({displayName:"textSet__TextSetItem",componentId:"sc-1hor9ow-0"})(["border:0;background:none;position:absolute;top:0;height:","px;width:","px;display:flex;align-items:center;justify-content:center;flex-direction:column;transform:",";background-color:",";border-radius:",";cursor:pointer;transition:background-color ",";outline:none;&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],Ae,Ae,(e=>{let{translateX:t,translateY:n}=e;return`translateX(${t}px) translateY(${n}px)`}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),f.BUTTON_TRANSITION_TIMING,hp.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),gQ=p.default.img.withConfig({displayName:"textSet__TextSetImg",componentId:"sc-1hor9ow-1"})(["width:","px;height:","px;"],Ae,Ae),hQ=p.default.div.withConfig({displayName:"textSet__DragContainer",componentId:"sc-1hor9ow-2"})(["position:absolute;opacity:0;width:","px;height:","px;background-color:",";"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.opacity.white24}));function TextSet(e,t){let{id:n,elements:r,translateY:a,translateX:o,isActive:l,index:i,...s}=e;const{insertTextSet:d}=G$((e=>({insertTextSet:e.actions.insertTextSet}))),{cdnURL:p}=U(),{pageWidth:m,pageHeight:f}=cs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),g=(0,u.useCallback)((()=>{d(r),(0,P.trackEvent)("insert_textset")}),[r,d]),h=(0,u.useCallback)((e=>{let{code:t}=e;"Enter"!==t&&"Space"!==t||g()}),[g]);$C({ref:t.current});const[b,E]=(0,u.useState)(!1),{textSetHeight:y,textSetWidth:_}=r[0],v=(0,Vr.dataToEditorX)(_,m),w=(0,Vr.dataToEditorY)(y,f);return c.createElement(fQ,mQ({translateX:o,translateY:a,ref:t,onKeyUp:h,onPointerEnter:()=>E(!0),onPointerLeave:()=>E(!1),tabIndex:0===i?0:-1},s),c.createElement(gQ,{src:`${p}images/text-sets/${n}.png`,alt:"",crossOrigin:"anonymous",decoding:"async"}),(l||b)&&c.createElement(tK,null),c.createElement(Qq,{type:"textSet",elements:r,elementProps:{},onClick:g,cloneElement:hQ,cloneProps:{width:v,height:w,children:c.createElement(pQ,{elements:r,pageSize:{width:m,height:f}})}}))}const bQ=(0,u.forwardRef)(TextSet);TextSet.displayName="TextSet";const EQ=bQ,yQ={contact:(0,d._x)("Contact","text set category","web-stories"),editorial:(0,d._x)("Editorial","text set category","web-stories"),list:(0,d._x)("List","text set category","web-stories"),cover:(0,d._x)("Cover","text set category","web-stories"),section_header:(0,d._x)("Header","text set category","web-stories"),step:(0,d._x)("Steps","text set category","web-stories"),table:(0,d._x)("Table","text set category","web-stories"),quote:(0,d._x)("Quote","text set category","web-stories")},_Q={TITLE:(0,d.__)("Text Sets","web-stories"),SWITCH_LABEL:(0,d.__)("Match fonts from story","web-stories")},vQ={width:Ae,height:Ae/ee.PAGE_RATIO};const wQ=function TextSets(e){let{paneRef:t,filteredTextSets:n}=e;const r=(0,u.useRef)(),a=(0,u.useRef)({}),o=(0,u.useMemo)((()=>n.map((e=>e.id))),[n]),l=(0,dQ.useVirtual)({size:Math.ceil((n||[]).length/2),parentRef:t,estimateSize:(0,u.useCallback)((()=>162),[]),overscan:4}),i=(0,dQ.useVirtual)({horizontal:!0,size:2,parentRef:t,estimateSize:(0,u.useCallback)((()=>162),[]),overscan:0}),{activeGridItemId:s,handleGridFocus:p,handleGridItemFocus:m,isGridFocused:f}=function(e){let{containerRef:t,gridItemRefs:n,gridItemIds:r,rowVirtualizer:a}=e;const[o,l]=(0,u.useState)(),[i,s]=(0,u.useState)(!1),c=(0,u.useMemo)((()=>a.virtualItems),[a]),d=(0,u.useRef)();(0,u.useEffect)((()=>{c!==d?.current&&(d.current=c),o&&i&&n.current?.[o]?.focus()}),[o,c,i,n]),$C({ref:t});const p=(0,u.useCallback)((()=>{if(!i){const e=n.current?.[o]?o:r?.[0];l(e),s(!0),n.current?.[e]?.focus()}}),[o,i,r,n]),m=(0,u.useCallback)((e=>{o!==e&&l(e)}),[o]),f=ws(),g=(0,u.useCallback)((()=>{f(),s(!1)}),[f]);return(0,fr.useKeyDownEffect)(t,"tab",g,[g]),(0,u.useFocusOut)(t,(()=>{s(!1)}),[]),(0,u.useMemo)((()=>({handleGridFocus:p,handleGridItemFocus:m,activeGridItemId:o,isGridFocused:i})),[o,i,p,m])}({rowVirtualizer:l,containerRef:r,gridItemRefs:a,gridItemIds:o});return c.createElement(is,{pageSize:vQ},c.createElement(eQ,{height:l.totalSize},c.createElement(tQ,{height:l.totalSize,ref:r,columnWidth:Ae,rowHeight:Ae,onFocus:p,role:"group","aria-label":(0,d.__)("Text Set Options","web-stories")},l.virtualItems.map((e=>i.virtualItems.map((t=>{const r=(e=>{let{columnIndex:t,rowIndex:n}=e;return 0===t?2*n:2*n+1})({columnIndex:t.index,rowIndex:e.index}),o=n[r];if(!o?.elements)return null;const l=s===o.id&&f;return c.createElement(EQ,{key:r,id:o.id,"data-testid":`text_set_${o.id}`,ref:e=>a.current[o.id]=e,translateY:e.start,translateX:t.start,"aria-label":o.title,isActive:l,onFocus:()=>m(o.id),elements:o.elements,index:r})})))))))},TQ=p.default.div.withConfig({displayName:"textSetsPane__TitleBar",componentId:"sc-vycaev-0"})(["display:flex;justify-content:space-between;padding:20px 0;"]),SQ=p.default.div.withConfig({displayName:"textSetsPane__TextSetsToggle",componentId:"sc-vycaev-1"})(["display:flex;label{cursor:pointer;margin:auto 12px;color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),CQ=p.default.div.withConfig({displayName:"textSetsPane__TextSetsWrapper",componentId:"sc-vycaev-2"})(["",";"],JX);const IQ=function TextSetsPane(e){let{paneRef:t}=e;const{areTextSetsLoading:n,textSets:r}=G$((e=>{let{state:{areTextSetsLoading:t,textSets:n}}=e;return{areTextSetsLoading:t,textSets:n}})),[a,o]=(0,u.useState)(!1),l=(0,u.useRef)(!1),i=(0,u.useMemo)((()=>Object.values(r).flat()),[r]),s=Ya((e=>{let{state:{pages:t}}=e;return t})),[p,m]=(0,u.useState)(Fo.getItemByKey(Bo.TEXT_SET_SETTINGS)?.selectedCategory),f=(0,u.useCallback)((()=>function(e){let{fonts:t,textSets:n}=e;return n.map((e=>e.elements.reduce(((e,n)=>"text"===n.type&&Boolean(n.font?.family)?e|-1!==t.indexOf(n.font?.family):e),!1)&&e)).filter(Boolean)}({fonts:QX(s),textSets:p?r[p]:i})),[i,s,p,r]),g=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((e=>{let{textSetFonts:t=[],textSetCategory:n,elements:r,id:a}=e;return{id:a,title:(0,We.default)(
/* translators: 1: text set category. 2: list of fonts. */
(0,d._n)("Text set %1$s with %2$s font","Text set %1$s with %2$s fonts",t.length,"web-stories"),yQ[n],KX(t)),elements:r}}))}),[]),h=(0,u.useMemo)((()=>g(a?f():p?r?.[p]:i)),[p,r,i,g,f,a]),b=(0,u.useMemo)((()=>[{id:null,label:(0,d._x)("All","text sets","web-stories")},...Object.keys(r).map((e=>({id:e,label:yQ[e]??e})))]),[r]),E=(0,mk.default)(),y=(0,u.useCallback)((e=>{m(e),E(null===e?(0,d.__)("Show all text sets","web-stories"):(0,We.default)(
/* translators: %s: filter category name */
(0,d.__)("Selected text set filter %s","web-stories"),yQ[e])),Fo.setItemByKey(Bo.TEXT_SET_SETTINGS,{selectedCategory:e}),l.current=!0}),[E]),_=(0,u.useCallback)((()=>{requestAnimationFrame((()=>o((e=>!e)))),l.current=!0}),[o]);(0,u.useEffect)((()=>{l.current&&(0,P.trackEvent)("search",{search_type:"textsets",search_term:"",search_category:p,search_filter:a?"show_in_use":void 0})}),[p,a]);const v=(0,u.useMemo)((()=>`section-${(0,pe.default)()}`),[]),w=(0,u.useMemo)((()=>`toggle_text_sets_${(0,pe.default)()}`),[]),T=(0,u.useMemo)((()=>a?(0,d.__)("No matching Text Sets available. Try adding text to your story.","web-stories"):(0,d.__)("No Text Sets available.","web-stories")),[a]);return c.createElement(K$,{id:v},c.createElement(TQ,null,c.createElement(Qu.Headline,{as:"h2",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},_Q.TITLE),c.createElement(SQ,null,c.createElement($e.Text,{as:"label",htmlFor:w,size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},_Q.SWITCH_LABEL),c.createElement(jK,{id:w,"aria-label":_Q.SWITCH_LABEL,name:w,checked:a,onChange:_}))),c.createElement(XX,null,c.createElement(lq,{items:b,selectedItemId:p,selectItem:y,deselectItem:()=>y(null),ariaLabel:(0,d.__)("Select filter for text sets list","web-stories")})),c.createElement(CQ,null,h?.length||n?c.createElement(wQ,{paneRef:t,filteredTextSets:h}):c.createElement(cQ,null,T)))};function xQ(){return xQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xQ.apply(this,arguments)}const AQ=(0,p.default)(K$).withConfig({displayName:"stylePresets__SectionContainer",componentId:"sc-bczcw0-0"})(["padding:16px 0;margin-bottom:-24px;border-top:1px solid ",";border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),kQ=p.default.div.withConfig({displayName:"stylePresets__TitleBar",componentId:"sc-bczcw0-1"})(["display:flex;padding-bottom:16px;justify-content:space-between;align-items:center;"]),OQ=p.default.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-bczcw0-2"})([""]),PQ=(0,p.default)(m.Button).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-bczcw0-3"})(["margin-left:auto;"]),NQ=(0,p.default)($e.Text).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-bczcw0-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),RQ={x:40},MQ="text";const LQ=(0,u.memo)((function(){const{textStyles:e,isText:t,updateSelectedElements:n}=Ya((e=>{let{state:t,actions:n}=e;return{isText:Boolean(t.selectedElements&&aI(MQ,t.selectedElements)),textStyles:t.story?.globalStoryStyles?.textStyles||[],updateSelectedElements:n.updateSelectedElements}})),{insertElement:r}=G$((e=>({insertElement:e.actions.insertElement}))),{setColor:a,setFontWeight:o,setLetterSpacing:l,toggleItalic:i,toggleUnderline:s}=(0,Hr.getHTMLFormatters)(),p=(0,u.useRef)(null),m=(0,u.useRef)(null),[g,h]=(0,u.useState)(!1),b=e.length>0,E=(0,u.useCallback)((e=>{n({properties:t=>{const n=W_(t,e,!0),r=uM({...t,...n});return{...n,...r}}})}),[n]),y=yY({pushUpdate:E}),{addGlobalPreset:_}=oI({presetType:Fe}),v=e=>{t?y(e):((e=>{const{color:t,fontWeight:n,isItalic:c,isUnderline:d,letterSpacing:u}=e;let p=Ls.content;p=a(p,t),p=o(p,n),p=i(p,c),p=s(p,d),p=l(p,u),r(MQ,{...Ls,...e,content:p})})(e),h(!1))},w=t?{}:{activeItemOverlay:c.createElement(tK,null),applyLabel:(0,d.__)("Add new text","web-stories")};return c.createElement(AQ,null,c.createElement(kQ,null,c.createElement(Qu.Headline,{as:"h2",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Saved Styles","web-stories")),c.createElement(PQ,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onClick:_,"aria-label":(0,d.__)("Add style","web-stories"),disabled:!t},c.createElement(Dy,null))),b&&c.createElement(c.Fragment,null,c.createElement(OQ,{ref:m},c.createElement(tY,xQ({styles:[...e].reverse().slice(0,2),handleClick:v,buttonWidth:150},w))),c.createElement(EY,{ref:p,onClick:()=>h(!0),"aria-haspopup":"dialog","aria-expanded":g},(0,d.__)("More styles","web-stories"),c.createElement(fp.default,null)),c.createElement(bS.Popup,{anchor:p,isOpen:g,placement:Bd.PLACEMENT.RIGHT_START,spacing:RQ,renderContents:()=>c.createElement(hY,xQ({styles:e,applyStyle:v,onClose:()=>h(!1)},w))})),!b&&c.createElement(bY,null,c.createElement(NQ,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("No Styles Saved","web-stories"))))}));function DQ(){return DQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DQ.apply(this,arguments)}const BQ=(0,p.default)(sq).withConfig({displayName:"textPane__Pane",componentId:"sc-zvmbdp-0"})(["overflow-y:scroll;max-height:100%;position:relative;"]),FQ=p.default.div.withConfig({displayName:"textPane__GridContainer",componentId:"sc-zvmbdp-1"})(["display:grid;grid-template-columns:1fr 1fr;gap:12px;"]),HQ=p.default.div.withConfig({displayName:"textPane__SmartColorToggle",componentId:"sc-zvmbdp-2"})(["display:flex;label{cursor:pointer;margin:auto 12px;color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const UQ=function TextPane(e){const t=(0,u.useRef)(),[,n]=(0,u.useState)(),{shouldUseSmartColor:r,setShouldUseSmartColor:a}=G$((e=>({shouldUseSmartColor:e.state.shouldUseSmartColor,setShouldUseSmartColor:e.actions.setShouldUseSmartColor}))),{getPosition:o,insertPreset:l}=qX({shouldUseSmartColor:r}),i=cd((e=>{let{actions:t}=e;return t.generateDeferredCurrentPageCanvas}));(0,u.useResizeEffect)(t,(()=>{n(Date.now())}),[]);const s=(0,u.useCallback)((()=>a((e=>!e))),[a]),p=(0,u.useMemo)((()=>`toggle_auto_color_${(0,pe.default)()}`),[]);return c.createElement(BQ,DQ({id:WX},e,{ref:t}),c.createElement(HQ,null,c.createElement($e.Text,{as:"label",htmlFor:p,size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Adaptive text colors","web-stories")),c.createElement(Tooltip,{title:(0,d.__)("May impact performance when inserting text","web-stories")},c.createElement(jK,{id:p,checked:r,onChange:s}))),c.createElement(K$,{onPointerOver:()=>r&&i()},c.createElement(FQ,null,Ds.map(((e,t)=>{let{title:n,element:r}=e;return c.createElement(ZX,{key:n,title:n,element:r,insertPreset:l,getPosition:o,index:t})})))),c.createElement(LQ,null),t.current&&c.createElement(IQ,{paneRef:t}))};const jQ=function TextIcon(){return c.createElement(Zb.default,{title:(0,d.__)("Text library","web-stories")})},zQ=cq("pageTemplates");var GQ=n(13293);const YQ={cover:{name:(0,d.__)("Cover","web-stories")},section:{name:(0,d.__)("Section","web-stories")},quote:{name:(0,d.__)("Quote","web-stories")},editorial:{name:(0,d.__)("Editorial","web-stories")},list:{name:(0,d.__)("List","web-stories")},table:{name:(0,d.__)("Table","web-stories")},steps:{name:(0,d.__)("Steps","web-stories")}};function ZQ(){return ZQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZQ.apply(this,arguments)}const WQ=p.default.div.withConfig({displayName:"defaultPageTemplate__PageTemplateWrapper",componentId:"sc-kt5s68-0"})([""]),VQ=(0,p.default)(m.Button).attrs({type:f.BUTTON_TYPES.PLAIN}).withConfig({displayName:"defaultPageTemplate__PageTemplateButton",componentId:"sc-kt5s68-1"})(["position:relative;display:block;padding:0;border-radius:",";overflow:hidden;&.",",&[data-focus-visible-added] [role='presentation']{box-shadow:none;}&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),hp.FOCUS_VISIBLE_SELECTOR,hp.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return tp.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),$Q=(0,p.default)(mq).withConfig({displayName:"defaultPageTemplate__TemplateTitleContainer",componentId:"sc-kt5s68-2"})(["",":hover &,",":focus &{opacity:1;}"],VQ,VQ),qQ=p.default.img.withConfig({displayName:"defaultPageTemplate__PosterImg",componentId:"sc-kt5s68-3"})(["display:block;width:100%;"]),KQ=(0,u.forwardRef)(((e,t)=>{let{page:n,columnWidth:r,isActive:a,onFocus:o,...l}=e;const i=(0,We.default)(
/* translators: 1: template name. 2: page template name. */
(0,d._x)("%1$s %2$s","page template title","web-stories"),n.title,YQ[n.type].name),[s,p]=(0,u.useState)(!1);return c.createElement(WQ,{ref:t,role:"listitem"},c.createElement(VQ,ZQ({columnWidth:r,tabIndex:a?0:-1,"aria-label":i,onPointerEnter:()=>p(!0),onPointerLeave:()=>p(!1),onFocus:()=>{p(!0),o?.()},onBlur:()=>p(!1)},l),n.png&&c.createElement(qQ,{src:n.png,alt:(0,We.default)(
/* translators: 1: page title */
(0,d.__)("Snapshot of page template for %1$s","web-stories"),n.title),crossOrigin:"anonymous",decoding:"async",draggable:!1}),s&&c.createElement(tK,null),n.title&&c.createElement($Q,null,c.createElement($e.Text,{as:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},i))))}));KQ.displayName="DefaultPageTemplate";const XQ=KQ,QQ=p.default.img.withConfig({displayName:"savedPageTemplate__TemplateImage",componentId:"sc-5hfe38-0"})(["width:100%;height:auto;"]),JQ=p.default.div.withConfig({displayName:"savedPageTemplate__PageTemplateWrapper",componentId:"sc-5hfe38-1"})(["height:","px;width:","px;cursor:pointer;",";",";"],(e=>{let{pageSize:t}=e;return t.height}),(e=>{let{pageSize:t}=e;return t.width}),(e=>{let{isHighlighted:t}=e;return t&&tp.focusCSS}),np);JQ.propTypes={pageSize:Mc.isRequired};const eJ=p.default.div.withConfig({displayName:"savedPageTemplate__PreviewPageWrapper",componentId:"sc-5hfe38-2"})(["position:relative;height:","px;width:","px;background-color:",";border-radius:",";overflow:hidden;",""],(e=>{let{pageSize:t}=e;return t.height}),(e=>{let{pageSize:t}=e;return t.width}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{background:t}=e;return(0,Yr.default)(t)}));eJ.propTypes={pageSize:Mc.isRequired};const tJ=(0,p.default)(pq).withConfig({displayName:"savedPageTemplate__DeleteButton",componentId:"sc-5hfe38-3"})(["top:4px;right:4px;"]);function SavedPageTemplate(e,t){let{page:n,pageSize:r,handleDelete:a,index:o,...l}=e;const{capabilities:{hasUploadMediaAction:i}}=U(),{actions:{updatePageTemplate:s}}=W(),{actions:{uploadFile:p}}=Mt(),{updateSavedTemplate:m}=G$((e=>({updateSavedTemplate:e.actions.updateSavedTemplate}))),f=kc((e=>{let{actions:t}=e;return t.queuePageImageGeneration})),g=kc((e=>{let{state:{dataUrls:t}}=e;return t[n.id]}))||n.pregeneratedPageDataUrl,[h,b]=(0,u.useState)(!1);(0,u.useFocusOut)(t,(()=>b(!1)),[]);const{highlightedTemplate:E,onClick:y}=l,_=(0,u.useCallback)((()=>b(!0)),[]),v=(0,u.useCallback)((()=>{b(!1)}),[]),w=n.image?.url||g,T=i&&g&&!n.image?.url;(0,u.useEffect)((()=>{T&&(async()=>{try{const e=await Mo(g),t=ce(e,`web-stories-page-template-${n.templateId}.jpg`,"image/jpeg"),r=await p(t,{templateId:n.templateId,mediaSource:"page-template"});s(n.templateId,{featured_media:r.id}),m({templateId:n.templateId,image:{id:r.id,height:r.height,width:r.width,url:r.src}})}catch(e){(0,P.trackError)("upload_generated_page_template_image",e?.message)}})()}),[g,p,s,n.templateId,T,m]),(0,u.useEffect)((()=>{!w&&i&&f(n)}),[w,f,n,i]);const S=(0,u.useRef)(),C=(0,u.useRef)();$C({ref:S},[],2),$C({ref:C},[],2);const I=ws();return(0,fr.useKeyDownEffect)(C,"tab",I,[I]),c.createElement(JQ,{pageSize:r,role:"listitem",ref:t,onPointerEnter:_,onPointerLeave:v,"aria-label":n.title,isHighlighted:n.id===E,onFocus:_,onBlur:v,onClick:y},c.createElement(eJ,{pageSize:r,background:n.backgroundColor},w?c.createElement(QQ,{alt:n.image?.alt||(0,d.__)("Saved Page Template","web-stories"),src:w,height:n.image?.height,width:n.image?.height,draggable:!1}):c.createElement(is,{pageSize:{height:r.height,width:r.width}},n.elements.map((e=>c.createElement(Hc,{key:e.id,previewMode:!0,element:e})))),h&&c.createElement(tK,{showIcon:!1}),c.createElement(pq,{ref:S,onClick:e=>{e.stopPropagation(),y(e)},"aria-label":(0,d.__)("Use template","web-stories"),$display:h,tabIndex:0===o?0:-1},c.createElement(Oy,null)),c.createElement(tJ,{ref:C,$display:h,onClick:e=>{e.stopPropagation(),a(n,e)},"aria-label":(0,d.__)("Delete Page Template","web-stories"),tabIndex:h?0:-1},c.createElement(N_,null))))}const nJ=(0,u.forwardRef)(SavedPageTemplate);SavedPageTemplate.displayName="SavedPageTemplate";const rJ=nJ;function aJ(){return aJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aJ.apply(this,arguments)}const oJ=p.default.div.withConfig({displayName:"templateList__WrapperGrid",componentId:"sc-1ukppvz-0"})(["display:grid;width:100%;margin-left:",";margin-bottom:12px;gap:12px;grid-template-columns:",";grid-template-rows:",";"],iq,(e=>{let{columnWidth:t}=e;return`repeat(auto-fit, ${t}px)`}),(e=>{let{rowHeight:t}=e;return`repeat(minmax(${t}px, 1fr))`}));const lJ=function TemplateList(e){let{pages:t,parentRef:n,pageSize:r,handleDelete:a,fetchTemplates:o,...l}=e;const{addPage:i}=Ya((e=>{let{actions:t}=e;return{addPage:t.addPage}})),{isRTL:s}=U(),{showSnackbar:p}=(0,kr.useSnackbar)(),[m,f]=(0,u.useState)(),g=(0,u.useRef)(),h=(0,u.useRef)({}),b=(0,u.useCallback)((e=>{let{templateId:t,version:n,title:r,...a}=e;const o=(0,On.duplicatePage)(a);i({page:o}),(0,P.trackEvent)("insert_page_template",{name:r||"custom"}),p({message:(0,d.__)("Page Template added.","web-stories"),dismissible:!0})}),[i,p]),E=(0,u.useCallback)((e=>{f(e)}),[]),y=a||o;return(0,u.useEffect)((()=>{t.length>0&&(m&&t.some((e=>e.id===m))||f(t[0].id))}),[m,t]),(0,u.useEffect)((()=>{o?.()}),[o]),(0,sH.default)({containerRef:n,gridRef:g,itemRefs:h,items:t,currentItemId:m,isRTL:s}),c.createElement(oJ,{ref:g,columnWidth:r.width,rowHeight:r.containerHeight,role:"list","aria-label":(0,d.__)("Page Template Options","web-stories")},y?t.map(((e,t)=>c.createElement(rJ,aJ({key:e.id,"data-testid":`page_template_${e.id}`,ref:t=>h.current[e.id]=t,page:e,pageSize:r,onClick:()=>b(e),handleDelete:a,onFocus:()=>E(e.id),index:t},l)))):t.map((e=>c.createElement(XQ,aJ({ref:t=>h.current[e.id]=t,key:e.id,"data-testid":`page_template_${e.id}`,page:e,pageSize:r,onFocus:()=>E(e.id),isActive:m===e.id,onClick:()=>b(e.story),columnWidth:r.width},l)))))},iJ=p.default.div.withConfig({displayName:"defaultTemplates__ActionRow",componentId:"sc-14vj9wc-0"})(["display:flex;justify-content:space-between;margin:0px 16px 22px 16px;"]),sJ=p.default.div.withConfig({displayName:"defaultTemplates__PageTemplatesParentContainer",componentId:"sc-14vj9wc-1"})(["",";margin-top:26px;overflow-x:hidden;overflow-y:scroll;"],JX);const cJ=function DefaultTemplates(e){let{pageSize:t}=e;const{actions:{getPageTemplates:n}}=W(),[r,a]=(0,u.useState)([]),[o,l]=(0,u.useState)(!1);(0,u.useEffect)((()=>{!async function(){l(!0);const e=(0,P.getTimeTracker)("load_page_templates");a(await n()),l(!1),e()}()}),[n,a]);const i=(0,u.useRef)(),[s,p]=(0,u.useState)(null),m=(0,u.useMemo)((()=>[{id:null,label:(0,d._x)("All","page templates","web-stories")},...Object.entries(YQ).map((e=>{let[t,{name:n}]=e;return{id:t,label:n}}))]),[]),f=(0,u.useMemo)((()=>r.reduce(((e,t)=>[...e,...Object.values(t.postersByPage).map(((e,n)=>({id:`${t.slug}_${n}`,title:t.title,story:t.pages[n],...e}))).reduce(((e,t)=>!t.type||s&&t.type!==s?e:[...e,t]),[])]),[])),[r,s]),g=(0,u.useCallback)((e=>{p(e),(0,P.trackEvent)("search",{search_type:"page_templates",search_term:"",search_category:e})}),[]);return c.createElement(c.Fragment,null,c.createElement(lq,{items:m,selectedItemId:s,selectItem:g,deselectItem:()=>g(null)}),c.createElement(sJ,{ref:i,tabIndex:-1},c.createElement(iJ,null,c.createElement(Qu.Headline,{as:"h2",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Templates","web-stories"))),!o&&i.current?c.createElement(lJ,{pageSize:t,parentRef:i,pages:f}):c.createElement(uq,null,c.createElement(GQ.LoadingSpinner,{animationSize:64,numCircles:8}))))};function dJ(){return dJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dJ.apply(this,arguments)}const uJ=p.default.div.withConfig({displayName:"savedTemplates__Wrapper",componentId:"sc-1bm5y87-0"})(["height:100%;padding-top:5px;overflow-y:scroll;overflow-x:hidden;min-height:96px;"]);const pJ=function SavedTemplates(e){let{pageSize:t,loadTemplates:n,isLoading:r,...a}=e;const{actions:{deletePageTemplate:o}}=W(),{savedTemplates:l,setSavedTemplates:i,nextTemplatesToFetch:s}=G$((e=>({savedTemplates:e.state.savedTemplates,nextTemplatesToFetch:e.state.nextTemplatesToFetch,setSavedTemplates:e.actions.setSavedTemplates}))),{showSnackbar:p}=(0,kr.useSnackbar)(),[m,f]=(0,u.useState)(null),[g,h]=(0,u.useState)(null),b=(0,u.useRef)();(0,u.useLayoutEffect)((()=>{f(!1)}),[]);const E=(0,u.useCallback)((()=>{s&&n()}),[s,n]),_=(0,u.useCallback)(((e,t)=>{let{templateId:n}=e;t?.stopPropagation(),n&&(f(!0),h(n))}),[]),v=(0,u.useCallback)((()=>o(g).then((()=>{i(l.filter((e=>{let{templateId:t}=e;return t!==g}))),f(!1)})).catch((()=>{p({message:(0,d.__)("Unable to delete the template. Please try again.","web-stories"),dismissible:!0})}))),[o,g,l,p,i]);return c.createElement(uJ,{ref:b,tabIndex:-1},!r&&b.current?c.createElement(lJ,dJ({parentRef:b,pageSize:t,pages:l,handleDelete:_,fetchTemplates:E},a)):c.createElement(uq,null,c.createElement(GQ.LoadingSpinner,{animationSize:64,numCircles:8})),m&&c.createElement(y,{isOpen:!0,onClose:()=>f(!1),title:(0,d.__)("Delete Page Template","web-stories"),secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:v,primaryText:(0,d.__)("Delete","web-stories")},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Are you sure you want to delete this template? This action cannot be undone.","web-stories"))))},mJ=e=>{if(e.elements.length>1)return!1;const t=(0,On.createPage)();if(!(0,u.shallowEqual)(e.backgroundColor?.color,t.backgroundColor?.color))return!1;const n=e.elements.find((e=>e.isBackground));return!(n&&!n.isDefaultBackground)};const fJ=function(e){const t=document.createElement("canvas"),n=t.getContext("2d"),r=Number(e.height),a=Number(e.width)/ee.PAGE_RATIO,o=(r-a)/2;return t.width=e.width,t.height=a,n.drawImage(e,0,-o),t};var gJ,hJ,bJ;function EJ(){return EJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EJ.apply(this,arguments)}const SvgIllustration=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",EJ({viewBox:"0 0 32 43",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,gJ||(gJ=c.createElement("path",{d:"M21.903 0H4a4 4 0 0 0-4 4v34.4a4 4 0 0 0 4 4h24a4 4 0 0 0 4-4V10.03a4 4 0 0 0-1.187-2.844l-6.097-6.03A4 4 0 0 0 21.903 0Z",fill:"#767E80"})),hJ||(hJ=c.createElement("path",{d:"m30.146 8.146-5.893-5.893a.5.5 0 0 0-.853.354V8.5a.5.5 0 0 0 .5.5h5.893a.5.5 0 0 0 .353-.854Z",fill:"#ADB1B3"})),bJ||(bJ=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 29a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-12.469c.535 0 .969.434.969.969v2.531H19.5a.969.969 0 0 1 0 1.938h-2.531V24.5a.969.969 0 0 1-1.938 0v-2.531H12.5a.969.969 0 0 1 0-1.938h2.531V17.5c0-.535.434-.969.969-.969Z",fill:"#E4E5E6"})))},yJ=(0,c.memo)(SvgIllustration),_J=(0,p.default)($e.Text).withConfig({displayName:"templateSave__StyledText",componentId:"sc-vcrsmn-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),vJ=p.default.div.withConfig({displayName:"templateSave__IconWrapper",componentId:"sc-vcrsmn-1"})(["width:32px;height:42px;margin-right:29px;"]),wJ=p.default.button.withConfig({displayName:"templateSave__SaveButton",componentId:"sc-vcrsmn-2"})(["border:0;background:none;height:56px;width:100%;padding:7px;background-color:",";transition:background-color ",";border-radius:",";display:flex;flex-direction:row;align-items:center;cursor:pointer;&:hover{background-color:",";}"," ",";"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),f.BUTTON_TRANSITION_TIMING,(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryHover}),(e=>{let{$isDisabled:t,theme:n}=e;return t&&`\n      cursor: default;\n      background-color: ${n.colors.interactiveBg.disable};\n      &:hover {\n        background-color: ${n.colors.interactiveBg.disable};\n      }\n\n      ${vJ} svg {\n        path:nth-child(1): ${n.colors.fg.disable};\n        path:nth-child(2) {\n          fill: ${n.colors.fg.tertiary};\n        }\n        path:nth-child(3) {\n          fill: ${n.colors.fg.secondary};\n        }\n      }\n\n      ${_J} {\n        color: ${n.colors.fg.disable};\n      }\n  `}),np);const TJ=function TemplateSave(e){let{setShowDefaultTemplates:t,updateList:n}=e;const{actions:{addPageTemplate:r}}=W(),{showSnackbar:a}=(0,kr.useSnackbar)(),{currentPage:o}=Ya((e=>{let{state:{currentPage:t}}=e;return{currentPage:t}})),l=cd((e=>{let{state:t}=e;return t.pageCanvasMap})),i=(0,u.useMemo)((()=>o&&mJ(o)),[o]),s=(0,u.useCallback)((async e=>{if(e.preventDefault(),i)return;let s;const c=l[o.id];if(c){s=fJ(c).toDataURL("image/jpeg")}try{const{templateId:e,...t}=o,l=await r({story_data:{...t,id:(0,pe.default)(),version:mr.DATA_VERSION},featured_media:undefined,title:null});s&&(l.pregeneratedPageDataUrl=s),n?.(l),a({message:(0,d.__)("Page Template saved.","web-stories"),dismissable:!0})}catch{a({message:(0,d.__)("Unable to save the template. Please try again.","web-stories"),dismissable:!0})}t(!1)}),[i,r,o,t,a,n,l]);return c.createElement(wJ,{"aria-disabled":i,onClick:s,$isDisabled:i},c.createElement(vJ,null,c.createElement(yJ,{"aria-hidden":!0})),c.createElement(_J,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,forwardedAs:"span"},(0,d.__)("Save current page as template","web-stories")))};function SJ(){return SJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SJ.apply(this,arguments)}const CJ=(0,p.default)(sq).withConfig({displayName:"pageTemplatesPane__StyledPane",componentId:"sc-hm7mfr-0"})(["height:100%;padding:0;overflow:hidden;"]),IJ=p.default.div.withConfig({displayName:"pageTemplatesPane__PaneInner",componentId:"sc-hm7mfr-1"})(["height:100%;display:flex;flex-direction:column;"]),xJ=p.default.div.withConfig({displayName:"pageTemplatesPane__DropDownWrapper",componentId:"sc-hm7mfr-2"})(["text-align:left;margin:28px 16px 17px;"]),AJ=p.default.div.withConfig({displayName:"pageTemplatesPane__ButtonWrapper",componentId:"sc-hm7mfr-3"})(["padding:0 1em;margin-top:24px;"]),kJ="default",OJ="saved",PJ=Bo.DEFAULT_VIEW_PAGE_TEMPLATE_LAYOUT,NJ=Fo.getItemByKey(PJ);const RJ=function PageTemplatesPane(e){const{actions:{getCustomPageTemplates:t}}=W(),{canViewDefaultTemplates:n}=U(),r=Boolean(t),{savedTemplates:a,setSavedTemplates:o,nextTemplatesToFetch:l,setNextTemplatesToFetch:i}=G$((e=>({savedTemplates:e.state.savedTemplates,nextTemplatesToFetch:e.state.nextTemplatesToFetch,setSavedTemplates:e.actions.setSavedTemplates,setNextTemplatesToFetch:e.actions.setNextTemplatesToFetch}))),[s,p]=(0,u.useState)(null===NJ?n:n&&NJ),[m,f]=(0,u.useState)(null),[g,h]=(0,u.useState)(!1),b=(0,u.useCallback)((e=>{o((t=>[e,...t||[]])),f(e.id),Fo.setItemByKey(PJ,!1)}),[o]),E=(0,u.useCallback)((()=>{l&&(h(!0),t(l).then((e=>{let{templates:t,hasMore:n}=e;const r=t.map((e=>{let{version:t,templateId:n,...r}=e;const a={pages:[r]},o=(0,mr.migrate)(a,t||25);return{templateId:n,version:mr.DATA_VERSION,...o.pages[0]}}));o((e=>[...e||[],...r])),i(!!n&&l+1)})).catch((e=>{(0,P.trackError)("saved_templates",e.message),i(!1),o((e=>e??[]))})).finally((()=>h(!1))))}),[t,l,o,i]);(0,u.useEffect)((()=>{a||s||E()}),[a,E,s]),(0,u.useEffect)((()=>{let e=null;return m&&(e=setTimeout((()=>{f(null)}),1e3)),()=>clearTimeout(e)}),[m]);const y=[];n&&y.push({value:kJ,label:(0,d.__)("Default templates","web-stories")}),r&&y.push({value:OJ,label:(0,d.__)("Saved templates","web-stories")});const _=(0,u.useMemo)((()=>({width:158,height:Math.round(158/ee.PAGE_RATIO),containerHeight:Math.round(158/ee.FULLBLEED_RATIO)})),[]);return c.createElement(CJ,SJ({id:zQ},e),c.createElement(IJ,null,c.createElement(c.Fragment,null,r&&c.createElement(AJ,null,c.createElement(TJ,{setShowDefaultTemplates:p,updateList:b})),c.createElement(xJ,null,y.length>1&&c.createElement(pk,{options:y,selectedValue:s?kJ:OJ,onMenuItemClick:(e,t)=>{const n=t===kJ;s!==n&&(p(kJ===t),Fo.setItemByKey(PJ,n))},"aria-label":(0,d.__)("Select templates type","web-stories")}))),s?c.createElement(cJ,{pageSize:_}):c.createElement(pJ,{pageSize:_,highlightedTemplate:m,loadTemplates:E,isLoading:g})))};const MJ=function PageTemplatesIcon(){return c.createElement(Hg,{title:(0,d.__)("Page templates library","web-stories")})};var LJ=n(55177);const DJ=cq("shopping");function BJ(e){let{isMenuFocused:t,products:n=[]}=e;const r=(0,u.useRef)([]),[a,o]=(0,u.useState)(0);(0,u.useEffect)((()=>{const e=r.current[`row-${a}`];e&&t&&!e.contains(document.activeElement)&&e.focus()}),[a,t]);return{handleListNav:(0,u.useCallback)((e=>{const{key:t}=e;"ArrowUp"===t?(e.preventDefault(),o((e=>Math.max(0,e-1)))):"ArrowDown"===t&&(e.preventDefault(),o((e=>Math.min(n.length-1,e+1))))}),[n]),currentRowsRef:r,setCurrentFocusIndex:o}}BJ.propTypes={isMenuFocused:Ma().bool,products:Ma().arrayOf(Ma().object)};const FJ=BJ,HJ=(0,p.css)(["display:block;margin-right:10px;border-radius:4px;background-color:",";width:41px;height:41px;"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.disable})),UJ=p.default.div.withConfig({displayName:"productImage__StyledImgPlaceHolder",componentId:"sc-17w7h9b-0"})(["",""],HJ),jJ=p.default.img.withConfig({displayName:"productImage__StyledImage",componentId:"sc-17w7h9b-1"})([""," object-fit:cover;"],HJ);const zJ=function ProductImage(e){let{product:t}=e;const n=t?.productImages[0]?.url||"";return n?c.createElement(jJ,{alt:t?.productImages[0]?.alt,src:n,loading:"lazy",decoding:"async",draggable:!1,crossOrigin:"anonymous"}):c.createElement(UJ,null)},GJ=(0,p.default)(nh.default).withConfig({displayName:"productButton__Checkmark",componentId:"sc-8ap58c-0"})(["width:16px !important;height:16px !important;border-radius:100%;color:",";background-color:",";"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.disable}),(e=>{let{theme:t}=e;return t.colors.fg.positive})),YJ=(0,p.default)(Ju.default).withConfig({displayName:"productButton__Cross",componentId:"sc-8ap58c-1"})(["width:16px !important;height:16px !important;border-radius:100%;color:",";background-color:",";"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.disable}),(e=>{let{theme:t}=e;return t.colors.fg.negative})),ZJ=(0,p.default)(m.Button).withConfig({displayName:"productButton__StyledButton",componentId:"sc-8ap58c-2"})(["","{display:none;}&:hover ",",&:focus-within ",",&:active ","{display:none;}&:hover ",",&:focus-within ",",&:active ","{display:block;}"],YJ,GJ,GJ,GJ,YJ,YJ,YJ),WJ=p.default.div.withConfig({displayName:"productButton__StyledActionsContainer",componentId:"sc-8ap58c-3"})(["margin-right:10px;"]),VJ=(0,We.default)(
/* translators: %d: max number of products. */
(0,d._n)("Only %d item can be added per page.","Only %d items can be added per page.",6,"web-stories"),6),$J=(0,d.__)("Products without images cannot be added.","web-stories"),TooltipWrapper=e=>{let{hasImage:t,disabled:n,children:r}=e;return t?n?c.createElement(Tooltip,{hasTail:!0,title:VJ},r):r:c.createElement(Tooltip,{hasTail:!0,title:$J},r)};const qJ=function ProductButton(e){let{product:t,onClick:n,onFocus:r,isOnPage:a,canAddMore:o}=e;const l=(0,We.default)(
/* translators: %s: product title. */
(0,d.__)("Add %s","web-stories"),t?.productTitle),i=Boolean(t?.productImages?.length),s=(0,We.default)(
/* translators: %s: product title. */
(0,d.__)("Remove %s","web-stories"),t?.productTitle),u=!a&&!o;let p="";return p=i?a?s:u?VJ:l:$J,c.createElement(TooltipWrapper,{hasImage:i,disabled:u},c.createElement(WJ,null,c.createElement(ZJ,{"aria-label":p,"aria-disabled":!i||u,onClick:i&&!u?()=>{n(t,a)}:Lt,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.SQUARE,onFocus:r},a?c.createElement(c.Fragment,null,c.createElement(GJ,null),c.createElement(YJ,null)):c.createElement(Hy,null))))},KJ=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"productPrice__StyledPrice",componentId:"sc-1b0ir4w-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}));const XJ=function ProductPrice(e){let{price:t,currency:n}=e;const{locale:{locale:r}}=U();return t&&n&&r?c.createElement(KJ,null,new Intl.NumberFormat(r,{style:"currency",currency:n}).format(t)):null},QJ=p.default.div.withConfig({displayName:"product__StyledDescription",componentId:"sc-1bhc150-0"})(["padding-left:12px;"]),JJ=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"product__StyledTitle",componentId:"sc-1bhc150-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const e0=function Product(e){let{product:t,onClick:n,onFocus:r,isOnPage:a,canAddMore:o}=e;return c.createElement(c.Fragment,null,c.createElement(qJ,{product:t,isOnPage:a,canAddMore:o,onClick:n,onFocus:r}),c.createElement(zJ,{product:t}),c.createElement(QJ,null,c.createElement(JJ,{isBold:!0},t?.productTitle),c.createElement(XJ,{price:t?.productPrice,currency:t?.productPriceCurrency})))},t0=p.default.div.withConfig({displayName:"productList__StyledListItem",componentId:"sc-16x13t7-0"})(["display:flex;width:100%;padding:5px 0;align-items:center;border-bottom:1px solid ",";transition:background-color ease-in-out 300ms;"],(e=>{let{theme:t}=e;return t.colors.divider.tertiary}));const n0=function ProductList(e){let{products:t=[],onPageProducts:n=[],onClick:r,isMenuFocused:a=!0}=e;const{handleListNav:o,currentRowsRef:l,setCurrentFocusIndex:i}=FJ({isMenuFocused:a,products:t});(0,u.useEffect)((()=>{a||i(0)}),[a,i]);const s=n.length<6;return c.createElement("div",{"aria-label":(0,d.__)("Products list","web-stories"),role:"list",onKeyDown:o},t.map(((e,t)=>c.createElement(t0,{role:"listitem",key:e?.productId,tabIndex:-1,ref:e=>l.current[`row-${t}`]=e},c.createElement(e0,{product:e,canAddMore:s,isOnPage:n.some((t=>t.product.productId===e?.productId)),onClick:r,onFocus:e=>{((e,t)=>{l.current[`row-${t}`]&&"focus"===e.type&&i(t)})(e,t)}})))))},r0=(0,p.default)(pP).withConfig({displayName:"productSort__StyledDropDownMenu",componentId:"sc-1apxa0h-0"})(["margin-left:12px;"]),a0=(0,p.default)(m_).withConfig({displayName:"productSort__StyledIcon",componentId:"sc-1apxa0h-1"})(["width:28px !important;height:28px !important;"]),o0=(0,p.css)(["min-width:180px;margin-top:0;"]),l0=[{value:"date-desc",orderby:"date",order:"desc",label:(0,d.__)("Recently Added","web-stories")},{value:"title-asc",orderby:"title",order:"asc",label:(0,d.__)("Alphabetical: A-Z","web-stories")},{value:"title-desc",orderby:"title",order:"desc",label:(0,d.__)("Alphabetical: Z-A","web-stories")},{value:"price-asc",orderby:"price",order:"asc",label:(0,d.__)("Lowest Price","web-stories")},{value:"price-desc",orderby:"price",order:"desc",label:(0,d.__)("Highest Price","web-stories")}];const i0=function ProductSort(e){let{onChange:t,value:n="date-desc"}=e;const[r,a]=(0,u.useState)(!1),o=(0,u.useCallback)((e=>{a(!1),t(l0.find((t=>t.value===e)))}),[t]),l=[{group:l0.map((e=>({value:`${e.orderby}-${e.order}`,...e})))}];return c.createElement(r0,{onMenuOpen:()=>a(!0),isMenuOpen:r,onMenuSelected:o,display:!0,onMenuClose:()=>a(!1),options:l,ariaLabel:(0,d.__)("Product sort options","web-stories"),activeValue:n,dropDownHeight:340,menuStylesOverride:o0},c.createElement(Tooltip,{title:(0,d.__)("Sort","web-stories")},c.createElement(a0,null)))};function s0(){return s0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s0.apply(this,arguments)}const c0=p.default.div.withConfig({displayName:"shoppingPane__LoadingContainer",componentId:"sc-14o47kz-0"})(["display:flex;justify-content:center;"]),d0=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"shoppingPane__HelperText",componentId:"sc-14o47kz-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),u0={animationSize:25,circleSize:3};const p0=function ShoppingPane(e){const{showSnackbar:t}=(0,kr.useSnackbar)(),{shoppingProvider:n}=U(),r=(0,C.useFeature)("shoppingIntegration"),a=(0,mk.default)("assertive"),{actions:{getProducts:o}}=W(),{currentPageProducts:l,deleteElementById:i,currentPageNumber:s}=Ya((e=>{let{actions:t,state:{currentPage:n,currentPageNumber:r}}=e;return{currentPageProducts:n?.elements?.filter((e=>{let{type:t}=e;return t===On.ELEMENT_TYPES.PRODUCT})).map((e=>{let{id:t,product:n}=e;return{elementId:t,product:n}})),deleteElementById:t.deleteElementById,currentPageNumber:r}})),{insertElement:p}=G$((e=>({insertElement:e.actions.insertElement}))),[m,f]=(0,u.useState)(!1),[g,h]=(0,u.useState)(!1),[b,E]=(0,u.useState)(!1),[y,_]=(0,u.useState)(""),[v,w]=(0,u.useState)(1),[T,S]=(0,u.useState)("date"),[I,x]=(0,u.useState)("desc"),[A,k]=(0,u.useState)(!1),[O,N]=(0,u.useState)([]),R=(0,u.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;h(!0),w(n),1===n&&f(!1);try{const{products:t,hasNextPage:l}=await o(e,n,r,a),i=1===n?t:[...O,...t];N(i),E(l)}catch(e){(0,P.trackError)("search_products",e?.message),t({message:e.message}),1===n&&(N([]),w(1)),E(!1)}finally{h(!1),f(!0)}}),[o,O,t]),M=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;R(e,t,r,a),(0,P.trackEvent)("search",{search_type:"products",search_term:e,search_order:a,search_orderby:r,search_provider:n})}),[R,n]),L=(0,u.useDebouncedCallback)(M,300),D=(0,u.useCallback)((e=>{const t=e.target.value;t!==y&&(_(t),L(t,1,T,I))}),[L,I,T,y]),B="none"!==n&&r;(0,u.useEffect)((()=>{B&&R(y,v,T,I)}),[B]),(0,u.useEffect)((()=>{B||(N(l?.map((e=>{let{product:t}=e;return t}))),h(!1),f(!0))}),[l,B]);const F=(0,u.useCallback)((e=>{S(e.orderby),x(e.order),L(y,1,e.orderby,e.order)}),[L,y]),H=(0,u.useCallback)((e=>{const{key:t}=e;"ArrowDown"!==t&&"Tab"!==t||k(!0)}),[]),j=(0,u.useCallback)((e=>{p(On.ELEMENT_TYPES.PRODUCT,{width:25,height:25,product:e}),(0,P.trackEvent)("insert_product",{page:s,provider:n});const t=(0,We.default)(
/* translators: %s: product title. */
(0,d.__)("%s added to page","web-stories"),e.productTitle);a(t)}),[p,a,s,n]),z=(0,u.useCallback)((e=>{const t=l.find((t=>t.product.productId===e.productId));if(t){i({elementId:t.elementId});const n=(0,We.default)(
/* translators: %s: product title. */
(0,d.__)("%s removed","web-stories"),e?.productTitle);a(n)}}),[i,l,a]),G=(0,u.useCallback)(((e,t)=>t?z(e):j(e)),[z,j]),Y=(0,u.useCallback)((()=>{_(""),L("",1,T,I)}),[L,I,T]),Z=(0,u.useCallback)((()=>{b&&R(y,v+1,T,I)}),[b,R,I,T,v,y]),V=v>1?(0,d.__)("No more products","web-stories"):"";return c.createElement(sq,s0({id:DJ},e),c.createElement(Q$,{"data-testid":"products-library-pane",title:(0,d.__)("Products","web-stories")},c.createElement(Jx,null,c.createElement(d0,null,(0,d.__)("This will add products as a tappable dot on your story.","web-stories"))),B&&c.createElement(Jx,null,c.createElement(V$.default,{"aria-label":(0,d.__)("Product search","web-stories"),inputValue:y,onChange:D,placeholder:(0,d.__)("Search","web-stories"),onKeyDown:H,onFocus:()=>k(!1),isOpen:!0,ariaClearLabel:(0,d.__)("Clear product search","web-stories"),clearId:"clear-product-search",handleClearInput:Y}),c.createElement(i0,{onChange:F,value:`${T}-${I}`})),!m&&g&&c.createElement(c0,null,c.createElement(GQ.LoadingSpinner,u0)),m&&O?.length>0&&c.createElement(c.Fragment,null,c.createElement(n0,{isMenuFocused:A,onClick:G,products:O,onPageProducts:l}),c.createElement(LJ.default,{allDataLoadedMessage:V,allDataLoadedAriaMessage:(0,d.__)("Products are loaded","web-stories"),onLoadMore:Z,canLoadMore:b,isLoading:g,loadingSpinnerProps:u0,loadingAriaMessage:(0,d.__)("Loading more products","web-stories")})),m&&!g&&0===O?.length&&c.createElement(d0,null,(0,d.__)("No products found.","web-stories"))))};const m0=function ShoppingIcon(){return c.createElement(u_.default,{title:(0,d.__)("Shopping library","web-stories")})},f0={icon:lX,tooltip:(0,d.__)("Media","web-stories"),placement:Bd.PLACEMENT.BOTTOM_START,Pane:oX,id:tf},g0={icon:wX,tooltip:(0,d.__)("Third-party media","web-stories"),Pane:vX,id:nf},h0={icon:jQ,tooltip:(0,d.__)("Text","web-stories"),Pane:UQ,id:rf},b0={icon:UX,tooltip:(0,d.__)("Shapes & Stickers","web-stories"),Pane:HX,id:af},E0={icon:MJ,tooltip:(0,d.__)("Page Templates","web-stories"),Pane:RJ,id:of},y0={icon:m0,tooltip:(0,d.__)("Shopping","web-stories"),Pane:p0,id:lf},_0=new Set([f0,g0,E0,b0,h0,y0].map((e=>e.id)));const v0=function LibraryProvider(e){let{children:t}=e;const{showMedia3p:n,shoppingProvider:r,canViewDefaultTemplates:a}=U(),{actions:{getMedia:o,getCustomPageTemplates:l}}=W(),{hasProducts:i}=Ya((e=>{let{state:{currentPage:t}}=e;return{hasProducts:t?.elements?.some((e=>{let{type:t}=e;return t===On.ELEMENT_TYPES.PRODUCT}))}})),s=(0,C.useFeature)("shoppingIntegration"),d="none"!==r&&s||i,p=Boolean(l),m=a||p,f=Boolean(o),[g,h]=(0,u.useState)({}),[b,E]=(0,u.useState)({}),[y,_]=(0,u.useState)(null),[v,w]=(0,u.useState)(1),[T,S]=(0,u.useState)(!1),I=(0,u.useCallback)((e=>_((t=>(0,W$.default)("function"==typeof e?e(t):e,"templateId")))),[]),x=(0,u.useCallback)((e=>{_((t=>t.map((t=>t.templateId===e.templateId?{...t,...e}:t))))}),[]),A=(0,u.useMemo)((()=>[f&&f0,n&&g0,h0,b0,d&&y0,m&&E0].filter(Boolean)),[n,f,m,d]),[k,O]=(0,u.useState)(A[0].id),N=Ts(),{insertTextSet:R,insertTextSetByOffset:M}=FV(T),{highlightedTab:L}=nm((e=>{let{section:t}=e;return{highlightedTab:t}}));(0,u.useEffect)((()=>{_0.has(L)&&(O(L),(0,P.trackEvent)("quick_action_tab_change",{name:L}))}),[L]);const D=(0,u.useRef)(null),B=(0,u.useRef)(null),F=(0,u.useRef)(null),H=(0,u.useRef)(null),j=(0,u.useRef)(null),z=(0,u.useRef)(null),G=(0,u.useMemo)((()=>({[f0.id]:D,[g0.id]:B,[h0.id]:F,[b0.id]:H,[E0.id]:j,[y0.id]:z})),[]),Y=(0,u.useMemo)((()=>({state:{areTextSetsLoading:b,tab:k,tabRefs:G,textSets:g,savedTemplates:y,nextTemplatesToFetch:v,shouldUseSmartColor:T},actions:{setTab:O,insertElement:N,insertTextSet:R,insertTextSetByOffset:M,setSavedTemplates:I,updateSavedTemplate:x,setNextTemplatesToFetch:w,setShouldUseSmartColor:S},data:{tabs:A}})),[b,k,G,g,y,N,R,M,A,v,w,T,I,x]);return(0,u.useEffect)((()=>{let e=!0;return k!==h0.id||Object.keys(g).length||async function(){const t=(0,P.getTimeTracker)("load_text_sets");E(!0);const n=await async function(){const e=await Promise.all(["cover","step","section_header","editorial","contact","table","list","quote"].map((async e=>[e,await Z$(e)])));return Object.fromEntries(e)}();t(),e&&(h(n),E(!1))}(),()=>{e=!1}}),[k,g]),(0,u.useEffect)((()=>{k!==y0.id||d||O(A[0].id)}),[d,k,A]),c.createElement(z$.Provider,{value:Y},t)},MediaButton=()=>{const{onSelect:e}=Y$();return c.createElement(aA,{renderButton:e=>c.createElement(hR.default,{onClick:e},b$.UPLOAD_IMAGE_OR_VIDEO),onInsert:e})};const w0=function EmptyStateMenu(){const{setHighlights:e}=nm((e=>{let{setHighlights:t}=e;return{setHighlights:t}}));return c.createElement(c.Fragment,null,c.createElement(hR.default,{onClick:()=>{e({highlight:df.MEDIA})}},b$.CHOOSE_IMAGE_OR_VIDEO),c.createElement(v0,null,c.createElement(MediaButton,null)),c.createElement(hR.default,{onClick:()=>{e({highlight:df.PAGE_TEMPLATES})}},b$.BROWSE_PAGE_TEMPLATES),c.createElement(hR.default,{onClick:()=>{e({highlight:df.MEDIA3P})}},b$.BROWSE_STOCK_IMAGES_AND_VIDEO))},T0=p.default.div.withConfig({displayName:"rightClickMenu__RightClickMenuContainer",componentId:"sc-11e09ag-0"})(["position:absolute;top:","px;left:","px;z-index:9999;"],(e=>{let{position:t}=e;return t?.y??0}),(e=>{let{position:t}=e;return t?.x??0})),S0=()=>{const{isRTL:e}=U(),{selectedElements:t,isThisEmptyStory:n}=Ya((e=>({selectedElements:e.state.selectedElements,isThisEmptyStory:kV(e.state.pages)}))),{isMenuOpen:r,menuPosition:a,onCloseMenu:o,maskRef:l}=Cc(),i=(0,u.useRef)(),s=e=>{e.preventDefault(),e.stopPropagation()},m=(0,u.useMemo)((()=>{if(n)return w0;if(t.length>1)return P$;const e=t?.[0];if(e?.isDefaultBackground)return R$;switch(e?.type){case On.ELEMENT_TYPES.IMAGE:case On.ELEMENT_TYPES.VIDEO:case On.ELEMENT_TYPES.GIF:return e?.isBackground?R$:k$;case On.ELEMENT_TYPES.SHAPE:return L$;case On.ELEMENT_TYPES.TEXT:return H$;case On.ELEMENT_TYPES.STICKER:return B$;case On.ELEMENT_TYPES.PRODUCT:return j$;default:return R$}}),[t,n]);return(0,u.useEffect)((()=>{const e=i.current;return e.addEventListener("contextmenu",s),()=>{e.removeEventListener("contextmenu",s)}}),[i]),(0,u.createPortal)(c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(T0,{position:a,ref:i},c.createElement(Uu,null,c.createElement(XN.default,{"data-testid":"right-click-context-menu",isOpen:r,onDismiss:o,"aria-label":(0,d.__)("Context Menu for the selected element","web-stories"),maskRef:l,onMouseDown:e=>e.stopPropagation(),isRTL:e},c.createElement(m,{parentMenuRef:i}))))),document.body)};function C0(){return C0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C0.apply(this,arguments)}const I0=function LibraryPanes(){const{tab:e,tabs:t}=G$((e=>({tab:e.state.tab,tabs:e.data.tabs}))),{actions:{getMedia:n}}=W(),r=Boolean(n),a=nm((e=>{let{...t}=e;return t})),o=a[f0.id],l=a[g0.id],i=a[h0.id];return t.map((t=>{let{id:n}=t;const a=n===e,s={key:n,isActive:a,"aria-labelledby":dq(n)};if(!a)return c.createElement(sq,C0({key:n},s));switch(n){case f0.id:return r?c.createElement(x0,C0({},s,{$_css:o?.showEffect&&uv.FLASH})):null;case g0.id:return c.createElement(A0,C0({},s,{$_css2:l?.showEffect&&uv.FLASH}));case b0.id:return c.createElement(HX,s);case h0.id:return c.createElement(k0,C0({},s,{$_css3:i?.showEffect&&uv.FLASH}));case E0.id:return c.createElement(RJ,s);case y0.id:return c.createElement(p0,s);default:return null}}))};var x0=(0,p.default)(oX).withConfig({displayName:"libraryPanes___StyledMediaPane",componentId:"sc-g5zq8j-0"})(["",""],(e=>e.$_css)),A0=(0,p.default)(vX).withConfig({displayName:"libraryPanes___StyledMedia3pPane",componentId:"sc-g5zq8j-1"})(["",""],(e=>e.$_css2)),k0=(0,p.default)(UQ).withConfig({displayName:"libraryPanes___StyledTextPane",componentId:"sc-g5zq8j-2"})(["",""],(e=>e.$_css3));const O0=p.default.section.attrs({"aria-label":(0,d.__)("Library","web-stories"),"data-testid":"libraryLayout"}).withConfig({displayName:"libraryLayout__Layout",componentId:"sc-6ze1kl-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";max-height:100%;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),P0=p.default.nav.attrs({"aria-label":(0,d.__)("Library tabs","web-stories")}).withConfig({displayName:"libraryLayout__TabsArea",componentId:"sc-6ze1kl-1"})(["padding:0 4px;"]),N0=p.default.div.withConfig({displayName:"libraryLayout__LibraryPaneContainer",componentId:"sc-6ze1kl-2"})(["height:100%;min-height:0;"]);const R0=function LibraryLayout(){const{setTab:e,tab:t,tabRefs:n,tabs:r}=G$((e=>({tab:e.state.tab,tabRefs:e.state.tabRefs,setTab:e.actions.setTab,tabs:e.data.tabs}))),{highlight:a,resetHighlight:o}=nm((e=>({highlight:{[f0.id]:e[df.MEDIA],[g0.id]:e[df.MEDIA3P],[h0.id]:e[df.TEXT_SET],[E0.id]:e[df.PAGE_TEMPLATES]},resetHighlight:e.onFocusOut}))),l=(0,u.useCallback)((t=>{e(t),o(),(0,P.trackEvent)("library_tab_change",{name:t})}),[e,o]);return c.createElement(O0,null,c.createElement(P0,null,c.createElement(Gm,{label:(0,d.__)("Element Library Selection","web-stories"),tabs:r,tabRefs:n,tab:t,onTabChange:l,onTabRefUpdated:(e,t)=>{const n=a[t];e&&n?.focus&&n?.showEffect&&e.focus()},getTabId:dq,getAriaControlsId:cq,shortcut:"mod+option+1"})),c.createElement(N0,null,c.createElement(I0,null)))},M0="edit-story-library-upload-message";const L0=function LibraryUploadDropTarget(e){let{children:t}=e;const{uploadMedia:n}=Bi((e=>{let{actions:{uploadMedia:t}}=e;return{uploadMedia:t}})),r=(0,u.useCallback)((e=>{n(e)}),[n]);return c.createElement(_m,{onDrop:r,labelledBy:M0},t,c.createElement(Nm,{id:M0,message:(0,d.__)("Upload to media library","web-stories")}))};const D0=function Library(){return c.createElement(v0,null,c.createElement(L0,null,c.createElement(R0,null)))};const B0=function(){return c.createElement(sE,{title:(0,d.__)("Link","web-stories")})};const F0=function AnimationIcon(){return c.createElement(fh,{title:(0,d.__)("Animation","web-stories")})},H0={id:am,icon:function SelectionIcon(){return c.createElement(Bg.default,{title:(0,d.__)("Selection","web-stories")})},tooltip:(0,d.__)("Selection","web-stories")},U0={id:om,icon:B0,tooltip:(0,d.__)("Link","web-stories")},j0={id:lm,icon:F0,tooltip:(0,d.__)("Animation","web-stories")},z0=(0,u.createContext)({state:{},actions:{},tabs:{},refs:{}});const G0=function TextSelectionIcon(){return c.createElement(Zb.default,{title:(0,d.__)("Text selection","web-stories")})};const Y0=function ImageSelectionIcon(){return c.createElement(gy,{title:(0,d.__)("Image selection","web-stories")})};const Z0=function VideoSelectionIcon(){return c.createElement(z_.default,{title:(0,d.__)("Video selection","web-stories")})};const W0=function ShapeSelectionIcon(){return c.createElement(c_,{title:(0,d.__)("Shape selection","web-stories")})};const V0=function MultiSelectionIcon(){return c.createElement(Fh,{title:(0,d.__)("Multi selection","web-stories")})},$0=(0,p.default)(u_.default).withConfig({displayName:"productSelectionIcon__StyledIcon",componentId:"sc-1jpxe2a-0"})(["width:32px !important;height:32px !important;"]);const q0=function ProductSelectionIcon(){return c.createElement($0,{title:(0,d.__)("Product selection","web-stories")})},K0=new Set([H0.id,U0.id,j0.id]);const X0=function StyleProvider(e){let{children:t}=e;const{selectedElements:n}=Ya((e=>{let{state:t}=e;return{selectedElements:t.selectedElements}})),{tab:r}=nm((e=>({tab:e.section})));(0,u.useEffect)((()=>{K0.has(r)&&l(r)}),[r]);const a=(0,u.useRef)(null),[o,l]=(0,u.useState)(H0.id),i=(0,u.useRef)(null),s=(0,u.useRef)(null),d=(0,u.useRef)(null),p=(0,u.useMemo)((()=>({[H0.id]:i,[U0.id]:s,[j0.id]:d})),[]);let m=V0;const f=[...new Set(n.map((e=>{let{type:t}=e;return t})))];1===f.length?("text"===f[0]&&(m=G0),("image"===f[0]||n[0].isBackground)&&(m=Y0),"video"===f[0]&&(m=Z0),"shape"!==f[0]&&"sticker"!==f[0]||(m=W0),"product"===f[0]&&(m=q0)):m=V0;const g={state:{tab:o},refs:{styleRef:a,tabRefs:p},actions:{setTab:l},data:{tabs:[{...H0,icon:m}]}},h=n[0]?.isBackground||n[0]?.isDefaultBackground,b=n.some((e=>{let{type:t}=e;return"product"===t}));return h||b||g.data.tabs.push(U0),n[0]?.isDefaultBackground||b||g.data.tabs.push(j0),(0,u.useEffect)((()=>{g.data.tabs.find((e=>e.id===o))||l(H0.id)}),[g.data.tabs,o]),c.createElement(z0.Provider,{value:g},t)};const Q0=function(e){return(0,u.useContextSelector)(z0,e??u.identity)};const J0=function(){const e=(0,u.useRef)([]),t=(0,u.useCallback)((t=>{const n=e.current;return n.push(t),()=>{n.splice(n.indexOf(t),1)}}),[]);return(0,u.useMemo)((()=>[e.current,t]),[t])};function e1(){return e1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e1.apply(this,arguments)}const t1=p.default.form.withConfig({displayName:"designPanel__Form",componentId:"sc-14jgzfz-0"})(["padding:0;margin:0;"]),n1=p.default.input.attrs({type:"submit"}).withConfig({displayName:"designPanel__AutoSubmitButton",componentId:"sc-14jgzfz-1"})(["display:none;"]);const r1=function(e){let{panelType:t,selectedElements:n,onSetProperties:r,registerSubmitHandler:a,...o}=e;const l=(0,u.useRef)(null),[i,s]=J0(),d=(0,u.useMemo)((()=>({isMultiple:n.length>1,registerPresubmitHandler:s})),[n,s]),[p,m]=(0,u.useState)({}),f=(0,u.useMemo)((()=>n.map((e=>({...e,...p[e.id]})))),[n,p]),g=(0,u.useCallback)((e=>{if(0===Object.keys(e).length)return;const t=e;i.length>0&&n.forEach((n=>{const r=W_(n,e[n.id],!0);let a=r;i.forEach((e=>{const t=e({...n,...a},r,n);a={...a,...t}})),t[n.id]=a})),r((e=>t[e.id]))}),[i,n,r]),h=a((0,u.useCallback)((e=>{e&&(e.preventDefault(),m({})),g(p)}),[g,p])),b=(0,u.useCallback)((()=>{setTimeout((()=>{const e=l.current;e&&e.dispatchEvent(new window.Event("submit",{cancelable:!0,bubbles:!0}))}))}),[]),E=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m((t=>{const r={};return n.forEach((n=>{const a={...n,...t[n.id]},o=W_(a,e,!1);r[n.id]={...t[n.id],...o}})),r})),t&&b()}),[n,b]),y=(0,u.useCallback)((function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];E((r=>{const a=r[e]||n;return{[e]:t?{...a,...W_(a,t,!1)}:null}}),r)}),[E]),_=t;return c.createElement(t1,{ref:l,onSubmit:h},c.createElement(n1,null),c.createElement(_A.Provider,{value:d},c.createElement(_,e1({selectedElements:f,submittedSelectedElements:n,pushUpdate:E,pushUpdateForObject:y,submit:b},o))))},a1=Object.values(rm.default);const o1=function(e){if(0===e.length)return[];if(1===e.length&&e[0].isBackground){const t=[];return!e[0].isDefaultBackground&&(t.push({type:rm.default.PAGE_BACKGROUND,Panel:Jz}),t.push({type:rm.default.FILTER,Panel:Mj}),t.push({type:rm.default.ANIMATION,Panel:dj})),"video"===e[0].type?(t.push({type:rm.default.VIDEO_OPTIONS,Panel:ZY}),t.push({type:rm.default.CAPTIONS,Panel:Cj}),t.push({type:rm.default.VIDEO_ACCESSIBILITY,Panel:BY})):["gif","image"].includes(e[0].type)?t.push({type:rm.default.IMAGE_ACCESSIBILITY,Panel:Fj}):t.unshift({type:rm.default.PAGE_BACKGROUND,Panel:Jz}),t.push({type:rm.default.PAGE_ATTACHMENT,Panel:Zz}),t.push({type:rm.default.PAGE_BACKGROUND_AUDIO,Panel:VY}),t}return e.map((e=>{let{type:t}=e;return On.elementTypes[t].panels})).reduce(((e,t)=>{return n=t,e.filter((e=>n.includes(e)));var n}),a1).map((e=>{switch(e){case rm.default.ANIMATION:return{type:e,Panel:dj};case rm.default.PAGE_BACKGROUND:return null;case rm.default.FILTER:return{type:e,Panel:Mj};case rm.default.SIZE_POSITION:return{type:e,Panel:_G};case rm.default.LINK:return{type:e,Panel:Lz};case rm.default.TEXT_STYLE:return{type:e,Panel:OY};case rm.default.SHAPE_STYLE:return{type:e,Panel:tG};case rm.default.BORDER:return{type:e,Panel:_j};case rm.default.VIDEO_OPTIONS:return{type:e,Panel:ZY};case rm.default.CAPTIONS:return{type:e,Panel:Cj};case rm.default.VIDEO_ACCESSIBILITY:return{type:e,Panel:BY};case rm.default.IMAGE_ACCESSIBILITY:return{type:e,Panel:Fj};case rm.default.ELEMENT_ALIGNMENT:return{type:e,Panel:Pj};case rm.default.PRODUCT:return{type:e,Panel:$Y};default:throw new Error(`Unknown panel: ${e}`)}})).filter((e=>e))};const l1=function(){const{selectedElementIds:e,selectedElements:t,selectedElementAnimations:n,deleteSelectedElements:r,updateElementsById:a,updateAnimationState:o}=Ya((e=>{let{state:{selectedElementIds:t,selectedElements:n,selectedElementAnimations:r},actions:{deleteSelectedElements:a,updateElementsById:o,updateAnimationState:l}}=e;return{selectedElementIds:t,selectedElements:n,selectedElementAnimations:r,deleteSelectedElements:a,updateElementsById:o,updateAnimationState:l}})),l=(0,u.useMemo)((()=>o1(t)),[t]),[i,s]=J0(),c=(0,u.useCallback)((t=>{a({elementIds:e,properties:e=>W_(e,t,!0)})}),[e,a]),d=(0,u.useCallback)((e=>t=>(i.forEach((n=>n(c,e,t))),t)),[c,i]);return(0,u.useEffect)((()=>{const e={},t=s(((t,n,r)=>{c===t&&(e[n]=r)}));return()=>{t(),Object.values(e).forEach((e=>e()))}}),[c,s]),(0,u.useMemo)((()=>({panels:l,createSubmitHandlerForPanel:d,panelProperties:{onSetProperties:c,deleteSelectedElements:r,selectedElements:t,selectedElementAnimations:n,updateAnimationState:o}})),[l,d,c,r,t,n,o])};function i1(){return i1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i1.apply(this,arguments)}const s1=(0,p.default)(sq).withConfig({displayName:"stylePanes__StyledPane",componentId:"sc-18fi38s-0"})(["height:100%;padding:0;overflow-y:auto;"]);const c1=function StylePanes(){const{tab:e,tabs:t}=Q0((e=>({tab:e.state.tab,tabs:e.data.tabs}))),{panels:n,createSubmitHandlerForPanel:r,panelProperties:a}=l1(),o=(0,u.useCallback)(((e,t)=>{const o=n.filter((t=>{let{type:n}=t;return e.includes(n)})).map((e=>{let{Panel:t,type:n}=e;return c.createElement(r1,i1({key:n,panelType:t,registerSubmitHandler:r(n)},a))}));return c.createElement(s1,i1({id:cq(t.key)},t),o)}),[n,r,a]);return t.map((t=>{let{id:n}=t;const r=n===e,a={key:n,isActive:r,"aria-labelledby":dq(n)};if(!r)return c.createElement(sq,i1({key:n},a));switch(n){case H0.id:case U0.id:case j0.id:return o(dm[n],a);default:return null}}))},d1=p.default.section.attrs({"aria-label":(0,d.__)("Style","web-stories"),"data-testid":"styleLayout"}).withConfig({displayName:"styleLayout__Layout",componentId:"sc-1ihuio6-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";max-height:100%;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),u1=p.default.nav.attrs({"aria-label":(0,d.__)("Style tabs","web-stories")}).withConfig({displayName:"styleLayout__TabsArea",componentId:"sc-1ihuio6-1"})(["padding:0 4px;"]),p1=(0,p.default)(Gm).withConfig({displayName:"styleLayout__UnjustifiedTabView",componentId:"sc-1ihuio6-2"})(["justify-content:center;"]),m1=p.default.div.withConfig({displayName:"styleLayout__StylePaneContainer",componentId:"sc-1ihuio6-3"})(["height:100%;overflow-y:auto;min-height:0;"]),f1=p.default.div.withConfig({displayName:"styleLayout__NoSelection",componentId:"sc-1ihuio6-4"})(["height:100%;display:flex;justify-content:center;align-items:center;"]),g1=(0,p.default)($e.Text).withConfig({displayName:"styleLayout__Note",componentId:"sc-1ihuio6-5"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const h1=function StyleLayout(){const{state:{tab:e},actions:{setTab:t},refs:{tabRefs:n},data:{tabs:r}}=Q0(),{selectedElementIds:a}=Ya((e=>{let{state:t}=e;return{selectedElementIds:t.selectedElementIds}})),{highlight:o,resetHighlight:l}=nm((e=>({highlight:{[H0.id]:e[df.STYLE],[U0.id]:e[df.STYLE],[j0.id]:e[df.STYLE]},resetHighlight:e.onFocusOut}))),i=(0,u.useCallback)((e=>{t(e),l(),(0,P.trackEvent)("style_tab_change",{name:e})}),[t,l]);return 0===a.length?c.createElement(f1,null,c.createElement(g1,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},(0,d.__)("Nothing selected","web-stories"))):c.createElement(d1,null,c.createElement(u1,null,c.createElement(p1,{label:(0,d.__)("Style Selection","web-stories"),tabs:r,tabRefs:n,tab:e,onTabChange:i,onTabRefUpdated:(e,t)=>{const n=o[t];e&&n?.focus&&n?.showEffect&&e.focus()},getTabId:dq,getAriaControlsId:cq})),c.createElement(m1,null,c.createElement(c1,null)))};const b1=function Style(){return c.createElement(X0,null,c.createElement(h1,null))},E1=[{id:um,title:(0,d.__)("Insert","web-stories"),Pane:D0},{id:pm,title:(0,d.__)("Style","web-stories"),Pane:b1}],y1=new Set([um,mm,pm]);const _1=function SidebarProvider(e){let{sidebarTabs:t,children:n}=e;const{actions:{getAuthors:r}}=W(),{selectedElementIds:a,currentPage:o}=Ya((e=>{let{state:t}=e;return{selectedElementIds:t.selectedElementIds,currentPage:t.currentPage}})),{tab:l,highlight:i}=nm((e=>({tab:e.tab,highlight:e[df.STYLE_PANE]})));(0,u.useEffect)((()=>{y1.has(l)&&(p(l),(0,P.trackEvent)("quick_action_tab_change",{name:l}))}),[l]);const s=(0,u.useRef)(null),[d,p]=(0,u.useState)(um),[m,f]=(0,u.useState)([]),[g,h]=(0,u.useState)(null),b=(0,u.useRef)(),E=(0,u.useRef)(d),y=(0,u.useRef)(null),_=(0,u.useRef)(null),v=(0,u.useRef)(null),w=(0,u.useMemo)((()=>({[um]:y,[pm]:_,[mm]:v})),[]),[T,S]=(0,u.useState)(!1),C=(0,u.useCallback)((e=>{b.current=e}),[]);(0,u.useResizeEffect)(b,(e=>{let{height:t}=e;return h(t)}),[]),(0,u.useEffect)((()=>{a.length>0&&E.current===mm&&p(pm)}),[a]),(0,u.useEffect)((()=>{E.current===mm&&p(pm)}),[o]),(0,u.useEffect)((()=>{const e=_.current;e&&i?.focus&&i?.showEffect&&e.focus()}),[i]);const I=(0,u.useCallback)((()=>{T||0!==m.length||(S(!0),r().then((e=>{const t=e.map((e=>{let{id:t,name:n}=e;return{id:t,name:n}}));f(t)})).finally((()=>{S(!1)})))}),[T,m.length,r]),x=(0,u.useMemo)((()=>[...E1,t?.document&&{id:mm,...t.document}].filter(Boolean)),[t]),A=(0,u.useMemo)((()=>({tabs:x,modalSidebarTab:t?.publishModal&&{id:"publish_modal_document",...t.publishModal}})),[x,t]),k={state:{tab:d,tabRefs:w,users:m,sidebarContentHeight:g,isUsersLoading:T},refs:{sidebar:s},actions:{setTab:p,loadUsers:I,setSidebarContentNode:C},data:A};return c.createElement(Ym.Provider,{value:k},n)},v1=(0,x.withOverlay)(p.default.section.attrs({"aria-label":(0,d.__)("Web Stories Editor","web-stories")}).withConfig({displayName:"layout__Editor",componentId:"sc-9gpyr-0"})([""," background-color:",";position:relative;max-height:100vh;height:100%;width:100%;display:grid;grid:'sidebar   canv          ' 1fr 'sidebar   supplementary ' auto / ","px minmax(","px,1fr);"],ep.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.bg.primary}),360,570));const w1=function(e){let{header:t,footer:n={},sidebarTabs:r,children:a}=e;const o=(0,kr.useSnackbar)((e=>{let{removeSnack:t,currentSnacks:n,placement:r}=e;return{onRemove:t,notifications:n,placement:r}}));return c.createElement(c.Fragment,null,c.createElement(bs,null,c.createElement(ChecklistCheckpointProvider,null,c.createElement(uf,null,c.createElement(_1,{sidebarTabs:r},c.createElement(v1,{zIndex:3},c.createElement(Ws,null,c.createElement(o$,null,c.createElement(VV,{header:t,footer:n}),c.createElement(S0,null))),a))))),c.createElement(qN.Snackbar.Container,o))};var T1=n(43246),S1=n(51048),C1=n(89511);window.wp.domReady;const I1=function PostPublishDialog(){const{embedPostLink:e,link:t,isFreshlyPublished:n}=Ya((e=>{let{state:{story:{embedPostLink:t,link:n},meta:{isFreshlyPublished:r}}}=e;return{embedPostLink:t,link:n,isFreshlyPublished:r}})),[r,a]=(0,u.useState)(!1);(0,u.useEffect)((()=>a(Boolean(n))),[n]);const o=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"add_story_to_new_post")}),[]),l=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"view_story")}),[]),i=(0,u.useCallback)((()=>a(!1)),[]),s=e?(0,d.__)("Add to new post","web-stories"):"";return c.createElement(y,{isOpen:r,onClose:i,title:(0,d.__)("Story published.","web-stories"),secondaryText:(0,d.__)("Dismiss","web-stories"),primaryText:s,onPrimary:o,primaryRest:{href:e}},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(ou.default,{mapping:{a:c.createElement(lu.Link,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:t,target:"_blank",rel:"noopener noreferrer",onClick:l})}},(0,d.__)("Your story has been successfully published! <a>View story</a>.","web-stories"))),e&&c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},
/* translators: 'it' refers to a web story. */
(0,d.__)("Would you like to include it on a new post?","web-stories")))};const x1=function PostReviewDialog(){const{isFreshlyPending:e}=Ya((e=>{let{state:{meta:{isFreshlyPending:t}}}=e;return{isFreshlyPending:t}})),[t,n]=(0,u.useState)(!1);(0,u.useEffect)((()=>n(e)),[e]);const r=(0,u.useCallback)((()=>n(!1)),[]);return c.createElement(y,{isOpen:t,onClose:r,title:(0,d.__)("Submitted for Review.","web-stories"),primaryText:(0,d.__)("Dismiss","web-stories"),onPrimary:r},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Your Story has been successfully submitted for review.","web-stories")))},A1=(0,u.createContext)({state:{},actions:{}});const k1=function(e){return(0,u.useContextSelector)(A1,e??u.identity)},O1=p.default.nav.withConfig({displayName:"buttons__ButtonList",componentId:"sc-1h0vadn-0"})(["display:flex;justify-content:flex-end;padding:1em;height:100%;"]),P1=p.default.div.withConfig({displayName:"buttons__List",componentId:"sc-1h0vadn-1"})(["display:flex;align-items:center;gap:8px;"]),N1=p.default.div.withConfig({displayName:"buttons__Spinner",componentId:"sc-1h0vadn-2"})(["position:absolute;top:0;"]),R1=p.default.div.withConfig({displayName:"buttons__IconWithSpinner",componentId:"sc-1h0vadn-3"})(["position:relative;"]);function Loading(){return c.createElement(N1,null,c.createElement(TS.default,{size:32}))}function DraftButtons(e){let{forceIsSaving:t,hasUpdates:n}=e;return c.createElement(c.Fragment,null,c.createElement(jO,{hasUpdates:n,forceIsSaving:t}),c.createElement(HO,{forceIsSaving:t}))}function PendingButtons(e){let{forceIsSaving:t,hasUpdates:n,canPublish:r}=e;return c.createElement(c.Fragment,null,c.createElement(UO,{forceIsSaving:t}),r&&c.createElement(jO,{hasUpdates:n,forceIsSaving:t}),c.createElement(HO,{forceIsSaving:t}))}function PublishedButtons(e){let{forceIsSaving:t,hasUpdates:n}=e;return c.createElement(c.Fragment,null,c.createElement(UO,{forceIsSaving:t}),c.createElement(jO,{hasUpdates:n,forceIsSaving:t}))}const M1=function(){const{status:e,canPublish:t,isSaving:n}=Ya((e=>{let{state:{story:{status:t},meta:{isSaving:n},capabilities:r}}=e;return{status:t,isSaving:n,canPublish:Boolean(r?.publish)}})),r="pending"===e,a="draft"===e||!e,o=a||r,{hasMetaBoxes:l,isSavingMetaBoxes:i}=k1((e=>{let{state:{hasMetaBoxes:t,isSavingMetaBoxes:n}}=e;return{hasMetaBoxes:t,isSavingMetaBoxes:n}}));return c.createElement(O1,null,c.createElement(P1,null,c.createElement(Undo,null),c.createElement(Redo,null),c.createElement(R1,null,c.createElement(Zd,{forceIsSaving:i}),n&&c.createElement(Loading,null)),a&&c.createElement(DraftButtons,{forceIsSaving:i,hasUpdates:l}),r&&c.createElement(PendingButtons,{forceIsSaving:i,hasUpdates:l,canPublish:t}),!o&&c.createElement(PublishedButtons,{forceIsSaving:i,hasUpdates:l})))},L1=p.default.header.attrs({role:"group","aria-label":(0,d.__)("Story canvas header","web-stories")}).withConfig({displayName:"header__Background",componentId:"sc-1i9ezrs-0"})(["display:flex;align-items:center;justify-content:space-between;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary})),D1=p.default.div.withConfig({displayName:"header__Head",componentId:"sc-1i9ezrs-1"})(["flex:1 1 auto;padding:1em;"]),B1=p.default.div.withConfig({displayName:"header__ButtonCell",componentId:"sc-1i9ezrs-2"})(["grid-area:buttons;"]);const F1=(0,u.memo)((function HeaderLayout(){return c.createElement(L1,null,c.createElement(D1,null,c.createElement(GO,null)),c.createElement(B1,null,c.createElement(M1,null)))})),H1=p.default.div.withConfig({displayName:"menuItem__Box",componentId:"sc-1wx1c0e-0"})(["width:32px;height:32px;display:flex;justify-content:center;align-items:center;"]),U1=p.default.div.withConfig({displayName:"menuItem__Item",componentId:"sc-1wx1c0e-1"})([""]);const j1=function(){const{metaBoxesVisible:e,toggleMetaBoxesVisible:t,hasMetaBoxes:n}=k1((e=>{let{state:t,actions:n}=e;return{hasMetaBoxes:t.hasMetaBoxes,metaBoxesVisible:t.metaBoxesVisible,toggleMetaBoxesVisible:n.toggleMetaBoxesVisible}})),r=(0,u.useCallback)((()=>{t(),(0,P.trackEvent)("meta_boxes_toggled",{status:e?"visible":"hidden"})}),[e,t]);return n?c.createElement(U1,null,c.createElement(H1,null,c.createElement(Tooltip,{title:(0,d.__)("Third-Party Meta Boxes","web-stories"),placement:Bd.PLACEMENT.TOP,hasTail:!0},c.createElement(m.Button,{variant:f.BUTTON_VARIANTS.SQUARE,type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:r,"aria-label":(0,d.__)("Third-Party Meta Boxes","web-stories")},c.createElement(Ub,null))))):null},z1=p.default.div.withConfig({displayName:"metaBoxesArea__Wrapper",componentId:"sc-nk2qm0-0"})(["position:relative;&__container,.inside{box-sizing:content-box;}#poststuff{margin:0 auto;padding-top:0;min-width:auto;}#poststuff h3.hndle,#poststuff .stuffbox > h3,#poststuff h2.hndle{color:",";font-size:14px;font-weight:500;outline:none;padding:15px;width:100%;}.postbox{border:0;color:inherit;margin-bottom:0;}.postbox > .hndle,.postbox .postbox-header{background:",";color:",";border-bottom:1px solid ",";}.postbox .handlediv{height:44px;width:44px;}.postbox .handlediv .toggle-indicator{color:",";}.postbox .handle-order-higher,.postbox .handle-order-lower{color:",";&[aria-disabled='true']{color:",";}}.is-hidden{display:none;}"],(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.standard.white,.04)}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,Ve.rgba)(t.colors.standard.white,.3)})),G1=p.default.div.withConfig({displayName:"metaBoxesArea__Spinner",componentId:"sc-nk2qm0-1"})(["position:absolute;top:10px;right:100px;z-index:1;"]);const Y1=function MetaBoxesArea(e){let{location:t}=e;const n=(0,u.useRef)(),r=(0,u.useRef)(),{isSaving:a}=Ya((e=>{let{state:t}=e;return{isSaving:t.meta.isSaving}}));return(0,u.useEffect)((()=>{const e=document.querySelector(`.metabox-location-${t}`);return n.current=e,n.current&&r.current&&r.current.appendChild(n.current),()=>{document.querySelector("#metaboxes").appendChild(e)}})),c.createElement(z1,{className:`web-stories-meta-boxes-area-${t}`},a&&c.createElement(G1,null,c.createElement(TS.default,{size:30})),c.createElement("div",{ref:r}))},Z1=window.wp.apiFetch;const W1=function(e){let{story:t,isSavingStory:n,isAutoSavingStory:r}=e;const{hasMetaBoxes:a,locations:o,isSavingMetaBoxes:l,setIsSavingMetaBoxes:i}=k1((e=>{let{state:t,actions:n}=e;return{hasMetaBoxes:t.hasMetaBoxes,locations:t.locations,isSavingMetaBoxes:t.isSavingMetaBoxes,setIsSavingMetaBoxes:n.setIsSavingMetaBoxes}})),{api:{metaBoxes:s}}=U(),c=(0,u.usePrevious)(n),d=(0,u.usePrevious)(r);(0,u.useEffect)((()=>{!a||n||r||l||!c||d||async function(){window.tinyMCE?.triggerSave();const e=document.querySelector(".metabox-base-form"),n=[new window.FormData(e||void 0),...o.map((e=>new window.FormData(document.querySelector(`.metabox-location-${e}`)||void 0)))].reduce(((e,t)=>{for(const[n,r]of t)e.append(n,r);return e}),new window.FormData);i(!0),await function(e,t,n){return[!!e.comment_status&&["comment_status",e.comment_status],!!e.ping_status&&["ping_status",e.ping_status],!!e.sticky&&["sticky",e.sticky],!!e.author&&["post_author",e.author.id]].filter(Boolean).forEach((e=>{let[n,r]=e;return t.append(n,r)})),Z1({url:n,method:"POST",body:t,parse:!1})}(t,n,s),i(!1)}()}),[a,t,n,c,r,d,l,i,o,s])},V1=p.default.div.withConfig({displayName:"metaBoxes__Wrapper",componentId:"sc-1gguxet-0"})([""]),$1=p.default.div.withConfig({displayName:"metaBoxes__Area",componentId:"sc-1gguxet-1"})(["grid-area:",";position:relative;overflow:hidden;z-index:2;"],(e=>{let{area:t}=e;return t})),q1=(0,p.default)($1).attrs({area:"supplementary"}).withConfig({displayName:"metaBoxes__MetaBoxesContainer",componentId:"sc-1gguxet-2"})(["overflow-y:auto;"]);const K1=function MetaBoxes(){const{metaBoxesVisible:e,hasMetaBoxes:t}=k1((e=>{let{state:t}=e;return{hasMetaBoxes:t.hasMetaBoxes,metaBoxesVisible:t.metaBoxesVisible}})),[n,r]=(0,u.useState)(!1),a=(0,u.useRef)(null),{postType:o,metaBoxes:l={}}=U(),{pages:i,isSavingStory:s,isAutoSavingStory:d,story:p}=Ya((e=>{let{state:{meta:{isSavingStory:t,isAutoSavingStory:n},story:r,pages:a}}=e;return{pages:a,isSavingStory:t,isAutoSavingStory:n,story:r}}));if(W1({isSavingStory:s,isAutoSavingStory:d,story:p}),(0,u.useEffect)((()=>{let e;return!n&&t&&i.length>0&&(e=setTimeout((()=>{a.current=document.getElementById("primary-menu-items"),r(null!==a.current)}))),()=>{clearTimeout(e)}}),[i,t,n]),(0,u.useEffect)((()=>{const e=setTimeout((()=>{window.postboxes?.page!==o&&window.postboxes?.add_postbox_toggles(o)}));return()=>{clearTimeout(e)}}),[o]),!t)return null;const m=Object.keys(l);return c.createElement(q1,null,e&&c.createElement(V1,null,m.map((e=>c.createElement(Y1,{key:e,location:e})))),n&&(0,u.createPortal)(c.createElement(j1,null),a.current))};const X1=function MetaBoxesProvider(e){let{children:t}=e;const{metaBoxes:n={}}=U(),[r,a]=(0,u.useState)(!1),[o,l]=(0,u.useState)(!1),i=(0,u.useCallback)((()=>a((e=>!e))),[a]),s=Object.keys(n).some((e=>Boolean(n[e]?.length))),d=Object.keys(n),p=(0,u.useMemo)((()=>({state:{isSavingMetaBoxes:o,metaBoxesVisible:r,metaBoxes:n,locations:d,hasMetaBoxes:s},actions:{toggleMetaBoxesVisible:i,setIsSavingMetaBoxes:l}})),[o,r,l,i,n,d,s]);return c.createElement(A1.Provider,{value:p},t)};function Q1(e){return Z1({path:e})}function J1(e,t){return Z1({path:e,data:{id:t},method:"POST"})}var e2=n(4504);const t2="Y-m-d\\TH:i:s",n2=()=>n.e(2392).then(n.bind(n,73));const r2=function PublishTime(){const{date:e,modified:t,status:n,updateStory:r}=Ya((e=>{let{state:{story:{date:t,modified:n,status:r}},actions:{updateStory:a}}=e;return{date:t,modified:n,status:r,updateStory:a}})),a=tu(),o=(0,d.__)("d/m/Y","web-stories"),[l,i]=(0,u.useState)(!1),s=(0,u.useRef)(),p=(0,u.useRef)();(0,fr.useKeyDownEffect)(p,{key:["space","enter"]},(()=>{i((e=>!e))}),[]),(0,u.useFocusOut)(s,(()=>i(!1)),[l]);const m=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&l&&i(!1);const n=e?(0,Xd.default)(new Date(e),t2):e;r({properties:{date:n}})}),[l,r]),f=["draft","pending","auto-draft"].includes(n)&&(e===t||null===e),g=Date.now(),h=f?(0,d.__)("Immediately","web-stories"):(0,Xd.default)(e||g,o)+" "+eu(e||g);return c.createElement(c.Fragment,null,c.createElement(Jx,null,c.createElement(e2.default,{dropDownLabel:(0,d.__)("Publish","web-stories"),"aria-pressed":l,"aria-haspopup":!0,"aria-expanded":l,"aria-label":(0,d.__)("Story publish time","web-stories"),onSelectClick:e=>{e.preventDefault(),l||i(!0)},ref:p,activeItemLabel:h,selectButtonStylesOverride:np,onPointerEnter:()=>n2(),onFocus:()=>n2()})),c.createElement(bS.Popup,{anchor:p,isOpen:l,zIndex:10,renderContents:t=>{let{propagateDimensionChange:r}=t;return c.createElement(YA,{value:f?g:e,onChange:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m(e,t)},onViewChange:()=>r(),is12Hour:a,forwardedRef:s,onClose:()=>i(!1),canReset:["draft","pending","auto-draft"].includes(n)&&!f})}}))};function a2(){return a2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a2.apply(this,arguments)}const o2=function Author(){const{actions:{getAuthors:e}}=W(),{state:{users:t,isUsersLoading:n},actions:{loadUsers:r}}=Zm(),{isSaving:a,author:o,updateStory:l}=Ya((e=>{let{state:{meta:{isSaving:t},story:{author:n={}}},actions:{updateStory:r}}=e;return{isSaving:t,author:n,updateStory:r}})),[i,s]=(0,u.useState)(null),[p,m]=(0,u.useState)(null);(0,u.useEffect)((()=>{r()}),[r]);const f=(0,u.useCallback)((t=>e(t).then((e=>{const t=e.map((e=>{let{id:t,name:n}=e;return{id:t,name:n}}));s(t)}))),[e]);(0,u.useEffect)((()=>{if(t?.length){const e=t.find((e=>{let{id:t}=e;return o.id===t}));m(e?t:[o,...t])}}),[o,t]);const g=n||!p,h={hasSearch:!0,lightMode:!0,onChange:(0,u.useCallback)((e=>{let{id:t,name:n}=e;l({properties:{author:{id:t,name:n}}})}),[l]),getOptionsByQuery:f,selectedId:o.id,dropDownLabel:(0,d.__)("Author","web-stories"),placeholder:g?(0,d.__)("Loading…","web-stories"):"",disabled:!!g||a,primaryOptions:g?[]:p,zIndex:10};return c.createElement(Jx,null,c.createElement(ZN.default.DropDown,a2({options:i,searchResultsLabel:(0,d.__)("Search results","web-stories"),dropdownButtonLabel:(0,d.__)("Author","web-stories"),title:(0,d.__)("Available authors","web-stories")},h)))};function l2(){return l2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l2.apply(this,arguments)}const i2=p.default.div.withConfig({displayName:"publish__LabelWrapper",componentId:"sc-c431y8-0"})(["height:40px;"]),s2=(0,p.default)($e.Text).attrs({as:"label",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"publish__Label",componentId:"sc-c431y8-1"})(["color:",";font-size:14px;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),c2=p.default.div.withConfig({displayName:"publish__MediaWrapper",componentId:"sc-c431y8-2"})(["display:flex;align-items:center;margin-bottom:20px;margin-top:4px;height:96px;"]),d2=(0,p.default)(qx).withConfig({displayName:"publish__StyledMedia",componentId:"sc-c431y8-3"})(["width:","px;height:","px;"],(e=>{let{$width:t}=e;return t}),(e=>{let{$height:t}=e;return t})),u2=(0,p.default)(Jx).attrs({spaceBetween:!1}).withConfig({displayName:"publish__HighlightRow",componentId:"sc-c431y8-4"})(["position:relative;&::after{content:'';position:absolute;top:-10px;bottom:-10px;left:-20px;right:-10px;"," pointer-events:none;}"],(e=>{let{isHighlighted:t}=e;return t&&uv.FLASH})),p2=p.default.div.withConfig({displayName:"publish__MediaInputWrapper",componentId:"sc-c431y8-5"})(["height:160px;"]),m2=p.default.div.withConfig({displayName:"publish__DropdownWrapper",componentId:"sc-c431y8-6"})(["position:relative;width:138px;margin-left:30px;margin-top:3px;"]),f2=p.default.img.withConfig({displayName:"publish__LogoImg",componentId:"sc-c431y8-7"})(["object-fit:cover;width:100%;height:100%;max-width:96px;max-height:96px;"]);const g2=function PublishPanel(e){let{nameOverride:t}=e;const{state:{users:n}}=Zm(),{api:{publisherLogos:r}}=U(),{getPublisherLogos:a,addPublisherLogo:o}=i,{allowedMimeTypes:{image:l},dashboardSettingsLink:s,capabilities:{hasUploadMediaAction:p,canManageSettings:m},MediaUpload:f}=U(),g=(0,u.useMemo)((()=>l.map((e=>Pt(e))).flat()),[l]),[h,b]=(0,u.useState)([]);(0,u.useEffect)((()=>{a(r).then(b)}),[a,r]);const{highlightPoster:E,highlightLogo:y,resetHighlight:_}=nm((e=>({highlightPoster:e[df.POSTER],highlightLogo:e[df.PUBLISHER_LOGO],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),{featuredMedia:v,publisherLogo:w,updateStory:T,capabilities:S}=Ya((e=>{let{state:{story:{featuredMedia:t={id:0,url:"",height:0,width:0},publisherLogo:n={id:0,url:"",height:0,width:0}},capabilities:r},actions:{updateStory:a}}=e;return{featuredMedia:t,publisherLogo:n,updateStory:a,capabilities:r}})),C=(0,u.useCallback)((e=>T({properties:{featuredMedia:{id:e.id,url:e.src,height:e.height,width:e.width}}})),[T]),I=e=>{let{id:t,src:n}=e;const a={id:t,url:n};o(r,t),b((e=>[...e,a])),x(a)},x=e=>{T({properties:{publisherLogo:{id:e.id,url:e.url}}})},A=e=>{let t=(0,d.__)("No file types are currently supported.","web-stories");return g.length&&(t=(0,We.default)(e,(0,xt.default)(g))),t},k=A(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as publisher logo.","web-stories")),O=A(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories")),P=(0,u.forwardRef)(((e,t)=>{let{option:n,...r}=e;return n.props?n:c.createElement(ZN.default.Option,l2({value:n.id,ref:t},r),c.createElement(f2,{src:n.url,alt:"",decoding:"async",crossOrigin:"anonymous"}))})),N=e=>c.createElement(ZN.default.Option,{onClick:e,"aria-label":(0,d.__)("Add new","web-stories")},c.createElement(Tm,{height:32,width:32}),c.createElement($e.Text,{as:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Add new","web-stories"))),R=[...h];if(p){const e={width:96,height:96};R.unshift(c.createElement(f,{onSelect:I,onSelectErrorMessage:k,type:l,render:N,title:(0,d.__)("Select as publisher logo","web-stories"),buttonInsertText:(0,d.__)("Select as publisher logo","web-stories"),cropParams:e}))}return c.createElement(Nk,{name:t||"publishing",collapsedByDefault:!1,isPersistable:!(y||E)},c.createElement(tO,null,(0,d.__)("Publishing","web-stories")),c.createElement(oO,null,S?.publish&&c.createElement(r2,null),S?.["assign-author"]&&n&&c.createElement(o2,null),c.createElement(u2,{isHighlighted:E?.showEffect||y?.showEffect,onAnimationEnd:()=>_()},c.createElement(p2,null,c.createElement(c2,null,c.createElement(d2,{ref:e=>{e&&E?.focus&&E?.showEffect&&e.focus()},$width:72,$height:96,cropParams:{width:640,height:853},value:v?.url,onChange:C,title:(0,d.__)("Select as poster image","web-stories"),buttonInsertText:(0,d.__)("Select as poster image","web-stories"),type:l,ariaLabel:(0,d.__)("Poster image","web-stories"),onChangeErrorText:O,imgProps:v,canUpload:p})),c.createElement(i2,null,c.createElement(s2,null,(0,d.__)("Poster image","web-stories")),c.createElement(VA,null))),c.createElement(m2,null,c.createElement(c2,null,c.createElement(ZN.default.DropDown,{options:R,primaryOptions:R,onChange:x,title:(0,d.__)("Available publisher logos","web-stories"),dropdownButtonLabel:(0,d.__)("Publisher Logo","web-stories"),renderer:P,activeItemRenderer:()=>{const e=h.length?(0,d.__)("Select logo","web-stories"):(0,d.__)("No logo","web-stories");return w.id?c.createElement(f2,{src:w.url,alt:"",decoding:"async",crossOrigin:"anonymous"}):c.createElement($e.Text,{as:"span",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},e)},selectedId:w.id,zIndex:10,disabled:!R.length,ref:e=>{e&&y?.focus&&y?.showEffect&&e.focus()}})),c.createElement(i2,null,c.createElement(s2,null,(0,d.__)("Publisher Logo","web-stories")),c.createElement(Jx,null,c.createElement(VA,null),m&&c.createElement(lu.Link,{rel:"noopener noreferrer",target:"_blank",href:s,size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Manage","web-stories"))))))))},h2={embedWebStories:{title:(0,d.__)("Embed Web Stories","web-stories"),figureSrcImg:"images/help-center/story_embed_module_1",figureAlt:(0,d.__)("Graphic showing embed functionality","web-stories"),description:[(0,d.__)("When you create a new post in WordPress, you can embed any of your Stories. <a>Learn more</a>","web-stories")],href:"https://wp.stories.google/docs/best-practices/"}},b2="public",E2="private",y2="protected",_2={PUBLISH:"publish",FUTURE:"future",PRIVATE:"private",DRAFT:"draft"};function v2(){return v2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v2.apply(this,arguments)}const w2=p.default.li.withConfig({displayName:"status__StyledListItem",componentId:"sc-1pq370j-0"})(["position:relative;padding:6px 8px;margin:4px 8px;align-items:center;border-radius:4px;cursor:pointer;"," &:hover{background-color:",";}"],tp.focusableOutlineCSS,g.theme.colors.border.defaultNormal),T2=(0,p.default)(Text).attrs({as:"span"}).withConfig({displayName:"status__LabelText",componentId:"sc-1pq370j-1"})(["font-size:14px;color:",";"],g.theme.colors.fg.primary),S2=(0,p.default)(Text).attrs({as:"span"}).withConfig({displayName:"status__HelperText",componentId:"sc-1pq370j-2"})(["color:",";"],g.theme.colors.fg.tertiary),C2=(0,u.forwardRef)(((e,t)=>{let{option:n,isSelected:r,...a}=e;return c.createElement(w2,v2({ref:t,active:r},a),c.createElement(T2,null,n.label),c.createElement("br",null),c.createElement(S2,null,n.helper))}));const I2=function StatusPanel(e){let{nameOverride:t,popupZIndex:n,canCollapse:r,isPersistable:a,...o}=e;const{status:l="",password:i,updateStory:s,saveStory:p,capabilities:m,editLink:f,title:g,storyId:h}=Ya((e=>{let{state:{story:{status:t,password:n,editLink:r,title:a,storyId:o},capabilities:l},actions:{updateStory:i,saveStory:s}}=e;return{status:t,password:n,updateStory:i,saveStory:s,capabilities:l,editLink:r,title:a,storyId:o}})),[b,E]=(0,u.useState)(b2),y=Ic();(0,u.useEffect)((()=>{if(!i)return l===_2.PRIVATE?(E(E2),void s({properties:{visibility:E2}})):void 0;E(y2)}),[i,l,s,b]);const _=[{value:b2,label:(0,d.__)("Public","web-stories"),helper:(0,d.__)("Visible to everyone","web-stories")}];m?.publish&&(_.push({value:E2,label:(0,d.__)("Private","web-stories"),helper:(0,d.__)("Visible to site admins & editors only","web-stories"),disabled:y&&b!==E2}),_.push({value:y2,label:(0,d.__)("Password Protected","web-stories"),helper:(0,d.__)("Visible only to those with the password.","web-stories")}));const v=(0,u.useCallback)((e=>{s({properties:{password:e.target.value}})}),[s]),w=Pr(h,f),T=(0,u.useCallback)((()=>{const e={status:_2.PRIVATE,password:""};(0,P.trackEvent)("publish_story",{status:_2.PRIVATE,title_length:g.length}),w(),E(E2),p(e)}),[g.length,w,p]),S=[_2.PUBLISH,_2.FUTURE,_2.PRIVATE].includes(l),C=(0,u.useCallback)(((e,t)=>{const n=t;if(E2===n&&!S&&!window.confirm((0,d.__)("Would you like to privately publish this story now?","web-stories")))return;const r={};switch(n){case b2:r.status=b===E2?_2.DRAFT:l,r.password="",E(b2);break;case E2:return void T();case y2:r.status=b===E2?_2.DRAFT:l,r.password=i||"",E(y2)}s({properties:r})}),[l,b,i,s,T,S]);return c.createElement(iO,v2({name:t||"status",title:(0,d.__)("Visibility","web-stories"),canCollapse:r,isPersistable:a,collapsedByDefault:!1},o),c.createElement(c.Fragment,null,c.createElement(Jx,null,c.createElement(ok.DropDown,{options:_,selectedValue:b,onMenuItemClick:C,popupZIndex:n,disabled:_.length<=1,renderItem:C2,hint:_.find((e=>b===e.value))?.helper})),b===y2&&c.createElement(Jx,null,c.createElement(tS,{"aria-label":(0,d.__)("Password","web-stories"),value:i,onChange:v,placeholder:(0,d.__)("Enter a password","web-stories")}))))};function PublishModalDocumentPane(){return c.createElement(c.Fragment,null,c.createElement(g2,{nameOverride:"storyDetailsPublishing"}),c.createElement(QO,{nameOverride:"storyDetailsExcerpt"}),c.createElement(VO,{nameOverride:"storyDetailsPageAdvancement"}),c.createElement(GP,{nameOverride:"storyDetailsBackgroundAudio"}),c.createElement(ON,{nameOverride:"storyDetailsTaxonomies"}))}const x2=(0,p.default)(I2).withConfig({displayName:"documentPane__IsolatedPanel",componentId:"sc-3jx0y8-0"})(["padding:4px 4px 8px;"]);function IsolatedStatusPanel(){return c.createElement(x2,{nameOverride:"storyDetailsStatus",canCollapse:!1,isPersistable:!1,popupZIndex:11})}const A2=function DocumentPane(){return c.createElement(c.Fragment,null,c.createElement(I2,null),c.createElement(g2,null),c.createElement(cO,null),c.createElement(QO,null),c.createElement(VO,null),c.createElement(GP,null),c.createElement(ON,null))},k2=p.default.div.withConfig({displayName:"videoOptimizationCheckbox__CheckboxContainer",componentId:"sc-mjnlj7-0"})(["display:flex;align-items:flex-start;"]),O2=p.default.div.withConfig({displayName:"videoOptimizationCheckbox__ButtonContainer",componentId:"sc-mjnlj7-1"})(["display:flex;align-items:center;justify-content:center;margin-top:16px;"]),P2=(0,p.default)($e.Text).attrs({as:"span",isBold:!0}).withConfig({displayName:"videoOptimizationCheckbox__BoldText",componentId:"sc-mjnlj7-2"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white})),N2=(0,p.default)($e.Text).attrs({size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"videoOptimizationCheckbox__DescriptionText",componentId:"sc-mjnlj7-3"})(["color:",";margin-bottom:16px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),R2=(0,p.default)(N2).withConfig({displayName:"videoOptimizationCheckbox__CheckboxLabel",componentId:"sc-mjnlj7-4"})(["margin-left:8px;margin-bottom:0;line-height:20px;cursor:pointer;"]);const M2=function VideoOptimizationCheckbox(){const e=jp(),{capabilities:{hasUploadMediaAction:t}={},dashboardSettingsLink:n}=U(),[r,a]=(0,u.useState)(!1),o=(0,u.useRef)(),{currentUser:l,toggleWebStoriesMediaOptimization:i}=$a((e=>{let{state:t,actions:n}=e;return{currentUser:t.currentUser,toggleWebStoriesMediaOptimization:n.toggleWebStoriesMediaOptimization}})),s=l?.meta?.web_stories_media_optimization,p=!s&&t,g=(0,u.useCallback)((()=>{a(!0),i()}),[i]),{isSaving:h,saveStory:b}=Ya((e=>{let{state:t,actions:n}=e;return{isSaving:t.meta.isSaving,saveStory:n.saveStory}}));return(0,u.useEffect)((()=>{r&&o.current.focus()}),[r]),(p||r)&&e?c.createElement(hw,{title:(0,d.__)("Optimize all videos in the Story to ensure smooth playback.","web-stories"),footer:r?c.createElement(c.Fragment,null,c.createElement(DefaultFooterText,null,c.createElement(ou.default,{mapping:{b:c.createElement(P2,null)}},(0,d.__)("Automatic video optimization enabled. <b>Reload the page</b> to apply changes.","web-stories"))),c.createElement(O2,null,c.createElement(m.Button,{type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:async()=>{await b(),window.location.reload(!0)},disabled:h,ref:o},(0,d.__)("Save & Reload","web-stories")))):c.createElement(k2,null,c.createElement(gI.Checkbox,{id:"automatic-video-optimization-toggle",checked:l?.meta?.web_stories_media_optimization,onChange:g}),c.createElement(R2,{forwardedAs:"label",htmlFor:"automatic-video-optimization-toggle"},c.createElement(ou.default,{mapping:{a:c.createElement(lu.Link,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:e=>(0,P.trackClick)(e,"click_video_optimization_settings"),href:n,isBold:!0})}},(0,d.__)("Enable automatic optimization. Change this any time in <a>Settings</a>.","web-stories"))))}):null};const L2=function Accessibility(){const{hasUploadMediaAction:e}=U((e=>{let{capabilities:t}=e;return{hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(Hw,null),c.createElement(tT,null),c.createElement(iT,null),e&&c.createElement(oT,null),c.createElement(vw,null),c.createElement(yw,null),c.createElement(Sw,null),c.createElement(M2,null))};const D2=function Design(){const{hasUploadMediaAction:e}=U((e=>{let{capabilities:t}=e;return{hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(Xw,null),c.createElement(Zw,null),c.createElement(jw,null),c.createElement(Gw,null),c.createElement(ww,null),e&&c.createElement(uT,null),e&&c.createElement(Aw,null))},B2=()=>{const e=jp(),{generalSettingsLink:t,publisherName:n}=U((e=>{let{metadata:t,generalSettingsLink:n}=e;return{publisherName:t?.publisher,generalSettingsLink:n}})),r=n?.trim().length>0,{title:a}=Eu.storyMissingPublisherName;return Du("StoryMissingPublisherName",!r),!r&&e&&c.createElement(hw,{title:a,footer:c.createElement(DefaultFooterText,null,c.createElement(ou.default,{mapping:{a:c.createElement(lu.Link,{href:t,rel:"noreferrer",target:"_blank",size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL})}},(0,d.__)("Your site title is used when your Story appears on Google. You can set your site title by going to <a>General Settings</a>.","web-stories")))})};const F2=function Priority(){const{canManageSettings:e,hasUploadMediaAction:t}=U((e=>{let{capabilities:t}=e;return{canManageSettings:t.canManageSettings,hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(Kw,null),e&&c.createElement(B2,null),c.createElement(Jw,null),c.createElement(qw,null),t&&c.createElement(StoryPosterAttached,null),t&&c.createElement(Qw,null),t&&c.createElement(Ww,null),t&&c.createElement(Vw,null),t&&c.createElement(cT,null),c.createElement(yT,null),c.createElement($w,null))};function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H2.apply(this,arguments)}const U2=p.default.div.withConfig({displayName:"footer__Panel",componentId:"sc-6wcfz2-0"})(["padding:16px 0 24px 0;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary})),j2=p.default.ul.withConfig({displayName:"footer__Links",componentId:"sc-6wcfz2-1"})(["margin:8px 0 0 0;padding:0;list-style-position:inside;list-style-type:none;"]),z2=p.default.li.withConfig({displayName:"footer__ListItem",componentId:"sc-6wcfz2-2"})([""," &::before{content:'- ';}&,& > *{font-weight:700;}"],ep.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{X_SMALL:r}=t;return n[r]})));function G2(e){let{children:t,...n}=e;return c.createElement(z2,null,c.createElement(lu.Link,H2({},n,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}),t))}const Y2=(0,d.__)("https://wordpress.org/support/plugin/web-stories/","web-stories"),Z2=(0,d.__)("https://youtube.com/playlist?list=PLfVPq9A6B0RNoQ3HTE9LQzgAdVzcb7tmt","web-stories");function W2(){const e=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_support_page")}),[]),t=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_website_docs")}),[]),n=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_storytime_channel")}),[]);return c.createElement(U2,null,c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Discover more resources to get the most out of Web Stories. Read our start guide or visit our support forum to get answers to your questions.","web-stories")),c.createElement(j2,null,c.createElement(G2,{href:"https://wp.stories.google/docs/getting-started/",target:"_blank",rel:"noreferrer",onClick:t},(0,d.__)("Read Start Guide","web-stories")),c.createElement(G2,{href:Y2,target:"_blank",rel:"noreferrer",onClick:e},(0,d.__)("Visit Support Forums","web-stories")),c.createElement(G2,{href:Z2,target:"_blank",rel:"noreferrer",onClick:n},(0,d.__)("Storytime YouTube Series","web-stories"))))}const V2=function(){return c.createElement(X1,null,c.createElement(w1,{header:c.createElement(F1,null),footer:{secondaryMenu:{helpCenter:{Footer:W2},checklist:{Priority:F2,Design:D2,Accessibility:L2}}},sidebarTabs:{document:{title:(0,d.__)("Document","web-stories"),Pane:A2},publishModal:{DocumentPane:PublishModalDocumentPane,IsolatedStatusPanel}}},c.createElement(K1,null)))},$2=(e,t)=>{const n=t.get("control"),r=Boolean(parseInt(n.params.flex_width)),a=Boolean(parseInt(n.params.flex_height)),o=e.get("width"),l=e.get("height");let i=parseInt(n.params.width),s=parseInt(n.params.height);const c=i/s,d=i,u=s;t.set("canSkipCrop",!n.mustBeCropped(r,a,i,s,o,l)),o/l>c?(s=l,i=s*c):(i=o,s=i/c);const p=(o-i)/2,m=(l-s)/2,f={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:o,imageHeight:l,minWidth:d>i?i:d,minHeight:u>s?s:u,x1:p,y1:m,x2:i+p,y2:s+m};return!1===a&&!1===r&&(f.aspectRatio=i+":"+s),!0===a&&(delete f.minHeight,f.maxWidth=o),!0===r&&(delete f.minWidth,f.maxHeight=l),f},q2=e=>{const{src:t,url:n,mime:r,alt:a,date:o,id:l,featured_media:i,featured_media_src:{src:s,width:c,height:d,generated:u}="",media_details:{width:p,height:m,length:f,length_formatted:g,sizes:h={}}={},web_stories_media_source:b,web_stories_is_muted:E,web_stories_base_color:y,web_stories_blurhash:_,trim_data:v}=e,w=Object.entries(h).reduce(((e,t)=>{let[n,r]=t;return e[n]=(0,S1.snakeToCamelCaseObjectKeys)(r),e}),{});return J({baseColor:y,blurHash:_,mimeType:r,creationDate:o,src:n||t,...te({width:p,height:m,posterGenerated:u,posterWidth:c,posterHeight:d}),poster:s,posterId:i,id:l,length:f,lengthFormatted:g,alt:a,sizes:w,local:!1,isExternal:!1,isOptimized:"video-optimization"===b,isMuted:E,trimData:v})},K2=(e,t,n,r,a,o)=>(!0!==e||!0!==t)&&((!0!==e||r!==o)&&((!0!==t||n!==a)&&((n!==a||r!==o)&&!(Math.abs(n/r-a/o)<Number.EPSILON)))),X2=window.wp?.media?.controller?.Cropper?.extend?.({doCrop:function(e){const t=e.get("cropDetails"),n=this.get("control"),r=t.width/t.height;return n.params.flex_width&&n.params.flex_height?(t.dst_width=t.width,t.dst_height=t.height):(t.dst_width=n.params.flex_width?n.params.height*r:n.params.width,t.dst_height=n.params.flex_height?n.params.width/r:n.params.height),window.wp.ajax.post("crop-image",{nonce:e.get("nonces").edit,id:e.get("id"),context:n.id,cropDetails:t})}}),Q2=X2,J2={height:0,width:0,flex_width:!1,flex_height:!1};function e5(e){let{title:t=(0,d.__)("Upload to Story","web-stories"),buttonInsertText:n=(0,d.__)("Insert into page","web-stories"),onSelect:r,onSelectErrorMessage:a=(0,d.__)("Unable to use this file type.","web-stories"),onClose:o,onPermissionError:l,type:i="",multiple:s=!1,cropParams:c}=e;const{actions:{updateMedia:p}}=W(),{capabilities:{hasUploadMediaAction:m}}=U(),{showSnackbar:f}=(0,kr.useSnackbar)();(0,u.useEffect)((()=>{try{window.wp.Uploader.prototype.success=e=>{let{attributes:t}=e;p(t.id,{mediaSource:"editor",altText:t.alt||t.title})}}catch(e){}}),[p]);const g=(0,u.useCallback)((e=>{if((0,P.trackEvent)("open_media_modal"),!m)return l&&l(),void e.preventDefault();const c=window.wp.media({title:t,library:{type:i},button:{text:n},multiple:s});c.once("select",(()=>{const e=c.state().get("selection").first().toJSON();!Array.isArray(i)||i.includes(e.mime)?(e.alt=e.alt||e.title,r(q2(e))):f({message:a})})),o&&c.once("close",o),c.once("content:activate:browse",(()=>{c.content?.get()?.collection?._requery(!0),c.content?.get()?.options?.selection?.reset()})),c.open(),e.preventDefault()}),[m,f,l,o,r,n,a,s,i,t]),h=(0,u.useCallback)((e=>{if((0,P.trackEvent)("open_media_crop_modal"),!m)return l&&l(),void e.preventDefault();const d={...J2,...c},u={id:"control-id",params:d,mustBeCropped:K2},g={text:n,close:!1},h=window.wp.media({button:g,states:[new window.wp.media.controller.Library({title:t,library:window.wp.media.query({type:i}),button:g,multiple:s,suggestedWidth:d.width,suggestedHeight:d.height}),Q2&&new Q2({imgSelectOptions:$2,control:u})]});h.once("cropped",(e=>{if(e?.id){const t=e.alt||e.title;p(e.id,{mediaSource:"editor",altText:t}),e.alt=t}r(q2(e))})),h.once("skippedcrop",(()=>{const e=h.state().get("selection").first().toJSON();e.alt=e.alt||e.title,r(q2(e))})),h.once("select",(()=>{const e=h.state().get("selection").first().toJSON();if(Array.isArray(i)&&!i.includes(e.mime))return h.close(),void f({message:a});u.params.width!==e.width||u.params.height!==e.height||u.params.flex_width||u.params.flex_height?h.setState("cropper"):(e.alt=e.alt||e.title,r(q2(e)),h.close())})),o&&h.once("close",o),h.once("content:activate:browse",(()=>{h.content?.get()?.collection?._requery(!0),h.content?.get()?.options?.selection?.reset()})),h.open(),e.preventDefault()}),[m,c,n,t,i,s,r,o,l,p,f,a]);return(0,u.useMemo)((()=>c?h:g),[c,h,g])}e5.propTypes={title:Ra.string,buttonInsertText:Ra.string,onSelect:Ra.func.isRequired,onSelectErrorMessage:Ra.string,onClose:Ra.func,onPermissionError:Ra.func,type:Ra.oneOfType([Ra.string,Ra.arrayOf(Ra.string)]),cropParams:Ra.object,multiple:Ra.bool};const t5=e5;function MediaUpload(e){let{render:t,...n}=e;return t(t5(n))}MediaUpload.propTypes={render:Ra.func.isRequired,...t5.propTypes};const n5=MediaUpload;var r5=n(6389);function a5(e,t){return Z1({path:`${t}${e}/lock/`,method:"POST"})}const o5=p.default.img.withConfig({displayName:"shared__Img",componentId:"sc-1djlecd-0"})(["float:left;margin:0px 10px 10px 0px;"]);const l5=function PostLockDialog(e){let{isOpen:t,onClose:n,user:r,dashboardLink:a,previewLink:o,showTakeOver:l=!1}=e;const i=(0,d.__)("Story is locked","web-stories"),s=l?(0,We.default)(
/* translators: %s: user's name */
(0,d.__)("%s is already editing this story. Do you want to take over?","web-stories"),r?.name):(0,We.default)(
/* translators: %s: user's name */
(0,d.__)("%s is already editing this story.","web-stories"),r?.name);return c.createElement(y,{isOpen:t,onClose:n,title:i,contentLabel:i,actions:c.createElement(c.Fragment,null,c.createElement(m.Button,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,href:a},(0,d.__)("Dashboard","web-stories")),c.createElement(m.Button,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,href:o,target:"_blank",rel:"noreferrer"},(0,d.__)("Preview","web-stories")),l&&c.createElement(m.Button,{type:f.BUTTON_TYPES.TERTIARY,size:f.BUTTON_SIZES.SMALL,onClick:n},(0,d.__)("Take over","web-stories")))},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r?.avatar&&c.createElement(o5,{src:r.avatar,alt:r.name,height:48,width:48,crossOrigin:"anonymous",decoding:"async"}),s))};const i5=function PostTakeOverDialog(e){let{isOpen:t,user:n,dashboardLink:r,onClose:a}=e;const o=(0,d.__)("Someone else has taken over this story.","web-stories"),l=(0,We.default)(
/* translators: %s: user's name */
(0,d.__)("%s now has editing control of this story.","web-stories"),n?.name);return c.createElement(y,{isOpen:t,title:o,contentLabel:o,onClose:a,actions:c.createElement(m.Button,{type:f.BUTTON_TYPES.QUATERNARY,size:f.BUTTON_SIZES.SMALL,variant:f.BUTTON_VARIANTS.RECTANGLE,href:r},(0,d.__)("Dashboard","web-stories"))},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},n.avatar&&c.createElement(o5,{src:n.avatar,alt:n.name,height:48,width:48,crossOrigin:"anonymous",decoding:"async"}),l))};const s5=function PostLock(){const{currentUser:e}=$a((e=>{let{state:t}=e;return{currentUser:t.currentUser}})),{storyId:t,dashboardLink:n,nonce:r,postLock:{interval:a,showLockedDialog:o},api:{stories:l,storyLocking:i}}=U(),{previewLink:s,lockUser:d}=Ya((e=>{let{state:{story:{previewLink:t,extras:{lockUser:n={}}={}}}}=e;return{previewLink:t,lockUser:n}})),{enablePostLockingTakeOver:p}=(0,C.useFeatures)(),[m,f]=(0,u.useState)(!0),[g,h]=(0,u.useState)({}),[b,E]=(0,u.useState)(r),y=(0,u.useCallback)((()=>{p&&(h({}),a5(t,l))}),[p,t,l]),_=(0,u.useMemo)((()=>Boolean(Object.keys(e).length)),[e]),v=(0,u.useCallback)((()=>{o&&_&&function(e,t){const n=(0,r5.default)(`${t}${e}/lock/`,{_embed:"author"});return Z1({path:n})}(t,l).then((n=>{let{locked:r,nonce:a,_embedded:o}=n;const i={id:o?.author?.[0]?.id||0,name:o?.author?.[0]?.name||"",avatar:o?.author?.[0]?.avatar_urls?.[96]||""};r&&i?.id&&i?.id!==e.id?h(i):a5(t,l),E(a)})).catch((e=>{(0,P.trackError)("post_lock",e.message)}))}),[h,t,l,e,o,_]),w=(0,u.useRef)(v);return(0,u.useEffect)((()=>{w.current=v}),[v,_]),(0,u.useEffect)((()=>{o&&_&&d?.id&&d?.id!==e.id&&h(d)}),[d,e,_,o]),(0,u.useEffect)((()=>{function e(){o&&g?.id&&b&&function(e,t,n){const r=new window.FormData;r.append("_wpnonce",t);const a=(0,r5.default)(n,{_method:"DELETE"});window.navigator.sendBeacon?.(a,r)}(0,b,i)}return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[t,o,g,b,i]),(0,u.useEffect)((()=>{const e=setInterval((()=>{a&&_&&(w.current(),f(!1))}),1e3*a);return()=>clearInterval(e)}),[a,_]),o&&g?m?c.createElement(l5,{isOpen:Boolean(g?.id),user:g,onClose:y,previewLink:s,dashboardLink:n,showTakeOver:p}):p?c.createElement(i5,{isOpen:Boolean(g?.id),user:g,dashboardLink:n,onClose:y}):null:null},c5=(e,t,n)=>{if("object"==typeof n)for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&c5(e,`${t}[${r}]`,n[r]);else e.append(t,n)},d5=c5;const u5=function(e){return"__WEB_STORIES_ENCODED__"+btoa(encodeURIComponent(e))};const p5=function(e){const{mime_type:t,web_stories_media_source:n}=e;return"gif-conversion"===n?function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a},mime_type:o,featured_media:l,featured_media_src:{src:i,width:s,height:c,generated:d},alt_text:u,source_url:p,meta:{web_stories_base_color:m,web_stories_blurhash:f}}=e;return J({baseColor:m,blurHash:f,type:"gif",mimeType:"image/gif",creationDate:n,src:p,...te({width:r,height:a,posterGenerated:d,posterWidth:s,posterHeight:c}),posterId:l,poster:i,id:t,alt:u,local:!1,isOptimized:!0,isExternal:!1,output:{mimeType:o,src:p}})}(e):"image"===Q(t)?function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a,sizes:o={}}={},mime_type:l,alt_text:i,source_url:s,meta:{web_stories_base_color:c,web_stories_blurhash:d}}=e,u=Object.entries(o).reduce(((e,t)=>{let[n,r]=t;return e[n]=(0,S1.snakeToCamelCaseObjectKeys)(r),e}),{});return J({baseColor:c,blurHash:d,mimeType:l,creationDate:n,src:s,width:r,height:a,id:t,alt:i,sizes:u,local:!1,isExternal:!1})}(e):function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a,length:o,length_formatted:l},mime_type:i,featured_media:s,featured_media_src:{src:c,width:d,height:u,generated:p},web_stories_is_muted:m,alt_text:f,source_url:g,web_stories_media_source:h,meta:{web_stories_trim_data:b,web_stories_base_color:E,web_stories_blurhash:y}}=e;return J({baseColor:E,blurHash:y,mimeType:i,creationDate:n,src:g,...te({width:r,height:a,posterGenerated:p,posterWidth:d,posterHeight:u}),poster:c,posterId:s,id:t,length:o,lengthFormatted:l,alt:f,local:!1,isExternal:!1,isOptimized:"video-optimization"===h,isMuted:m,trimData:b})}(e)};const m5=function(e){const{_embedded:t={},_links:n={},...r}=e,a={...(0,S1.snakeToCamelCaseObjectKeys)(r,["story_data"]),author:{id:t?.author?.[0].id||0,name:t?.author?.[0].name||""},capabilities:{},extras:{lockUser:{id:t?.["wp:lockuser"]?.[0].id||0,name:t?.["wp:lockuser"]?.[0].name||"",avatar:t?.["wp:lockuser"]?.[0].avatar_urls?.[96]||""}},featuredMedia:{id:t?.["wp:featuredmedia"]?.[0].id||0,height:t?.["wp:featuredmedia"]?.[0]?.media_details?.height||0,width:t?.["wp:featuredmedia"]?.[0]?.media_details?.width||0,url:t?.["wp:featuredmedia"]?.[0]?.source_url||""},publisherLogo:{id:t?.["wp:publisherlogo"]?.[0].id||0,height:t?.["wp:publisherlogo"]?.[0]?.media_details?.height||0,width:t?.["wp:publisherlogo"]?.[0]?.media_details?.width||0,url:t?.["wp:publisherlogo"]?.[0]?.source_url||""},taxonomies:n?.["wp:term"]?.map((e=>{let{taxonomy:t}=e;return t}))||[],terms:t?.["wp:term"]||[]};for(const e of Object.keys(n)){if(!e.startsWith("wp:action-"))continue;const t=e.replace("wp:action-","");a.capabilities[t]=!0}return a};const f5=(0,d.__)("https://wordpress.org/support/plugin/web-stories/","web-stories");const g5=function StatusCheckFailed(e){let{isOpen:t,onClose:n}=e;const r=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_support_page")}),[]);return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Unable to save your story","web-stories"),contentLabel:(0,d.__)("Unable to save your story","web-stories"),onPrimary:n,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(ou.default,{mapping:{a:c.createElement(lu.Link,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:f5,target:"_blank",rel:"noopener noreferrer",onClick:r})}},(0,d.__)("We are currently unable to save your story, any changes you make may be lost. This may be due to temporary issues connecting to WordPress. <a>Submit a new support topic</a> for additional help.","web-stories"))))};const h5=function StatusCheck(){const[e,t]=(0,u.useState)(!1),n=(0,u.useCallback)((()=>t(!1)),[]),{api:{statusCheck:r},encodeMarkup:a}=U();return(0,u.useEffect)((()=>{(function(e,t,n){return Z1({path:t,data:{content:n?u5(e):e},method:"POST"})})(pa({storyId:1,title:"Story!",author:{id:1,name:"John Doe"},slug:"story",publisherLogo:{id:1,url:"https://example.com/logo.png",height:0,width:0},defaultPageDuration:7,status:"publish",date:"2020-04-10T07:06:26",modified:"",excerpt:"",featuredMedia:{id:123,url:"https://example.com/image.png",width:123,height:456},password:"",globalStoryStyles:""},[{type:"page",id:"2",elements:[]}],{publisher:"Web Stories"}),r,a).catch((e=>{t(!0),(0,P.trackError)("status_check",e.message)}))}),[a,r]),c.createElement(g5,{isOpen:e,onClose:n})};const b5=function CorsCheckFailed(e){let{isOpen:t,onClose:n}=e;const r=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_cors_check_docs")}),[]);return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Unable to load media","web-stories"),contentLabel:(0,d.__)("Unable to load media","web-stories"),onPrimary:n,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(ou.default,{mapping:{a:c.createElement(lu.Link,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:"https://wp.stories.google/docs/troubleshooting/common-issues/",target:"_blank",rel:"noopener noreferrer",onClick:r})}},(0,d.__)("We detected a potential misconfiguration that prevents media items from loading correctly. This may be due to media being hosted on an external CDN. <a>Learn how to address this</a>.","web-stories"))))},E5=Bo.CORS_CHECK_DIALOG_DISMISSED;const y5=function CorsCheck(){const[e,t]=(0,u.useState)(!1),{actions:{getMediaForCorsCheck:n}}=W(),r=(0,u.useCallback)((()=>{t(!1),Fo.setItemByKey(E5,!0)}),[]),a=Boolean(Fo.getItemByKey(E5));return(0,u.useEffect)((()=>{(async()=>{if(a)return;let e;try{e=await n()}catch(e){return}if(e?.length)try{await Promise.all([...new Set(e.filter((e=>!e.startsWith(location.origin))))].map((e=>fetch(e,{method:"HEAD"}))))}catch(e){t(!0),(0,P.trackError)("cors_check",e.message)}})()}),[]),c.createElement(b5,{isOpen:e,onClose:r})},_5=p.default.div.withConfig({displayName:"fontCheckDialog__DialogContent",componentId:"sc-5gbbgj-0"})(["display:grid;row-gap:20px;"]),v5=(0,p.default)(lh).withConfig({displayName:"fontCheckDialog__ChevronRight",componentId:"sc-5gbbgj-1"})(["width:32px;height:32px;"]),w5=(0,p.default)(v5).withConfig({displayName:"fontCheckDialog__ChevronLeft",componentId:"sc-5gbbgj-2"})(["transform:rotate(180deg);"]),T5=(0,p.default)(lu.Link).withConfig({displayName:"fontCheckDialog__StyledLink",componentId:"sc-5gbbgj-3"})(["display:flex;color:",";align-items:center;font-weight:normal;margin:0 auto 0 0;"],(e=>{let{theme:t}=e;return t.colors.standard.black})),S5=(0,p.default)(m.Button).withConfig({displayName:"fontCheckDialog__StyledButton",componentId:"sc-5gbbgj-4"})(["margin-left:16px;"]),C5=p.default.div.withConfig({displayName:"fontCheckDialog__ActionsWrap",componentId:"sc-5gbbgj-5"})(["display:flex;align-self:flex-end;width:100%;"]),FontCheckDialog=e=>{let{isOpen:t,defaultCloseAction:n,missingFont:r,closeDialog:a}=e;const{dashboardLink:o,dashboardSettingsLink:l,isRTL:i}=U(),[s,p]=(0,u.useState)(On.TEXT_ELEMENT_DEFAULT_FONT),{updateElementsByFontFamily:m}=Ya((e=>{let{actions:t}=e;return{updateElementsByFontFamily:t.updateElementsByFontFamily}})),g=(0,u.useCallback)((e=>{(0,P.trackEvent)("font_check_cancel"),n(e)}),[n]),h=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_font_check_settings")}),[]),b=(0,u.useCallback)((()=>{(0,P.trackEvent)("font_check_replace_default"),m({family:r,properties:{font:On.TEXT_ELEMENT_DEFAULT_FONT}}),a()}),[a,r,m]),E=(0,u.useCallback)((()=>{(0,P.trackEvent)("font_check_replace_selected"),m({family:r,properties:{font:s}}),a()}),[s,a,r,m]),_=i?v5:w5;return c.createElement(y,{isOpen:t,onClose:g,title:(0,d.__)("Missing Fonts","web-stories"),contentLabel:(0,d.__)("Missing Fonts","web-stories"),actions:c.createElement(C5,null,c.createElement(T5,{href:o},c.createElement(_,null),(0,d.__)("Back to dashboard","web-stories")),c.createElement(S5,{type:f.BUTTON_TYPES.SECONDARY,size:f.BUTTON_SIZES.SMALL,onClick:b},(0,d.__)("Open anyway","web-stories")),c.createElement(S5,{type:f.BUTTON_TYPES.PRIMARY,size:f.BUTTON_SIZES.SMALL,onClick:E},(0,d.__)("Replace font","web-stories")))},c.createElement(_5,null,c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("This story contains the following font that is no longer available:","web-stories")),c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},r),c.createElement("div",null,c.createElement(ou.default,{mapping:{a:c.createElement(lu.Link,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:h,href:l,isBold:!0})}},(0,d.__)("To replace this font with your own or re-add it, go to <a>Settings</a>. To replace this font with a default, open the story.","web-stories"))),c.createElement($e.Text,{size:qe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Or, choose replacement font below:","web-stories")),c.createElement($N,{zIndex:10,currentValue:s.family,onChange:p})))},I5=()=>{const{dashboardLink:e}=U(),{isStoryLoaded:t,storyPages:n,updateElementsByFontFamily:r}=Ya((e=>{let{state:{pages:t},actions:n}=e;return{storyPages:t,updateElementsByFontFamily:n.updateElementsByFontFamily,isStoryLoaded:t.length>0}})),{actions:{getFonts:a}}=W(),[o,l]=(0,u.useState)(null),[i,s]=(0,u.useState)(!1),d=(0,u.useCallback)((()=>{window.location=e}),[e]);return(0,u.useEffect)((()=>{(async()=>{if(!t)return;const e=QX(n),o=await a({include:e.join(",")});for(const t of e){const e=o.find((e=>e?.family===t));e&&r({family:t,properties:{font:e}})}const i=e.filter((e=>!new Set(o.map((e=>e.family))).has(e)));i&&i.length>=1&&(s(!0),l(i[0]))})()}),[t,r]),c.createElement(FontCheckDialog,{isOpen:i,missingFont:o||"",defaultCloseAction:d,closeDialog:()=>s(!1)})};function x5(e,t){return Z1({path:(0,r5.default)(e.api.users,{per_page:"100",who:"authors",search:t})}).then((e=>e.map((e=>(delete e._links,(0,S1.snakeToCamelCaseObjectKeys)(e))))))}const A5=["id","title","status","slug","date","modified","excerpt","link","story_data","preview_link","edit_link","embed_post_link","permalink_template","style_presets","password"].join(","),k5="wp:featuredmedia,wp:lockuser,author,wp:publisherlogo,wp:term",O5=["id","date_gmt","media_details","mime_type","featured_media","featured_media_src","alt_text","source_url","meta","web_stories_media_source","web_stories_is_muted","body","status","headers"].join(",");function P5(e,t){const n=(0,r5.default)(`${e.api.stories}${t}/`,{context:"edit",_embed:k5,_fields:A5});return Z1({path:n}).then(m5)}const N5=(e,t)=>{let{pages:n,featuredMedia:r,globalStoryStyles:a,publisherLogo:o,autoAdvance:l,defaultPageDuration:i,currentStoryStyles:s,backgroundAudio:c,content:d,author:u,products:p,...m}=e;return{story_data:{version:mr.DATA_VERSION,pages:n,autoAdvance:l,defaultPageDuration:i,currentStoryStyles:s,backgroundAudio:c},featured_media:r.id,style_presets:a,meta:{web_stories_publisher_logo:o?.id,web_stories_products:p},publisher_logo:o,content:t?u5(d):d,author:u.id,...m}};function R5(e,t){const{storyId:n}=t,r=N5(t,e.encodeMarkup),a=(0,r5.default)(`${e.api.stories}${n}/`,{_fields:["status","slug","link","preview_link","edit_link","embed_post_link"].join(","),_embed:k5});return Z1({path:a,data:r,method:"POST"}).then((e=>{const{_embedded:t={},...n}=e;return{...(0,S1.snakeToCamelCaseObjectKeys)(n),featuredMedia:{id:t?.["wp:featuredmedia"]?.[0].id||0,height:t?.["wp:featuredmedia"]?.[0]?.media_details?.height||0,width:t?.["wp:featuredmedia"]?.[0]?.media_details?.width||0,url:t?.["wp:featuredmedia"]?.[0]?.source_url||""}}}))}function M5(e,t){const{storyId:n}=t,r=N5(t,e.encodeMarkup);return Z1({path:`${e.api.stories}${n}/autosaves/`,data:r,method:"POST"}).then((e=>(0,S1.snakeToCamelCaseObjectKeys)(e,["story_data"])))}function L5(e,t){let{mediaType:n,searchTerm:r,pagingNum:a,cacheBust:o}=t,l=(0,r5.default)(e.api.media,{context:"view",per_page:50,page:a,_web_stories_envelope:!0,_fields:O5});return n&&(l=(0,r5.default)(l,{media_type:n})),r&&(l=(0,r5.default)(l,{search:r})),o&&(l=(0,r5.default)(l,{cache_bust:!0})),Z1({path:l}).then((e=>{let{body:t,headers:n}=e;return{data:t.map(p5),headers:{...n,totalItems:n["X-WP-Total"],totalPages:n["X-WP-TotalPages"]}}}))}function D5(e){const t=(0,r5.default)(e.api.media,{context:"view",per_page:10,_fields:"source_url"});return Z1({path:t}).then((e=>e.map((e=>e.source_url))))}function B5(e,t){const n=(0,r5.default)(`${e.api.media}${t}/`,{context:"view",_fields:O5});return Z1({path:n}).then(p5)}async function F5(e,t){const n=(0,r5.default)(`${e.api.media}${t}/`,{context:"view",_fields:"meta.web_stories_muted_id"}),r=await Z1({path:n});return r?.meta?.web_stories_muted_id?B5(e,r.meta.web_stories_muted_id):null}async function H5(e,t){const n=(0,r5.default)(`${e.api.media}${t}/`,{context:"view",_fields:"meta.web_stories_optimized_id"}),r=await Z1({path:n});return r?.meta?.web_stories_optimized_id?B5(e,r.meta.web_stories_optimized_id):null}async function U5(e,t){const n=(0,r5.default)(`${e.api.media}${t}/`,{context:"view",_fields:"featured_media"}),r=await Z1({path:n});return r?.featured_media?B5(e,r.featured_media):null}function j5(e,t,n){const{originalId:r,mediaId:a,storyId:o,templateId:l,isMuted:i,mediaSource:s,trimData:c,baseColor:d,blurHash:u}=n,p={web_stories_media_source:s,web_stories_is_muted:i,post:l||o||a,original_id:r,web_stories_trim_data:c,web_stories_base_color:d,web_stories_blurhash:u};Object.entries(p).forEach((e=>{let[t,n]=e;void 0===n&&delete p[t]}));const m=new window.FormData;return m.append("file",t,t.name||t.type.replace("/",".")),Object.entries(p).forEach((e=>{let[t,n]=e;return d5(m,t,n)})),Z1({path:e.api.media,body:m,method:"POST"}).then((e=>p5(e)))}function z5(e,t,n){const{baseColor:r,blurHash:a,isMuted:o,mediaSource:l,optimizedId:i,mutedId:s,posterId:c,storyId:d,altText:u}=n,p={meta:{web_stories_base_color:r,web_stories_blurhash:a,web_stories_optimized_id:i,web_stories_muted_id:s,web_stories_poster_id:c},web_stories_is_muted:o,web_stories_media_source:l,featured_media:c,post:d,alt_text:u};return Object.entries(p.meta).forEach((e=>{let[t,n]=e;void 0===n&&delete p.meta[t]})),Object.entries(p).forEach((e=>{let[t,n]=e;void 0===n&&delete p[t]})),Z1({path:`${e.api.media}${t}/`,data:p,method:"POST"}).then(p5)}function G5(e,t){Z1({path:(0,r5.default)(`${e.api.media}${t}/`,{_method:"DELETE"}),data:{force:!0},method:"POST"})}function Y5(e,t){const n=(0,r5.default)(e.api.link,{url:t});return Z1({path:n})}const Z5=["id","story_data","body","headers"],W5="wp:featuredmedia";function V5(e){const{_embedded:t={},id:n,story_data:r={}}=e;return{id:n,elements:[],...r,templateId:n,image:{id:t?.["wp:featuredmedia"]?.[0].id||0,height:t?.["wp:featuredmedia"]?.[0]?.media_details?.height||0,width:t?.["wp:featuredmedia"]?.[0]?.media_details?.width||0,url:t?.["wp:featuredmedia"]?.[0]?.source_url||""}}}function $5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=100,r=(0,r5.default)(e.api.pageTemplates,{context:"edit",per_page:n,page:t,_web_stories_envelope:!0,_fields:Z5,_embed:W5});return Z1({path:r}).then((e=>{let{headers:n,body:r}=e;const a=parseInt(n["X-WP-TotalPages"]);return{templates:r.map(V5),hasMore:a>t}}))}function q5(e,t){return Z1({path:e.api.pageTemplates,data:{...t,status:"publish"},method:"POST"}).then(V5)}function K5(e,t,n){return Z1({path:`${e.api.pageTemplates}${t}/`,data:{...n},method:"POST"}).then(V5)}function X5(e,t){return Z1({path:(0,r5.default)(`${e.api.pageTemplates}${t}/`,{_method:"DELETE"}),data:{force:!0},method:"POST"})}function Q5(e){return{id:e.id,trackingOptin:e.meta.web_stories_tracking_optin,onboarding:e.meta.web_stories_onboarding,mediaOptimization:e.meta.web_stories_media_optimization}}function J5(e){return Z1({path:e.api.currentUser}).then(Q5)}function e3(e,t){const{trackingOptin:n,onboarding:r,mediaOptimization:a}=t,o={meta:{web_stories_tracking_optin:n,web_stories_onboarding:r,web_stories_media_optimization:a}};return Object.entries(o.meta).forEach((e=>{let[t,n]=e;void 0===n&&delete o.meta[t]})),Z1({path:e.api.currentUser,method:"POST",data:o}).then(Q5)}function t3(e,t){const n=(0,r5.default)(e.api.hotlink,{url:t});return Z1({path:n}).then(S1.snakeToCamelCaseObjectKeys)}function n3(e,t){return(0,r5.default)(e.api.proxy,{url:t,_wpnonce:e.nonce})}async function r3(e){const t=await Z1({path:(0,r5.default)(e.api.taxonomies,{type:e.postType,context:"edit",show_ui:"true"})});return Object.values(t).map((e=>(e.restPath=e._links?.["wp:items"]?.[0]?.href,delete e._links,(0,S1.snakeToCamelCaseObjectKeys)(e,["capabilities","visibility"]))))}function a3(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Z1({url:(0,r5.default)(t,n)})}function o3(e,t,n){return Z1({url:(0,r5.default)(t,n),method:"POST"})}function l3(e,t){let{include:n,search:r,service:a}=t,o=(0,r5.default)(`${e.api.fonts}`,{search:r,service:a});const l=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(",").filter(Boolean).map((e=>`include[]=${encodeURI(e)}`)).join("&")}(n);return l.length>0&&(o+=o.includes("?")?`&${l}`:`?${l}`),Z1({path:o})}async function i3(e,t,n,r,a){const o=await Z1({path:(0,r5.default)(e.api.products,{per_page:50,page:n,search:t,orderby:r,order:a,_web_stories_envelope:!0})});return{products:o?.body,hasNextPage:"true"===o?.headers["X-WP-HasNextPage"]}}const s3=(0,p.createGlobalStyle)([".","{top:","px !important;left:","px !important;}body.folded .","{left:","px !important;}"],S.OVERLAY_CLASS,32,160,S.OVERLAY_CLASS,36);window.webStories=window.webStories||{},window.webStories.initializeStoryEditor=(e,t,n)=>{const r=document.getElementById(e);(0,T1.setAppElement)(r),(0,Kd.updateSettings)(t.locale),(0,P.initializeTracking)("Editor"),Zn.default.forEach(On.registerElementType),n.story=n.story?m5(n.story):null;const a={...t,apiCallbacks:(0,C1.default)(s,t),additionalTips:h2,MediaUpload:n5,styleConstants:{topOffset:32,leftOffset:36}};(0,u.render)(c.createElement(u.StrictMode,null,c.createElement(Cd,{config:a,initialEdits:n},c.createElement(s3,null),c.createElement(V2,null),c.createElement(I1,null),c.createElement(x1,null),c.createElement(h5,null),c.createElement(y5,null),c.createElement(I5,null),c.createElement(s5,null))),r)}}},l={};function __webpack_require__(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=o,__webpack_require__.amdO={},e=[],__webpack_require__.O=(t,n,r,a)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,r,a]=e[c],l=!0,i=0;i<n.length;i++)(!1&a||o>=a)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](n[i])))?n.splice(i--,1):(l=!1,a<o&&(o=a));if(l){e.splice(c--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]},__webpack_require__.F={},__webpack_require__.E=e=>{Object.keys(__webpack_require__.F).map((t=>{__webpack_require__.F[t](e)}))},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);__webpack_require__.r(a);var o={};t=t||[null,n({}),n([]),n(n)];for(var l=2&r&&e;"object"==typeof l&&!~t.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,__webpack_require__.d(a,o),a},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>({8:"chunk-web-stories-template-5",69:"chunk-web-stories-template-60-metaData",274:"chunk-web-stories-template-56",341:"chunk-react-color",354:"chunk-web-stories-template-19",410:"chunk-web-stories-template-24",533:"chunk-web-stories-template-42-metaData",824:"chunk-web-stories-template-36",827:"chunk-web-stories-template-27-metaData",884:"chunk-web-stories-template-18-metaData",907:"chunk-web-stories-template-57",1049:"chunk-web-stories-template-37",1066:"chunk-web-stories-template-44-metaData",1197:"chunk-web-animations-js",1231:"chunk-web-stories-template-12",1340:"chunk-web-stories-template-30-metaData",1380:"chunk-web-stories-template-33-metaData",1403:"chunk-web-stories-template-37-metaData",1738:"chunk-web-stories-template-32",1789:"chunk-web-stories-template-43",1813:"chunk-web-stories-template-10-metaData",1847:"chunk-web-stories-template-12-metaData",1858:"chunk-web-stories-template-1",1970:"chunk-web-stories-template-22-metaData",2068:"chunk-web-stories-template-46",2167:"chunk-web-stories-template-32-metaData",2191:"chunk-web-stories-template-49-metaData",2235:"chunk-web-stories-template-51-metaData",2246:"chunk-web-stories-template-45-metaData",2319:"chunk-web-stories-template-31-metaData",2338:"chunk-web-stories-template-25",2374:"chunk-web-stories-template-2-metaData",2392:"chunk-react-calendar",2454:"chunk-web-stories-template-6",2476:"chunk-web-stories-textset-0",2558:"chunk-web-stories-template-53-metaData",2563:"chunk-web-stories-textset-4",2634:"chunk-web-stories-textset-3",2761:"chunk-web-stories-textset-7",2776:"chunk-web-stories-template-9-metaData",2830:"chunk-web-stories-template-36-metaData",2880:"chunk-web-stories-template-8",2894:"chunk-web-stories-template-34-metaData",3041:"chunk-web-stories-template-15-metaData",3182:"chunk-html-to-image",3194:"chunk-web-stories-template-29-metaData",3245:"chunk-web-stories-template-28",3289:"chunk-web-stories-template-43-metaData",3304:"chunk-web-stories-template-49",3441:"chunk-web-stories-template-45",3529:"chunk-web-stories-template-39",3710:"chunk-web-stories-template-35",3772:"chunk-web-stories-template-60",3777:"chunk-web-stories-template-34",3864:"chunk-web-stories-template-4-metaData",3871:"chunk-web-stories-textset-2",3969:"chunk-web-stories-template-9",4051:"chunk-web-stories-template-40-metaData",4142:"chunk-web-stories-template-29",4178:"chunk-web-stories-template-24-metaData",4386:"chunk-web-stories-template-41",4585:"chunk-web-stories-template-38-metaData",4874:"chunk-web-stories-template-35-metaData",5016:"chunk-web-stories-template-21-metaData",5040:"chunk-web-stories-template-16",5157:"chunk-web-stories-template-33",5312:"chunk-web-stories-template-14",5372:"chunk-web-stories-template-6-metaData",5397:"chunk-web-stories-template-8-metaData",5432:"chunk-web-stories-template-26",5535:"chunk-web-stories-template-15",5543:"chunk-web-stories-template-31",5553:"chunk-web-stories-template-20-metaData",5570:"chunk-web-stories-template-54-metaData",5573:"chunk-web-stories-template-52-metaData",5575:"chunk-resize-observer-polyfill",5748:"chunk-web-stories-template-54",5835:"chunk-web-stories-template-30",6053:"chunk-web-stories-template-16-metaData",6188:"chunk-web-stories-template-42",6204:"chunk-web-stories-template-0-metaData",6271:"chunk-web-stories-template-39-metaData",6305:"chunk-web-stories-template-5-metaData",6311:"chunk-web-stories-template-23-metaData",6353:"chunk-web-stories-template-1-metaData",6406:"chunk-web-stories-template-4",6428:"chunk-web-stories-template-13",6500:"chunk-web-stories-template-0",6517:"chunk-web-stories-template-52",6539:"chunk-web-stories-template-58-metaData",6592:"chunk-web-stories-template-51",6641:"chunk-web-stories-template-28-metaData",6766:"chunk-web-stories-template-19-metaData",6841:"chunk-web-stories-template-58",6852:"chunk-web-stories-template-27",7098:"chunk-ffmpeg",7131:"chunk-web-stories-template-20",7314:"chunk-web-stories-template-25-metaData",7343:"chunk-web-stories-template-47",7346:"chunk-web-stories-template-7",7399:"chunk-web-stories-template-38",7441:"chunk-web-stories-template-48",7498:"chunk-colorthief",7502:"chunk-web-stories-template-23",7528:"chunk-web-stories-template-14-metaData",7586:"chunk-web-stories-template-40",7588:"chunk-web-stories-template-55-metaData",7611:"chunk-web-stories-textset-6",7685:"chunk-web-stories-template-59",7798:"chunk-web-stories-template-50-metaData",7799:"chunk-web-stories-template-3",7863:"chunk-web-stories-template-47-metaData",7952:"chunk-web-stories-template-3-metaData",8022:"chunk-web-stories-template-26-metaData",8189:"chunk-web-stories-template-56-metaData",8203:"chunk-web-stories-template-44",8257:"chunk-web-stories-template-22",8344:"chunk-web-stories-template-10",8422:"chunk-web-stories-template-41-metaData",8551:"chunk-web-stories-template-18",8624:"chunk-focus-visible",8768:"chunk-web-stories-template-11-metaData",8856:"chunk-web-stories-template-48-metaData",9027:"chunk-web-stories-textset-1",9074:"chunk-web-stories-template-7-metaData",9233:"chunk-web-stories-template-53",9288:"chunk-web-stories-template-55",9302:"chunk-web-stories-template-17-metaData",9375:"chunk-web-stories-template-57-metaData",9393:"chunk-web-stories-template-59-metaData",9557:"chunk-web-stories-template-13-metaData",9591:"chunk-web-stories-template-50",9603:"chunk-web-stories-template-17",9607:"chunk-web-stories-template-2",9700:"chunk-web-stories-template-11",9738:"chunk-web-stories-template-46-metaData",9811:"chunk-web-stories-template-21",9843:"chunk-web-stories-textset-5"}[e]+".js?v="+{8:"62f48c943362be75dde6",69:"ee8bf6a37ece865f9fde",274:"49986a50cfec69f8a8d8",341:"10acf2130e40fed0d75a",354:"21701c9bb7dc9de8e903",410:"f2b1685a440ddb51f829",533:"7031543bbf0ac9875728",824:"cca56f39ee2354beeb1c",827:"4f4dc18fab8674b3fa25",884:"d121f5f5280f132b5597",907:"ddf0d94935aeeb5f9b29",1049:"e051f32082205f79d19c",1066:"a635c0f83fd51db6ac06",1197:"45f526a251ead370165a",1231:"0e881ddf3a5dca4f5b43",1340:"658339eae27be828c9d2",1380:"2ca16dfc5daadd31e068",1403:"88b6b87bdb2c9e25e03e",1738:"c6d12e0233116e40adbe",1789:"d24574fa712b1479f5e8",1813:"38319dc6a0a3f890b221",1847:"a4057b4c746081be9263",1858:"a72c93c859283416ebac",1970:"78b7a2bd8812f2bf6406",2068:"47c0a6bcf385f89e3eee",2167:"63718570f9ee6fc4c997",2191:"9e9359bd105429600d80",2235:"235e98e7f0a194e663df",2246:"ad654f9224067fefa563",2319:"de459568067e6a86c7ac",2338:"45b0a0bddeaeccff92e4",2374:"bdfd30cc435b8733776b",2392:"fe88e944141fdcaf426f",2454:"c1f02d36e388601ee93a",2476:"cf7b7c8b0eeee417c304",2558:"dd3a56a23eef473743c2",2563:"c3d2e3c67c5096c4aa6d",2634:"7d5197e7c135c833e8d8",2761:"974eb6934de2afc38df2",2776:"2a94f2790f69801857f7",2830:"f8c41181823fb6e56a2a",2880:"5a970aa4c5ee275902ed",2894:"d72ef1b8371f0de9d4b7",3041:"acafde2d8f1a6980eb81",3182:"366847cef960fbf44a89",3194:"76e25e1bb5380222d1e6",3245:"dd9ae4e530a10801c9e9",3289:"667fa6d0a0f6165df08a",3304:"7c66775981ad6712995c",3441:"db38a2c18c581dab30d1",3529:"f735383152e06dee91d7",3710:"681c6765fe6ee63989df",3772:"0151a08850e7d199048e",3777:"32457dc282cf13690a58",3864:"205a38118d76188f1497",3871:"df558293ddbc80f5732f",3969:"5f3eeb34b188592586e9",4051:"a3859c6f25fb906796aa",4142:"00be70528ca40ed53b45",4178:"1bb9fee64db965ad4c77",4386:"ff7fe8d505c23dfcc14b",4585:"934e6e9b938e8e0c0832",4874:"8d02e508eb5953a8f03e",5016:"416c3be02c2ca809fc3f",5040:"280a87a741d45028bd72",5157:"b2e8a89540391dd72495",5312:"5ead1d2681b6c2e43ea0",5372:"8cff45ed4d0f60a1881d",5397:"59ce47b435a56f9e93f6",5432:"481f3754e9ebeb95086c",5535:"2ad146a9aff0b0c75a03",5543:"db8c05e7971e4e112526",5553:"46ade91fdf2e8a4501d5",5570:"1a2bca995e7c5853b966",5573:"d11139be60f7b14c9ffc",5575:"a97a5e5ec0e812a389ed",5748:"627091a0027160e28832",5835:"1d3dc9abe4467c369ae8",6053:"cd8f59acf99cb495fe77",6188:"3571ed18b36b107eb6dc",6204:"ffa8c4d1cc9dd090d896",6271:"49df2acd6d02d6aebdb7",6305:"f8bb7423de5e3aabca11",6311:"efd3cdbbbecec5cdafa2",6353:"78c4ce9232efce7cc087",6406:"6e024e0ebb0a89677d8b",6428:"6e42df44263b06907366",6500:"5b642d52229cff29396f",6517:"fe0aca5c0a8d5cf81a57",6539:"64a365f05a34a2adf367",6592:"535b235f72e0ff797e79",6641:"bade12d3bb5f6781a58f",6766:"1bc7a9e7a79469a5af79",6841:"73b31e266acf1281dcb1",6852:"35ddb0a2da2984a1b24b",7098:"c12e272d228a10b765cd",7131:"09333faf6e6735deb15e",7314:"979d5b962e46e47de7f7",7343:"8498b35b4fedfb63a2f9",7346:"10673013e512b913493a",7399:"e749dbd85fddb70d1d34",7441:"d269a6e18ed8f7a17697",7498:"afa32aef6dfc12d11c81",7502:"b6d691e97a889aa9db7b",7528:"8d631193e3fc67f254d9",7586:"47838fa1e9462f151802",7588:"ed34aaadc0ad2abddde5",7611:"287ab2128ad56bef327b",7685:"33264baee027a93c07f1",7798:"a03fe4c4b1d6abf8541f",7799:"37d47adb1bf1c3d9355b",7863:"582b6c2ce8eaad76fc82",7952:"f206bee0645c91e855ef",8022:"5bb8b28faa28034ae43b",8189:"37686cfc4a640c7e0f40",8203:"17070712208bfec54b06",8257:"2f339371692f425db1f0",8344:"e1e9ae4748303d0817ff",8422:"3f42e89ce0dd7e802975",8551:"1202b4bf2ee58bf65086",8624:"705c5bfc48fb43676444",8768:"04036e7d0f2b8b2c1b24",8856:"7e61600bafdf93fbef22",9027:"96de041a2c45d7717d50",9074:"c956f3be9f5f3f084d97",9233:"95aa91bc0f954778c4c0",9288:"678083dc9343a66fbd71",9302:"b0227828b5a500a82b1d",9375:"41a6095cbe70256cfb67",9393:"363f78c9382ef94434e8",9557:"39986c27dabeda720306",9591:"16deb0841809d79ab2eb",9603:"573e10b8e766bab31c0a",9607:"74a4b305f26ead9d17b0",9700:"84bb5757f7155a91741e",9738:"d8b00ffb3193a85920f1",9811:"47d5f65f0cf96d4f12ce",9843:"9e5f47d23114e0a591f9"}[e]),__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},a="web-stories-wp:",__webpack_require__.l=(e,t,n,o)=>{if(r[e])r[e].push(t);else{var l,i;if(void 0!==n)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==a+n){l=d;break}}l||(i=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,__webpack_require__.nc&&l.setAttribute("nonce",__webpack_require__.nc),l.setAttribute("data-webpack",a+n),l.src=e),r[e]=[t];var u=(t,n)=>{l.onerror=l.onload=null,clearTimeout(p);var a=r[e];if(delete r[e],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),i&&document.head.appendChild(l)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="",(()=>{var e={9078:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var o=__webpack_require__.p+__webpack_require__.u(t),l=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,r[1](l)}}),"chunk-"+t,t)}},__webpack_require__.F.j=t=>{if(!__webpack_require__.o(e,t)||void 0===e[t]){e[t]=null;var n=document.createElement("link");__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.rel="prefetch",n.as="script",n.href=__webpack_require__.p+__webpack_require__.u(t),document.head.appendChild(n)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[o,l,i]=n,s=0;if(o.some((t=>0!==e[t]))){for(r in l)__webpack_require__.o(l,r)&&(__webpack_require__.m[r]=l[r]);if(i)var c=i(__webpack_require__)}for(t&&t(n);s<o.length;s++)a=o[s],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return __webpack_require__.O(c)},n=globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),__webpack_require__.O(0,[9078],(()=>{__webpack_require__.E(7498)}),5);var i=__webpack_require__.O(void 0,[7120,5825,7,1814],(()=>__webpack_require__(40946)));i=__webpack_require__.O(i)})();